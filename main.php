<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-Frame-Options" content="GOFORIT">
    <title>Página principal</title>
    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/preloader.css">
    <link rel="stylesheet" href="bootstrap/bootstrap.css">
    <link rel="stylesheet" href="alertify/alertify.css">
    <link rel="stylesheet" href="css/carrusel.css">
    <link rel="stylesheet" href="css/encuentraFiguras.css">
    <!-- Fin CSS -->

    <!-- JS -->
    <script src="javascript/jquery-3.5.1.min.js"></script>
    <script src="javascript/jquery.js"></script>
    <script src="javascript/preloader_main.js"></script>
    <script src="alertify/alertify.js"></script>
    <script src="javascript/carrusel.js"></script>
    <script src="javascript/cronometro.js"></script>
    <!-- <script src="javascript/prueba.js"></script> -->
    <!-- Fin JS -->
    
</head>
<header id="header" class="header">
    <div class = "logo1"><img class = "lg1" src="sources/images/tecnm.png" width="190" height="95"></div>
    <div class = "logo2"><img class = "lg2" src="sources/images/itesa.png" width="200" height="95"></div>
    <div class = "logo3"><img class = "lg3" src="sources/images/ISC.png" width="210" height="80"></div>
</header>
<br>
<br>
<div id="textoInf" style="text-align:center;"><h2>Página principal</h2> <div class="help" id="help" style="width:40px; height:40px; border-radius:50%; background-color:white; box-shadow: 0px 0px 37px -7px rgba(0,0,0,0.56);
    -webkit-box-shadow: 0px 0px 37px -7px rgba(0,0,0,0.56);
    -moz-box-shadow: 0px 0px 37px -7px rgba(0,0,0,0.56); margin: 0 auto; border:solid; transition-duration: 0.5s;"><h3><b>?</b></h3></div></div>
<br>
<br>
<!-- Preloader  -->
<div id="preloader" class="preloader">
    <div class="loadingio-spinner-chunk-x3jjkz06lah"><div class="ldio-c5722fmtqte">
            <div><div><div></div><div></div><div></div><div></div></div></div>
            </div></div>
            <br>Cuenta cuadros - ITESA
    </div>
    <!-- Fin preloader -->

    <!-- Instrucciones -->
    <div class="G" id="G">
    <div class="CerrarInst" id="CerrarInst"><h4><b>X</b></h4></div>
    <div class="carrusel" id="carrusel">
        <div class="back" id="back">
            <br><br><br><br><br><br><br><br><br><br><br>
            <div class="flechita">◄</div></div>
        <div class="pagesContainer">
            <div class="page" id="page1">
                <h4>Instrucciones (1/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I1.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page2">
                <h4>Instrucciones (2/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I2.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page3">
                <h4>Instrucciones (3/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I3.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page4">
                <h4>Instrucciones (4/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I4.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page5">
                <h4>Instrucciones (5/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I5.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page6">
                <h4>Instrucciones (6/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I6.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page7">
                <h4>Instrucciones (7/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I7.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page8">
                <h4>Instrucciones (8/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I8.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page9">
                <h4>Instrucciones (9/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I9.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page10">
                <h4>Instrucciones (10/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I10.png" width="100%" height="100%">
                </div>
            </div>
            <div class="page" id="page11">
                <h4>Instrucciones (11/11)</h4>
                <div class="internalI" id="internalI">
                    <img src="sources/images/I11.png" width="100%" height="100%">
                </div>
            </div>
        </div>
        <div class="next" id="next">
            <br><br><br><br><br><br><br><br><br><br><br>
            <div class="flechita">►</div></div>
    </div>
    </div>
    <!-- Fin instrucciones -->

    <!-- Prueba de concentración -->
    <div class="prueba" id="prueba">
        <div class="timer" id="timer">
            <div class="indicadoresTiempo" id="indicadoresTiempo">
                <center>
                <div class="NoPrueba"><label for="">Prueba</label><b id="NPrueba"></b></div>
                <div class="TiempoC" style="width:auto;">
                    <div id="contenedor">
		                <div class="reloj" id="Horas">00</div>
		                <div class="reloj" id="Minutos">:00</div>
		                <div class="reloj" id="Segundos">:00</div>
		                <div class="reloj" id="Centesimas">:00</div>
	                </div>
                </div>
                </center>
            </div>
        </div>
        <div class="pruebaC" id="pruebaC"></div>
        <div class="botonesInf" id="botonesInf">
            <div class="iniciarTime boton" id="iniciarTime" onclick="inicio();">Iniciar cronómetro</div>
            <div class="pararTime boton" id="pararTime" onclick="parar();">Detener cronómetro</div>
            <div class="cerrarP boton" id="cerrarP">Cerrar prueba</div>
        </div>
    </div>

    <!-- Resultados rondas -->
    <div class="Resultados" id="Resultados">
        <div class="arribita" id="arribita">
            <center><h4>Tus tiempos fueron los siguientes</h4></center>
        </div>
        <div class="tiemposF" id="tiemposF" style="align-text:center;"></div>
        <div class="CloseP" id="CloseP">
            <div class="bt-c boton" id="bt-c" style="float:bottom;">Cerrar resultados</div>
        </div>
    </div>
    <!-- Fin resultados rondas -->

    <!-- Fin prueba de concentración -->
    <script>
        var nCerrarInst = 0;
        var nPruebas = 1;
        var urlPrueba = "";

        var Arr_minutos = new Array(0);
        var Arr_segundos = new Array(0);
        var Arr_centesimas = new Array(0);
        
        var ArrTiempos = new Array(0);

        var limiteR = 2;
        var indiceTiempos = 1;
        
        $("#iniciarTime").click(function(){
            document.getElementById("pararTime").style.display = "block";
            document.getElementById("iniciarTime").style.display = "none";
            if(nPruebas<limiteR){
                urlPrueba = "sources/pages/Hay 10 objetos escondidos en estas imágenes, ¿puedes encontrarlos todos_.html";
            }else{
                urlPrueba = "sources/pages/Test_ Desafío de 10 imágenes con objetos escondidos que solo los más observadores podrán encontrar _ Genial.html";
            }
            document.getElementById("pruebaC").innerHTML = '<iframe width="100%" height="100%" src="'+urlPrueba+'" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>';
        });
        $("#pararTime").click(function(){
            document.getElementById("cerrarP").style.display = "block";
            document.getElementById("pararTime").style.display = "none";
            var TiempoObtenido = horas + ":" + minutos + ":" + segundos + ":" + centesimas;
            ArrTiempos.push(TiempoObtenido);
            Arr_minutos.push(minutos);
            Arr_segundos.push(segundos);
            Arr_centesimas.push(centesimas);
        });
        $("#cerrarP").click(function(){
            if(nPruebas<=1){
                alertify.alert("Atención", "Tu tiempo inicial es: " + horas + ":" + minutos + ":" + segundos + ":" + centesimas);
                $("#prueba").slideUp(500);
                $("#juego").slideDown(550);
                $("#help").slideDown(550);
            }else{
                if(nPruebas == limiteR){
                    var color = "";
                    var min_i = Arr_minutos[0];
                    var seg_i = Arr_segundos[0];
                    var cent_i = Arr_centesimas[0];
                    
                    limiteR+=6;
                    alertify.alert("Atención", "Rondas finalizadas, aquí tienes un recuento de tus tiempos.");
                    var ronda = 1;
                    $("#prueba").slideUp(500);
                    $("#Resultados").slideDown(500);
                    $("#juego").slideUp(500);
                    for(let i = 0; i<ArrTiempos.length; i++){
                        if(ronda>1){
                        
                        var minAct = Arr_minutos[indiceTiempos];
                        var segAct = Arr_segundos[indiceTiempos];
                        var centAct = Arr_centesimas[indiceTiempos];

                        var resTime;
                        var strTime = "";

                        var dif_min = min_i - minAct;
                        if(dif_min>0){
                            var carrySeg = 60 - segAct;
                            resTime = (dif_min * 60);
                            resTime = resTime + carrySeg;
                            resTime = resTime/60;
                            resTime = resTime.toFixed(2);
                            strTime = "-"+resTime+" minutos";
                            color = "green";
                        }
                        if(dif_min<0){
                            var carrySeg = 60 - segAct;
                            dif_min*=-1;
                            resTime = dif_min + carrySeg;
                            resTime = resTime/60;
                            resTime = resTime.toFixed(2);
                            strTime = "+"+resTime+" minutos";
                            color = "red";
                        }
                        if(dif_min == 0){
                            var dif_seg = seg_i - segAct;
                            if(dif_seg>0){
                                resTime = dif_seg;
                                resTime = resTime.toFixed(2);
                                strTime = "-"+resTime+" segundos";
                                color = "green";
                            }
                            if(dif_seg<0){
                                dif_seg*=-1;
                                resTime = dif_seg;
                                resTime = resTime.toFixed(2);
                                strTime = "+"+resTime+" segundos";
                                color = "red"; 
                            }
                            if(dif_seg == 0){
                                var dif_cent = cent_i - centAct;
                                if(dif_cent>0){
                                    resTime = dif_cent;
                                    resTime = resTime.toFixed(2);
                                    strTime = "-"+resTime+" centésimas";
                                    color = "green";
                                }
                                if(dif_cent<0){
                                    dif_cent*=-1;
                                    resTime = dif_cent;
                                    resTime = resTime.toFixed(2);
                                    strTime = "+"+resTime+" centésimas";
                                    color = "red";
                                }
                            }
                        }
                            $("#tiemposF").append('<div style="width:100%;"><b>Prueba ' + ronda + '</b> - ' + ArrTiempos[i] + ' : ' + '<div style="color:'+color+'">' + strTime + '</div>' + '</div>');
                            indiceTiempos+=1;
                        }else{
                            $("#tiemposF").append('<div style="width:100%;"><b>Prueba ' + ronda + '</b> - ' + ArrTiempos[i] + '</div>');
                        }
                        ronda+=1;
                        
                    }

                }else{
                    $("#prueba").slideUp(1500);
                    $("#juego").slideDown(1500);
                    $("#help").slideDown(500);
                    alertify.alert("Atención", "Selecciona un modo de juego o configuración de tablero diferente");
                }
            }
            document.getElementById("iniciarTime").style.display = "block";
            document.getElementById("pararTime").style.display = "none";
            document.getElementById("cerrarP").style.display = "none";
            
            reinicio();
            nPruebas+=1;
        });

        $("#bt-c").click(function(){
            $("#Resultados").slideUp(500);
            $("#juego").slideDown(550);
            $("#help").slideDown(550);
        });
    </script>

    <center>
    <div class="SeleccionC" id="SeleccionC">
            <h3>Configura tu tablero</h3>
        <div class="SC" id="SC">
            <div class="SS" id="S1"></div>
            <div class="SS" id="S2"></div>
            <div class="SS" id="S3"></div>
            <div class="SS" id="S4"></div>
            <div class="SS" id="S5"></div>
            <div class="SS" id="S6"></div>
            <div class="SS" id="S7"></div>
            <div class="SS" id="S8"></div>
            <div class="SS" id="S9"></div>
            <div class="SS" id="S10"></div>
            <div class="SS" id="S11"></div>
            <div class="SS" id="S12"></div>
            <div class="SS" id="S13"></div>
            <div class="SS" id="S14"></div>
            <div class="SS" id="S15"></div>
            <div class="SS" id="S16"></div>
        </div>
        <button id="AceptarCC" style="margin-top:25px; width:160px; height:40px; background-color: rgb(44, 121, 121); border-radius:18px; border:none; ">Aceptar</button>
        <button id="Cancelar" style="margin-top:25px; width:160px; height:40px; background-color: #BF4D4D; border-radius:18px; border:none; ">Cancelar</button>
    </div>
    </center>
<body>
    <center>
        <!-- Sección central del juego -->
    <div class="juego" id="juego">

        <div class="superior" id="superior">
            <div class="arriba" id="arriba">
                <b><h3>Configuraciones</h3></b>
            </div>
            <div class="centro" id="centro">
                <label style="font-size:20px;">Modo de juego:</label>
                <input name="modos" id="Inputmodos" list="gamemode" style="width:80px; height:40px; text-align:center; font-size:20px;">
                        <datalist id="gamemode">
                          <option>2X2</option>
                          <option>3X3</option>
                          <option>4X4</option>
                        </datalist>
                <!-- </input> -->
            </div>
            <div class="abajo" id="abajo">
                <button id="AceptarConfiguraciones" style="width:180px; height:40px; background-color:#36C2BE; border-radius:18px; border:none;">Seleccionar</button>
            </div>
        </div>

        <div class="central" id="central">
            <div class="indicadores" id="indicadores">
                <div class="izq" id="izq"><b>Tablero de juego</b>
                <br>
                Correctos: <b id="correctCounter"></b>
                <br>
                Incorrectos: <b id="incorrectCounter"></b>
                </div>
                <div class="der" id="der"><center><div class="led" id="led" style="width:40px; height:40px; border-radius:20px; background-color:white;"></div></center></div>
            </div>
            <div class="cuadricula" id="cuadricula">
                <center>
                <div class="cuadritos" id="cuadritos">
                    <div class="C" id="C1" name="cuadro1"><div class="Cinterior" id="Cinterior1"></div></div>
                    <div class="C" id="C2" name="cuadro2"><div class="Cinterior" id="Cinterior2"></div></div>
                    <div class="C" id="C3" name="cuadro3"><div class="Cinterior" id="Cinterior3"></div></div>
                    <div class="C" id="C4" name="cuadro4"><div class="Cinterior" id="Cinterior4"></div></div>
                    <div class="C" id="C5" name="cuadro5"><div class="Cinterior" id="Cinterior5"></div></div>
                    <div class="C" id="C6" name="cuadro6"><div class="Cinterior" id="Cinterior6"></div></div>
                    <div class="C" id="C7" name="cuadro7"><div class="Cinterior" id="Cinterior7"></div></div>
                    <div class="C" id="C8" name="cuadro8"><div class="Cinterior" id="Cinterior8"></div></div>
                    <div class="C" id="C9" name="cuadro9"><div class="Cinterior" id="Cinterior9"></div></div>
                    <div class="C" id="C10" name="cuadro10"><div class="Cinterior" id="Cinterior10"></div></div>
                    <div class="C" id="C11" name="cuadro11"><div class="Cinterior" id="Cinterior11"></div></div>
                    <div class="C" id="C12" name="cuadro12"><div class="Cinterior" id="Cinterior12"></div></div>
                    <div class="C" id="C13" name="cuadro13"><div class="Cinterior" id="Cinterior13"></div></div>
                    <div class="C" id="C14" name="cuadro14"><div class="Cinterior" id="Cinterior14"></div></div>
                    <div class="C" id="C15" name="cuadro15"><div class="Cinterior" id="Cinterior15"></div></div>
                    <div class="C" id="C16" name="cuadro16"><div class="Cinterior" id="Cinterior16"></div></div>
                </div>
                </center>
            </div>
        </div>
        
        <div class="inferior" id="inferior">
            <button id="Verificar" style="width:200px; height:40px; background-color:#36C2BE; border-radius:18px; border:none;">Verificar respuesta</button>
        </div>
    </div>
<!-- Fin de la sección central del juego -->
    </center>
</body>

<!-- Scripts -->
<script>
    $("#back").click(function(){
        Back();
    });

    $("#next").click(function(){
        Next();
    });

    $("#CerrarInst").click(function(){
        if(nCerrarInst>0){
            $("#G").slideUp(500);
            $("#carrusel").slideUp(500);
            $("#help").slideDown(500);
            $("#juego").slideDown(1500);
        }else{
        $("#G").slideUp(500);
        $("#carrusel").slideUp(500);
        document.getElementById("NPrueba").innerText = " No." + nPruebas;
        // $("#juego").slideDown(1500);
        // $("#help").slideDown(500);
        $("#prueba").slideDown(1500);
        }
        nCerrarInst+=1;
    });

    $("#help").click(function(){
        $("#G").slideDown(500);
        $("#carrusel").slideDown(500);
        $("#juego").slideUp(1500);
        $("#help").slideUp(500);
        $("#prueba").slideUp(500);
    });


    $("#Cancelar").click(function(){
         $("#SeleccionC").slideUp(500);
         document.getElementById("juego").style.display = "block";
         document.getElementById("help").style.display="block";
    });
    
    $(document).ready(function(){
        $("#SeleccionC").hide();
        $("#cuadritos").hide();
        $("#inferior").hide();
        $("#indicadores").hide();
        $("#juego").hide();
        $("#help").hide();
        $("#prueba").hide();
        $("#Resultados").hide();
    });
    // var url = window.location.search;   
    // var parametros = new URLSearchParams(url);
    
    // var GradoEscolar = parametros.get('GEsc');
    // var AnioEscolar = parametros.get('AnioEsc');

    var modo = "4X4";
    var GameMode = "3";

    var correctos = 0;
    var incorrectos = 0;
    var Respuestas_acertadas = new Array(30);
    $("#AceptarConfiguraciones").click(function(){
        modo = $("#Inputmodos")[0].value;
        if(modo == "3X3" || modo == "2X2"){
            document.getElementById("help").style.display="none";
        // Abrir ventana de selección de recuadros
        document.getElementById("juego").style.display = "none";
         $("#SeleccionC").slideDown(500);
         alertify.alert("Aviso", "Configure su tablero para el modo " + modo);
        }else{
            if(modo == "4X4"){
                document.getElementById("help").style.display="none";
                alertify.alert("Aviso", "Dimensiones no reconfigurables, usará el tablero por defecto");
                // history.pushState('', {Mode:GameMode, Indice:"1"}, 'http://localhost/CuentaCuadros/main-NEW.php?=' + 'Mode='+GameMode + "&Indice="+"1");
                GameMode = "3";
                ReconfigurarTablero("1111111111111111", 1);
            }else{
                alertify.alert("Error", "Dimensiones no soportadas");
            }
        }
    });

    var S1 = 0,
        S2 = 0, 
        S3 = 0,
        S4 = 0, 
        S5 = 0,
        S6 = 0,
        S7 = 0,
        S8 = 0,
        S9 = 0,
        S10 = 0,
        S11 = 0,
        S12 = 0,
        S13 = 0,
        S14 = 0,
        S15 = 0,
        S16 = 0;

    // Funcionamiento de los recuadros
    $("#S1").click(function(){
            S1+=1;
            if(S1%2!=0){
                document.getElementById("S1").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S1").style.backgroundColor = "rgba(44, 121, 121)";
                S1 = 0;
            }
    });

    $("#S2").click(function(){
            S2+=1;
            if(S2%2!=0){
                document.getElementById("S2").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S2").style.backgroundColor = "rgba(44, 121, 121)";
                S2 = 0;
            }
    });

    $("#S3").click(function(){
            S3+=1;
            if(S3%2!=0){
                document.getElementById("S3").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S3").style.backgroundColor = "rgba(44, 121, 121)";
                S3 = 0;
            }
    });

    $("#S4").click(function(){
            S4+=1;
            if(S4%2!=0){
                document.getElementById("S4").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S4").style.backgroundColor = "rgba(44, 121, 121)";
                S4 = 0;
            }
    });

    $("#S5").click(function(){
            S5+=1;
            if(S5%2!=0){
                document.getElementById("S5").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S5").style.backgroundColor = "rgba(44, 121, 121)";
                S5 = 0;
            }
    });

    $("#S6").click(function(){
            S6+=1;
            if(S6%2!=0){
                document.getElementById("S6").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S6").style.backgroundColor = "rgba(44, 121, 121)";
                S6 = 0;
            }
    });

    $("#S7").click(function(){
            S7+=1;
            if(S7%2!=0){
                document.getElementById("S7").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S7").style.backgroundColor = "rgba(44, 121, 121)";
                S7 = 0;
            }
    });

    $("#S8").click(function(){
            S8+=1;
            if(S8%2!=0){
                document.getElementById("S8").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S8").style.backgroundColor = "rgba(44, 121, 121)";
                S8 = 0;
            }
    });

    $("#S9").click(function(){
            S9+=1;
            if(S9%2!=0){
                document.getElementById("S9").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S9").style.backgroundColor = "rgba(44, 121, 121)";
                S9 = 0;
            }
    });

    $("#S10").click(function(){
            S10+=1;
            if(S10%2!=0){
                document.getElementById("S10").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S10").style.backgroundColor = "rgba(44, 121, 121)";
                S10 = 0;
            }
    });

    $("#S11").click(function(){
            S11+=1;
            if(S11%2!=0){
                document.getElementById("S11").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S11").style.backgroundColor = "rgba(44, 121, 121)";
                S11 = 0;
            }
    });

    $("#S12").click(function(){
            S12+=1;
            if(S12%2!=0){
                document.getElementById("S12").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S12").style.backgroundColor = "rgba(44, 121, 121)";
                S12 = 0;
            }
    });

    $("#S13").click(function(){
            S13+=1;
            if(S13%2!=0){
                document.getElementById("S13").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S13").style.backgroundColor = "rgba(44, 121, 121)";
                S13 = 0;
            }
    });

    $("#S14").click(function(){
            S14+=1;
            if(S14%2!=0){
                document.getElementById("S14").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S14").style.backgroundColor = "rgba(44, 121, 121)";
                S14 = 0;
            }
    });

    $("#S15").click(function(){
            S15+=1;
            if(S15%2!=0){
                document.getElementById("S15").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S15").style.backgroundColor = "rgba(44, 121, 121)";
                S15 = 0;
            }
    });

    $("#S16").click(function(){
            S16+=1;
            if(S16%2!=0){
                document.getElementById("S16").style.backgroundColor = "#1f5554";
            }else{
                document.getElementById("S16").style.backgroundColor = "rgba(44, 121, 121)";
                S16 = 0;
            }
    });

    $("#AceptarCC").click(function(){
        var CadConfig ="" + S1 + S2 + S3 + S4 + S5 + S6 + S7 + S8 + S9 + S10 + S11 + S12 + S13 + S14 + S15 + S16;
        var PConfigs_2x2 = [
            "1100110000000000", "0110011000000000", "0011001100000000",
            "0000110011000000", "0000011001100000", "0000001100110000", 
            "0000000011001100", "0000000001100110", "0000000000110011"
        ];
        var PConfigs_3x3 = [
            "1110111011100000", "0111011101110000", "0000111011101110", "0000011101110111"
        ];
        // window.alert(CadConfig);
        var flag2x2 = false;
        var flag3x3 = false;
        if(modo == "2X2"){
            for(var i = 0; i<PConfigs_2x2.length; i++){
                if(CadConfig == PConfigs_2x2[i]){
                    flag2x2 = true;
                    // window.alert("Siu");
                    var indiceE = i + 1;
                    ReconfigurarTablero(CadConfig, indiceE);
                    break;
                }
            }
            if(flag2x2 == false){
                alertify.alert("Error", "Selección de cuadrados no válida para el modo 2X2");
            }
        }
        if(modo == "3X3"){
            for(var i = 0; i<PConfigs_3x3.length; i++){
                if(CadConfig == PConfigs_3x3[i]){
                    flag3x3 = true;
                    // window.alert("Siu");
                    var indiceE = i + 1;
                    ReconfigurarTablero(CadConfig, indiceE);
                    break;
                }
            }
            if(flag3x3 == false){
                alertify.alert("Error", "Selección de cuadrados no válida para el modo 3X3");
            }
        }

    });

    function ReconfigurarTablero(Config, Ind){
        // window.alert(Ind);
        if(modo == "2X2"){
            GameMode = "1"; 
        }
        if(modo == "3X3"){
            GameMode = "2";
        }
        $("#SeleccionC").slideUp(500);
         document.getElementById("juego").style.display = "block";

         $("#cuadritos").show();
        $("#inferior").show();
        $("#indicadores").show();
        
        if(Config.charAt(0) == 1){
            $("#C1").css("z-index", "1");
            document.getElementById("C1").style.pointerEvents = "auto";
            document.getElementById("Cinterior1").style.display="none";
        }else{
            $("#C1").css("z-index", "1");
            document.getElementById("C1").style.pointerEvents = "none";
            document.getElementById("Cinterior1").style.display="block";
        }

        if(Config.charAt(1) == 1){
            $("#C2").css("z-index", "1");
            document.getElementById("C2").style.pointerEvents = "auto";
            document.getElementById("Cinterior2").style.display="none";
        }else{
            $("#C2").css("z-index", "1");
            document.getElementById("C2").style.pointerEvents = "none";
            document.getElementById("Cinterior2").style.display="block";
        }
        
        if(Config.charAt(2) == 1){
            $("#C3").css("z-index", "1");
            document.getElementById("C3").style.pointerEvents = "auto";
            document.getElementById("Cinterior3").style.display="none";
        }else{
            $("#C3").css("z-index", "1");
            document.getElementById("C3").style.pointerEvents = "none";
            document.getElementById("Cinterior3").style.display="block";
        }

        if(Config.charAt(3) == 1){
            $("#C4").css("z-index", "1");
            document.getElementById("C4").style.pointerEvents = "auto";
            document.getElementById("Cinterior4").style.display="none";
        }else{
            $("#C4").css("z-index", "1");
            document.getElementById("C4").style.pointerEvents = "none";
            document.getElementById("Cinterior4").style.display="block";
        }

        if(Config.charAt(4) == 1){
            $("#C5").css("z-index", "1");
            document.getElementById("C5").style.pointerEvents = "auto";
            document.getElementById("Cinterior5").style.display="none";
        }else{
            $("#C5").css("z-index", "1");
            document.getElementById("C5").style.pointerEvents = "none";
            document.getElementById("Cinterior5").style.display="block";
        }

        if(Config.charAt(5) == 1){
            $("#C6").css("z-index", "1");
            document.getElementById("C6").style.pointerEvents = "auto";
            document.getElementById("Cinterior6").style.display="none";
        }else{
            $("#C6").css("z-index", "1");
            document.getElementById("C6").style.pointerEvents = "none";
            document.getElementById("Cinterior6").style.display="block";
        }

        if(Config.charAt(6) == 1){
            $("#C7").css("z-index", "1");
            document.getElementById("C7").style.pointerEvents = "auto";
            document.getElementById("Cinterior7").style.display="none";
        }else{
            $("#C7").css("z-index", "1");
            document.getElementById("C7").style.pointerEvents = "none";
            document.getElementById("Cinterior7").style.display="block";
        }

        if(Config.charAt(7) == 1){
            $("#C8").css("z-index", "1");
            document.getElementById("C8").style.pointerEvents = "auto";
            document.getElementById("Cinterior8").style.display="none";
        }else{
            $("#C8").css("z-index", "1");
            document.getElementById("C8").style.pointerEvents = "none";
            document.getElementById("Cinterior8").style.display="block";
        }

        if(Config.charAt(8) == 1){
            $("#C9").css("z-index", "1");
            document.getElementById("C9").style.pointerEvents = "auto";
            document.getElementById("Cinterior9").style.display="none";
        }else{
            $("#C9").css("z-index", "1");
            document.getElementById("C9").style.pointerEvents = "none";
            document.getElementById("Cinterior9").style.display="block";
        }

        if(Config.charAt(9) == 1){
            $("#C10").css("z-index", "1");
            document.getElementById("C10").style.pointerEvents = "auto";
            document.getElementById("Cinterior10").style.display="none";
        }else{
            $("#C10").css("z-index", "1");
            document.getElementById("C10").style.pointerEvents = "none";
            document.getElementById("Cinterior10").style.display="block";
        }

        if(Config.charAt(10) == 1){
            $("#C11").css("z-index", "1");
            document.getElementById("C11").style.pointerEvents = "auto";
            document.getElementById("Cinterior11").style.display="none";
        }else{
            $("#C11").css("z-index", "1");
            document.getElementById("C11").style.pointerEvents = "none";
            document.getElementById("Cinterior11").style.display="block";
        }

        if(Config.charAt(11) == 1){
            $("#C12").css("z-index", "1");
            document.getElementById("C12").style.pointerEvents = "auto";
            document.getElementById("Cinterior12").style.display="none";
        }else{
            $("#C12").css("z-index", "1");
            document.getElementById("C12").style.pointerEvents = "none";
            document.getElementById("Cinterior12").style.display="block";
        }

        if(Config.charAt(12) == 1){
            $("#C13").css("z-index", "1");
            document.getElementById("C13").style.pointerEvents = "auto";
            document.getElementById("Cinterior13").style.display="none";
        }else{
            $("#C13").css("z-index", "1");
            document.getElementById("C13").style.pointerEvents = "none";
            document.getElementById("Cinterior13").style.display="block";
        }

        if(Config.charAt(13) == 1){
            $("#C14").css("z-index", "1");
            document.getElementById("C14").style.pointerEvents = "auto";
            document.getElementById("Cinterior14").style.display="none";
        }else{
            $("#C14").css("z-index", "1");
            document.getElementById("C14").style.pointerEvents = "none";
            document.getElementById("Cinterior14").style.display="block";
        }

        if(Config.charAt(14) == 1){
            $("#C15").css("z-index", "1");
            document.getElementById("C15").style.pointerEvents = "auto";
            document.getElementById("Cinterior15").style.display="none";
        }else{
            $("#C15").css("z-index", "1");
            document.getElementById("C15").style.pointerEvents = "none";
            document.getElementById("Cinterior15").style.display="block";
        }

        if(Config.charAt(15) == 1){
            $("#C16").css("z-index", "1");
            document.getElementById("C16").style.pointerEvents = "auto";
            document.getElementById("Cinterior16").style.display="none";
        }else{
            $("#C16").css("z-index", "1");
            document.getElementById("C16").style.pointerEvents = "none";
            document.getElementById("Cinterior16").style.display="block";
        }

        Respuestas_acertadas.splice(0,30);
        Respuestas_4X4 = [
                // 1X1
                "1000000000000000", "0100000000000000", "0010000000000000", "0001000000000000", "0000100000000000", "0000010000000000", "0000001000000000", "0000000100000000",
                "0000000010000000", "0000000001000000", "0000000000100000", "0000000000010000", "0000000000001000", "0000000000000100", "0000000000000010", "0000000000000001",
                // 2X2
                "1100110000000000", "0011001100000000", "0000110011000000", "0000001100110000", "0000000011001100", "0000000000110011", "0110011000000000", "0000000001100110", "0000011001100000",
                // 3X3
                "1110111011100000", "0111011101110000", "0000111011101110", "0000011101110111",
                // 4X4
                "1111111111111111"
            ];   
        resetAll();
        correctos = 0;
        incorrectos = 0;
        document.getElementById("correctCounter").innerText = correctos;
        document.getElementById("incorrectCounter").innerText = incorrectos;

        
        if(modo == "2X2"){
                Restantes = TotalR2x2;
        }if(modo == "3X3"){
                Restantes = TotalR3x3;
        }if(modo == "4X4"){
                Restantes = TotalR4x4;
        }
        alertify.alert("Aviso", "El tablero ha sido reconfigurado correctamente, total de cuadrados: " + Restantes);
        var M = GameMode;
        GenerarPush(M, Ind);
    }

    function GenerarPush(miModo, indice){
        var letra = "";
        if(miModo == "1"){
            if(indice == "1"){
                letra = "A";
            }
            if(indice == "2"){
                letra = "B";
            }
            if(indice == "3"){
                letra = "C";
            }
            if(indice == "4"){
                letra = "D";
            }
            if(indice == "5"){
                letra = "E";
            }
            if(indice == "6"){
                letra = "F";
            }
            if(indice == "7"){
                letra = "G";
            }
            if(indice == "8"){
                letra = "H";
            }
            if(indice == "9"){
                letra = "I";
            }
        }
        if(miModo == "2"){
            if(indice == "1"){
                letra = "J";
            }
            if(indice == "2"){
                letra = "K";
            }
            if(indice == "3"){
                letra = "L";
            }
            if(indice == "4"){
                letra = "M";
            }
        }
        if(miModo == "3"){
            letra = "N";
        }
        document.getElementById("help").style.display="block";
        document.getElementById("header").style.width="107%";
        document.getElementById("AceptarConfiguraciones").style.pointerEvents = "none";
        history.pushState('', {Mode:letra}, 'http://maqueta-i40.itesa.edu.mx/cuentaCuadros/main.php?' + 'Mode='+letra);
    }


</script>
<script>
        var C1 = 0,
            C2 = 0, 
            C3 = 0,
            C4 = 0, 
            C5 = 0,
            C6 = 0,
            C7 = 0,
            C8 = 0,
            C9 = 0,
            C10 = 0,
            C11 = 0,
            C12 = 0,
            C13 = 0,
            C14 = 0,
            C15 = 0,
            C16 = 0;
        // Funcionamiento de los recuadros
        $("#C1").click(function(){
            C1+=1;
            if(C1%2!=0){
                document.getElementById("C1").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C1").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C1 = 0;
            }
        });
        $("#C2").click(function(){
            C2+=1;
            if(C2%2!=0){
                document.getElementById("C2").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C2").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C2 = 0;
            }
        });
        $("#C3").click(function(){
            C3+=1;
            if(C3%2!=0){
                document.getElementById("C3").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C3").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C3 = 0;
            }
        });
        $("#C4").click(function(){
            C4+=1;
            if(C4%2!=0){
                document.getElementById("C4").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C4").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C4 = 0;
            }
        });
        $("#C5").click(function(){
            C5+=1;
            if(C5%2!=0){
                document.getElementById("C5").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C5").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C5= 0;
            }
        });
        $("#C6").click(function(){
            C6+=1;
            if(C6%2!=0){
                document.getElementById("C6").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C6").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C6 = 0;
            }
        });
        $("#C7").click(function(){
            C7+=1;
            if(C7%2!=0){
                document.getElementById("C7").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C7").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C7 = 0;
            }
        });
        $("#C8").click(function(){
            C8+=1;
            if(C8%2!=0){
                document.getElementById("C8").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C8").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C8 = 0;
            }
        });
        $("#C9").click(function(){
            C9+=1;
            if(C9%2!=0){
                document.getElementById("C9").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C9").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C9 = 0;
            }
        });
        $("#C10").click(function(){
            C10+=1;
            if(C10%2!=0){
                document.getElementById("C10").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C10").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C10 = 0;
            }
        });
        $("#C11").click(function(){
            C11+=1;
            if(C11%2!=0){
                document.getElementById("C11").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C11").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C11 = 0;
            }
        });
        $("#C12").click(function(){
            C12+=1;
            if(C12%2!=0){
                document.getElementById("C12").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C12").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C12 = 0;
            }
        });
        $("#C13").click(function(){
            C13+=1;
            if(C13%2!=0){
                document.getElementById("C13").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C13").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C13 = 0;
            }
        });
        $("#C14").click(function(){
            C14+=1;
            if(C14%2!=0){
                document.getElementById("C14").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C14").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C14 = 0;
            }
        });
        $("#C15").click(function(){
            C15+=1;
            if(C15%2!=0){
                document.getElementById("C15").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C15").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C15 = 0;
            }
        });
        $("#C16").click(function(){
            C16+=1;
            if(C16%2!=0){
                document.getElementById("C16").style.backgroundColor = "#428D8B";
            }else{
                document.getElementById("C16").style.backgroundColor = "rgba(66, 141, 139, .5)";
                C16 = 0;
            }
        });

    </script>

    <script>
        const cargarSonido = function (fuente) {
            const sonido = document.createElement("audio");
            sonido.src = fuente;
            sonido.setAttribute("preload", "auto");
            sonido.setAttribute("controls", "none");
            sonido.style.display = "none"; // <-- oculto
            document.body.appendChild(sonido);
            return sonido;
        };
        const $botonReproducir = document.querySelector("#Verificar");
        const correct = cargarSonido("sources/sounds/correct.mp3");
        const incorrect = cargarSonido("sources/sounds/incorrect.mp3");
        
        var cadena = "";
        var Rflag = false;
        
        var TotalR2x2 = 5;
        var TotalR3x3 = 14;
        var TotalR4x4 = 30;
        var Restantes = 0;

        $botonReproducir.onclick = () => {
        var resultado = Algorithm();
        // window.alert(resultado);
        
        if(resultado == true){
            correct.play();
            putGreen();
            correctos+=1;
            Restantes-=1;
            alertify.alert("Correcto", "Configuración correcta, cuadrados restantes: " + Restantes);
        }else{
            if(Rflag == true){
                alertify.alert("La configuración realizada está repetida, intenta con una nueva");
                putRed();
            }else{
            incorrect.play();
            putRed();
            incorrectos+=1;
            alertify.alert("Incorrecto", "Configuración incorrecta, vuelve a intentarlo");
            }
        }
            if(modo == "2X2" && correctos == TotalR2x2){
                window.alert("Cantidad de combinaciones posibles en este modo 2X2 alcanzadas");
                history.pushState('', '', 'http://maqueta-i40.itesa.edu.mx/cuentaCuadros/main.php');
                document.getElementById("AceptarConfiguraciones").style.pointerEvents = "auto";
                $("#juego").slideUp(1000);
                $("#prueba").slideDown(1500);
                document.getElementById("NPrueba").innerText = " No." + nPruebas;
                document.getElementById("help").style.display="none";
                putWhite();
            }if(modo == "3X3" && correctos == TotalR3x3){
                window.alert("Cantidad de combinaciones posibles en este modo 3X3 alcanzadas");
                history.pushState('', '', 'http://maqueta-i40.itesa.edu.mx/cuentaCuadros/main.php');
                document.getElementById("AceptarConfiguraciones").style.pointerEvents = "auto";
                $("#juego").slideUp(1000);
                $("#prueba").slideDown(1500);
                document.getElementById("NPrueba").innerText = " No." + nPruebas;
                document.getElementById("help").style.display="none";
                putWhite();
            }if(modo == "4X4" && correctos == TotalR4x4){
                window.alert("Cantidad de combinaciones posibles en este modo 4X4 alcanzadas");
                history.pushState('', '', 'http://maqueta-i40.itesa.edu.mx/cuentaCuadros/main.php');
                document.getElementById("AceptarConfiguraciones").style.pointerEvents = "auto";
                $("#juego").slideUp(1000);
                $("#prueba").slideDown(1500);
                document.getElementById("NPrueba").innerText = " No." + nPruebas;
                document.getElementById("help").style.display="none";
                putWhite();
            }
        
        document.getElementById("correctCounter").innerText = correctos;
        document.getElementById("incorrectCounter").innerText = incorrectos;
        // PushState
        history.pushState('', {configuracion:cadena, resultadoCf:resultado}, 'http://maqueta-i40.itesa.edu.mx/cuentaCuadros/main.php?' + 'configuracion='+cadena+'&'+'resultadoCf='+resultado);
        // Fin push
       resetAll();

        };
       
         // Respuestas
            var Respuestas_4X4 = [
                // 1X1
                "1000000000000000", "0100000000000000", "0010000000000000", "0001000000000000", "0000100000000000", "0000010000000000", "0000001000000000", "0000000100000000",
                "0000000010000000", "0000000001000000", "0000000000100000", "0000000000010000", "0000000000001000", "0000000000000100", "0000000000000010", "0000000000000001",
                // 2X2
                "1100110000000000", "0011001100000000", "0000110011000000", "0000001100110000", "0000000011001100", "0000000000110011", "0110011000000000", "0000000001100110", "0000011001100000",
                // 3X3
                "1110111011100000", "0111011101110000", "0000111011101110", "0000011101110111",
                // 4X4
                "1111111111111111"
            ];
            // Fin Respuestas
            function Algorithm(){
            Rflag = false;
            var R = false;
                cadena = cadena + ""+ C1 + C2 + C3 + C4 + C5 + C6 + C7 + C8 + C9 + C10 + C11 + C12 + C13 + C14 + C15 + C16;
                // window.alert(cadena);
                Respuestas_acertadas.reverse();
                for(var i = 0; i<Respuestas_4X4.length; i++){
                    if(cadena == Respuestas_4X4[i]){
                        var E_Encontrado = Respuestas_4X4[i];
                        Respuestas_acertadas.push(E_Encontrado);
                        Respuestas_4X4.splice(i, 1);
                        R = true;
                        break;
                    }else{
                        for(var j = 0; j<Respuestas_acertadas.length; j++){
                            if(cadena == Respuestas_acertadas[j]){
                                Rflag = true;
                                break;
                            }
                        }
                    }
                }
                Respuestas_acertadas.reverse();
                cadena = "";
                return R;
            }

        function resetAll(){
            // Reset valores
            C1 = 0,
            C2 = 0, 
            C3 = 0,
            C4 = 0, 
            C5 = 0,
            C6 = 0,
            C7 = 0,
            C8 = 0,
            C9 = 0,
            C10 = 0,
            C11 = 0,
            C12 = 0,
            C13 = 0,
            C14 = 0,
            C15 = 0,
            C16 = 0;
            // Reset colores
            document.getElementById("C1").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C2").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C3").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C4").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C5").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C6").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C7").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C8").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C9").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C10").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C11").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C12").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C13").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C14").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C15").style.backgroundColor = "rgba(66, 141, 139, .5)";
            document.getElementById("C16").style.backgroundColor = "rgba(66, 141, 139, .5)";
            // Reset cadena
            cadena = "";
        }
        function putGreen(){
            document.getElementById("led").style.backgroundColor = "green";
        }
        function putRed(){
            document.getElementById("led").style.backgroundColor = "red";
        }
        function putWhite(){
            document.getElementById("led").style.backgroundColor = "white";
        }
    </script>
    
<!-- Fin Scripts  -->

</html>