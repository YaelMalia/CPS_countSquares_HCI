(()=>{var t={4537:t=>{"use strict";t.exports=function(t,i){var e=new Array(arguments.length-1),s=0,n=2,r=!0;for(;n<arguments.length;)e[s++]=arguments[n++];return new Promise((function(n,o){e[s]=function(t){if(r)if(r=!1,t)o(t);else{for(var i=new Array(arguments.length-1),e=0;e<i.length;)i[e++]=arguments[e];n.apply(null,i)}};try{t.apply(i||null,e)}catch(t){r&&(r=!1,o(t))}}))}},7419:(t,i)=>{"use strict";var e=i;e.length=function(t){var i=t.length;if(!i)return 0;for(var e=0;--i%4>1&&"="===t.charAt(i);)++e;return Math.ceil(3*t.length)/4-e};for(var s=new Array(64),n=new Array(123),r=0;r<64;)n[s[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;e.encode=function(t,i,e){for(var n,r=null,o=[],h=0,a=0;i<e;){var c=t[i++];switch(a){case 0:o[h++]=s[c>>2],n=(3&c)<<4,a=1;break;case 1:o[h++]=s[n|c>>4],n=(15&c)<<2,a=2;break;case 2:o[h++]=s[n|c>>6],o[h++]=s[63&c],a=0}h>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),h=0)}return a&&(o[h++]=s[n],o[h++]=61,1===a&&(o[h++]=61)),r?(h&&r.push(String.fromCharCode.apply(String,o.slice(0,h))),r.join("")):String.fromCharCode.apply(String,o.slice(0,h))};var o="invalid encoding";e.decode=function(t,i,e){for(var s,r=e,h=0,a=0;a<t.length;){var c=t.charCodeAt(a++);if(61===c&&h>1)break;if(void 0===(c=n[c]))throw Error(o);switch(h){case 0:s=c,h=1;break;case 1:i[e++]=s<<2|(48&c)>>4,s=c,h=2;break;case 2:i[e++]=(15&s)<<4|(60&c)>>2,s=c,h=3;break;case 3:i[e++]=(3&s)<<6|c,h=0}}if(1===h)throw Error(o);return e-r},e.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},5124:t=>{"use strict";function i(t,e){"string"==typeof t&&(e=t,t=void 0);var s=[];function n(t){if("string"!=typeof t){var e=r();if(i.verbose&&console.log("codegen: "+e),e="return "+e,t){for(var o=Object.keys(t),h=new Array(o.length+1),a=new Array(o.length),c=0;c<o.length;)h[c]=o[c],a[c]=t[o[c++]];return h[c]=e,Function.apply(null,h).apply(null,a)}return Function(e)()}for(var d=new Array(arguments.length-1),l=0;l<d.length;)d[l]=arguments[++l];if(l=0,t=t.replace(/%([%dfijs])/g,(function(t,i){var e=d[l++];switch(i){case"d":case"f":return String(Number(e));case"i":return String(Math.floor(e));case"j":return JSON.stringify(e);case"s":return String(e)}return"%"})),l!==d.length)throw Error("parameter count mismatch");return s.push(t),n}function r(i){return"function "+(i||e||"")+"("+(t&&t.join(",")||"")+"){\n  "+s.join("\n  ")+"\n}"}return n.toString=r,n}t.exports=i,i.verbose=!1},9211:t=>{"use strict";function i(){this.U={}}t.exports=i,i.prototype.on=function(t,i,e){return(this.U[t]||(this.U[t]=[])).push({fn:i,ctx:e||this}),this},i.prototype.off=function(t,i){if(void 0===t)this.U={};else if(void 0===i)this.U[t]=[];else for(var e=this.U[t],s=0;s<e.length;)e[s].fn===i?e.splice(s,1):++s;return this},i.prototype.emit=function(t){var i=this.U[t];if(i){for(var e=[],s=1;s<arguments.length;)e.push(arguments[s++]);for(s=0;s<i.length;)i[s].fn.apply(i[s++].ctx,e)}return this}},9054:(t,i,e)=>{"use strict";t.exports=r;var s=e(4537),n=e(7199)("fs");function r(t,i,e){return"function"==typeof i?(e=i,i={}):i||(i={}),e?!i.xhr&&n&&n.readFile?n.readFile(t,(function(s,n){return s&&"undefined"!=typeof XMLHttpRequest?r.xhr(t,i,e):s?e(s):e(null,i.binary?n:n.toString("utf8"))})):r.xhr(t,i,e):s(r,this,t,i)}r.xhr=function(t,i,e){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(0!==s.status&&200!==s.status)return e(Error("status "+s.status));if(i.binary){var t=s.response;if(!t){t=[];for(var n=0;n<s.responseText.length;++n)t.push(255&s.responseText.charCodeAt(n))}return e(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return e(null,s.responseText)}},i.binary&&("overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.responseType="arraybuffer"),s.open("GET",t),s.send()}},945:t=>{"use strict";function i(t){return"undefined"!=typeof Float32Array?function(){var i=new Float32Array([-0]),e=new Uint8Array(i.buffer),s=128===e[3];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3]}function r(t,s,n){i[0]=t,s[n]=e[3],s[n+1]=e[2],s[n+2]=e[1],s[n+3]=e[0]}function o(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i[0]}function h(t,s){return e[3]=t[s],e[2]=t[s+1],e[1]=t[s+2],e[0]=t[s+3],i[0]}t.writeFloatLE=s?n:r,t.writeFloatBE=s?r:n,t.readFloatLE=s?o:h,t.readFloatBE=s?h:o}():function(){function i(t,i,e,s){var n=i<0?1:0;if(n&&(i=-i),0===i)t(1/i>0?0:2147483648,e,s);else if(isNaN(i))t(2143289344,e,s);else if(i>34028234663852886e22)t((n<<31|2139095040)>>>0,e,s);else if(i<11754943508222875e-54)t((n<<31|Math.round(i/1401298464324817e-60))>>>0,e,s);else{var r=Math.floor(Math.log(i)/Math.LN2);t((n<<31|r+127<<23|8388607&Math.round(i*Math.pow(2,-r)*8388608))>>>0,e,s)}}function o(t,i,e){var s=t(i,e),n=2*(s>>31)+1,r=s>>>23&255,o=8388607&s;return 255===r?o?NaN:n*(1/0):0===r?1401298464324817e-60*n*o:n*Math.pow(2,r-150)*(o+8388608)}t.writeFloatLE=i.bind(null,e),t.writeFloatBE=i.bind(null,s),t.readFloatLE=o.bind(null,n),t.readFloatBE=o.bind(null,r)}(),"undefined"!=typeof Float64Array?function(){var i=new Float64Array([-0]),e=new Uint8Array(i.buffer),s=128===e[7];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3],s[n+4]=e[4],s[n+5]=e[5],s[n+6]=e[6],s[n+7]=e[7]}function r(t,s,n){i[0]=t,s[n]=e[7],s[n+1]=e[6],s[n+2]=e[5],s[n+3]=e[4],s[n+4]=e[3],s[n+5]=e[2],s[n+6]=e[1],s[n+7]=e[0]}function o(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],e[4]=t[s+4],e[5]=t[s+5],e[6]=t[s+6],e[7]=t[s+7],i[0]}function h(t,s){return e[7]=t[s],e[6]=t[s+1],e[5]=t[s+2],e[4]=t[s+3],e[3]=t[s+4],e[2]=t[s+5],e[1]=t[s+6],e[0]=t[s+7],i[0]}t.writeDoubleLE=s?n:r,t.writeDoubleBE=s?r:n,t.readDoubleLE=s?o:h,t.readDoubleBE=s?h:o}():function(){function i(t,i,e,s,n,r){var o=s<0?1:0;if(o&&(s=-s),0===s)t(0,n,r+i),t(1/s>0?0:2147483648,n,r+e);else if(isNaN(s))t(0,n,r+i),t(2146959360,n,r+e);else if(s>17976931348623157e292)t(0,n,r+i),t((o<<31|2146435072)>>>0,n,r+e);else{var h;if(s<22250738585072014e-324)t((h=s/5e-324)>>>0,n,r+i),t((o<<31|h/4294967296)>>>0,n,r+e);else{var a=Math.floor(Math.log(s)/Math.LN2);1024===a&&(a=1023),t(4503599627370496*(h=s*Math.pow(2,-a))>>>0,n,r+i),t((o<<31|a+1023<<20|1048576*h&1048575)>>>0,n,r+e)}}}function o(t,i,e,s,n){var r=t(s,n+i),o=t(s,n+e),h=2*(o>>31)+1,a=o>>>20&2047,c=4294967296*(1048575&o)+r;return 2047===a?c?NaN:h*(1/0):0===a?5e-324*h*c:h*Math.pow(2,a-1075)*(c+4503599627370496)}t.writeDoubleLE=i.bind(null,e,0,4),t.writeDoubleBE=i.bind(null,s,4,0),t.readDoubleLE=o.bind(null,n,0,4),t.readDoubleBE=o.bind(null,r,4,0)}(),t}function e(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}function s(t,i,e){i[e]=t>>>24,i[e+1]=t>>>16&255,i[e+2]=t>>>8&255,i[e+3]=255&t}function n(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0}function r(t,i){return(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0}t.exports=i(i)},7199:t=>{"use strict";function i(t){try{var i=eval("quire".replace(/^/,"re"))(t);if(i&&(i.length||Object.keys(i).length))return i}catch(t){}return null}t.exports=i},8626:(t,i)=>{"use strict";var e=i,s=e.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},n=e.normalize=function(t){var i=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),e=s(t),n="";e&&(n=i.shift()+"/");for(var r=0;r<i.length;)".."===i[r]?r>0&&".."!==i[r-1]?i.splice(--r,2):e?i.splice(r,1):++r:"."===i[r]?i.splice(r,1):++r;return n+i.join("/")};e.resolve=function(t,i,e){return e||(i=n(i)),s(i)?i:(e||(t=n(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?n(t+"/"+i):i)}},6662:t=>{"use strict";t.exports=function(t,i,e){var s=e||8192,n=s>>>1,r=null,o=s;return function(e){if(e<1||e>n)return t(e);o+e>s&&(r=t(s),o=0);var h=i.call(r,o,o+=e);return 7&o&&(o=1+(7|o)),h}}},4997:(t,i)=>{"use strict";var e=i;e.length=function(t){for(var i=0,e=0,s=0;s<t.length;++s)(e=t.charCodeAt(s))<128?i+=1:e<2048?i+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(s+1))?(++s,i+=4):i+=3;return i},e.read=function(t,i,e){if(e-i<1)return"";for(var s,n=null,r=[],o=0;i<e;)(s=t[i++])<128?r[o++]=s:s>191&&s<224?r[o++]=(31&s)<<6|63&t[i++]:s>239&&s<365?(s=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,r[o++]=55296+(s>>10),r[o++]=56320+(1023&s)):r[o++]=(15&s)<<12|(63&t[i++])<<6|63&t[i++],o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,r)),o=0);return n?(o&&n.push(String.fromCharCode.apply(String,r.slice(0,o))),n.join("")):String.fromCharCode.apply(String,r.slice(0,o))},e.write=function(t,i,e){for(var s,n,r=e,o=0;o<t.length;++o)(s=t.charCodeAt(o))<128?i[e++]=s:s<2048?(i[e++]=s>>6|192,i[e++]=63&s|128):55296==(64512&s)&&56320==(64512&(n=t.charCodeAt(o+1)))?(s=65536+((1023&s)<<10)+(1023&n),++o,i[e++]=s>>18|240,i[e++]=s>>12&63|128,i[e++]=s>>6&63|128,i[e++]=63&s|128):(i[e++]=s>>12|224,i[e++]=s>>6&63|128,i[e++]=63&s|128);return e-r}},7501:function(t,i,e){var s;t=e.nmd(t),function(n){var r=i,o=(t&&t.exports,"object"==typeof e.g&&e.g);o.global!==o&&o.window;var h=function(t){this.message=t};(h.prototype=new Error).name="InvalidCharacterError";var a=function(t){throw new h(t)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=/[\t\n\f\r ]/g,l={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var i,e,s,n,r=t.length%3,o="",h=-1,d=t.length-r;++h<d;)i=t.charCodeAt(h)<<16,e=t.charCodeAt(++h)<<8,s=t.charCodeAt(++h),o+=c.charAt((n=i+e+s)>>18&63)+c.charAt(n>>12&63)+c.charAt(n>>6&63)+c.charAt(63&n);return 2==r?(i=t.charCodeAt(h)<<8,e=t.charCodeAt(++h),o+=c.charAt((n=i+e)>>10)+c.charAt(n>>4&63)+c.charAt(n<<2&63)+"="):1==r&&(n=t.charCodeAt(h),o+=c.charAt(n>>2)+c.charAt(n<<4&63)+"=="),o},decode:function(t){var i=(t=String(t).replace(d,"")).length;i%4==0&&(i=(t=t.replace(/==?$/,"")).length),(i%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var e,s,n=0,r="",o=-1;++o<i;)s=c.indexOf(t.charAt(o)),e=n%4?64*e+s:s,n++%4&&(r+=String.fromCharCode(255&e>>(-2*n&6)));return r},version:"0.1.0"};void 0===(s=function(){return l}.call(i,e,i,t))||(t.exports=s)}()},6658:(t,i,e)=>{"use strict";var s=e(3090),n=s.decodeBitsToIds,r=s.decodeFromBase64;t.exports={decodeConsentString:function(t){var i=r(t),e=i.version,s=i.cmpId,o=i.vendorListVersion,h=i.purposeIdBitString,a=i.maxVendorId,c=i.created,d=i.lastUpdated,l=i.isRange,u=i.defaultConsent,p=i.vendorIdBitString,f=i.vendorRangeList,m=i.cmpVersion,v=i.consentScreen,g=i.consentLanguage,y={version:e,cmpId:s,vendorListVersion:o,allowedPurposeIds:n(h),maxVendorId:a,created:c,lastUpdated:d,cmpVersion:m,consentScreen:v,consentLanguage:g};if(l){var b=f.reduce((function(t,i){for(var e=i.isRange,s=i.startVendorId,n=i.endVendorId,r=e?n:s,o=s;o<=r;o+=1)t[o]=!0;return t}),{});y.allowedVendorIds=[];for(var I=1;I<=a;I+=1)(u&&!b[I]||!u&&b[I])&&-1===y.allowedVendorIds.indexOf(I)&&y.allowedVendorIds.push(I)}else y.allowedVendorIds=n(p);return y}}},8462:(t,i,e)=>{"use strict";var s=e(6658).decodeConsentString;t.exports={decodeConsentString:s}},3090:(t,i,e)=>{"use strict";var s=e(7501),n=e(3977),r=n.versionNumBits,o=n.vendorVersionMap;function h(t,i,e){return parseInt(t.substr(i,e),2)}function a(t,i,e){return new Date(100*h(t,i,e))}function c(t){var i=h(t);return String.fromCharCode(i+65).toLowerCase()}function d(t,i,e){var s=t.substr(i,e);return c(s.slice(0,e/2))+c(s.slice(e/2))}function l(t){var i=t.input,e=t.output,s=t.startPosition,n=t.field,r=n.type,o=n.numBits,c=n.decoder,l=n.validator,p=n.listCount;if("function"==typeof l&&!l(e))return{newPosition:s};if("function"==typeof c)return c(i,e,s);var f,m,v="function"==typeof o?o(e):o;switch(r){case"int":return{fieldValue:h(i,s,v)};case"bool":return{fieldValue:(f=i,m=s,1===parseInt(f.substr(m,1),2))};case"date":return{fieldValue:a(i,s,v)};case"bits":return{fieldValue:i.substr(s,v)};case"list":return function(t,i,e,s,n){var r=0;"function"==typeof n?r=n(i):"number"==typeof n&&(r=n);for(var o=e,h=[],a=0;a<r;a+=1){var c=u({input:t,fields:s.fields,startPosition:o});o=c.newPosition,h.push(c.decodedObject)}return{fieldValue:h,newPosition:o}}(i,e,s,n,p);case"language":return{fieldValue:d(i,s,v)};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function u(t){var i=t.input,e=t.fields,s=t.startPosition,n=void 0===s?0:s;return{decodedObject:e.reduce((function(t,e){var s=e.name,r=e.numBits,o=l({input:i,output:t,startPosition:n,field:e}),h=o.fieldValue,a=o.newPosition;return void 0!==h&&(t[s]=h),void 0!==a?n=a:"number"==typeof r&&(n+=r),t}),{}),newPosition:n}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce((function(t,i,e){return"1"===i&&-1===t.indexOf(e+1)&&t.push(e+1),t}),[])},decodeFromBase64:function(t,i){for(var e=t;e.length%4!=0;)e+="=";e=e.replace(/-/g,"+").replace(/_/g,"/");for(var n,a,c=s.decode(e),d="",l=0;l<c.length;l+=1){var p=c.charCodeAt(l).toString(2);d+=(n=p,a=8-p.length,function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",e="",s=0;s<t;s+=1)e+=i;return e}(Math.max(0,a))+n)}return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,e=h(t,0,r);if("number"!=typeof e)throw new Error("ConsentString - Unknown version number in the string to decode");if(!o[e])throw new Error("ConsentString - Unsupported version "+e+" in the string to decode");return u({input:t,fields:i[e].fields}).decodedObject}(d,i)}}},3977:t=>{"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}},8908:(t,i,e)=>{var s;s="undefined"!=typeof window?window:void 0!==e.g?e.g:"undefined"!=typeof self?self:{},t.exports=s},852:(t,i,e)=>{"use strict";e.d(i,{Z:()=>s});const s='<cnx class="cnx-ui-loader" role="presentation"><svg class="cnx-color-accent" version="1.1" viewBox="0 0 79 90" xmlns="http://www.w3.org/2000/svg"><polygon points="21 73.322 11 79 11 12 21 17.678" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polygon points="27 70 27 21 38 27.267 38 63.733" fill="transparent" stroke-linecap="round" stroke-linejoin="round"/><polygon points="44 61 44 31 54 36.769 54 55.231" fill="none" stroke-linecap="round" stroke-linejoin="round"/><polygon points="60 51 60 40 70 45.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg></cnx>'},1682:(t,i,e)=>{"use strict";e.r(i),e.d(i,{LineStream:()=>c,ParseStream:()=>p,Parser:()=>v});var s=function(){function t(){this.listeners={}}var i=t.prototype;return i.on=function(t,i){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(i)},i.off=function(t,i){if(!this.listeners[t])return!1;var e=this.listeners[t].indexOf(i);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(e,1),e>-1},i.trigger=function(t){var i=this.listeners[t];if(i)if(2===arguments.length)for(var e=i.length,s=0;s<e;++s)i[s].call(this,arguments[1]);else for(var n=Array.prototype.slice.call(arguments,1),r=i.length,o=0;o<r;++o)i[o].apply(this,n)},i.dispose=function(){this.listeners={}},i.pipe=function(t){this.on("data",(function(i){t.push(i)}))},t}();function n(){return n=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},n.apply(this,arguments)}var r=e(8908),o=e.n(r),h=function(t){return o().atob?o().atob(t):Buffer.from(t,"base64").toString("binary")};function a(t){for(var i=h(t),e=new Uint8Array(i.length),s=0;s<i.length;s++)e[s]=i.charCodeAt(s);return e}class c extends s{constructor(){super(),this.buffer=""}push(t){let i;for(this.buffer+=t,i=this.buffer.indexOf("\n");i>-1;i=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)}}const d=String.fromCharCode(9),l=function(t){const i=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),e={};return i[1]&&(e.length=parseInt(i[1],10)),i[2]&&(e.offset=parseInt(i[2],10)),e},u=function(t){const i={};if(!t)return i;const e=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let s,n=e.length;for(;n--;)""!==e[n]&&(s=/([^=]*)=(.*)/.exec(e[n]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),i[s[0]]=s[1]);return i};class p extends s{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let i,e;if(0===(t=t.trim()).length)return;if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});this.tagMappers.reduce(((i,e)=>{const s=e(t);return s===t?i:i.concat([s])}),[t]).forEach((t=>{for(let i=0;i<this.customParsers.length;i++)if(this.customParsers[i].call(this,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),i=/^#EXTM3U/.exec(t),i)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(i=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(t),i)return e={type:"tag",tagType:"inf"},i[1]&&(e.duration=parseFloat(i[1])),i[2]&&(e.title=i[2]),void this.trigger("data",e);if(i=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(t),i)return e={type:"tag",tagType:"targetduration"},i[1]&&(e.duration=parseInt(i[1],10)),void this.trigger("data",e);if(i=/^#EXT-X-VERSION:([0-9.]*)?/.exec(t),i)return e={type:"tag",tagType:"version"},i[1]&&(e.version=parseInt(i[1],10)),void this.trigger("data",e);if(i=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(t),i)return e={type:"tag",tagType:"media-sequence"},i[1]&&(e.number=parseInt(i[1],10)),void this.trigger("data",e);if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(t),i)return e={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(e.number=parseInt(i[1],10)),void this.trigger("data",e);if(i=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(t),i)return e={type:"tag",tagType:"playlist-type"},i[1]&&(e.playlistType=i[1]),void this.trigger("data",e);if(i=/^#EXT-X-BYTERANGE:(.*)?$/.exec(t),i)return e=n(l(i[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",e);if(i=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(t),i)return e={type:"tag",tagType:"allow-cache"},i[1]&&(e.allowed=!/NO/.test(i[1])),void this.trigger("data",e);if(i=/^#EXT-X-MAP:(.*)$/.exec(t),i){if(e={type:"tag",tagType:"map"},i[1]){const t=u(i[1]);t.URI&&(e.uri=t.URI),t.BYTERANGE&&(e.byterange=l(t.BYTERANGE))}this.trigger("data",e)}else if(i=/^#EXT-X-STREAM-INF:(.*)$/.exec(t),i){if(e={type:"tag",tagType:"stream-inf"},i[1]){if(e.attributes=u(i[1]),e.attributes.RESOLUTION){const t=e.attributes.RESOLUTION.split("x"),i={};t[0]&&(i.width=parseInt(t[0],10)),t[1]&&(i.height=parseInt(t[1],10)),e.attributes.RESOLUTION=i}e.attributes.BANDWIDTH&&(e.attributes.BANDWIDTH=parseInt(e.attributes.BANDWIDTH,10)),e.attributes["FRAME-RATE"]&&(e.attributes["FRAME-RATE"]=parseFloat(e.attributes["FRAME-RATE"])),e.attributes["PROGRAM-ID"]&&(e.attributes["PROGRAM-ID"]=parseInt(e.attributes["PROGRAM-ID"],10))}this.trigger("data",e)}else{if(i=/^#EXT-X-MEDIA:(.*)$/.exec(t),i)return e={type:"tag",tagType:"media"},i[1]&&(e.attributes=u(i[1])),void this.trigger("data",e);if(i=/^#EXT-X-ENDLIST/.exec(t),i)this.trigger("data",{type:"tag",tagType:"endlist"});else if(i=/^#EXT-X-DISCONTINUITY/.exec(t),i)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(i=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(t),i)return e={type:"tag",tagType:"program-date-time"},i[1]&&(e.dateTimeString=i[1],e.dateTimeObject=new Date(i[1])),void this.trigger("data",e);if(i=/^#EXT-X-KEY:(.*)$/.exec(t),i)return e={type:"tag",tagType:"key"},i[1]&&(e.attributes=u(i[1]),e.attributes.IV&&("0x"===e.attributes.IV.substring(0,2).toLowerCase()&&(e.attributes.IV=e.attributes.IV.substring(2)),e.attributes.IV=e.attributes.IV.match(/.{8}/g),e.attributes.IV[0]=parseInt(e.attributes.IV[0],16),e.attributes.IV[1]=parseInt(e.attributes.IV[1],16),e.attributes.IV[2]=parseInt(e.attributes.IV[2],16),e.attributes.IV[3]=parseInt(e.attributes.IV[3],16),e.attributes.IV=new Uint32Array(e.attributes.IV))),void this.trigger("data",e);if(i=/^#EXT-X-START:(.*)$/.exec(t),i)return e={type:"tag",tagType:"start"},i[1]&&(e.attributes=u(i[1]),e.attributes["TIME-OFFSET"]=parseFloat(e.attributes["TIME-OFFSET"]),e.attributes.PRECISE=/YES/.test(e.attributes.PRECISE)),void this.trigger("data",e);if(i=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(t),i)return e={type:"tag",tagType:"cue-out-cont"},i[1]?e.data=i[1]:e.data="",void this.trigger("data",e);if(i=/^#EXT-X-CUE-OUT:(.*)?$/.exec(t),i)return e={type:"tag",tagType:"cue-out"},i[1]?e.data=i[1]:e.data="",void this.trigger("data",e);if(i=/^#EXT-X-CUE-IN:(.*)?$/.exec(t),i)return e={type:"tag",tagType:"cue-in"},i[1]?e.data=i[1]:e.data="",void this.trigger("data",e);if(i=/^#EXT-X-SKIP:(.*)$/.exec(t),i&&i[1])return e={type:"tag",tagType:"skip"},e.attributes=u(i[1]),e.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(e.attributes["SKIPPED-SEGMENTS"]=parseInt(e.attributes["SKIPPED-SEGMENTS"],10)),e.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(e.attributes["RECENTLY-REMOVED-DATERANGES"]=e.attributes["RECENTLY-REMOVED-DATERANGES"].split(d)),void this.trigger("data",e);if(i=/^#EXT-X-PART:(.*)$/.exec(t),i&&i[1])return e={type:"tag",tagType:"part"},e.attributes=u(i[1]),["DURATION"].forEach((function(t){e.attributes.hasOwnProperty(t)&&(e.attributes[t]=parseFloat(e.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){e.attributes.hasOwnProperty(t)&&(e.attributes[t]=/YES/.test(e.attributes[t]))})),e.attributes.hasOwnProperty("BYTERANGE")&&(e.attributes.byterange=l(e.attributes.BYTERANGE)),void this.trigger("data",e);if(i=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t),i&&i[1])return e={type:"tag",tagType:"server-control"},e.attributes=u(i[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){e.attributes.hasOwnProperty(t)&&(e.attributes[t]=parseFloat(e.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){e.attributes.hasOwnProperty(t)&&(e.attributes[t]=/YES/.test(e.attributes[t]))})),void this.trigger("data",e);if(i=/^#EXT-X-PART-INF:(.*)$/.exec(t),i&&i[1])return e={type:"tag",tagType:"part-inf"},e.attributes=u(i[1]),["PART-TARGET"].forEach((function(t){e.attributes.hasOwnProperty(t)&&(e.attributes[t]=parseFloat(e.attributes[t]))})),void this.trigger("data",e);if(i=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t),i&&i[1])return e={type:"tag",tagType:"preload-hint"},e.attributes=u(i[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(e.attributes.hasOwnProperty(t)){e.attributes[t]=parseInt(e.attributes[t],10);const i="BYTERANGE-LENGTH"===t?"length":"offset";e.attributes.byterange=e.attributes.byterange||{},e.attributes.byterange[i]=e.attributes[t],delete e.attributes[t]}})),void this.trigger("data",e);if(i=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t),i&&i[1])return e={type:"tag",tagType:"rendition-report"},e.attributes=u(i[1]),["LAST-MSN","LAST-PART"].forEach((function(t){e.attributes.hasOwnProperty(t)&&(e.attributes[t]=parseInt(e.attributes[t],10))})),void this.trigger("data",e);this.trigger("data",{type:"tag",data:t.slice(4)})}}}else this.trigger("data",{type:"comment",text:t.slice(1)})}))}addParser({expression:t,customType:i,dataParser:e,segment:s}){"function"!=typeof e&&(e=t=>t),this.customParsers.push((n=>{if(t.exec(n))return this.trigger("data",{type:"custom",data:e(n),customType:i,segment:s}),!0}))}addTagMapper({expression:t,map:i}){this.tagMappers.push((e=>t.test(e)?i(e):e))}}const f=function(t){const i={};return Object.keys(t).forEach((function(e){var s;i[(s=e,s.toLowerCase().replace(/-(\w)/g,(t=>t[1].toUpperCase())))]=t[e]})),i},m=function(t){const{serverControl:i,targetDuration:e,partTargetDuration:s}=t;if(!i)return;const n="#EXT-X-SERVER-CONTROL",r="holdBack",o="partHoldBack",h=e&&3*e,a=s&&2*s;e&&!i.hasOwnProperty(r)&&(i[r]=h,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${h}).`})),h&&i[r]<h&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${i[r]}) to targetDuration * 3 (${h})`}),i[r]=h),s&&!i.hasOwnProperty(o)&&(i[o]=3*s,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${i[o]}).`})),s&&i[o]<a&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${i[o]}) to partTargetDuration * 2 (${a}).`}),i[o]=a)};class v extends s{constructor(){super(),this.lineStream=new c,this.parseStream=new p,this.lineStream.pipe(this.parseStream);const t=this,i=[];let e,s,r={},o=!1;const h=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let l=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let u=0,v=0;this.on("end",(()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&e&&(r.map=e),!r.key&&s&&(r.key=s),r.timeline||"number"!=typeof l||(r.timeline=l),this.manifest.preloadSegment=r)})),this.parseStream.on("data",(function(c){let p,g;({tag(){({version(){c.version&&(this.manifest.version=c.version)},"allow-cache"(){this.manifest.allowCache=c.allowed,"allowed"in c||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const t={};"length"in c&&(r.byterange=t,t.length=c.length,"offset"in c||(c.offset=u)),"offset"in c&&(r.byterange=t,t.offset=c.offset),u=t.offset+t.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),c.duration>0&&(r.duration=c.duration),0===c.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(c.attributes)if("NONE"!==c.attributes.METHOD)if(c.attributes.URI){if("com.apple.streamingkeydelivery"===c.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:c.attributes});if("com.microsoft.playready"===c.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:c.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===c.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(c.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===c.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==c.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):c.attributes.KEYID&&"0x"===c.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:c.attributes.KEYFORMAT,keyId:c.attributes.KEYID.substring(2)},pssh:a(c.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}c.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:c.attributes.METHOD||"AES-128",uri:c.attributes.URI},void 0!==c.attributes.IV&&(s.iv=c.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else s=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(c.number)?this.manifest.mediaSequence=c.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+c.number})},"discontinuity-sequence"(){isFinite(c.number)?(this.manifest.discontinuitySequence=c.number,l=c.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+c.number})},"playlist-type"(){/VOD|EVENT/.test(c.playlistType)?this.manifest.playlistType=c.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+c.playlist})},map(){e={},c.uri&&(e.uri=c.uri),c.byterange&&(e.byterange=c.byterange),s&&(e.key=s)},"stream-inf"(){this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||d,c.attributes?(r.attributes||(r.attributes={}),n(r.attributes,c.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,!(c.attributes&&c.attributes.TYPE&&c.attributes["GROUP-ID"]&&c.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const t=this.manifest.mediaGroups[c.attributes.TYPE];t[c.attributes["GROUP-ID"]]=t[c.attributes["GROUP-ID"]]||{},p=t[c.attributes["GROUP-ID"]],g={default:/yes/i.test(c.attributes.DEFAULT)},g.default?g.autoselect=!0:g.autoselect=/yes/i.test(c.attributes.AUTOSELECT),c.attributes.LANGUAGE&&(g.language=c.attributes.LANGUAGE),c.attributes.URI&&(g.uri=c.attributes.URI),c.attributes["INSTREAM-ID"]&&(g.instreamId=c.attributes["INSTREAM-ID"]),c.attributes.CHARACTERISTICS&&(g.characteristics=c.attributes.CHARACTERISTICS),c.attributes.FORCED&&(g.forced=/yes/i.test(c.attributes.FORCED)),p[c.attributes.NAME]=g},discontinuity(){l+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=c.dateTimeString,this.manifest.dateTimeObject=c.dateTimeObject),r.dateTimeString=c.dateTimeString,r.dateTimeObject=c.dateTimeObject},targetduration(){!isFinite(c.duration)||c.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+c.duration}):(this.manifest.targetDuration=c.duration,m.call(this,this.manifest))},start(){c.attributes&&!isNaN(c.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:c.attributes["TIME-OFFSET"],precise:c.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=c.data},"cue-out-cont"(){r.cueOutCont=c.data},"cue-in"(){r.cueIn=c.data},skip(){this.manifest.skip=f(c.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",c.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const t=this.manifest.segments.length,i=f(c.attributes);r.parts=r.parts||[],r.parts.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=v),v=i.byterange.offset+i.byterange.length);const e=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${e} for segment #${t}`,c.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(((t,i)=>{t.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${i} lacks required attribute(s): LAST-PART`})}))},"server-control"(){const t=this.manifest.serverControl=f(c.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),m.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const t=this.manifest.segments.length,i=f(c.attributes),e=i.type&&"PART"===i.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=e?v:0,e&&(v=i.byterange.offset+i.byterange.length)));const s=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${s} for segment #${t}`,c.attributes,["TYPE","URI"]),i.type)for(let e=0;e<r.preloadHints.length-1;e++){const n=r.preloadHints[e];n.type&&(n.type===i.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${s} for segment #${t} has the same TYPE ${i.type} as preload hint #${e}`}))}},"rendition-report"(){const t=f(c.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);const i=this.manifest.renditionReports.length-1,e=["LAST-MSN","URI"];o&&e.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${i}`,c.attributes,e)},"part-inf"(){this.manifest.partInf=f(c.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",c.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),m.call(this,this.manifest)}}[c.tagType]||h).call(t)},uri(){r.uri=c.uri,i.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),s&&(r.key=s),r.timeline=l,e&&(r.map=e),v=0,r={}},comment(){},custom(){c.segment?(r.custom=r.custom||{},r.custom[c.customType]=c.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[c.customType]=c.data)}})[c.type].call(t)}))}warnOnMissingAttributes_(t,i,e){const s=[];e.forEach((function(t){i.hasOwnProperty(t)||s.push(t)})),s.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${s.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}},4467:(t,i,e)=>{"use strict";var s;e.d(i,{q:()=>s}),function(t){t[t.BottomRight=0]="BottomRight",t[t.TopLeft=1]="TopLeft"}(s||(s={}))},5919:(t,i,e)=>{"use strict";var s;e.d(i,{x:()=>s}),function(t){t[t.Playing=0]="Playing",t[t.Paused=1]="Paused",t[t.Stopped=2]="Stopped",t[t.Buffering=3]="Buffering",t[t.Preroll=4]="Preroll",t[t.Postroll=5]="Postroll",t[t.Hidden=6]="Hidden"}(s||(s={}))},4492:(t,i,e)=>{"use strict";t.exports=e(8836)},3996:(t,i,e)=>{"use strict";var s=i,n=e(7025),r=e(9935);function o(t,i,e,s){var r=!1;if(i.resolvedType)if(i.resolvedType instanceof n){t("switch(d%s){",s);for(var o=i.resolvedType.values,h=Object.keys(o),a=0;a<h.length;++a)o[h[a]]!==i.typeDefault||r||(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',s,s,s),i.repeated||t("break"),r=!0),t("case%j:",h[a])("case %i:",o[h[a]])("m%s=%j",s,o[h[a]])("break");t("}")}else t('if(typeof d%s!=="object")',s)("throw TypeError(%j)",i.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",s,e,s);else{var c=!1;switch(i.type){case"double":case"float":t("m%s=Number(d%s)",s,s);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",s,s);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",s,s);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",s,s,c)('else if(typeof d%s==="string")',s)("m%s=parseInt(d%s,10)",s,s)('else if(typeof d%s==="number")',s)("m%s=d%s",s,s)('else if(typeof d%s==="object")',s)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",s,s,s,c?"true":"");break;case"bytes":t('if(typeof d%s==="string")',s)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",s,s,s)("else if(d%s.length >= 0)",s)("m%s=d%s",s,s);break;case"string":t("m%s=String(d%s)",s,s);break;case"bool":t("m%s=Boolean(d%s)",s,s)}}return t}function h(t,i,e,s){if(i.resolvedType)i.resolvedType instanceof n?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",s,e,s,s,e,s,s):t("d%s=types[%i].toObject(m%s,o)",s,e,s);else{var r=!1;switch(i.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",s,s,s,s);break;case"uint64":r=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',s)("d%s=o.longs===String?String(m%s):m%s",s,s,s)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",s,s,s,s,r?"true":"",s);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",s,s,s,s,s);break;default:t("d%s=m%s",s,s)}}return t}s.fromObject=function(t){var i=t.fieldsArray,e=r.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!i.length)return e("return new this.ctor");e("var m=new this.ctor");for(var s=0;s<i.length;++s){var h=i[s].resolve(),a=r.safeProp(h.name);h.map?(e("if(d%s){",a)('if(typeof d%s!=="object")',a)("throw TypeError(%j)",h.fullName+": object expected")("m%s={}",a)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",a),o(e,h,s,a+"[ks[i]]")("}")("}")):h.repeated?(e("if(d%s){",a)("if(!Array.isArray(d%s))",a)("throw TypeError(%j)",h.fullName+": array expected")("m%s=[]",a)("for(var i=0;i<d%s.length;++i){",a),o(e,h,s,a+"[i]")("}")("}")):(h.resolvedType instanceof n||e("if(d%s!=null){",a),o(e,h,s,a),h.resolvedType instanceof n||e("}"))}return e("return m")},s.toObject=function(t){var i=t.fieldsArray.slice().sort(r.compareFieldsById);if(!i.length)return r.codegen()("return {}");for(var e=r.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),s=[],o=[],a=[],c=0;c<i.length;++c)i[c].partOf||(i[c].resolve().repeated?s:i[c].map?o:a).push(i[c]);if(s.length){for(e("if(o.arrays||o.defaults){"),c=0;c<s.length;++c)e("d%s=[]",r.safeProp(s[c].name));e("}")}if(o.length){for(e("if(o.objects||o.defaults){"),c=0;c<o.length;++c)e("d%s={}",r.safeProp(o[c].name));e("}")}if(a.length){for(e("if(o.defaults){"),c=0;c<a.length;++c){var d=a[c],l=r.safeProp(d.name);if(d.resolvedType instanceof n)e("d%s=o.enums===String?%j:%j",l,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)e("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var u="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";e("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",l,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else e("d%s=%j",l,d.typeDefault)}e("}")}var p=!1;for(c=0;c<i.length;++c){d=i[c];var f=t.tt.indexOf(d);l=r.safeProp(d.name);d.map?(p||(p=!0,e("var ks2")),e("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),h(e,d,f,l+"[ks2[j]]")("}")):d.repeated?(e("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),h(e,d,f,l+"[j]")("}")):(e("if(m%s!=null&&m.hasOwnProperty(%j)){",l,d.name),h(e,d,f,l),d.partOf&&e("if(o.oneofs)")("d%s=%j",r.safeProp(d.partOf.name),d.name)),e("}")}return e("return d")}},5305:(t,i,e)=>{"use strict";t.exports=function(t){var i=r.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter((function(t){return t.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&i("if((t&7)===4)")("break");i("switch(t>>>3){");for(var e=0;e<t.fieldsArray.length;++e){var h=t.tt[e].resolve(),a=h.resolvedType instanceof s?"int32":h.type,c="m"+r.safeProp(h.name);i("case %i: {",h.id),h.map?(i("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[h.keyType]?i("k=%j",n.defaults[h.keyType]):i("k=null"),void 0!==n.defaults[a]?i("value=%j",n.defaults[a]):i("value=null"),i("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",h.keyType)("case 2:"),void 0===n.basic[a]?i("value=types[%i].decode(r,r.uint32())",e):i("value=r.%s()",a),i("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[h.keyType]?i('%s[typeof k==="object"?util.longToHash(k):k]=value',c):i("%s[k]=value",c)):h.repeated?(i("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==n.packed[a]&&i("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,a)("}else"),void 0===n.basic[a]?i(h.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,e):i("%s.push(r.%s())",c,a)):void 0===n.basic[a]?i(h.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,e):i("%s=r.%s()",c,a),i("break")("}")}for(i("default:")("r.skipType(t&7)")("break")("}")("}"),e=0;e<t.tt.length;++e){var d=t.tt[e];d.required&&i("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return i("return m")};var s=e(7025),n=e(7063),r=e(9935);function o(t){return"missing required '"+t.name+"'"}},4928:(t,i,e)=>{"use strict";t.exports=function(t){for(var i,e=r.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),h=t.fieldsArray.slice().sort(r.compareFieldsById),a=0;a<h.length;++a){var c=h[a].resolve(),d=t.tt.indexOf(c),l=c.resolvedType instanceof s?"int32":c.type,u=n.basic[l];i="m"+r.safeProp(c.name),c.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",i,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",i)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|n.mapKey[c.keyType],c.keyType),void 0===u?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,i):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|u,l,i),e("}")("}")):c.repeated?(e("if(%s!=null&&%s.length){",i,i),c.packed&&void 0!==n.packed[l]?e("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",i)("w.%s(%s[i])",l,i)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",i),void 0===u?o(e,c,d,i+"[i]"):e("w.uint32(%i).%s(%s[i])",(c.id<<3|u)>>>0,l,i)),e("}")):(c.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",i,c.name),void 0===u?o(e,c,d,i):e("w.uint32(%i).%s(%s)",(c.id<<3|u)>>>0,l,i))}return e("return w")};var s=e(7025),n=e(7063),r=e(9935);function o(t,i,e,s){return i.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",e,s,(i.id<<3|3)>>>0,(i.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",e,s,(i.id<<3|2)>>>0)}},7025:(t,i,e)=>{"use strict";t.exports=o;var s=e(3243);((o.prototype=Object.create(s.prototype)).constructor=o).className="Enum";var n=e(9313),r=e(9935);function o(t,i,e,n,r,o){if(s.call(this,t,e),i&&"object"!=typeof i)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=r||{},this.valuesOptions=o,this.reserved=void 0,i)for(var h=Object.keys(i),a=0;a<h.length;++a)"number"==typeof i[h[a]]&&(this.valuesById[this.values[h[a]]=i[h[a]]]=h[a])}o.fromJSON=function(t,i){var e=new o(t,i.values,i.options,i.comment,i.comments);return e.reserved=i.reserved,e},o.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",i?this.comment:void 0,"comments",i?this.comments:void 0])},o.prototype.add=function(t,i,e,s){if(!r.isString(t))throw TypeError("name must be a string");if(!r.isInteger(i))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(i))throw Error("id "+i+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[i]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+i+" in "+this);this.values[t]=i}else this.valuesById[this.values[t]=i]=t;return s&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[t]=s||null),this.comments[t]=e||null,this},o.prototype.remove=function(t){if(!r.isString(t))throw TypeError("name must be a string");var i=this.values[t];if(null==i)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[i],delete this.values[t],delete this.comments[t],this.valuesOptions&&delete this.valuesOptions[t],this},o.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},o.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},3548:(t,i,e)=>{"use strict";t.exports=c;var s=e(3243);((c.prototype=Object.create(s.prototype)).constructor=c).className="Field";var n,r=e(7025),o=e(7063),h=e(9935),a=/^required|optional|repeated$/;function c(t,i,e,n,r,c,d){if(h.isObject(n)?(d=r,c=n,n=r=void 0):h.isObject(r)&&(d=c,c=r,r=void 0),s.call(this,t,c),!h.isInteger(i)||i<0)throw TypeError("id must be a non-negative integer");if(!h.isString(e))throw TypeError("type must be a string");if(void 0!==n&&!a.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==r&&!h.isString(r))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=e,this.id=i,this.extend=r||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!h.Long&&void 0!==o.long[e],this.bytes="bytes"===e,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.it=null,this.comment=d}c.fromJSON=function(t,i){return new c(t,i.id,i.type,i.rule,i.extend,i.options,i.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this.it&&(this.it=!1!==this.getOption("packed")),this.it}}),c.prototype.setOption=function(t,i,e){return"packed"===t&&(this.it=null),s.prototype.setOption.call(this,t,i,e)},c.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return h.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof r&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof r)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=h.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;h.base64.test(this.typeDefault)?h.base64.decode(this.typeDefault,t=h.newBuffer(h.base64.length(this.typeDefault)),0):h.utf8.write(this.typeDefault,t=h.newBuffer(h.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=h.emptyObject:this.repeated?this.defaultValue=h.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),s.prototype.resolve.call(this)},c.d=function(t,i,e,s){return"function"==typeof i?i=h.decorateType(i).name:i&&"object"==typeof i&&(i=h.decorateEnum(i).name),function(n,r){h.decorateType(n.constructor).add(new c(r,t,i,e,{default:s}))}},c.et=function(t){n=t}},8836:(t,i,e)=>{"use strict";var s=t.exports=e(9482);s.build="light",s.load=function(t,i,e){return"function"==typeof i?(e=i,i=new s.Root):i||(i=new s.Root),i.load(t,e)},s.loadSync=function(t,i){return i||(i=new s.Root),i.loadSync(t)},s.encoder=e(4928),s.decoder=e(5305),s.verifier=e(4497),s.converter=e(3996),s.ReflectionObject=e(3243),s.Namespace=e(9313),s.Root=e(9424),s.Enum=e(7025),s.Type=e(7645),s.Field=e(3548),s.OneOf=e(7598),s.MapField=e(6039),s.Service=e(7513),s.Method=e(4429),s.Message=e(8368),s.wrappers=e(1667),s.types=e(7063),s.util=e(9935),s.ReflectionObject.et(s.Root),s.Namespace.et(s.Type,s.Service,s.Enum),s.Root.et(s.Type),s.Field.et(s.Type)},9482:(t,i,e)=>{"use strict";var s=i;function n(){s.util.et(),s.Writer.et(s.BufferWriter),s.Reader.et(s.BufferReader)}s.build="minimal",s.Writer=e(1173),s.BufferWriter=e(3155),s.Reader=e(1408),s.BufferReader=e(593),s.util=e(9693),s.rpc=e(5994),s.roots=e(5054),s.configure=n,n()},6039:(t,i,e)=>{"use strict";t.exports=o;var s=e(3548);((o.prototype=Object.create(s.prototype)).constructor=o).className="MapField";var n=e(7063),r=e(9935);function o(t,i,e,n,o,h){if(s.call(this,t,i,n,void 0,void 0,o,h),!r.isString(e))throw TypeError("keyType must be a string");this.keyType=e,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(t,i){return new o(t,i.id,i.keyType,i.type,i.options,i.comment)},o.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return s.prototype.resolve.call(this)},o.d=function(t,i,e){return"function"==typeof e?e=r.decorateType(e).name:e&&"object"==typeof e&&(e=r.decorateEnum(e).name),function(s,n){r.decorateType(s.constructor).add(new o(n,t,i,e))}}},8368:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)this[i[e]]=t[i[e]]}n.create=function(t){return this.$type.create(t)},n.encode=function(t,i){return this.$type.encode(t,i)},n.encodeDelimited=function(t,i){return this.$type.encodeDelimited(t,i)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,i){return this.$type.toObject(t,i)},n.prototype.toJSON=function(){return this.$type.toObject(this,s.toJSONOptions)}},4429:(t,i,e)=>{"use strict";t.exports=r;var s=e(3243);((r.prototype=Object.create(s.prototype)).constructor=r).className="Method";var n=e(9935);function r(t,i,e,r,o,h,a,c,d){if(n.isObject(o)?(a=o,o=h=void 0):n.isObject(h)&&(a=h,h=void 0),void 0!==i&&!n.isString(i))throw TypeError("type must be a string");if(!n.isString(e))throw TypeError("requestType must be a string");if(!n.isString(r))throw TypeError("responseType must be a string");s.call(this,t,a),this.type=i||"rpc",this.requestType=e,this.requestStream=!!o||void 0,this.responseType=r,this.responseStream=!!h||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=d}r.fromJSON=function(t,i){return new r(t,i.type,i.requestType,i.responseType,i.requestStream,i.responseStream,i.options,i.comment,i.parsedOptions)},r.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",i?this.comment:void 0,"parsedOptions",this.parsedOptions])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),s.prototype.resolve.call(this))}},9313:(t,i,e)=>{"use strict";t.exports=l;var s=e(3243);((l.prototype=Object.create(s.prototype)).constructor=l).className="Namespace";var n,r,o,h=e(3548),a=e(9935),c=e(7598);function d(t,i){if(t&&t.length){for(var e={},s=0;s<t.length;++s)e[t[s].name]=t[s].toJSON(i);return e}}function l(t,i){s.call(this,t,i),this.nested=void 0,this.st=null}function u(t){return t.st=null,t}l.fromJSON=function(t,i){return new l(t,i.options).addJSON(i.nested)},l.arrayToJSON=d,l.isReservedId=function(t,i){if(t)for(var e=0;e<t.length;++e)if("string"!=typeof t[e]&&t[e][0]<=i&&t[e][1]>i)return!0;return!1},l.isReservedName=function(t,i){if(t)for(var e=0;e<t.length;++e)if(t[e]===i)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this.st||(this.st=a.toArray(this.nested))}}),l.prototype.toJSON=function(t){return a.toObject(["options",this.options,"nested",d(this.nestedArray,t)])},l.prototype.addJSON=function(t){if(t)for(var i,e=Object.keys(t),s=0;s<e.length;++s)i=t[e[s]],this.add((void 0!==i.fields?n.fromJSON:void 0!==i.values?o.fromJSON:void 0!==i.methods?r.fromJSON:void 0!==i.id?h.fromJSON:l.fromJSON)(e[s],i));return this},l.prototype.get=function(t){return this.nested&&this.nested[t]||null},l.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},l.prototype.add=function(t){if(!(t instanceof h&&void 0!==t.extend||t instanceof n||t instanceof c||t instanceof o||t instanceof r||t instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var i=this.get(t.name);if(i){if(!(i instanceof l&&t instanceof l)||i instanceof n||i instanceof r)throw Error("duplicate name '"+t.name+"' in "+this);for(var e=i.nestedArray,s=0;s<e.length;++s)t.add(e[s]);this.remove(i),this.nested||(this.nested={}),t.setOptions(i.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),u(this)},l.prototype.remove=function(t){if(!(t instanceof s))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),u(this)},l.prototype.define=function(t,i){if(a.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var e=this;t.length>0;){var s=t.shift();if(e.nested&&e.nested[s]){if(!((e=e.nested[s])instanceof l))throw Error("path conflicts with non-namespace objects")}else e.add(e=new l(s))}return i&&e.addJSON(i),e},l.prototype.resolveAll=function(){for(var t=this.nestedArray,i=0;i<t.length;)t[i]instanceof l?t[i++].resolveAll():t[i++].resolve();return this.resolve()},l.prototype.lookup=function(t,i,e){if("boolean"==typeof i?(e=i,i=void 0):i&&!Array.isArray(i)&&(i=[i]),a.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),i);var s=this.get(t[0]);if(s){if(1===t.length){if(!i||i.indexOf(s.constructor)>-1)return s}else if(s instanceof l&&(s=s.lookup(t.slice(1),i,!0)))return s}else for(var n=0;n<this.nestedArray.length;++n)if(this.st[n]instanceof l&&(s=this.st[n].lookup(t,i,!0)))return s;return null===this.parent||e?null:this.parent.lookup(t,i)},l.prototype.lookupType=function(t){var i=this.lookup(t,[n]);if(!i)throw Error("no such type: "+t);return i},l.prototype.lookupEnum=function(t){var i=this.lookup(t,[o]);if(!i)throw Error("no such Enum '"+t+"' in "+this);return i},l.prototype.lookupTypeOrEnum=function(t){var i=this.lookup(t,[n,o]);if(!i)throw Error("no such Type or Enum '"+t+"' in "+this);return i},l.prototype.lookupService=function(t){var i=this.lookup(t,[r]);if(!i)throw Error("no such Service '"+t+"' in "+this);return i},l.et=function(t,i,e){n=t,r=i,o=e}},3243:(t,i,e)=>{"use strict";t.exports=r,r.className="ReflectionObject";var s,n=e(9935);function r(t,i){if(!n.isString(t))throw TypeError("name must be a string");if(i&&!n.isObject(i))throw TypeError("options must be an object");this.options=i,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(r.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],i=this.parent;i;)t.unshift(i.name),i=i.parent;return t.join(".")}}}),r.prototype.toJSON=function(){throw Error()},r.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var i=t.root;i instanceof s&&i.nt(this)},r.prototype.onRemove=function(t){var i=t.root;i instanceof s&&i.rt(this),this.parent=null,this.resolved=!1},r.prototype.resolve=function(){return this.resolved||this.root instanceof s&&(this.resolved=!0),this},r.prototype.getOption=function(t){if(this.options)return this.options[t]},r.prototype.setOption=function(t,i,e){return e&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=i),this},r.prototype.setParsedOption=function(t,i,e){this.parsedOptions||(this.parsedOptions=[]);var s=this.parsedOptions;if(e){var r=s.find((function(i){return Object.prototype.hasOwnProperty.call(i,t)}));if(r){var o=r[t];n.setProperty(o,e,i)}else(r={})[t]=n.setProperty({},e,i),s.push(r)}else{var h={};h[t]=i,s.push(h)}return this},r.prototype.setOptions=function(t,i){if(t)for(var e=Object.keys(t),s=0;s<e.length;++s)this.setOption(e[s],t[e[s]],i);return this},r.prototype.toString=function(){var t=this.constructor.className,i=this.fullName;return i.length?t+" "+i:t},r.et=function(t){s=t}},7598:(t,i,e)=>{"use strict";t.exports=o;var s=e(3243);((o.prototype=Object.create(s.prototype)).constructor=o).className="OneOf";var n=e(3548),r=e(9935);function o(t,i,e,n){if(Array.isArray(i)||(e=i,i=void 0),s.call(this,t,e),void 0!==i&&!Array.isArray(i))throw TypeError("fieldNames must be an Array");this.oneof=i||[],this.fieldsArray=[],this.comment=n}function h(t){if(t.parent)for(var i=0;i<t.fieldsArray.length;++i)t.fieldsArray[i].parent||t.parent.add(t.fieldsArray[i])}o.fromJSON=function(t,i){return new o(t,i.oneof,i.options,i.comment)},o.prototype.toJSON=function(t){var i=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"oneof",this.oneof,"comment",i?this.comment:void 0])},o.prototype.add=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,h(this),this},o.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var i=this.fieldsArray.indexOf(t);if(i<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(i,1),(i=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(i,1),t.partOf=null,this},o.prototype.onAdd=function(t){s.prototype.onAdd.call(this,t);for(var i=0;i<this.oneof.length;++i){var e=t.get(this.oneof[i]);e&&!e.partOf&&(e.partOf=this,this.fieldsArray.push(e))}h(this)},o.prototype.onRemove=function(t){for(var i,e=0;e<this.fieldsArray.length;++e)(i=this.fieldsArray[e]).parent&&i.parent.remove(i);s.prototype.onRemove.call(this,t)},o.d=function(){for(var t=new Array(arguments.length),i=0;i<arguments.length;)t[i]=arguments[i++];return function(i,e){r.decorateType(i.constructor).add(new o(e,t)),Object.defineProperty(i,e,{get:r.oneOfGetter(t),set:r.oneOfSetter(t)})}}},1408:(t,i,e)=>{"use strict";t.exports=a;var s,n=e(9693),r=n.LongBits,o=n.utf8;function h(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function a(t){this.buf=t,this.pos=0,this.len=t.length}var c,d="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new a(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new a(t);throw Error("illegal buffer")},l=function(){return n.Buffer?function(t){return(a.create=function(t){return n.Buffer.isBuffer(t)?new s(t):d(t)})(t)}:d};function u(){var t=new r(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw h(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw h(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw h(this,8);return new r(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}a.create=l(),a.prototype.ot=n.Array.prototype.subarray||n.Array.prototype.slice,a.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,h(this,10);return c}),a.prototype.int32=function(){return 0|this.uint32()},a.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},a.prototype.bool=function(){return 0!==this.uint32()},a.prototype.fixed32=function(){if(this.pos+4>this.len)throw h(this,4);return p(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw h(this,4);return 0|p(this.buf,this.pos+=4)},a.prototype.float=function(){if(this.pos+4>this.len)throw h(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},a.prototype.double=function(){if(this.pos+8>this.len)throw h(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},a.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw h(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,e):i===e?new this.buf.constructor(0):this.ot.call(this.buf,i,e)},a.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},a.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw h(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw h(this)}while(128&this.buf[this.pos++]);return this},a.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},a.et=function(t){s=t,a.create=l(),s.et();var i=n.Long?"toLong":"toNumber";n.merge(a.prototype,{int64:function(){return u.call(this)[i](!1)},uint64:function(){return u.call(this)[i](!0)},sint64:function(){return u.call(this).zzDecode()[i](!1)},fixed64:function(){return f.call(this)[i](!0)},sfixed64:function(){return f.call(this)[i](!1)}})}},593:(t,i,e)=>{"use strict";t.exports=r;var s=e(1408);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(9693);function r(t){s.call(this,t)}r.et=function(){n.Buffer&&(r.prototype.ot=n.Buffer.prototype.slice)},r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},r.et()},9424:(t,i,e)=>{"use strict";t.exports=l;var s=e(9313);((l.prototype=Object.create(s.prototype)).constructor=l).className="Root";var n,r,o,h=e(3548),a=e(7025),c=e(7598),d=e(9935);function l(t){s.call(this,"",t),this.deferred=[],this.files=[]}function u(){}l.fromJSON=function(t,i){return i||(i=new l),t.options&&i.setOptions(t.options),i.addJSON(t.nested)},l.prototype.resolvePath=d.path.resolve,l.prototype.fetch=d.fetch,l.prototype.load=function t(i,e,s){"function"==typeof e&&(s=e,e=void 0);var n=this;if(!s)return d.asPromise(t,n,i,e);var h=s===u;function a(t,i){if(s){var e=s;if(s=null,h)throw t;e(t,i)}}function c(t){var i=t.lastIndexOf("google/protobuf/");if(i>-1){var e=t.substring(i);if(e in o)return e}return null}function l(t,i){try{if(d.isString(i)&&"{"===i.charAt(0)&&(i=JSON.parse(i)),d.isString(i)){r.filename=t;var s,o=r(i,n,e),l=0;if(o.imports)for(;l<o.imports.length;++l)(s=c(o.imports[l])||n.resolvePath(t,o.imports[l]))&&p(s);if(o.weakImports)for(l=0;l<o.weakImports.length;++l)(s=c(o.weakImports[l])||n.resolvePath(t,o.weakImports[l]))&&p(s,!0)}else n.setOptions(i.options).addJSON(i.nested)}catch(t){a(t)}h||f||a(null,n)}function p(t,i){if(t=c(t)||t,!(n.files.indexOf(t)>-1))if(n.files.push(t),t in o)h?l(t,o[t]):(++f,setTimeout((function(){--f,l(t,o[t])})));else if(h){var e;try{e=d.fs.readFileSync(t).toString("utf8")}catch(t){return void(i||a(t))}l(t,e)}else++f,n.fetch(t,(function(e,r){--f,s&&(e?i?f||a(null,n):a(e):l(t,r))}))}var f=0;d.isString(i)&&(i=[i]);for(var m,v=0;v<i.length;++v)(m=n.resolvePath("",i[v]))&&p(m);if(h)return n;f||a(null,n)},l.prototype.loadSync=function(t,i){if(!d.isNode)throw Error("not supported");return this.load(t,i,u)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(t){return"'extend "+t.extend+"' in "+t.parent.fullName})).join(", "));return s.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(t,i){var e=i.parent.lookup(i.extend);if(e){var s=new h(i.fullName,i.id,i.type,i.rule,void 0,i.options);return e.get(s.name)||(s.declaringField=i,i.extensionField=s,e.add(s)),!0}return!1}l.prototype.nt=function(t){if(t instanceof h)void 0===t.extend||t.extensionField||f(0,t)||this.deferred.push(t);else if(t instanceof a)p.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof c)){if(t instanceof n)for(var i=0;i<this.deferred.length;)f(0,this.deferred[i])?this.deferred.splice(i,1):++i;for(var e=0;e<t.nestedArray.length;++e)this.nt(t.st[e]);p.test(t.name)&&(t.parent[t.name]=t)}},l.prototype.rt=function(t){if(t instanceof h){if(void 0!==t.extend)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var i=this.deferred.indexOf(t);i>-1&&this.deferred.splice(i,1)}}else if(t instanceof a)p.test(t.name)&&delete t.parent[t.name];else if(t instanceof s){for(var e=0;e<t.nestedArray.length;++e)this.rt(t.st[e]);p.test(t.name)&&delete t.parent[t.name]}},l.et=function(t,i,e){n=t,r=i,o=e}},5054:t=>{"use strict";t.exports={}},5994:(t,i,e)=>{"use strict";i.Service=e(7948)},7948:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t,i,e){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(e)}(n.prototype=Object.create(s.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(i,e,n,r,o){if(!r)throw TypeError("request must be specified");var h=this;if(!o)return s.asPromise(t,h,i,e,n,r);if(h.rpcImpl)try{return h.rpcImpl(i,e[h.requestDelimited?"encodeDelimited":"encode"](r).finish(),(function(t,e){if(t)return h.emit("error",t,i),o(t);if(null!==e){if(!(e instanceof n))try{e=n[h.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return h.emit("error",t,i),o(t)}return h.emit("data",e,i),o(null,e)}h.end(!0)}))}catch(t){return h.emit("error",t,i),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},7513:(t,i,e)=>{"use strict";t.exports=h;var s=e(9313);((h.prototype=Object.create(s.prototype)).constructor=h).className="Service";var n=e(4429),r=e(9935),o=e(5994);function h(t,i){s.call(this,t,i),this.methods={},this.ht=null}function a(t){return t.ht=null,t}h.fromJSON=function(t,i){var e=new h(t,i.options);if(i.methods)for(var s=Object.keys(i.methods),r=0;r<s.length;++r)e.add(n.fromJSON(s[r],i.methods[s[r]]));return i.nested&&e.addJSON(i.nested),e.comment=i.comment,e},h.prototype.toJSON=function(t){var i=s.prototype.toJSON.call(this,t),e=!!t&&Boolean(t.keepComments);return r.toObject(["options",i&&i.options||void 0,"methods",s.arrayToJSON(this.methodsArray,t)||{},"nested",i&&i.nested||void 0,"comment",e?this.comment:void 0])},Object.defineProperty(h.prototype,"methodsArray",{get:function(){return this.ht||(this.ht=r.toArray(this.methods))}}),h.prototype.get=function(t){return this.methods[t]||s.prototype.get.call(this,t)},h.prototype.resolveAll=function(){for(var t=this.methodsArray,i=0;i<t.length;++i)t[i].resolve();return s.prototype.resolve.call(this)},h.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof n?(this.methods[t.name]=t,t.parent=this,a(this)):s.prototype.add.call(this,t)},h.prototype.remove=function(t){if(t instanceof n){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,a(this)}return s.prototype.remove.call(this,t)},h.prototype.create=function(t,i,e){for(var s,n=new o.Service(t,i,e),h=0;h<this.methodsArray.length;++h){var a=r.lcFirst((s=this.ht[h]).resolve().name).replace(/[^$\w_]/g,"");n[a]=r.codegen(["r","c"],r.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:s,q:s.resolvedRequestType.ctor,s:s.resolvedResponseType.ctor})}return n}},7645:(t,i,e)=>{"use strict";t.exports=y;var s=e(9313);((y.prototype=Object.create(s.prototype)).constructor=y).className="Type";var n=e(7025),r=e(7598),o=e(3548),h=e(6039),a=e(7513),c=e(8368),d=e(1408),l=e(1173),u=e(9935),p=e(4928),f=e(5305),m=e(4497),v=e(3996),g=e(1667);function y(t,i){s.call(this,t,i),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.dt=null,this.tt=null,this.lt=null,this.ut=null}function b(t){return t.dt=t.tt=t.lt=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this.dt)return this.dt;this.dt={};for(var t=Object.keys(this.fields),i=0;i<t.length;++i){var e=this.fields[t[i]],s=e.id;if(this.dt[s])throw Error("duplicate id "+s+" in "+this);this.dt[s]=e}return this.dt}},fieldsArray:{get:function(){return this.tt||(this.tt=u.toArray(this.fields))}},oneofsArray:{get:function(){return this.lt||(this.lt=u.toArray(this.oneofs))}},ctor:{get:function(){return this.ut||(this.ctor=y.generateConstructor(this)())},set:function(t){var i=t.prototype;i instanceof c||((t.prototype=new c).constructor=t,u.merge(t.prototype,i)),t.$type=t.prototype.$type=this,u.merge(t,c,!0),this.ut=t;for(var e=0;e<this.fieldsArray.length;++e)this.tt[e].resolve();var s={};for(e=0;e<this.oneofsArray.length;++e)s[this.lt[e].resolve().name]={get:u.oneOfGetter(this.lt[e].oneof),set:u.oneOfSetter(this.lt[e].oneof)};e&&Object.defineProperties(t.prototype,s)}}}),y.generateConstructor=function(t){for(var i,e=u.codegen(["p"],t.name),s=0;s<t.fieldsArray.length;++s)(i=t.tt[s]).map?e("this%s={}",u.safeProp(i.name)):i.repeated&&e("this%s=[]",u.safeProp(i.name));return e("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(t,i){var e=new y(t,i.options);e.extensions=i.extensions,e.reserved=i.reserved;for(var c=Object.keys(i.fields),d=0;d<c.length;++d)e.add((void 0!==i.fields[c[d]].keyType?h.fromJSON:o.fromJSON)(c[d],i.fields[c[d]]));if(i.oneofs)for(c=Object.keys(i.oneofs),d=0;d<c.length;++d)e.add(r.fromJSON(c[d],i.oneofs[c[d]]));if(i.nested)for(c=Object.keys(i.nested),d=0;d<c.length;++d){var l=i.nested[c[d]];e.add((void 0!==l.id?o.fromJSON:void 0!==l.fields?y.fromJSON:void 0!==l.values?n.fromJSON:void 0!==l.methods?a.fromJSON:s.fromJSON)(c[d],l))}return i.extensions&&i.extensions.length&&(e.extensions=i.extensions),i.reserved&&i.reserved.length&&(e.reserved=i.reserved),i.group&&(e.group=!0),i.comment&&(e.comment=i.comment),e},y.prototype.toJSON=function(t){var i=s.prototype.toJSON.call(this,t),e=!!t&&Boolean(t.keepComments);return u.toObject(["options",i&&i.options||void 0,"oneofs",s.arrayToJSON(this.oneofsArray,t),"fields",s.arrayToJSON(this.fieldsArray.filter((function(t){return!t.declaringField})),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",i&&i.nested||void 0,"comment",e?this.comment:void 0])},y.prototype.resolveAll=function(){for(var t=this.fieldsArray,i=0;i<t.length;)t[i++].resolve();var e=this.oneofsArray;for(i=0;i<e.length;)e[i++].resolve();return s.prototype.resolveAll.call(this)},y.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},y.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof o&&void 0===t.extend){if(this.dt?this.dt[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),b(this)}return t instanceof r?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),b(this)):s.prototype.add.call(this,t)},y.prototype.remove=function(t){if(t instanceof o&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),b(this)}if(t instanceof r){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),b(this)}return s.prototype.remove.call(this,t)},y.prototype.isReservedId=function(t){return s.isReservedId(this.reserved,t)},y.prototype.isReservedName=function(t){return s.isReservedName(this.reserved,t)},y.prototype.create=function(t){return new this.ctor(t)},y.prototype.setup=function(){for(var t=this.fullName,i=[],e=0;e<this.fieldsArray.length;++e)i.push(this.tt[e].resolve().resolvedType);this.encode=p(this)({Writer:l,types:i,util:u}),this.decode=f(this)({Reader:d,types:i,util:u}),this.verify=m(this)({types:i,util:u}),this.fromObject=v.fromObject(this)({types:i,util:u}),this.toObject=v.toObject(this)({types:i,util:u});var s=g[t];if(s){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=s.fromObject.bind(n),n.toObject=this.toObject,this.toObject=s.toObject.bind(n)}return this},y.prototype.encode=function(t,i){return this.setup().encode(t,i)},y.prototype.encodeDelimited=function(t,i){return this.encode(t,i&&i.len?i.fork():i).ldelim()},y.prototype.decode=function(t,i){return this.setup().decode(t,i)},y.prototype.decodeDelimited=function(t){return t instanceof d||(t=d.create(t)),this.decode(t,t.uint32())},y.prototype.verify=function(t){return this.setup().verify(t)},y.prototype.fromObject=function(t){return this.setup().fromObject(t)},y.prototype.toObject=function(t,i){return this.setup().toObject(t,i)},y.d=function(t){return function(i){u.decorateType(i,t)}}},7063:(t,i,e)=>{"use strict";var s=i,n=e(9935),r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(t,i){var e=0,s={};for(i|=0;e<t.length;)s[r[e+i]]=t[e++];return s}s.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),s.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),s.long=o([0,0,0,1,1],7),s.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),s.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:(t,i,e)=>{"use strict";var s,n,r=t.exports=e(9693),o=e(5054);r.codegen=e(5124),r.fetch=e(9054),r.path=e(8626),r.fs=r.inquire("fs"),r.toArray=function(t){if(t){for(var i=Object.keys(t),e=new Array(i.length),s=0;s<i.length;)e[s]=t[i[s++]];return e}return[]},r.toObject=function(t){for(var i={},e=0;e<t.length;){var s=t[e++],n=t[e++];void 0!==n&&(i[s]=n)}return i};var h=/\\/g,a=/"/g;r.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},r.safeProp=function(t){return!/^[$\w_]+$/.test(t)||r.isReserved(t)?'["'+t.replace(h,"\\\\").replace(a,'\\"')+'"]':"."+t},r.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var c=/_([a-z])/g;r.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(c,(function(t,i){return i.toUpperCase()}))},r.compareFieldsById=function(t,i){return t.id-i.id},r.decorateType=function(t,i){if(t.$type)return i&&t.$type.name!==i&&(r.decorateRoot.remove(t.$type),t.$type.name=i,r.decorateRoot.add(t.$type)),t.$type;s||(s=e(7645));var n=new s(i||t.name);return r.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var d=0;r.decorateEnum=function(t){if(t.$type)return t.$type;n||(n=e(7025));var i=new n("Enum"+d++,t);return r.decorateRoot.add(i),Object.defineProperty(t,"$type",{value:i,enumerable:!1}),i},r.setProperty=function(t,i,e){if("object"!=typeof t)throw TypeError("dst must be an object");if(!i)throw TypeError("path must be specified");return function t(i,e,s){var n=e.shift();if("__proto__"===n)return i;if(e.length>0)i[n]=t(i[n]||{},e,s);else{var r=i[n];r&&(s=[].concat(r).concat(s)),i[n]=s}return i}(t,i=i.split("."),e)},Object.defineProperty(r,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(e(9424)))}})},1945:(t,i,e)=>{"use strict";t.exports=n;var s=e(9693);function n(t,i){this.lo=t>>>0,this.hi=i>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var i=t<0;i&&(t=-t);var e=t>>>0,s=(t-e)/4294967296>>>0;return i&&(s=~s>>>0,e=~e>>>0,++e>4294967295&&(e=0,++s>4294967295&&(s=0))),new n(e,s)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(s.isString(t)){if(!s.Long)return n.fromNumber(parseInt(t,10));t=s.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,e=~this.hi>>>0;return i||(e=e+1>>>0),-(i+4294967296*e)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var h=String.prototype.charCodeAt;n.fromHash=function(t){return t===o?r:new n((h.call(t,0)|h.call(t,1)<<8|h.call(t,2)<<16|h.call(t,3)<<24)>>>0,(h.call(t,4)|h.call(t,5)<<8|h.call(t,6)<<16|h.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return 0===e?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:e<128?9:10}},9693:function(t,i,e){"use strict";var s=i;function n(t,i,e){for(var s=Object.keys(i),n=0;n<s.length;++n)void 0!==t[s[n]]&&e||(t[s[n]]=i[s[n]]);return t}function r(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return i.prototype=Object.create(Error.prototype,{constructor:{value:i,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),i}s.asPromise=e(4537),s.base64=e(7419),s.EventEmitter=e(9211),s.float=e(945),s.inquire=e(7199),s.utf8=e(4997),s.pool=e(6662),s.LongBits=e(1945),s.isNode=Boolean(void 0!==e.g&&e.g&&e.g.process&&e.g.process.versions&&e.g.process.versions.node),s.global=s.isNode&&e.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isObject=function(t){return t&&"object"==typeof t},s.isset=s.isSet=function(t,i){var e=t[i];return!(null==e||!t.hasOwnProperty(i))&&("object"!=typeof e||(Array.isArray(e)?e.length:Object.keys(e).length)>0)},s.Buffer=function(){try{var t=s.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),s.ft=null,s.vt=null,s.newBuffer=function(t){return"number"==typeof t?s.Buffer?s.vt(t):new s.Array(t):s.Buffer?s.ft(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(t){return t?s.LongBits.from(t).toHash():s.LongBits.zeroHash},s.longFromHash=function(t,i){var e=s.LongBits.fromHash(t);return s.Long?s.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},s.merge=n,s.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;e>-1;--e)if(1===i[t[e]]&&void 0!==this[t[e]]&&null!==this[t[e]])return t[e]}},s.oneOfSetter=function(t){return function(i){for(var e=0;e<t.length;++e)t[e]!==i&&delete this[t[e]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.et=function(){var t=s.Buffer;t?(s.ft=t.from!==Uint8Array.from&&t.from||function(i,e){return new t(i,e)},s.vt=t.allocUnsafe||function(i){return new t(i)}):s.ft=s.vt=null}},4497:(t,i,e)=>{"use strict";t.exports=function(t){var i=n.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),e=t.oneofsArray,s={};e.length&&i("var p={}");for(var a=0;a<t.fieldsArray.length;++a){var c=t.tt[a].resolve(),d="m"+n.safeProp(c.name);if(c.optional&&i("if(%s!=null&&m.hasOwnProperty(%j)){",d,c.name),c.map)i("if(!util.isObject(%s))",d)("return%j",r(c,"object"))("var k=Object.keys(%s)",d)("for(var i=0;i<k.length;++i){"),h(i,c,"k[i]"),o(i,c,a,d+"[k[i]]")("}");else if(c.repeated)i("if(!Array.isArray(%s))",d)("return%j",r(c,"array"))("for(var i=0;i<%s.length;++i){",d),o(i,c,a,d+"[i]")("}");else{if(c.partOf){var l=n.safeProp(c.partOf.name);1===s[c.partOf.name]&&i("if(p%s===1)",l)("return%j",c.partOf.name+": multiple values"),s[c.partOf.name]=1,i("p%s=1",l)}o(i,c,a,d)}c.optional&&i("}")}return i("return null")};var s=e(7025),n=e(9935);function r(t,i){return t.name+": "+i+(t.repeated&&"array"!==i?"[]":t.map&&"object"!==i?"{k:"+t.keyType+"}":"")+" expected"}function o(t,i,e,n){if(i.resolvedType)if(i.resolvedType instanceof s){t("switch(%s){",n)("default:")("return%j",r(i,"enum value"));for(var o=Object.keys(i.resolvedType.values),h=0;h<o.length;++h)t("case %i:",i.resolvedType.values[o[h]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",e,n)("if(e)")("return%j+e",i.name+".")("}");else switch(i.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",r(i,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",r(i,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",r(i,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",r(i,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",r(i,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",r(i,"buffer"))}return t}function h(t,i,e){switch(i.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",e)("return%j",r(i,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",e)("return%j",r(i,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",e)("return%j",r(i,"boolean key"))}return t}},1667:(t,i,e)=>{"use strict";var s=i,n=e(8368);s[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var i=t["@type"].substring(t["@type"].lastIndexOf("/")+1),e=this.lookup(i);if(e){var s="."===t["@type"].charAt(0)?t["@type"].slice(1):t["@type"];return-1===s.indexOf("/")&&(s="/"+s),this.create({type_url:s,value:e.encode(e.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,i){var e="",s="";if(i&&i.json&&t.type_url&&t.value){s=t.type_url.substring(t.type_url.lastIndexOf("/")+1),e=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var r=this.lookup(s);r&&(t=r.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof n){var o=t.$type.toObject(t,i);return""===e&&(e="type.googleapis.com/"),s=e+("."===t.$type.fullName[0]?t.$type.fullName.slice(1):t.$type.fullName),o["@type"]=s,o}return this.toObject(t,i)}}},1173:(t,i,e)=>{"use strict";t.exports=l;var s,n=e(9693),r=n.LongBits,o=n.base64,h=n.utf8;function a(t,i,e){this.fn=t,this.len=i,this.next=void 0,this.val=e}function c(){}function d(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new a(c,0,0),this.tail=this.head,this.states=null}var u=function(){return n.Buffer?function(){return(l.create=function(){return new s})()}:function(){return new l}};function p(t,i,e){i[e]=255&t}function f(t,i){this.len=t,this.next=void 0,this.val=i}function m(t,i,e){for(;t.hi;)i[e++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[e++]=127&t.lo|128,t.lo=t.lo>>>7;i[e++]=t.lo}function v(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}l.create=u(),l.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype.gt=function(t,i,e){return this.tail=this.tail.next=new a(t,i,e),this.len+=i,this},f.prototype=Object.create(a.prototype),f.prototype.fn=function(t,i,e){for(;t>127;)i[e++]=127&t|128,t>>>=7;i[e]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this.gt(m,10,r.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var i=r.from(t);return this.gt(m,i.length(),i)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var i=r.from(t).zzEncode();return this.gt(m,i.length(),i)},l.prototype.bool=function(t){return this.gt(p,1,t?1:0)},l.prototype.fixed32=function(t){return this.gt(v,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var i=r.from(t);return this.gt(v,4,i.lo).gt(v,4,i.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this.gt(n.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this.gt(n.float.writeDoubleLE,8,t)};var g=n.Array.prototype.set?function(t,i,e){i.set(t,e)}:function(t,i,e){for(var s=0;s<t.length;++s)i[e+s]=t[s]};l.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this.gt(p,1,0);if(n.isString(t)){var e=l.alloc(i=o.length(t));o.decode(t,e,0),t=e}return this.uint32(i).gt(g,i,t)},l.prototype.string=function(t){var i=h.length(t);return i?this.uint32(i).gt(h.write,i,t):this.gt(p,1,0)},l.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new a(c,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(c,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,i=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=i,this.len+=e),this},l.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,i,e),e+=t.len,t=t.next;return i},l.et=function(t){s=t,l.create=u(),s.et()}},3155:(t,i,e)=>{"use strict";t.exports=r;var s=e(1173);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(9693);function r(){s.call(this)}function o(t,i,e){t.length<40?n.utf8.write(t,i,e):i.utf8Write?i.utf8Write(t,e):i.write(t,e)}r.et=function(){r.alloc=n.vt,r.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,i,e){i.set(t,e)}:function(t,i,e){if(t.copy)t.copy(i,e,0,t.length);else for(var s=0;s<t.length;)i[e++]=t[s++]}},r.prototype.bytes=function(t){n.isString(t)&&(t=n.ft(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this.gt(r.writeBytesBuffer,i,t),this},r.prototype.string=function(t){var i=n.Buffer.byteLength(t);return this.uint32(i),i&&this.gt(o,i,t),this},r.et()},8660:(t,i,e)=>{var s;!function(t){!function(i){var s="object"==typeof e.g?e.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=r(t);function r(t,i){return function(e,s){"function"!=typeof t[e]&&Object.defineProperty(t,e,{configurable:!0,writable:!0,value:s}),i&&i(e,s)}}void 0===s.Reflect?s.Reflect=t:n=r(s.Reflect,n),function(t){var i=Object.prototype.hasOwnProperty,e="function"==typeof Symbol,s=e&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",n=e&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",r="function"==typeof Object.create,o={__proto__:[]}instanceof Array,h=!r&&!o,a={create:r?function(){return st(Object.create(null))}:o?function(){return st({__proto__:null})}:function(){return st({})},has:h?function(t,e){return i.call(t,e)}:function(t,i){return i in t},get:h?function(t,e){return i.call(t,e)?t[e]:void 0}:function(t,i){return t[i]}},c=Object.getPrototypeOf(Function),d="object"==typeof process&&{DEBUG_MODE:!1}&&"true"==={DEBUG_MODE:!1}.REFLECT_METADATA_USE_MAP_POLYFILL,l=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,u=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?it():Set,p=new(d||"function"!=typeof WeakMap?et():WeakMap);function f(t,i,e,s){if(O(e)){if(!H(t))throw new TypeError;if(!W(i))throw new TypeError;return P(t,i)}if(!H(t))throw new TypeError;if(!F(i))throw new TypeError;if(!F(s)&&!O(s)&&!D(s))throw new TypeError;return D(s)&&(s=void 0),_(t,i,e=q(e),s)}function m(t,i){function e(e,s){if(!F(e))throw new TypeError;if(!O(s)&&!G(s))throw new TypeError;M(t,i,e,s)}return e}function v(t,i,e,s){if(!F(e))throw new TypeError;return O(s)||(s=q(s)),M(t,i,e,s)}function g(t,i,e){if(!F(i))throw new TypeError;return O(e)||(e=q(e)),T(t,i,e)}function y(t,i,e){if(!F(i))throw new TypeError;return O(e)||(e=q(e)),k(t,i,e)}function b(t,i,e){if(!F(i))throw new TypeError;return O(e)||(e=q(e)),C(t,i,e)}function I(t,i,e){if(!F(i))throw new TypeError;return O(e)||(e=q(e)),E(t,i,e)}function w(t,i){if(!F(t))throw new TypeError;return O(i)||(i=q(i)),L(t,i)}function S(t,i){if(!F(t))throw new TypeError;return O(i)||(i=q(i)),B(t,i)}function A(t,i,e){if(!F(i))throw new TypeError;O(e)||(e=q(e));var s=x(i,e,!1);if(O(s))return!1;if(!s.delete(t))return!1;if(s.size>0)return!0;var n=p.get(i);return n.delete(e),n.size>0||p.delete(i),!0}function P(t,i){for(var e=t.length-1;e>=0;--e){var s=(0,t[e])(i);if(!O(s)&&!D(s)){if(!W(s))throw new TypeError;i=s}}return i}function _(t,i,e,s){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(i,e,s);if(!O(r)&&!D(r)){if(!F(r))throw new TypeError;s=r}}return s}function x(t,i,e){var s=p.get(t);if(O(s)){if(!e)return;s=new l,p.set(t,s)}var n=s.get(i);if(O(n)){if(!e)return;n=new l,s.set(i,n)}return n}function T(t,i,e){if(k(t,i,e))return!0;var s=Z(i);return!D(s)&&T(t,s,e)}function k(t,i,e){var s=x(i,e,!1);return!O(s)&&$(s.has(t))}function C(t,i,e){if(k(t,i,e))return E(t,i,e);var s=Z(i);return D(s)?void 0:C(t,s,e)}function E(t,i,e){var s=x(i,e,!1);if(!O(s))return s.get(t)}function M(t,i,e,s){x(e,s,!0).set(t,i)}function L(t,i){var e=B(t,i),s=Z(t);if(null===s)return e;var n=L(s,i);if(n.length<=0)return e;if(e.length<=0)return n;for(var r=new u,o=[],h=0,a=e;h<a.length;h++){var c=a[h];r.has(c)||(r.add(c),o.push(c))}for(var d=0,l=n;d<l.length;d++){c=l[d];r.has(c)||(r.add(c),o.push(c))}return o}function B(t,i){var e=[],s=x(t,i,!1);if(O(s))return e;for(var n=J(s.keys()),r=0;;){var o=Y(n);if(!o)return e.length=r,e;var h=Q(o);try{e[r]=h}catch(t){try{K(n)}finally{throw t}}r++}}function R(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function O(t){return void 0===t}function D(t){return null===t}function V(t){return"symbol"==typeof t}function F(t){return"object"==typeof t?null!==t:"function"==typeof t}function N(t,i){switch(R(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var e=3===i?"string":5===i?"number":"default",n=X(t,s);if(void 0!==n){var r=n.call(t,e);if(F(r))throw new TypeError;return r}return j(t,"default"===e?"number":e)}function j(t,i){if("string"===i){var e=t.toString;if(z(e))if(!F(n=e.call(t)))return n;if(z(s=t.valueOf))if(!F(n=s.call(t)))return n}else{var s;if(z(s=t.valueOf))if(!F(n=s.call(t)))return n;var n,r=t.toString;if(z(r))if(!F(n=r.call(t)))return n}throw new TypeError}function $(t){return!!t}function U(t){return""+t}function q(t){var i=N(t,3);return V(i)?i:U(i)}function H(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function z(t){return"function"==typeof t}function W(t){return"function"==typeof t}function G(t){switch(R(t)){case 3:case 4:return!0;default:return!1}}function X(t,i){var e=t[i];if(null!=e){if(!z(e))throw new TypeError;return e}}function J(t){var i=X(t,n);if(!z(i))throw new TypeError;var e=i.call(t);if(!F(e))throw new TypeError;return e}function Q(t){return t.value}function Y(t){var i=t.next();return!i.done&&i}function K(t){var i=t.return;i&&i.call(t)}function Z(t){var i=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return i;if(i!==c)return i;var e=t.prototype,s=e&&Object.getPrototypeOf(e);if(null==s||s===Object.prototype)return i;var n=s.constructor;return"function"!=typeof n||n===t?i:n}function tt(){var t={},i=[],e=function(){function t(t,i,e){this.bt=0,this.It=t,this.wt=i,this.St=e}return t.prototype["@@iterator"]=function(){return this},t.prototype[n]=function(){return this},t.prototype.next=function(){var t=this.bt;if(t>=0&&t<this.It.length){var e=this.St(this.It[t],this.wt[t]);return t+1>=this.It.length?(this.bt=-1,this.It=i,this.wt=i):this.bt++,{value:e,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this.bt>=0&&(this.bt=-1,this.It=i,this.wt=i),t},t.prototype.return=function(t){return this.bt>=0&&(this.bt=-1,this.It=i,this.wt=i),{value:t,done:!0}},t}();return function(){function i(){this.It=[],this.wt=[],this.At=t,this.Pt=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this.It.length},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this._t(t,!1)>=0},i.prototype.get=function(t){var i=this._t(t,!1);return i>=0?this.wt[i]:void 0},i.prototype.set=function(t,i){var e=this._t(t,!0);return this.wt[e]=i,this},i.prototype.delete=function(i){var e=this._t(i,!1);if(e>=0){for(var s=this.It.length,n=e+1;n<s;n++)this.It[n-1]=this.It[n],this.wt[n-1]=this.wt[n];return this.It.length--,this.wt.length--,i===this.At&&(this.At=t,this.Pt=-2),!0}return!1},i.prototype.clear=function(){this.It.length=0,this.wt.length=0,this.At=t,this.Pt=-2},i.prototype.keys=function(){return new e(this.It,this.wt,s)},i.prototype.values=function(){return new e(this.It,this.wt,r)},i.prototype.entries=function(){return new e(this.It,this.wt,o)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[n]=function(){return this.entries()},i.prototype._t=function(t,i){return this.At!==t&&(this.Pt=this.It.indexOf(this.At=t)),this.Pt<0&&i&&(this.Pt=this.It.length,this.It.push(t),this.wt.push(void 0)),this.Pt},i}();function s(t,i){return t}function r(t,i){return i}function o(t,i){return[t,i]}}function it(){return function(){function t(){this.Tt=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this.Tt.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this.Tt.has(t)},t.prototype.add=function(t){return this.Tt.set(t,t),this},t.prototype.delete=function(t){return this.Tt.delete(t)},t.prototype.clear=function(){this.Tt.clear()},t.prototype.keys=function(){return this.Tt.keys()},t.prototype.values=function(){return this.Tt.values()},t.prototype.entries=function(){return this.Tt.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[n]=function(){return this.keys()},t}()}function et(){var t=16,e=a.create(),s=n();return function(){function t(){this.kt=n()}return t.prototype.has=function(t){var i=r(t,!1);return void 0!==i&&a.has(i,this.kt)},t.prototype.get=function(t){var i=r(t,!1);return void 0!==i?a.get(i,this.kt):void 0},t.prototype.set=function(t,i){return r(t,!0)[this.kt]=i,this},t.prototype.delete=function(t){var i=r(t,!1);return void 0!==i&&delete i[this.kt]},t.prototype.clear=function(){this.kt=n()},t}();function n(){var t;do{t="@@WeakMap@@"+c()}while(a.has(e,t));return e[t]=!0,t}function r(t,e){if(!i.call(t,s)){if(!e)return;Object.defineProperty(t,s,{value:a.create()})}return t[s]}function o(t,i){for(var e=0;e<i;++e)t[e]=255*Math.random()|0;return t}function h(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t)}function c(){var i=h(t);i[6]=79&i[6]|64,i[8]=191&i[8]|128;for(var e="",s=0;s<t;++s){var n=i[s];4!==s&&6!==s&&8!==s||(e+="-"),n<16&&(e+="0"),e+=n.toString(16).toLowerCase()}return e}}function st(t){return t.Ct=void 0,delete t.Ct,t}t("decorate",f),t("metadata",m),t("defineMetadata",v),t("hasMetadata",g),t("hasOwnMetadata",y),t("getMetadata",b),t("getOwnMetadata",I),t("getMetadataKeys",w),t("getOwnMetadataKeys",S),t("deleteMetadata",A)}(n)}()}(s||(s={}))},6515:(t,i,e)=>{"use strict";e.d(i,{X:()=>n});var s=e(655),n=function(t){function i(i){var e=t.call(this)||this;return e.Et=i,e}return(0,s.ZT)(i,t),Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype.Mt=function(i){var e=t.prototype.Mt.call(this,i);return!e.closed&&i.next(this.Et),e},i.prototype.getValue=function(){var t=this,i=t.hasError,e=t.thrownError,s=t.Et;if(i)throw e;return this.Lt(),s},i.prototype.next=function(i){t.prototype.next.call(this,this.Et=i)},i}(e(6716).x)},1480:(t,i,e)=>{"use strict";e.d(i,{y:()=>l});var s=e(5642),n=e(5720),r=e(6766),o=e(278);function h(t){return 0===t.length?o.y:1===t.length?t[0]:function(i){return t.reduce((function(t,i){return i(t)}),i)}}var a=e(3912),c=e(8474),d=e(8846),l=function(){function t(t){t&&(this.Mt=t)}return t.prototype.lift=function(i){var e=new t;return e.source=this,e.operator=i,e},t.prototype.subscribe=function(t,i,e){var r,o=this,h=(r=t)&&r instanceof s.Lv||function(t){return t&&(0,c.m)(t.next)&&(0,c.m)(t.error)&&(0,c.m)(t.complete)}(r)&&(0,n.Nn)(r)?t:new s.Hp(t,i,e);return(0,d.x)((function(){var t=o,i=t.operator,e=t.source;h.add(i?i.call(h,e):e?o.Mt(h):o.Bt(h))})),h},t.prototype.Bt=function(t){try{return this.Mt(t)}catch(i){t.error(i)}},t.prototype.forEach=function(t,i){var e=this;return new(i=u(i))((function(i,n){var r=new s.Hp({next:function(i){try{t(i)}catch(t){n(t),r.unsubscribe()}},error:n,complete:i});e.subscribe(r)}))},t.prototype.Mt=function(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)},t.prototype[r.L]=function(){return this},t.prototype.pipe=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return h(t)(this)},t.prototype.toPromise=function(t){var i=this;return new(t=u(t))((function(t,e){var s;i.subscribe((function(t){return s=t}),(function(t){return e(t)}),(function(){return t(s)}))}))},t.create=function(i){return new t(i)},t}();function u(t){var i;return null!==(i=null!=t?t:a.v.Promise)&&void 0!==i?i:Promise}},3:(t,i,e)=>{"use strict";e.d(i,{t:()=>o});var s=e(655),n=e(6716),r=e(4318),o=function(t){function i(i,e,s){void 0===i&&(i=1/0),void 0===e&&(e=1/0),void 0===s&&(s=r.l);var n=t.call(this)||this;return n.Rt=i,n.Ot=e,n.Dt=s,n.Vt=[],n.Nt=!0,n.Nt=e===1/0,n.Rt=Math.max(1,i),n.Ot=Math.max(1,e),n}return(0,s.ZT)(i,t),i.prototype.next=function(i){var e=this,s=e.isStopped,n=e.Vt,r=e.Nt,o=e.Dt,h=e.Ot;s||(n.push(i),!r&&n.push(o.now()+h)),this.jt(),t.prototype.next.call(this,i)},i.prototype.Mt=function(t){this.Lt(),this.jt();for(var i=this.$t(t),e=this.Nt,s=this.Vt.slice(),n=0;n<s.length&&!t.closed;n+=e?1:2)t.next(s[n]);return this.Ut(t),i},i.prototype.jt=function(){var t=this,i=t.Rt,e=t.Dt,s=t.Vt,n=t.Nt,r=(n?1:2)*i;if(i<1/0&&r<s.length&&s.splice(0,s.length-r),!n){for(var o=e.now(),h=0,a=1;a<s.length&&s[a]<=o;a+=2)h=a;h&&s.splice(0,h+1)}},i}(n.x)},6716:(t,i,e)=>{"use strict";e.d(i,{x:()=>c});var s=e(655),n=e(1480),r=e(5720),o=(0,e(1819).d)((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),h=e(3699),a=e(8846),c=function(t){function i(){var i=t.call(this)||this;return i.closed=!1,i.currentObservers=null,i.observers=[],i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return(0,s.ZT)(i,t),i.prototype.lift=function(t){var i=new d(this,this);return i.operator=t,i},i.prototype.Lt=function(){if(this.closed)throw new o},i.prototype.next=function(t){var i=this;(0,a.x)((function(){var e,n;if(i.Lt(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var r=(0,s.XA)(i.currentObservers),o=r.next();!o.done;o=r.next()){o.value.next(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}}))},i.prototype.error=function(t){var i=this;(0,a.x)((function(){if(i.Lt(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=t;for(var e=i.observers;e.length;)e.shift().error(t)}}))},i.prototype.complete=function(){var t=this;(0,a.x)((function(){if(t.Lt(),!t.isStopped){t.isStopped=!0;for(var i=t.observers;i.length;)i.shift().complete()}}))},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),i.prototype.Bt=function(i){return this.Lt(),t.prototype.Bt.call(this,i)},i.prototype.Mt=function(t){return this.Lt(),this.Ut(t),this.$t(t)},i.prototype.$t=function(t){var i=this,e=this,s=e.hasError,n=e.isStopped,o=e.observers;return s||n?r.Lc:(this.currentObservers=null,o.push(t),new r.w0((function(){i.currentObservers=null,(0,h.P)(o,t)})))},i.prototype.Ut=function(t){var i=this,e=i.hasError,s=i.thrownError,n=i.isStopped;e?t.error(s):n&&t.complete()},i.prototype.asObservable=function(){var t=new n.y;return t.source=this,t},i.create=function(t,i){return new d(t,i)},i}(n.y),d=function(t){function i(i,e){var s=t.call(this)||this;return s.destination=i,s.source=e,s}return(0,s.ZT)(i,t),i.prototype.next=function(t){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.next)||void 0===e||e.call(i,t)},i.prototype.error=function(t){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.error)||void 0===e||e.call(i,t)},i.prototype.complete=function(){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===i||i.call(t)},i.prototype.Mt=function(t){var i,e;return null!==(e=null===(i=this.source)||void 0===i?void 0:i.subscribe(t))&&void 0!==e?e:r.Lc},i}(c)},5642:(t,i,e)=>{"use strict";e.d(i,{Hp:()=>g,Lv:()=>p});var s=e(655),n=e(8474),r=e(5720),o=e(3912),h=e(5);function a(){}var c=d("C",void 0,void 0);function d(t,i,e){return{kind:t,value:i,error:e}}var l=e(8380),u=e(8846),p=function(t){function i(i){var e=t.call(this)||this;return e.isStopped=!1,i?(e.destination=i,(0,r.Nn)(i)&&i.add(e)):e.destination=I,e}return(0,s.ZT)(i,t),i.create=function(t,i,e){return new g(t,i,e)},i.prototype.next=function(t){this.isStopped?b(function(t){return d("N",t,void 0)}(t),this):this.zt(t)},i.prototype.error=function(t){this.isStopped?b(d("E",void 0,t),this):(this.isStopped=!0,this.Wt(t))},i.prototype.complete=function(){this.isStopped?b(c,this):(this.isStopped=!0,this.Gt())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},i.prototype.zt=function(t){this.destination.next(t)},i.prototype.Wt=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},i.prototype.Gt=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(r.w0),f=Function.prototype.bind;function m(t,i){return f.call(t,i)}var v=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var i=this.partialObserver;if(i.next)try{i.next(t)}catch(t){y(t)}},t.prototype.error=function(t){var i=this.partialObserver;if(i.error)try{i.error(t)}catch(t){y(t)}else y(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){y(t)}},t}(),g=function(t){function i(i,e,s){var r,h,a=t.call(this)||this;(0,n.m)(i)||!i?r={next:null!=i?i:void 0,error:null!=e?e:void 0,complete:null!=s?s:void 0}:a&&o.v.useDeprecatedNextContext?((h=Object.create(i)).unsubscribe=function(){return a.unsubscribe()},r={next:i.next&&m(i.next,h),error:i.error&&m(i.error,h),complete:i.complete&&m(i.complete,h)}):r=i;return a.destination=new v(r),a}return(0,s.ZT)(i,t),i}(p);function y(t){o.v.useDeprecatedSynchronousErrorHandling?(0,u.O)(t):(0,h.h)(t)}function b(t,i){var e=o.v.onStoppedNotification;e&&l.z.setTimeout((function(){return e(t,i)}))}var I={closed:!0,next:a,error:function(t){throw t},complete:a}},5720:(t,i,e)=>{"use strict";e.d(i,{Lc:()=>a,w0:()=>h,Nn:()=>c});var s=e(655),n=e(8474),r=(0,e(1819).d)((function(t){return function(i){t(this),this.message=i?i.length+" errors occurred during unsubscription:\n"+i.map((function(t,i){return i+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=i}})),o=e(3699),h=function(){function t(t){this.initialTeardown=t,this.closed=!1,this.Xt=null,this.Jt=null}var i;return t.prototype.unsubscribe=function(){var t,i,e,o,h;if(!this.closed){this.closed=!0;var a=this.Xt;if(a)if(this.Xt=null,Array.isArray(a))try{for(var c=(0,s.XA)(a),l=c.next();!l.done;l=c.next()){l.value.remove(this)}}catch(i){t={error:i}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}else a.remove(this);var u=this.initialTeardown;if((0,n.m)(u))try{u()}catch(t){h=t instanceof r?t.errors:[t]}var p=this.Jt;if(p){this.Jt=null;try{for(var f=(0,s.XA)(p),m=f.next();!m.done;m=f.next()){var v=m.value;try{d(v)}catch(t){h=null!=h?h:[],t instanceof r?h=(0,s.ev)((0,s.ev)([],(0,s.CR)(h)),(0,s.CR)(t.errors)):h.push(t)}}}catch(t){e={error:t}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(e)throw e.error}}}if(h)throw new r(h)}},t.prototype.add=function(i){var e;if(i&&i!==this)if(this.closed)d(i);else{if(i instanceof t){if(i.closed||i.Qt(this))return;i.Yt(this)}(this.Jt=null!==(e=this.Jt)&&void 0!==e?e:[]).push(i)}},t.prototype.Qt=function(t){var i=this.Xt;return i===t||Array.isArray(i)&&i.includes(t)},t.prototype.Yt=function(t){var i=this.Xt;this.Xt=Array.isArray(i)?(i.push(t),i):i?[i,t]:t},t.prototype.Kt=function(t){var i=this.Xt;i===t?this.Xt=null:Array.isArray(i)&&(0,o.P)(i,t)},t.prototype.remove=function(i){var e=this.Jt;e&&(0,o.P)(e,i),i instanceof t&&i.Kt(this)},t.EMPTY=((i=new t).closed=!0,i),t}(),a=h.EMPTY;function c(t){return t instanceof h||t&&"closed"in t&&(0,n.m)(t.remove)&&(0,n.m)(t.add)&&(0,n.m)(t.unsubscribe)}function d(t){(0,n.m)(t)?t():t.unsubscribe()}},3912:(t,i,e)=>{"use strict";e.d(i,{v:()=>s});var s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7878:(t,i,e)=>{"use strict";e.d(i,{Xf:()=>m});var s=e(655),n=e(5685),r=e(3841),o=e(1480),h=e(1764),a=e(8430),c=e(8729),d=e(1837),l=e(8671),u=e(8474),p=e(5),f=e(6766);function m(t){if(t instanceof o.y)return t;if(null!=t){if((0,h.c)(t))return y=t,new o.y((function(t){var i=y[f.L]();if((0,u.m)(i.subscribe))return i.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((0,n.z)(t))return g=t,new o.y((function(t){for(var i=0;i<g.length&&!t.closed;i++)t.next(g[i]);t.complete()}));if((0,r.t)(t))return m=t,new o.y((function(t){m.then((function(i){t.closed||(t.next(i),t.complete())}),(function(i){return t.error(i)})).then(null,p.h)}));if((0,a.D)(t))return v(t);if((0,d.T)(t))return e=t,new o.y((function(t){var i,n;try{for(var r=(0,s.XA)(e),o=r.next();!o.done;o=r.next()){var h=o.value;if(t.next(h),t.closed)return}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}t.complete()}));if((0,l.L)(t))return i=t,v((0,l.Q)(i))}var i,e,m,g,y;throw(0,c.z)(t)}function v(t){return new o.y((function(i){(function(t,i){var e,n,r,o;return(0,s.mG)(this,void 0,void 0,(function(){var h,a;return(0,s.Jh)(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),e=(0,s.KL)(t),c.label=1;case 1:return[4,e.next()];case 2:if((n=c.sent()).done)return[3,4];if(h=n.value,i.next(h),i.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),r={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return i.complete(),[2]}}))}))})(t,i).catch((function(t){return i.error(t)}))}))}},6196:(t,i,e)=>{"use strict";e.d(i,{H:()=>o});var s=e(1480),n=e(8843),r=e(4865);function o(t,i,e){void 0===t&&(t=0),void 0===e&&(e=n.P);var o=-1;return null!=i&&((0,r.K)(i)?e=i:o=i),new s.y((function(i){var s,n=(s=t)instanceof Date&&!isNaN(s)?+t-e.now():t;n<0&&(n=0);var r=0;return e.schedule((function(){i.closed||(i.next(r++),0<=o?this.schedule(void 0,o):i.complete())}),n)}))}},2566:(t,i,e)=>{"use strict";e.d(i,{x:()=>n});var s=e(655);function n(t,i,e,s,n){return new r(t,i,e,s,n)}var r=function(t){function i(i,e,s,n,r,o){var h=t.call(this,i)||this;return h.onFinalize=r,h.shouldUnsubscribe=o,h.zt=e?function(t){try{e(t)}catch(t){i.error(t)}}:t.prototype.zt,h.Wt=n?function(t){try{n(t)}catch(t){i.error(t)}finally{this.unsubscribe()}}:t.prototype.Wt,h.Gt=s?function(){try{s()}catch(t){i.error(t)}finally{this.unsubscribe()}}:t.prototype.Gt,h}return(0,s.ZT)(i,t),i.prototype.unsubscribe=function(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var e=this.closed;t.prototype.unsubscribe.call(this),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}},i}(e(5642).Lv)},4975:(t,i,e)=>{"use strict";e.d(i,{h:()=>r});var s=e(6798),n=e(2566);function r(t,i){return(0,s.e)((function(e,s){var r=0;e.subscribe((0,n.x)(s,(function(e){return t.call(i,e,r++)&&s.next(e)})))}))}},5196:(t,i,e)=>{"use strict";e.d(i,{P:()=>d});var s=(0,e(1819).d)((function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}})),n=e(4975),r=e(89),o=e(6798),h=e(2566);function a(){return new s}var c=e(278);function d(t,i){var e=arguments.length>=2;return function(d){return d.pipe(t?(0,n.h)((function(i,e){return t(i,e,d)})):c.y,(0,r.q)(1),e?function(t){return(0,o.e)((function(i,e){var s=!1;i.subscribe((0,h.x)(e,(function(t){s=!0,e.next(t)}),(function(){s||e.next(t),e.complete()})))}))}(i):(void 0===(l=function(){return new s})&&(l=a),(0,o.e)((function(t,i){var e=!1;t.subscribe((0,h.x)(i,(function(t){e=!0,i.next(t)}),(function(){return e?i.complete():i.error(l())})))}))));var l}}},4978:(t,i,e)=>{"use strict";e.d(i,{w:()=>o});var s=e(7878),n=e(6798),r=e(2566);function o(t,i){return(0,n.e)((function(e,n){var o=null,h=0,a=!1,c=function(){return a&&!o&&n.complete()};e.subscribe((0,r.x)(n,(function(e){null==o||o.unsubscribe();var a=0,d=h++;(0,s.Xf)(t(e,d)).subscribe(o=(0,r.x)(n,(function(t){return n.next(i?i(e,t,d,a++):t)}),(function(){o=null,c()})))}),(function(){a=!0,c()})))}))}},89:(t,i,e)=>{"use strict";e.d(i,{q:()=>o});var s=new(e(1480).y)((function(t){return t.complete()}));var n=e(6798),r=e(2566);function o(t){return t<=0?function(){return s}:(0,n.e)((function(i,e){var s=0;i.subscribe((0,r.x)(e,(function(i){++s<=t&&(e.next(i),t<=s&&e.complete())})))}))}},8843:(t,i,e)=>{"use strict";e.d(i,{P:()=>l,z:()=>d});var s=e(655),n=function(t){function i(i,e){return t.call(this)||this}return(0,s.ZT)(i,t),i.prototype.schedule=function(t,i){return void 0===i&&(i=0),this},i}(e(5720).w0),r={setInterval:function(t,i){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var o=r.delegate;return(null==o?void 0:o.setInterval)?o.setInterval.apply(o,(0,s.ev)([t,i],(0,s.CR)(e))):setInterval.apply(void 0,(0,s.ev)([t,i],(0,s.CR)(e)))},clearInterval:function(t){var i=r.delegate;return((null==i?void 0:i.clearInterval)||clearInterval)(t)},delegate:void 0},o=e(3699),h=function(t){function i(i,e){var s=t.call(this,i,e)||this;return s.scheduler=i,s.work=e,s.pending=!1,s}return(0,s.ZT)(i,t),i.prototype.schedule=function(t,i){var e;if(void 0===i&&(i=0),this.closed)return this;this.state=t;var s=this.id,n=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(n,s,i)),this.pending=!0,this.delay=i,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(n,this.id,i),this},i.prototype.requestAsyncId=function(t,i,e){return void 0===e&&(e=0),r.setInterval(t.flush.bind(t,this),e)},i.prototype.recycleAsyncId=function(t,i,e){if(void 0===e&&(e=0),null!=e&&this.delay===e&&!1===this.pending)return i;null!=i&&r.clearInterval(i)},i.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this.Zt(t,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype.Zt=function(t,i){var e,s=!1;try{this.work(t)}catch(t){s=!0,e=t||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),e},i.prototype.unsubscribe=function(){if(!this.closed){var i=this.id,e=this.scheduler,s=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,o.P)(s,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},i}(n),a=e(4318),c=function(){function t(i,e){void 0===e&&(e=t.now),this.schedulerActionCtor=i,this.now=e}return t.prototype.schedule=function(t,i,e){return void 0===i&&(i=0),new this.schedulerActionCtor(this,t).schedule(e,i)},t.now=a.l.now,t}(),d=new(function(t){function i(i,e){void 0===e&&(e=c.now);var s=t.call(this,i,e)||this;return s.actions=[],s.ii=!1,s}return(0,s.ZT)(i,t),i.prototype.flush=function(t){var i=this.actions;if(this.ii)i.push(t);else{var e;this.ii=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=i.shift());if(this.ii=!1,e){for(;t=i.shift();)t.unsubscribe();throw e}}},i}(c))(h),l=d},4318:(t,i,e)=>{"use strict";e.d(i,{l:()=>s});var s={now:function(){return(s.delegate||Date).now()},delegate:void 0}},8380:(t,i,e)=>{"use strict";e.d(i,{z:()=>n});var s=e(655),n={setTimeout:function(t,i){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var o=n.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,(0,s.ev)([t,i],(0,s.CR)(e))):setTimeout.apply(void 0,(0,s.ev)([t,i],(0,s.CR)(e)))},clearTimeout:function(t){var i=n.delegate;return((null==i?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:void 0}},9768:(t,i,e)=>{"use strict";e.d(i,{h:()=>s});var s="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6766:(t,i,e)=>{"use strict";e.d(i,{L:()=>s});var s="function"==typeof Symbol&&Symbol.observable||"@@observable"},3699:(t,i,e)=>{"use strict";function s(t,i){if(t){var e=t.indexOf(i);0<=e&&t.splice(e,1)}}e.d(i,{P:()=>s})},1819:(t,i,e)=>{"use strict";function s(t){var i=t((function(t){Error.call(t),t.stack=(new Error).stack}));return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}e.d(i,{d:()=>s})},8846:(t,i,e)=>{"use strict";e.d(i,{O:()=>o,x:()=>r});var s=e(3912),n=null;function r(t){if(s.v.useDeprecatedSynchronousErrorHandling){var i=!n;if(i&&(n={errorThrown:!1,error:null}),t(),i){var e=n,r=e.errorThrown,o=e.error;if(n=null,r)throw o}}else t()}function o(t){s.v.useDeprecatedSynchronousErrorHandling&&n&&(n.errorThrown=!0,n.error=t)}},278:(t,i,e)=>{"use strict";function s(t){return t}e.d(i,{y:()=>s})},5685:(t,i,e)=>{"use strict";e.d(i,{z:()=>s});var s=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},8430:(t,i,e)=>{"use strict";e.d(i,{D:()=>n});var s=e(8474);function n(t){return Symbol.asyncIterator&&(0,s.m)(null==t?void 0:t[Symbol.asyncIterator])}},8474:(t,i,e)=>{"use strict";function s(t){return"function"==typeof t}e.d(i,{m:()=>s})},1764:(t,i,e)=>{"use strict";e.d(i,{c:()=>r});var s=e(6766),n=e(8474);function r(t){return(0,n.m)(t[s.L])}},1837:(t,i,e)=>{"use strict";e.d(i,{T:()=>r});var s=e(9768),n=e(8474);function r(t){return(0,n.m)(null==t?void 0:t[s.h])}},3841:(t,i,e)=>{"use strict";e.d(i,{t:()=>n});var s=e(8474);function n(t){return(0,s.m)(null==t?void 0:t.then)}},8671:(t,i,e)=>{"use strict";e.d(i,{L:()=>o,Q:()=>r});var s=e(655),n=e(8474);function r(t){return(0,s.FC)(this,arguments,(function(){var i,e,n;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:i=t.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,(0,s.qq)(i.read())];case 3:return e=r.sent(),n=e.value,e.done?[4,(0,s.qq)(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,(0,s.qq)(n)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return i.releaseLock(),[7];case 10:return[2]}}))}))}function o(t){return(0,n.m)(null==t?void 0:t.getReader)}},4865:(t,i,e)=>{"use strict";e.d(i,{K:()=>n});var s=e(8474);function n(t){return t&&(0,s.m)(t.schedule)}},6798:(t,i,e)=>{"use strict";e.d(i,{e:()=>n});var s=e(8474);function n(t){return function(i){if(function(t){return(0,s.m)(null==t?void 0:t.lift)}(i))return i.lift((function(i){try{return t(i,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}},5:(t,i,e)=>{"use strict";e.d(i,{h:()=>r});var s=e(3912),n=e(8380);function r(t){n.z.setTimeout((function(){var i=s.v.onUnhandledError;if(!i)throw t;i(t)}))}},8729:(t,i,e)=>{"use strict";function s(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}e.d(i,{z:()=>s})},5139:(t,i,e)=>{"use strict";var s,n;e.d(i,{O:()=>s,c:()=>n}),function(t){t.PARALLEL_CALLS_DEFAULT=5,t.PARALLEL_WINS_DEFAULT=10,t.MAX_WINS_DEFAULT=-1,t.DEFAULT_DESIRED_BITRATE=1,t.REMOVE_BIDS_DEFAULT=!1,t.MID_SESSION_PREFETCH_MINIMUM_TIME=1e4,t.NON_LINEAR_MAX_HEIGHT_PERCENT=20,t.NON_LINEAR_MAX_WIDTH_PERCENT=80,t.DEFAULT_MAX_AD_DURATION=180}(s||(s={})),function(t){t.BANNED_IMA_ADS_ID=["9026814","9053547"],t.KEYWORDS_FOR_BANNED_VAST=[]}(n||(n={}))},6210:(t,i,e)=>{"use strict";e.d(i,{_:()=>n,h:()=>s});const s="nonLinearCloseClick",n=["ddb2f21f-97a6-4efe-b8d3-29187a109f26","6faf989f-40de-4754-ac8e-359574e4b357","a28964ae-afa3-45d3-9f00-fa228cf89d74","5ee7c0e2-db41-417d-a2f2-4d91037b85bd","885d6a6e-3989-4b92-b39d-f27bf95585f6","fb24d42c-879a-4d98-8bc6-037f99e971ed","17db3dde-36f2-4c05-9e37-0c6d6cd2d2b8","3ebdd57e-b5b8-4fd8-8887-6ae94a978a12","4b724681-b6ed-4206-af76-91558dd7ae97","6aef9fe6-a3f3-48a0-ae28-b068a96f45e1","90857b8e-560f-42c0-b0d1-5c4527da610c","14f5a754-5e79-42ff-a5a3-0cbe2300f428","8b29f95e-7663-4825-97c5-85e4b427df2a","3de724ff-efea-4f24-b1a4-5520a0530ee1","fe9242a7-7f5a-40f0-84ad-0d1cb921dbbe","b51de0ac-a3f1-4618-89dc-89111ff5ec62","11d8c7dd-ba90-4bae-9148-e32a7b2fecef","a35dcb98-5f9a-472e-98bf-8fe48d66c86d","5863ca7a-9fea-40e4-a207-0f1e82d07ed7","c8916590-a8b2-4c1c-9616-e251f70bb88b","0ab96a0d-2794-4727-81e7-ca9b1935de68","1bc398f8-c04c-4d33-89c8-af4932b4365c","de0d3790-6d2f-4de3-a99f-c57e4ff48315","fa930c65-1cfa-492a-b774-c32f657d05c3","be8b2598-a065-4d14-8865-4e077b92c65c","98abb9bd-c4dd-413a-bfaf-f79615250a5a","9a4005b0-473d-40be-81d0-ff5d4739b27c","41524015-c77a-4aad-88c8-327e8a55118d","07b3f552-8cd1-4af6-845c-bbc9956d1565","8cd4291c-d6fb-407f-adee-22547cf3d545","66ef0899-eaf6-4bd7-8993-e4d17d730dad","e8ee883f-4058-454c-b198-ebe07884fd42","08d77337-01a3-6602-77df-0366fd684428","dea7fe60-f902-42d0-9aca-9732e064e44e","442ef13a-dec7-4c67-858e-8ae8112c2818","e25ff406-83a4-480f-9632-d687a8f060b9","24a0faa2-a178-41f9-a37b-22c8f01cb26b","75b73df5-e303-47f8-8383-4093b1aef937","0acc1292-75a0-4578-8110-a5de236c4676","ca99043c-edc0-4451-adf3-a6803de76c8e","79669999-34e8-4b9e-aa03-320a318ebf31","a475e8a0-9824-4027-b35f-3d039902afe5"]},6888:(t,i,e)=>{"use strict";var s,n,r,o,h;e.d(i,{wy:()=>s,ZJ:()=>n,RG:()=>r,zc:()=>o,fI:()=>h}),function(t){t[t.IDLE=0]="IDLE",t[t.LOADING=1]="LOADING",t[t.CONSUMED_LOADING=2]="CONSUMED_LOADING",t[t.LOADED=3]="LOADED",t[t.STARTING=4]="STARTING",t[t.IMPRESSION=5]="IMPRESSION",t[t.CONSUMED_LOADED=6]="CONSUMED_LOADED",t[t.INVALIDATED=7]="INVALIDATED"}(s||(s={})),function(t){t.Html="text/html",t.Javascript="application/javascript"}(n||(n={})),function(t){t.Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.ImaLoadInitError="imaLoadInitError",t.ImaCreateWrapperError="imaCreateWrapperError",t.ImaInitWrapperError="imaInitWrapperError",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.VastNonLinearImageLoadFailure="nonLinearVastImageLoadFailure",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError",t.NonLinearZeroDimensions="nonLinearzeroDimensions",t.NonLinearImageToLarge="nonLinearImageToLarge",t.NonLinearUnsupportedMedia="nonLinearUnsupportedMedia"}(r||(r={})),function(t){t.Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail"}(o||(o={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"}(h||(h={}))},8921:(t,i,e)=>{"use strict";e.d(i,{o:()=>c});var s=e(6899),n=e(4798),r=e(5715),o=e(4656),h=e(5650);class a{constructor(){this.requestNumber=0}}class c{constructor(t,i){this.protoLineItem=t,this.historicalMetrics=new a,this.bidsInFetch=new Set,this.aggregators=new Set,this.hasAggregator=this.ei(t.creativeType),this.price=this.si(),this.yoScore=this.ni(i)}updateMetadata(t){const i=(0,o.pi)(t,this.protoLineItem);this.protoLineItem=(0,r.R)(this.protoLineItem,i)}ei(t){return(0,n.$K)(s.TF[t])}si(){const{floorPrice:t,customCpm:i,adxFloorPricePredictionList:e}=this.protoLineItem;return(0,n.r)(t)?t:(0,n.r)(i)?i:(0,h.BZ)(e)?(0,o.RC)(e[0].floorPriceObfuscated):0}ni(t){const{advertiserLineItemId:i,lineItemPriority:e}=this.protoLineItem;return t.calculateLineItemYoScore(i,{cpm:this.price,priority:e},this.hasAggregator)}}},4360:(t,i,e)=>{"use strict";e.d(i,{pe:()=>F,EM:()=>U,f1:()=>J,Kz:()=>ct,pr:()=>pt,O5:()=>K,SI:()=>Et});var s=e(6888),n=e(4065),r=e(5650),o=e(3020),h=e(9791),a=e(4798),c=e(6716),d=e(1187);const l=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]];class u{constructor(t,i,e){this.oi=t,this.ai=i,this.ci=e,this.di=`div-gpt-ad-1589549806211-${(0,h.qs)()}`,this.ui=new c.x,this.mi=new c.x,this.vi=new c.x}get onCreativeReceived(){return this.vi.asObservable()}get onDisplayAd(){return this.ui.asObservable()}get onError(){return this.mi.asObservable()}getAdMediaHeight(){return this.gi?this.gi.clientHeight:0}getAdMediaWidth(){return this.gi?this.gi.clientWidth:0}initializeAd(t,i){try{this.yi=t,this.bi(t);const e=this.Ii(i.width,i.height);this.oi.cmd.push((()=>{this.wi=this.oi.defineSlot(this.ci,e,this.di).addService(this.oi.pubads()).setTargeting("domains",this.ai),this.oi.enableServices(),this.Si(this.wi),this.oi.pubads().isInitialLoadDisabled()&&this.oi.pubads().refresh([this.wi]),this.oi.display(this.di)}))}catch(t){this.mi.next(s.RG.WrapperInitAdError)}}destroy(){this.oi.cmd.push((()=>{this.oi.destroySlots&&this.wi&&this.oi.destroySlots([this.wi])}))}Si(t){this.oi.pubads().addEventListener("slotOnload",(i=>{var e,s;if(i.slot===t){try{const t=null===(s=null===(e=null==i?void 0:i.slot)||void 0===e?void 0:e.getResponseInformation())||void 0===s?void 0:s.creativeId;t&&this.vi.next(t.toString())}catch(t){(0,d.n)({message:"AdManager_GptWrapper_creativeId",level:d.D.WARN,exception:t.message,callStack:t.stack})}this.ui.next()}})),this.oi.pubads().addEventListener("slotRenderEnded",(t=>{var i;if(t.slot===this.wi){try{this.gi=null===(i=this.yi)||void 0===i?void 0:i.getElementsByTagName("iframe")[0],(0,a.$K)(this.wi)&&(0,o.AX)(this.gi.contentWindow,"GPTWrapper")}catch(t){}t.isEmpty&&this.mi.next(s.RG.AdxOverlayNoFill)}}))}bi(t){t.id=this.di}Ii(t,i){return l.filter((e=>!Array.isArray(e)||!(0,r.fn)(e)||(0,r.BZ)(e)&&e[0]<=t&&e[1]<=i))}}var p=e(1509);class f{constructor(){this.Ai=new c.x}get onVpaidEvent(){return this.Ai.asObservable()}handshakeVersion(t="2.0"){return"2.0"}}var m;!function(t){t[t.Win=0]="Win",t[t.AdLoaded=1]="AdLoaded",t[t.AdStarted=2]="AdStarted",t[t.AdImpression=3]="AdImpression"}(m||(m={}));class v{constructor(t){this.Pi=t,this._i=new Map,(0,a.$K)(this.Pi.settings.bidLifecycle)||(this.Pi.settings.bidLifecycle={})}onTrackingLifecycleEvent(t){switch(this._i.set(t,Date.now()),t){case m.AdLoaded:this.xi();break;case m.AdImpression:this.ki()}}xi(){this.Pi.settings.bidLifecycle.winToAdLoadedTime=this.Ci}ki(){this.Pi.settings.bidLifecycle.startAdToImpressionTime=this.Ei}get Ei(){return this._i.get(m.AdImpression)&&this._i.get(m.AdStarted)?this._i.get(m.AdImpression)-this._i.get(m.AdStarted):0}get Ci(){return this._i.get(m.AdLoaded)&&this._i.get(m.Win)?this._i.get(m.AdLoaded)-this._i.get(m.Win):0}}var g=e(1828),y=e(289);var b=e(9223),I=e(8983),w=e(9022);const S=`\n            <div class=${I.p0.CloseButton} role='button' aria-label='Close ad' tabindex='0'>\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 73 18"><path d="M32.266 8.293c-.105.902-.439 1.6-1.002 2.092s-1.303.732-2.233.732c-1.008 0-1.816-.361-2.426-1.084s-.908-1.689-.908-2.9v-.82c0-.793.141-1.49.422-2.092s.688-1.062 1.207-1.383 1.121-.486 1.805-.486c.906 0 1.633.254 2.18.762s.865 1.203.955 2.098h-1.131c-.098-.68-.311-1.172-.639-1.477s-.779-.457-1.365-.457c-.719 0-1.283.266-1.693.797s-.609 1.287-.609 2.268v.826c0 .926.193 1.662.58 2.209s.928.82 1.623.82c.625 0 1.104-.141 1.436-.422s.559-.779.668-1.482h1.131zM34.815 11h-1.084V2h1.084v9zm1.453-3.229c0-.621.121-1.18.363-1.676s.586-.879 1.02-1.148a2.79 2.79 0 0 1 1.494-.404c.863 0 1.561.299 2.092.897s.803 1.393.803 2.385V7.9c0 .617-.119 1.172-.357 1.664a2.67 2.67 0 0 1-1.014 1.143c-.437.273-.941.41-1.512.41-.859 0-1.557-.299-2.092-.896s-.797-1.389-.797-2.373v-.076zm1.09.129c0 .703.162 1.268.486 1.693a1.57 1.57 0 0 0 1.312.639c.551 0 .988-.215 1.313-.645s.486-1.039.486-1.816c0-.695-.166-1.258-.498-1.687a1.56 1.56 0 0 0-1.312-.65c-.535 0-.967.213-1.295.639s-.492 1.035-.492 1.828zm9.732 1.418c0-.293-.111-.52-.334-.68s-.604-.305-1.154-.422-.982-.258-1.307-.422-.559-.359-.715-.586-.229-.496-.229-.809c0-.52.219-.959.656-1.318s1.004-.539 1.688-.539c.719 0 1.301.186 1.746.557s.674.846.674 1.424h-1.09c0-.297-.127-.553-.381-.768s-.566-.322-.949-.322c-.395 0-.703.086-.926.258a.81.81 0 0 0-.334.674c0 .262.104.459.311.592s.58.26 1.119.381.983.266 1.318.434.584.371.744.609a1.5 1.5 0 0 1 .246.861 1.63 1.63 0 0 1-.68 1.365c-.453.34-1.041.51-1.764.51-.508 0-.957-.09-1.348-.27s-.697-.43-.92-.75a1.84 1.84 0 0 1-.328-1.049h1.084c.02.363.164.652.433.867s.633.316 1.078.316c.41 0 .738-.082.984-.246a.77.77 0 0 0 .375-.668zm5.127 1.799c-.859 0-1.559-.281-2.098-.844s-.809-1.322-.809-2.267v-.199c0-.629.119-1.189.358-1.682s.578-.883 1.008-1.16a2.56 2.56 0 0 1 1.406-.422c.824 0 1.465.271 1.922.814s.686 1.32.686 2.332v.451h-4.295c.016.625.197 1.131.545 1.518s.797.574 1.336.574c.383 0 .707-.078.973-.234a2.44 2.44 0 0 0 .697-.621l.662.516c-.531.816-1.328 1.225-2.391 1.225zm-.135-5.684a1.44 1.44 0 0 0-1.102.481c-.297.316-.48.762-.551 1.336h3.176v-.082c-.031-.551-.18-.977-.445-1.277s-.625-.457-1.078-.457zM62.84 11c-.062-.125-.113-.348-.152-.668-.504.523-1.105.785-1.805.785-.625 0-1.139-.176-1.541-.527a1.71 1.71 0 0 1-.598-1.348c0-.66.25-1.172.75-1.535s1.211-.551 2.121-.551h1.055v-.498c0-.379-.113-.68-.34-.902s-.561-.34-1.002-.34c-.387 0-.711.098-.973.293s-.393.432-.393.709h-1.09c0-.316.111-.621.334-.914s.531-.531.914-.703.811-.258 1.272-.258c.73 0 1.303.184 1.717.551s.629.865.645 1.506v2.918c0 .582.074 1.045.223 1.389V11H62.84zm-1.799-.826c.34 0 .662-.088.967-.264s.525-.404.662-.686v-1.3h-.85c-1.328 0-1.992.389-1.992 1.166 0 .34.113.605.34.797s.517.287.873.287zm4.148-2.396c0-.973.23-1.754.691-2.344a2.18 2.18 0 0 1 1.811-.891c.742 0 1.33.254 1.764.762V2h1.084v9h-.996l-.053-.68c-.434.531-1.037.797-1.811.797a2.17 2.17 0 0 1-1.799-.902c-.461-.601-.691-1.387-.691-2.355v-.082zm1.084.123c0 .719.148 1.281.445 1.687s.707.609 1.23.609c.688 0 1.189-.309 1.506-.926V6.359a1.59 1.59 0 0 0-1.494-.896c-.531 0-.945.205-1.242.615s-.445 1.018-.445 1.822zM16 1.41L14.59 0 9 5.59 3.41 0 2 1.41 7.59 7 2 12.59 3.41 14 9 8.41 14.59 14 16 12.59 10.41 7 16 1.41z"/></svg>\n            </div>`.trim();class A{constructor(t,i,e,s,n,r,o,h){this.Mi=t,this.Li=i,this.Bi=e,this.Ri=s,this.Oi=n,this.Di=r,this.Vi=o,this.Fi=h,this.di="div-cnx-display",this.ui=new c.x,this.Ni=new c.x,this.mi=new c.x,this.ji=new c.x,this.$i=t=>{this.Ni.next()},this.Ui=t=>{this.ji.next()}}get onDisplayAd(){return this.ui.asObservable()}get onError(){return this.mi.asObservable()}get onClickClose(){return this.Ni.asObservable()}get onClickAd(){return this.ji.asObservable()}createBanner(t){this.qi=new g.o(this.Oi,this.Di),this.Hi=t?this.zi(this.Ri,t):this.Ri;let i="";this.Bi===s.ZJ.Html&&(i=this.Li);let e="",n="";switch(this.Mi){case y.ProtoAdType.Overlay:e=`#${this.di}{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}`,n=`#${this.di}{border:3px solid white}`;break;case y.ProtoAdType.Nonlinear:e=`#${this.di}{width: 100%; height: 100%}`}const r="<style>html, body {position:relative;width:100%;height:100%}"+e+n+"#"+this.di+" iframe{display:block}</style>";this.qi.loadIframe({customHead:r,customHtml:'<div id="'+this.di+'">'+i+"</div>",container:this.Hi,customReportingLog:{heavyAdBlockTypeEnum:y.ProtoHeavyAdBlockTypeEnum.OverlayIframe,advertiserLineItemId:this.Vi},iframePosition:this.Mi===y.ProtoAdType.Nonlinear?b._.relative:b._.absolute,iframeCustomDimensions:this.Fi?this.Fi:void 0,iframePointerEvents:b.P.all,title:w.$b}).then((t=>{this.Wi=t.iframe;const i=this.Wi.contentWindow;if(this.Gi=i.document.getElementById(this.di),this.Bi===s.ZJ.Javascript&&(0,o.ML)(this.Gi,i,this.Li),""===this.Wi.contentWindow.document.head.innerHTML){const t=r;this.Xi(t)}(0,o.AX)(this.Wi.contentWindow,"AdHtmlWrapper"),this.Mi===y.ProtoAdType.Nonlinear&&this.Qi(),this.ui.next()})).catch((t=>{this.mi.next()}))}getAdMediaDimensions(){return{width:this.Gi.clientWidth||this.Wi.contentWindow.document.body.clientWidth,height:this.Gi.clientHeight||this.Wi.contentWindow.document.body.clientHeight}}destroy(){var t;null===(t=this.Gi)||void 0===t||t.removeEventListener("click",this.Ui),this.Yi&&(this.Yi.removeEventListener("click",this.$i),this.Hi.removeChild(this.Yi)),this.Wi&&this.Ri&&(0,o.bX)(this.Wi),this.qi&&(this.qi.destroy(),this.qi=null)}Qi(){var t;this.Yi=this.Oi.createElementByString(S),this.Hi.appendChild(this.Yi),this.Yi.addEventListener("click",this.$i),null===(t=this.Gi)||void 0===t||t.addEventListener("click",this.Ui)}Xi(t){const i=this.Wi.contentWindow.document.createElement("style"),e=this.Wi.contentWindow.document.createTextNode(t);i.appendChild(e),this.Wi.contentWindow.document.head.appendChild(i)}zi(t,i){if(!i.width||!i.height)return t;let e,s;if(this.Mi===y.ProtoAdType.Nonlinear)e=s="100%";else e=i.width+"px",s=i.height+"px";const n=this.Oi.createElementByString(`<div class="cnx-iframe-container" style="width: ${e}; height: ${s}"></div>`);return t.appendChild(n),n}}var P,_=e(7689),x=e(9600),T=(e(7129),e(9906)),k=e(5885),C=e(2239),E=e(8090);!function(t){t.IMPRESSION_TIMEOUT="IMPRESSION_TIMEOUT",t.VIEWABLE_IMPRESSION_TIMEOUT="VIEWABLE_IMPRESSION_TIMEOUT",t.SKIP_AD_TIMEOUT="SKIP_AD_TIMEOUT",t.STOP_AD_TIMEOUT="STOP_AD_TIMEOUT",t.AD_LOADED_TIMEOUT="AD_LOADED_TIMEOUT"}(P||(P={}));const M=[s.fI.AdImpression,s.fI.AdSkipped,s.fI.AdStopped,s.fI.AdError,s.fI.AdVideoFirstQuartile,s.fI.AdVideoMidpoint,s.fI.AdVideoThirdQuartile,s.fI.AdVideoComplete],L="cnx-ad-bid-slot-selected",B="Connatix Ad";class R extends f{constructor(t,i){super(),this.Ki=t,this.settings=i,this.bidStatusHistory=[],this.Ri=null,this.Zi=null,this.te=null,this.ie=null,this.ne=void 0,this.re=!1,this.oe=!1,this.he=!1,this.ae=!1,this.ce=!1,this.de=!1,this.le=!1,this.ue=[],this.fe=null,this.me=new c.x,this.ve=new c.x,this.ye=new c.x,this.be=[],this.Ie=!1,this.Se=()=>{this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.Timeout,errorCode:E.Oq.ImpressionTimeout}}),this.ue.length&&(0,d.n)({message:"BidAdaptor_ImpressionTimeout",exception:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${this.creativeId}_bidid:${this.settings.bidId}`,callStack:JSON.stringify(this.ue),level:d.D.WARN}),this._e()},this.xe=()=>{this.Te(),this.ke(P.VIEWABLE_IMPRESSION_TIMEOUT).clearTimeout(),this.settings.viewabilityService.off(this.Ri,this.Ee)},this.Ee=t=>{const i=this.ke(P.VIEWABLE_IMPRESSION_TIMEOUT);this.ye.next(t),t?i.timeoutHandle.timeoutId||i.setTimeout():i.clearTimeout()},this.Me=()=>{this.Pe({type:s.fI.AdSkipped}),this._e()},this.Le=()=>{this.Pe({type:s.fI.AdStopped,payload:{shouldTrackPostBid:!0}}),this._e()},this.Re=()=>{const t=E.Oq.MediaFileUriTimeout;this.Oe=t,this.Pe({type:s.fI.AdError,payload:{errorCode:t,errorMessage:s.RG.TimeoutLoaded}}),this._e()},this.ke=t=>{const i=this.De[t];return{timeoutHandle:i,setTimeout:()=>{i.timeoutId=this.Ki.setTimeout((()=>{i.callback()}),i.timeout)},clearTimeout:()=>{null!==i.timeoutId&&(this.Ki.clearTimeout(i.timeoutId),i.timeoutId=null)}}},this.status=s.wy.IDLE,this.price=this.settings.price,this.yoScore=this.settings.yoScore,this.Fe=T.h.getSessionChildContainer(this.settings.sessionId).resolve(k.P),this.Ne=Date.now(),this.creativeId=this.settings.externalCreativeId,this.je=`cnx-ad-bid-slot-id-${this.settings.requestMetadata.data.cnxBidId}`,this.$e=`cnx-ad-slot-${this.settings.bidId}`;const{adType:e}=this.settings.adManagerLineItem.protoLineItem;this.De={[P.IMPRESSION_TIMEOUT]:{callback:this.Se,timeout:25e3,timeoutId:null},[P.VIEWABLE_IMPRESSION_TIMEOUT]:{callback:this.xe,timeout:w.xs[e],timeoutId:null},[P.SKIP_AD_TIMEOUT]:{callback:this.Me,timeout:500,timeoutId:null},[P.STOP_AD_TIMEOUT]:{callback:this.Le,timeout:500,timeoutId:null},[P.AD_LOADED_TIMEOUT]:{callback:this.Re,timeout:25e3,timeoutId:null}},this.Ue=i.urlSuffixerService}set status(t){this.He=t,this.bidStatusHistory.push(s.wy[t]),this.me.next(t)}get status(){return this.He}get onStatusChanged(){return this.me.asObservable()}get createdTimestamp(){return this.Ne}get loadingTimeMs(){return this.ze}get startingTimeMs(){return this.We}get started(){return this.he}get errorReason(){return this.Ge}get vastErrorCode(){return this.Oe}get shouldTrackPostbid(){return this.Ie}get onAdSlotViewabilityChanged(){return this.ye.asObservable()}invalidate(){this.he||(this.status=s.wy.INVALIDATED)}skipAd(){this.ke(P.SKIP_AD_TIMEOUT).setTimeout()}stopAd(t){if((0,h.Vm)([95,5])){const i=T.h.getSessionChildContainer(this.settings.sessionId).resolve(C.B);(0,d.n)({message:"META_LOW_VCR_"+(i.implementationType===y.ProtoImplementationType.Amp?"AMP":"NOT_AMP"),level:d.D.INFO,callStack:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,exception:t})}this.ke(P.STOP_AD_TIMEOUT).setTimeout()}startAd(){const{adManagerLineItem:t,bidId:i,requestMetadata:e}=this.settings;this.Xe=Date.now(),this.he=!0,this.status=s.wy.STARTING,this.de&&(0,d.n)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.$e}`,level:d.D.CRITICAL}),this.de=!0,this.ke(P.IMPRESSION_TIMEOUT).setTimeout()}initAd(t,i,e,n,r,o,h){this.Je=Date.now(),this.status=s.wy.LOADING,this.ce&&(0,d.n)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.$e}`,level:d.D.CRITICAL}),this.ce=!0,this.ke(P.AD_LOADED_TIMEOUT).setTimeout(),this.bi(h),this.Qe=new v(this),this.Qe.onTrackingLifecycleEvent(m.Win)}setAdVolume(t){this.Zi.volume=t,(0,o.Q1)(this.Zi,t),this.Fe.isImaTestCaseForSS()||(t<=0?this.settings.adEnforcer.start(_._I.Mute):this.settings.adEnforcer.stop(_._I.Mute))}getTrackerSlot(){return this.te}get impressionStarted(){return this.re}get creativeId(){return this.ne}set creativeId(t){(0,a.QM)(this.creativeId)||(this.ne=t)}get onAdViewableImpression(){return this.ve.asObservable()}Ye(t){let i;(0,a.hj)(t.payload.skipOffset)&&(i=t.payload.skipOffset);const e={type:s.fI.AdLoaded,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adLoadedData:{skipOffset:i},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,vastVerifications:t.payload.verificationScriptResources,containers:t.payload.containers}};return this.settings.adLoadedPayload=e,e}Ke(){if(this.te){const t=this.te.getAttribute("aria-hidden");this.te.setAttribute("aria-hidden","true"===t?"false":"true")}}Ze(t){return{type:s.fI.AdImpression,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:B,skipOffset:this.skipOffset},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}get skipOffset(){var t,i,e;return null===(e=null===(i=null===(t=this.settings.adLoadedPayload)||void 0===t?void 0:t.payload)||void 0===i?void 0:i.adLoadedData)||void 0===e?void 0:e.skipOffset}ts(t){return{type:s.fI.AdVideoStart,payload:{adType:this.settings.adManagerLineItem.protoLineItem.adType,adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:B},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId},logInMobiInfo:t.payload.logInMobiInfo}}}Pe(t){if(t.payload||(t.payload={}),this.es(t.type),t.payload.adType=this.settings.adManagerLineItem.protoLineItem.adType,!this.ss(t))return void this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.InvalidVpaidEvent,errorCode:E.Oq.GeneralError}});const{adManagerLineItem:i,bidId:e,requestMetadata:n}=this.settings,{cnxBidId:r}=n.data;switch(t.type){case s.fI.AdLoaded:0,this.Qe.onTrackingLifecycleEvent(m.AdLoaded),this.ke(P.AD_LOADED_TIMEOUT).clearTimeout(),this.Ai.next(this.Ye(t)),this.oe=!0,this.ze=(0,a.hj)(this.Je)?Date.now()-this.Je:0,this.status=s.wy.LOADED;break;case s.fI.AdImpression:this.We=(0,a.hj)(this.Xe)?Date.now()-this.Xe:0,this.Qe.onTrackingLifecycleEvent(m.AdImpression),this.ke(P.IMPRESSION_TIMEOUT).clearTimeout(),this.ns(),(0,o.cn)(this.te,L),this.Ke(),this.Ai.next(this.Ze(t)),this.re=!0,this.status=s.wy.IMPRESSION;break;case s.fI.AdVideoStart:this.Qe.onTrackingLifecycleEvent(m.AdStarted),this.Ai.next(this.ts(t));break;case s.fI.AdStopped:case s.fI.AdSkipped:case s.fI.AdError:this.rs(t);break;default:this.Ai.next(t)}}rs(t){var i;this.ae?(0,d.n)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:d.D.WARN}):((0,a.hj)(this.ze)||((0,a.hj)(this.Je)?this.ze=Date.now()-this.Je:this.ze=0),(0,a.hj)(this.We)||((0,a.hj)(this.Xe)?this.We=Date.now()-this.Xe:this.We=0),s.fI.AdError===t.type&&(this.Ge=t.payload.errorMessage,this.Ie=!0),s.fI.AdStopped===t.type&&(this.Ge=s.RG.AdStopped,this.Ie=!!(null===(i=t.payload)||void 0===i?void 0:i.shouldTrackPostBid)),s.fI.AdSkipped===t.type&&(this.Ge=s.RG.AdStopped,this.Ie=!1),this.hs(),this.Ai.next(t),this.He!==s.wy.INVALIDATED&&(this.oe?this.status=s.wy.CONSUMED_LOADED:(this.He!==s.wy.LOADING&&(0,d.n)({message:"Bid_idle_consumed",level:d.D.WARN},{throttle:1,shouldSendMaxLog:!1}),this.status=s.wy.CONSUMED_LOADING)))}bi(t){this.ie=this.cs(),this.te=this.ie.slotsContainer,(0,o.cn)(this.te,this.je),this.Ri=this.ie.adSlot,this.Ri.id=this.$e,this.te.id=this.settings.bidSlotId,this.Zi=this.ie.videoSlot,this.Zi.volume=t,(0,o.Q1)(this.Zi,t),this.Fe.isImaTestCaseForSS()||(this.settings.adEnforcer.registerContainer(this.te,this.$e),this.be.push(this.settings.adEnforcer.onEnforcerEvent.subscribe((t=>{this.ds(t)}))),this.settings.adEnforcer.start(_._I.All))}cs(){return this.settings.adSlotContainerRecycler.requestAdSlot(this.settings.adContainer)}hs(){try{this.ae=!0,(0,o.IV)(this.te,L),(0,o.IV)(this.te,this.je),this.Ri.removeAttribute("id"),this.te.removeAttribute("id"),this.Ke(),(0,x.i)(this.be),this._e(),this.settings.adEnforcer.deregisterContainer(this.te),this.settings.viewabilityService.off(this.Ri,this.Ee),null!==this.fe&&this.Ki.clearTimeout(this.fe),this.ls()}catch(t){this.us("ABaseBidAdaptor","_destroy",(0,h.W$)(t))}}ls(){this.fe=this.Ki.setTimeout((()=>{this.settings.adSlotContainerRecycler.destroyAdSlot(this.ie)}),500)}Te(){const{advertiserLineItemId:t,publisherLineItemId:i}=this.settings.adManagerLineItem.protoLineItem;this.ve.next({advertiserLineItemId:t,publisherLineItemId:i,rtbSeatId:this.settings.requestMetadata.data.rtbSeatId,dspId:this.settings.requestMetadata.data.dspId,rtbAdomain:this.settings.requestMetadata.data.rtbAdomain})}ns(){const t=w.fJ,i=this.Ri;this.settings.viewabilityService.on(i,this.Ee,{threshold:t}),this.Ee(this.settings.viewabilityService.check({threshold:t,element:i}))}_e(){Object.keys(this.De).forEach((t=>{this.ke(t).clearTimeout()}))}ss(t){return!(!this.re&&(t.type===s.fI.AdStopped||t.type===s.fI.AdSkipped))}ds(t){if(t.detectedContainer!==this.te)return;let i;switch(t.type){case _.lU.BADURI_DETECTED:i="AdManager_enforcer_BadUri";break;case _.lU.MALWARE_DETECTED:i="AdManager_enforcer_malware",this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.EnforcementMalware,errorCode:E.Oq.GeneralError}});break;case _.lU.VOLUME_DETECTED:i="AdManager_enforcer_soundBlock",this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.EnforcementVolume,errorCode:E.Oq.GeneralError}})}(0,d.n)({message:i,exception:t.message,level:d.D.WARN})}es(t){if(!this.ce&&(M.includes(t)||t===s.fI.AdLoaded)){if(this.ue.push(t),this.le)return;this.le=!0,(0,d.n)({message:`${this.adMediaType?this.adMediaType:""}BidAdaptor_AdIdle_${t}BeforeInitAd`,exception:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${this.creativeId}_bidid:${this.settings.bidId}`,callStack:"PostBidInitAd",level:d.D.WARN})}if(this.oe&&!this.de&&M.includes(t)){if(this.ue.push(t),this.le)return;this.le=!0,(0,d.n)({message:`${this.adMediaType?this.adMediaType:""}BidAdaptor_AdLoaded_${t}WithoutStartAd`,exception:`advertiserLineItemId:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${this.creativeId}_bidid:${this.settings.bidId}`,callStack:"PostBidStartAd",level:d.D.WARN})}}us(t,i,e){const s=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,n=this.creativeId;(0,d.n)({message:`AdManager_${t}_${i}`,exception:`advertiserLineItemId:${s}_creativeId:${n}_errorMessage:${null==e?void 0:e.message}`,callStack:null==e?void 0:e.stack,level:d.D.WARN},{throttle:10})}}var O=e(9357),D=e(4581),V=e(8850);class F extends R{constructor(t,i){super(t,i),this.Ki=t,this.settings=i,this.adMediaType="displayAdx",this.adSourceType=y.ProtoAdsourceTypeEnum.Unknown,this.ps="adx",this.vs={[p.n.FirstQuartile]:s.fI.AdVideoFirstQuartile,[p.n.SecondQuartile]:s.fI.AdVideoMidpoint,[p.n.ThirdQuartile]:s.fI.AdVideoThirdQuartile,[p.n.FourthQuartile]:s.fI.AdVideoComplete},this.gs=[];const e=this.settings.adManagerLineItem.protoLineItem.overlayTime*O.s_;this.ys=new n.B(this.Ki,e,500),this.gs.push(this.ys.onTimeUpdate.subscribe((()=>{this.Pe({type:s.fI.AdRemainingTimeChange})})),this.ys.onTimeElapsed.subscribe((()=>{this.stopAd("adxTimerElapsed")})),this.ys.onQuartile.subscribe((t=>{this.Pe({type:this.vs[t],payload:{}})})))}initAd(t,i,e,n,r,o,h){try{super.initAd(t,i,e,n,r,o,h),this.bs={width:t,height:i},this.Is().then((t=>{this.ws=new u(t,this.settings.domain,this.settings.adxAdUnitPath),this.gs.push(this.ws.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.Pe({type:s.fI.AdLoaded,payload:{skipOffset:0}})})).catch((t=>{this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdxOverlayGptScriptLoad+`_${t.message}`,errorCode:V.O.GeneralError}})}))}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorInitAdError+`_${t.message}`,errorCode:V.O.GeneralError}})}}startAd(){try{super.startAd(),this.gs.push(this.ws.onDisplayAd.subscribe((()=>{this.Pe({type:s.fI.AdStarted}),this.Pe({type:s.fI.AdVideoStart}),this.Pe({type:s.fI.AdImpression,payload:{}}),this.ys.start()})),this.ws.onError.subscribe((t=>{this.Pe({type:s.fI.AdError,payload:{errorMessage:t,errorCode:V.O.GeneralError}}),this.ys.stop()}))),this.ws.initializeAd(this.Ri,this.bs)}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorStartAdError+`_${t.exception}`,errorCode:V.O.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.ys.stop(),this.Pe({type:s.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.us("AdxBidAdaptor","stopAd",t)}}resizeAd(t,i,e){this.bs&&(this.bs.width=t,this.bs.height=i)}pauseAd(){try{this.ys.stop(),this.Pe({type:s.fI.AdPaused})}catch(t){this.us("AdxBidAdaptor","pauseAd",t)}}resumeAd(){try{this.ys.start(),this.Pe({type:s.fI.AdPlaying})}catch(t){this.us("AdxBidAdaptor","resumeAd",t)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.Pe({type:s.fI.AdSkipped})}catch(t){this.us("AdxBidAdaptor","skipAd",t)}}getAdRemainingTime(){return this.ys.timeRemaining/O.s_}getAdDuration(){return this.ys.timerDuration/O.s_}getAdVolume(){return 0}getAdMediaSize(){return{width:this.ws.getAdMediaWidth(),height:this.ws.getAdMediaHeight()}}setAdVolume(t){}get adVideoUrl(){return this.ps}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}Is(){const t=(0,h.pE)(window).topFrame;if(t.googletag)return Promise.resolve(t.googletag);{const i={cmd:[]};return t.googletag=window.googletag||i,new Promise(((i,e)=>{(0,o.dZ)({src:D.x},t.document.head,t,(()=>{i(t.googletag)}),(()=>{e()}))}))}}hs(){var t;try{super.hs(),this.ys.stop(),(0,x.i)(this.gs),null===(t=this.ws)||void 0===t||t.destroy()}catch(t){this.us("AdxBidAdaptor","_destroy",t)}}}var N=e(6210);class j{constructor(t,i,e,s,n,r,o){this.Ss=t,this.As=i,this.Vi=e,this.Oi=s,this.Di=n,this.Mi=r,this.Ps=o,this.ui=new c.x,this.Ni=new c.x,this.mi=new c.x,this.be=[]}get onDisplayAd(){return this.ui.asObservable()}get onError(){return this.mi.asObservable()}get onClickClose(){return this.Ni.asObservable()}initializeAd(t,i){try{let e;if(this.Mi===y.ProtoAdType.Nonlinear){const{width:t,height:i}=this.Ps;e={width:t,height:i}}this._s=new A(this.Mi,this.As,this.Ss,t,this.Oi,this.Di,this.Vi,e),this.be.push(this._s.onDisplayAd.subscribe((()=>{this.ui.next()})),this._s.onError.subscribe((()=>{this.mi.next(s.RG.DisplayIntegratorIframeLoad)})),this._s.onClickClose.subscribe((()=>{this.Ni.next()}))),this._s.createBanner(i)}catch(t){this.mi.next(s.RG.WrapperInitAdError)}}getAdMediaDimensions(){var t;return null===(t=this._s)||void 0===t?void 0:t.getAdMediaDimensions()}destroy(){var t;(0,x.i)(this.be),null===(t=this._s)||void 0===t||t.destroy()}}const $={[p.n.FirstQuartile]:s.fI.AdVideoFirstQuartile,[p.n.SecondQuartile]:s.fI.AdVideoMidpoint,[p.n.ThirdQuartile]:s.fI.AdVideoThirdQuartile,[p.n.FourthQuartile]:s.fI.AdVideoComplete};class U extends R{constructor(t,i){var e;let r;super(t,i),this.Ki=t,this.settings=i,this.adSourceType=y.ProtoAdsourceTypeEnum.Unknown,this.Ts=500,this.ks=[],this.settings.adManagerLineItem.protoLineItem.adType===y.ProtoAdType.Nonlinear?(this.adMediaType="displayHtmlNonLinear",this.ps="htmlNonLinear",r=null===(e=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===e?void 0:e.nonLinearAdTimeSeconds):(this.adMediaType="displayHtml",this.ps="html",r=this.settings.adManagerLineItem.protoLineItem.overlayTime);const o=r*O.s_;this.ys=new n.B(this.Ki,o,this.Ts),this.ks.push(this.ys.onTimeUpdate.subscribe((()=>{this.Pe({type:s.fI.AdRemainingTimeChange})})),this.ys.onTimeElapsed.subscribe((()=>{this.stopAd("htmlTimerElapsed")})),this.ys.onQuartile.subscribe((t=>{this.Pe({type:$[t],payload:{}})})))}get adVideoUrl(){return this.ps}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(t,i,e,n,r,o,h){try{super.initAd(t,i,e,n,r,o,h),this.Cs=t,this.Es=i,this.Pe({type:s.fI.AdLoaded,payload:{}})}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorInitAdError+`_${t.message}`,errorCode:V.O.GeneralError}})}}startAd(){try{super.startAd(),this.ys.start(),this.Ls=new j(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService,this.settings.sessionId,this.settings.adManagerLineItem.protoLineItem.adType,this.settings.dimensions),this.ks.push(this.Ls.onDisplayAd.subscribe((()=>{this.Pe({type:s.fI.AdStarted}),this.Pe({type:s.fI.AdVideoStart}),this.Pe({type:s.fI.AdImpression,payload:{}})})),this.Ls.onError.subscribe((t=>{this.Pe({type:s.fI.AdError,payload:{errorMessage:t,errorCode:V.O.GeneralError}}),this.ys.stop()})),this.Ls.onClickClose.subscribe((()=>{this.Pe({type:s.fI.AdUserClose,payload:{}}),this.stopAd(N.h)}))),this.Ls.initializeAd(this.Ri,{width:this.Cs,height:this.Es})}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorStartAdError+`_${t.message}`,errorCode:V.O.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.ys.stop(),this.Pe({type:s.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.us("HtmlBidAdaptor","stopAd",t)}}skipAd(){try{super.skipAd(),this.Pe({type:s.fI.AdSkipped})}catch(t){this.us("HtmlBidAdaptor","skipAd",t)}}pauseAd(){try{this.ys.stop(),this.Pe({type:s.fI.AdPaused})}catch(t){this.us("HtmlBidAdaptor","pauseAd",t)}}resumeAd(){try{this.ys.start(),this.Pe({type:s.fI.AdPlaying})}catch(t){this.us("HtmlBidAdaptor","resumeAd",t)}}collapseAd(){}expandAd(){}getAdDuration(){return this.ys.timerDuration/O.s_}getAdRemainingTime(){return this.ys.timeRemaining/O.s_}getAdVolume(){return 0}getAdMediaSize(){var t;return null===(t=this.Ls)||void 0===t?void 0:t.getAdMediaDimensions()}setAdVolume(t){}resizeAd(t,i,e){this.Cs=t,this.Es=i}hs(){var t;try{super.hs(),this.ys.stop(),(0,x.i)(this.ks),null===(t=this.Ls)||void 0===t||t.destroy()}catch(t){this.us("HtmlBidAdaptor","_destroy",t)}}}var q=e(5139),H=e(7720),z=e(8211),W=e(3326);class G extends f{constructor(t,i,e,n,r,o,h,a){super(),this.Bs=t,this.Rs=i,this.Os=e,this.Ds=n,this.Vs=r,this.Ns=o,this.js=h,this.Di=a,this.vi=new c.x,this.$s=!1,this.Us=t=>{if(!this.zs(t))return;let i="";try{i=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()}catch(t){}this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.ImaError+"_"+i,errorCode:H.Oq.GeneralError}})},this.Ws=t=>{const i=this.Bs.AdEvent.Type;switch(t.type){case i.CLICK:this.Ai.next({type:s.fI.AdClickThru,payload:{}});break;case i.LOADED:this.Gs(t);break;case i.IMPRESSION:const e={adsManager:this.Vs,adContainer:this.Js,viewMode:this.Qs(this.Ks),adTag:this.Ds};this.Ai.next({type:s.fI.AdVideoStart}),this.Ai.next({type:s.fI.AdImpression,payload:{imaMetadata:e}});break;case i.STARTED:this.Ai.next({type:s.fI.AdStarted});break;case i.FIRST_QUARTILE:this.Ai.next({type:s.fI.AdVideoFirstQuartile});break;case i.MIDPOINT:this.Ai.next({type:s.fI.AdVideoMidpoint});break;case i.THIRD_QUARTILE:this.Ai.next({type:s.fI.AdVideoThirdQuartile});break;case i.COMPLETE:this.Ai.next({type:s.fI.AdVideoComplete}),this.Ai.next({type:s.fI.AdStopped,payload:{shouldTrackPostBid:!0}});break;case i.ALL_ADS_COMPLETED:break;case i.DURATION_CHANGE:this.Ai.next({type:s.fI.AdDurationChange});break;case i.PAUSED:this.Ai.next({type:s.fI.AdPaused});break;case i.RESUMED:this.Ai.next({type:s.fI.AdPlaying});break;case i.LINEAR_CHANGED:this.Ai.next({type:s.fI.AdLinearChange});break;case i.SKIPPABLE_STATE_CHANGED:this.Ai.next({type:s.fI.AdSkippableStateChange});break;case i.SKIPPED:this.Ai.next({type:s.fI.AdSkipped});break;case i.VOLUME_CHANGED:this.Ai.next({type:s.fI.AdVolumeChange});break;case i.USER_CLOSE:this.Ai.next({type:s.fI.AdUserClose});break;case i.LOG:this.Ai.next({type:s.fI.AdLog})}},this.Fe=T.h.getSessionChildContainer(this.Di).resolve(k.P),this.Zs()}get onCreativeReceived(){return this.vi.asObservable()}initAd(t,i,e,n,r,o){this.Js=o.slot,this.tn=o.videoSlot,this.Ks=e||s.zc.Normal;try{this.Fe.isImaTestCaseForSS()||this.Fe.isLegacyDotComDomain()||this.Vs.setVolume(0),this.Vs.init(t,i,this.Qs(this.Ks))}catch(t){this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.ImaManagerInit,errorCode:H.Oq.GeneralError}})}}startAd(){try{this.Vs.start()}catch(t){this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.WrapperStartAdError+`_${t.message}`,errorCode:H.Oq.GeneralError}})}}stopAd(t){this.Vs.stop(),this.Ai.next({type:s.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){this.Vs.resize(t,i,this.Qs(e))}pauseAd(){this.Vs.pause()}resumeAd(){this.Vs.resume(),this.Rs===z.M.Ios&&(0,o.UR)(this.tn)}expandAd(){this.Vs.expand()}collapseAd(){this.Vs.collapse()}skipAd(){this.Vs.skip()}getAdRemainingTime(){return this.Vs.getRemainingTime()||0}getAdDuration(){return this.en?this.en.getDuration():0}getAdVolume(){return this.Fe.isImaTestCaseForSS()||this.Fe.isLegacyDotComDomain()?this.Fe.adManagerSound:this.Vs.getVolume()}getAdMediaWidth(){return this.en?this.en.getVastMediaWidth():0}getAdMediaHeight(){return this.en?this.en.getVastMediaHeight():0}setAdVolume(t){(!this.Fe.isImaTestCaseForSS()&&!this.Fe.isLegacyDotComDomain()||t!==this.Fe.adManagerSound||!this.$s&&0!==t)&&(this.$s=!0,this.Vs.setVolume(t))}getMediaFile(){return this.en?this.en.getMediaUrl():void 0}Zs(){this.Os.addEventListener(this.Bs.AdErrorEvent.Type.AD_ERROR,this.Us),this.Vs.addEventListener(this.Bs.AdErrorEvent.Type.AD_ERROR,this.Us),Object.keys(this.Bs.AdEvent.Type).forEach((t=>{this.Vs.addEventListener(this.Bs.AdEvent.Type[t],this.Ws,!1)}))}sn(){this.Os.removeEventListener(this.Bs.AdErrorEvent.Type.AD_ERROR,this.Us),this.Vs.removeEventListener(this.Bs.AdErrorEvent.Type.AD_ERROR,this.Us),Object.keys(this.Bs.AdEvent.Type).forEach((t=>{this.Vs.removeEventListener(this.Bs.AdEvent.Type[t],this.Ws,!1)}))}Qs(t){return t===s.zc.Fullscreen?this.Bs.ViewMode.FULLSCREEN:this.Bs.ViewMode.NORMAL}rn(t){return q.c.BANNED_IMA_ADS_ID.some((i=>i===t))}zs(t){const i=t.getUserRequestContext();return!i||i.id===this.Ns.id}Gs(t){if(this.en=t.getAd(),this.rn(this.en.getAdId()))return void this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.VpaidInvalid,errorCode:H.Oq.GeneralError}});this.vi.next(this.en.getCreativeId());let i=-1,e="";try{i=this.en.getSkipTimeOffset();const s=t.getAdData().clickThroughUrl;e=(0,a.QM)(s)?s:void 0}catch(t){}(0,W.A)(this.js,e).then((t=>{t?this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.DomainBlocked,errorCode:H.Oq.GeneralError}}):this.Ai.next({type:s.fI.AdLoaded,payload:{skipOffset:i}})}))}destroy(){try{this.sn(),setTimeout((()=>{this.Vs.destroy()}))}catch(t){}}}var X=e(402);class J extends R{constructor(t,i){super(t,i),this.Ki=t,this.settings=i,this.ie=null,this.adMediaType="ima",this.adSourceType=y.ProtoAdsourceTypeEnum.Ima,this.hn=[],this.ie=this.settings.imaAdSlotContainer,this.an=new G(this.settings.imaSdk,this.settings.os,this.settings.imaAdsLoader,this.settings.url,this.settings.imaAdsManager,this.settings.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.sessionId)}initAd(t,i,e,n,r,o,h){try{super.initAd(t,i,e,n,r,o,h),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.dn(),this.hn.push(this.an.onVpaidEvent.subscribe((t=>{this.Pe(t)})),this.an.onCreativeReceived.subscribe((t=>{this.creativeId=t}))),this.an.initAd(t,i,e,n,r,{slot:this.Ri,videoSlot:this.Zi})}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorInitAdError+`_${t.message}`,errorCode:V.O.GeneralError}})}}startAd(){try{super.startAd(),this.an.startAd()}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorStartAdError+`_${t.message}`,errorCode:V.O.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.an.stopAd(t)}catch(t){this.us("ImaBidAdaptor","stopAd",t)}}resizeAd(t,i,e){try{this.an.resizeAd(t,i,e)}catch(t){this.us("ImaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.an.pauseAd()}catch(t){this.us("ImaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.an.resumeAd()}catch(t){this.us("ImaBidAdaptor","resumeAd",t)}}expandAd(){try{this.an.expandAd()}catch(t){this.us("ImaBidAdaptor","expandAd",t)}}collapseAd(){try{this.an.collapseAd()}catch(t){this.us("ImaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.an.skipAd()}catch(t){this.us("ImaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.an.getAdRemainingTime()}catch(t){return this.us("ImaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.an&&this.an.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.us("ImaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.an.getAdVolume()}catch(t){return this.us("ImaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.an.getAdMediaWidth(),height:this.an.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.an.setAdVolume(t)}catch(t){this.us("ImaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.an.getMediaFile()}get declaredDurationInSeconds(){return this.an.getAdDuration()}Ze(t){const i=super.Ze(t);return i.payload.adSourceData.imaMetadata=t.payload.imaMetadata,i}cs(){return this.ie}ls(){this.settings.adSlotContainerRecycler.recycleAdSlot(this.ie)}dn(){X.X3.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1)}hs(){try{super.hs(),(0,x.i)(this.hn),this.an.destroy()}catch(t){this.us("ImaBidAdaptor","_destroy",t)}}}var Q=e(9592),Y=e(3714);class K extends R{constructor(t,i){super(t,i),this.Ki=t,this.settings=i,this.ie=null,this.adMediaType="ima",this.adSourceType=y.ProtoAdsourceTypeEnum.Ima,this.hn=[],this.ln=!1,this.un=[]}initAd(t,i,e,n,r,o,h){try{super.initAd(t,i,e,n,r,o,h),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.dn(),this.pn().then((o=>{try{this.vn(o)}catch(t){return void this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.ImaCreateWrapperError+`_${t.message}`,errorCode:H.Oq.GeneralError}})}this.hn.push(this.an.onVpaidEvent.subscribe((t=>{this.Pe(t)})),this.an.onCreativeReceived.subscribe((t=>{this.creativeId=t})));try{this.an.initAd(t,i,e,n,r,{slot:this.Ri,videoSlot:this.Zi})}catch(t){return void this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.ImaInitWrapperError+`_${t.message}`,errorCode:H.Oq.GeneralError}})}})).catch((t=>{this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.ImaLoadInitError+`_${t}`,errorCode:H.Oq.GeneralError}})}))}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorInitAdError+`_${t.message}`,errorCode:H.Oq.GeneralError}})}}startAd(){try{super.startAd(),this.an.startAd()}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorStartAdError+`_${t.message}`,errorCode:H.Oq.GeneralError}})}}stopAd(t){try{super.stopAd(t),this.an.stopAd(t)}catch(t){this.us("ImaBidAdaptor","stopAd",t)}}resizeAd(t,i,e){try{this.an.resizeAd(t,i,e)}catch(t){this.us("ImaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.an.pauseAd()}catch(t){this.us("ImaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.an.resumeAd()}catch(t){this.us("ImaBidAdaptor","resumeAd",t)}}expandAd(){try{this.an.expandAd()}catch(t){this.us("ImaBidAdaptor","expandAd",t)}}collapseAd(){try{this.an.collapseAd()}catch(t){this.us("ImaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.an.skipAd()}catch(t){this.us("ImaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.an.getAdRemainingTime()}catch(t){return this.us("ImaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.an&&this.an.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.us("ImaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.an.getAdVolume()}catch(t){return this.us("ImaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.an.getAdMediaWidth(),height:this.an.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.an.setAdVolume(t)}catch(t){this.us("ImaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.an.getMediaFile()}get declaredDurationInSeconds(){return this.an.getAdDuration()}Ze(t){const i=super.Ze(t);return i.payload.adSourceData.imaMetadata=t.payload.imaMetadata,i}cs(){return this.settings.adSlotContainerRecycler.requestAdSlotIma(this.settings.adContainer)}vn(t){this.an=new G(this.gn.imaSdk,this.settings.os,this.gn.imaAdsLoader,this.settings.url,t.imaAdsManager,t.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.sessionId)}pn(){return this.yn(this.ie).then((t=>(this.ln=!0,this.bn&&(0,x.i)(this.un),Promise.resolve(t)))).catch((t=>(this.ln=!0,this.bn&&((0,x.i)(this.un),this.bn.destroy()),Promise.reject(t))))}yn(t){return t.fetchImaDependencies().then((t=>(this.gn=t,this.In(t)))).then((t=>Promise.resolve(t))).catch((t=>(0,a.$K)(t)?Promise.reject(t):Promise.reject(Q.f.ImaRequestException)))}In(t){return this.ln?Promise.reject():new Promise(((i,e)=>{const s=this.wn(),{advertiserLineItemId:n,adxFloorPricePredictionList:r}=this.settings.adManagerLineItem.protoLineItem;this.bn=new Y.Ce(t.imaSdk,t.imaAdsLoader,s.width,s.height,this.settings.url,this.ie.videoSlot,this.settings.pageUrl,this.settings.sessionId,n,!0,this.settings.xml,r),this.un.push(this.bn.onSuccess.subscribe((t=>{i(t)})),this.bn.onError.subscribe((t=>{e(t)}))),this.bn.loadAd()}))}wn(){return this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType)}dn(){X.X3.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1)}hs(){var t;try{super.hs(),(0,x.i)(this.hn),null===(t=this.an)||void 0===t||t.destroy()}catch(t){this.us("ImaBidAdaptor","_destroy",t)}}}var Z=e(9490),tt=e(2857);class it{constructor(t,i,e,s){this.Sn=t,this.An=i,this.Pn=e,this.xn=s,this.Tn=[],this.kn=(t,i)=>{if(i.fatal)switch(i.type){case this.Sn.ErrorTypes.NETWORK_ERROR:if(i.details===this.Sn.ErrorDetails.MANIFEST_PARSING_ERROR||i.details===this.Sn.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.Cn();this.En.startLoad();break;case this.Sn.ErrorTypes.MEDIA_ERROR:this.En.recoverMediaError();break;default:this.Cn()}},this.Mn=()=>{this.En.off(this.Sn.Events.MEDIA_ATTACHED,this.Mn),this.En.loadSource(this.An),this.En.once(this.Sn.Events.MANIFEST_PARSED,this.Ln)},this.Ln=()=>{this.En.off(this.Sn.Events.MANIFEST_PARSED,this.Ln),this.Bn(),this.xn.forceMaxLevel&&this.Rn(),this.xn.forceResolutionHeight&&this.Dn(this.xn.forceResolutionHeight),this.Vn()},(this.xn.forceMaxLevel||this.xn.forceResolutionHeight)&&(tt.yt.capLevelToPlayerSize=!1)}start(t,i){this.Vn=t,this.Cn=i,this.Sn&&(0,tt.fh)()?(this.En=new this.Sn(Object.assign({},tt.yt)),this.Fn()):this.Cn()}destroy(){try{this.En&&(this.En.destroy(),this.En=null)}catch(t){const{message:i,stack:e}=(0,h.W$)(t);(0,d.n)({level:d.D.WARN,message:"AdManager_HlsAdSourceHandler_destroy",exception:i,callStack:e})}}Fn(){this.En.on(this.Sn.Events.ERROR,this.kn),this.En.attachMedia(this.Pn),this.En.once(this.Sn.Events.MEDIA_ATTACHED,this.Mn)}Rn(){const t=this.En.levels.length-1;this.jn(t)}Dn(t){const i=this.Tn.find((i=>i.height===t));i&&this.jn(i.level)}jn(t){this.En.currentLevel=t,this.En.startLevel=t,this.En.nextLevel=t}Bn(){this.En.levels.forEach(((t,i)=>{this.Tn.push({level:i,height:t.height})}))}}var et=e(7332),st=e(5292);const nt="huffpost",rt=540,ot=["d426a992-f367-434b-827b-d3561b6af50c","e3bcb71c-7486-4955-a5fe-c94bade4948d"];class ht extends f{constructor(t,i,e,n,r,o,h,a,c,l,u=!1,p){super(),this.Oi=t,this.$n=i,this.tn=e,this.Rs=n,this.Vi=r,this.Un=o,this.qn=h,this.Hn=a,this.zn=c,this.Sn=l,this.Wn=u,this.Gn=p,this.Xn=!1,this.pageFocus=new st.v(this.Oi),this.Jn=Object.values(Z.wB),this.Qn=!1,this.Kn=!1,this.Zn=!0,this.tr=!1,this.ir=[{event:s.fI.AdVideoStart,position:0},{event:s.fI.AdVideoFirstQuartile,position:25},{event:s.fI.AdVideoMidpoint,position:50},{event:s.fI.AdVideoThirdQuartile,position:75},{event:s.fI.AdVideoComplete,position:100}],this.sr=this.ir[0],this.nr=t=>{try{switch(t.type){case Z.wB.Pause:if(this.qn&&!this.Zn)return this.Zn=!0,void this.rr("pause_event_loopAd");this.Kn=!1;break;case Z.wB.Play:if(!this.Kn&&this.Wn)return void this.tn.pause();break;case Z.wB.Canplay:case Z.wB.Durationchange:this.hr();break;case Z.wB.Timeupdate:this.ar();break;case Z.wB.Error:const t=this.tn.networkState===HTMLMediaElement.NETWORK_NO_SOURCE?E.Oq.MediaFileNotFound:E.Oq.GeneralLinearError;this.Ai.next({type:s.fI.AdError,payload:{errorCode:t,errorMessage:s.RG.VastVideoTagEventError}});break;case"click":this.Ai.next({type:s.fI.AdClickThru,payload:{}})}}catch(t){(0,d.n)({level:d.D.CRITICAL,callStack:t.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:t.message},{throttle:10,shouldSendMaxLog:!1})}}}initAd(t,i,e,n,r,o){try{this.tn=o.videoSlot,this.width=t,this.height=i,this.cr(this.Un,this.tn.parentElement),this.resizeAd(t,i,e),this.addVideoEvents(this.tn),this.zn&&(0,tt.fh)()?this.dr(this.Sn):(this.tn.setAttribute("src",this.$n),this.tn.setAttribute("preload","metadata"),this.tn.load()),this.pageFocus.isDocumentVisible()||this.hr()}catch(t){this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.WrapperInitAdError+`_${t.message}`,errorCode:E.Oq.GeneralError}})}}lr(t){if(this.Qn){const i=t?"INMOBI_IMPRESSION_EVENT_DOCUMENT_VISIBLE":"INMOBI_IMPRESSION_EVENT_DOCUMENT_NOT_VISIBLE";(0,d.n)({level:d.D.INFO,exception:`advLineItemId: ${this.Vi}`,message:i},{throttle:1e3})}}startAd(){try{(0,o.cn)(this.tn,"cnx-ad-video-slot"),this.Kn=!0,this.Vi&&ot.includes(this.Vi)&&(this.Qn=!0),this.pageFocus.isDocumentVisible()?this.tn.play().then((()=>{this.Ai.next({type:s.fI.AdStarted}),this.ur(),this.lr(!0)})).catch((t=>{this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.VastPlayPromiseReject,errorCode:E.Oq.GeneralError}}),this.Qn&&(0,d.n)({level:d.D.INFO,message:"INMOBI_DOCUMENT_VISIBLE_REJECTED_PLAY_EVENT",exception:`advLineItemId: ${this.Vi}, promiseError: ${t.message}`,callStack:t.stack},{throttle:1e3})})):(this.Ai.next({type:s.fI.AdStarted}),this.ur(),this.lr(!1),this.tn.play().then((()=>{this.vr(),this.Qn&&(0,d.n)({level:d.D.INFO,message:"INMOBI_DOCUMENT_NOT_VISIBLE_RESOLVED_PLAY_EVENT",exception:`advLineItemId: ${this.Vi}`},{throttle:1e3})})).catch((t=>{this.Qn&&(0,d.n)({level:d.D.INFO,message:"INMOBI_DOCUMENT_NOT_VISIBLE_REJECTED_PLAY_EVENT",exception:`advLineItemId: ${this.Vi}, promiseError: ${t.message}`,callStack:t.stack},{throttle:1e3})})))}catch(t){this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.WrapperStartAdError+`_${t.message}`,errorCode:E.Oq.GeneralError}})}}stopAd(t){this.Wn&&this.tn.pause(),"videoComplete"===t&&this.qn?this.Ai.next({type:s.fI.AdStopped,payload:{shouldTrackPostBid:!1}}):this.Ai.next({type:s.fI.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){(0,o.T7)(this.tn,{width:`${t}px`,height:`${i}px`}),this.Ai.next({type:s.fI.AdSizeChange})}pauseAd(){this.Kn=!1,this.Hn&&void 0===this.sr&&(this.sr=this.ir[0]),this.tn.pause(),this.Ai.next({type:s.fI.AdPaused})}resumeAd(){this.qn&&void 0===this.sr&&(this.sr=this.ir[0]),this.Kn=!0,this.rr("resumeAd"),this.vr(),this.Ai.next({type:s.fI.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.Ai.next({type:s.fI.AdSkipped})}getAdRemainingTime(){return this.tn.duration-this.tn.currentTime}getAdDuration(){return this.tn.duration?this.tn.duration:0}getAdVolume(){return this.tn.volume}setAdVolume(t){this.tn.volume=t}getAdMediaWidth(){return this.tn.videoWidth}getAdMediaHeight(){return this.tn.videoHeight}destroy(){if(!this.Hn&&!this.qn)try{(0,o.IV)(this.tn,"cnx-ad-video-slot"),this.gr(this.tn),this.tn.removeAttribute("src"),this.yr&&(this.yr.destroy(),this.yr=null)}catch(t){const{message:i,stack:e}=(0,h.W$)(t);(0,d.n)({level:d.D.WARN,message:"AdManager_VastIntegrator_destroyAd",exception:i,callStack:e})}}vr(){this.Rs===z.M.Ios&&(0,o.UR)(this.tn)}dr(t){let i={forceMaxLevel:!0};this.Gn&&this.Gn.includes(nt)&&(i={forceMaxLevel:!1,forceResolutionHeight:rt}),this.yr=new it(t,this.$n,this.tn,i),this.yr.start((()=>{this.hr()}),(()=>{this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.CnxMediaSrcNotSupported,errorCode:E.Oq.MediaFileNotSupported}})}))}cr(t,i){this.Ir=this.Oi.createElement("a"),t&&(this.Ir.href=t,this.Ir.target="_blank"),(0,o.cn)(this.Ir,"cnx-ad-slot"),this.Ir.setAttribute("title","Advertisement link"),this.Ir.setAttribute("role","link"),this.Ir.setAttribute("tabindex","-1"),this.Ir.setAttribute("aria-disabled","true"),i.appendChild(this.Ir),this.Ir.addEventListener("click",this.nr)}addVideoEvents(t){this.Jn.forEach((i=>{t.addEventListener(i,this.nr)})),this.Ir&&this.Ir.addEventListener("click",this.nr)}gr(t){this.Jn.forEach((i=>{t.removeEventListener(i,this.nr)})),this.Ir&&this.Ir.removeEventListener("click",this.nr)}hr(){this.Xn||(this.Xn=!0,this.Ai.next({type:s.fI.AdLoaded,payload:{}}))}ar(){this.Ai.next({type:s.fI.AdRemainingTimeChange});const t=(0,et.dQ)(0,this.tn.duration,0,100,this.tn.currentTime);if(this.sr&&t>=this.sr.position){this.sr.event===s.fI.AdVideoStart&&this.Qn&&(0,d.n)({level:d.D.INFO,message:"INMOBI_AD_VIDEO_START_EVENT_FIRED",exception:`advLineItemId: ${this.Vi}`},{throttle:1e3}),this.tr||(this.sr.event===s.fI.AdVideoStart&&this.Qn?this.Ai.next({type:s.fI.AdVideoStart,payload:{logInMobiInfo:this.Qn}}):this.Ai.next({type:this.sr.event}));const t=this.sr;this.sr=this.ir[this.ir.indexOf(this.sr)+1],t.event===s.fI.AdVideoComplete&&(this.qn&&(this.tn.currentTime=.01),this.Zn=!1,this.stopAd("videoComplete"),this.tr=!0)}}rr(t){try{this.tn.play().catch((i=>(0,d.n)({level:d.D.WARN,message:`AdManager_VastIntegrator_play_${t}`,exception:`playError: ${i.message}`,callStack:i.stack})))}catch(i){(0,d.n)({level:d.D.WARN,message:`AdManager_VastIntegrator__play_${t}`,exception:`promiseError: ${i.message}`,callStack:i.stack})}}ur(){this.Ir&&(this.Ir.removeAttribute("tabindex"),this.Ir.removeAttribute("aria-disabled")),this.Ai.next({type:s.fI.AdImpression,payload:{}})}}var at=e(6153);class ct extends R{constructor(t,i){super(t,i),this.Ki=t,this.settings=i,this.adMediaType="cnxMedia",this.adSourceType=y.ProtoAdsourceTypeEnum.CnxMedia,this.wr=[]}initAd(t,i,e,n,o,h,c){try{let d;super.initAd(t,i,e,n,o,h,c);let l=!1;if((0,a.QM)(this.settings.externalMediaFile))d=this.Sr(this.settings.externalMediaFile);else if((0,a.QM)(this.settings.externalHlsFile))d=this.Sr(this.settings.externalHlsFile),l=!0;else{if(!(0,r.BZ)(this.settings.renditions))return void this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.CnxMediaNoRenditions,errorCode:V.O.MediaFileNotFound}});d=this.Ar(this.settings.renditions,i,this.settings.mediaId)}this.Pr=d,this._r=new ht(this.settings.globalDomUtilsService,this.Pr,this.Zi,this.settings.os,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.clickUrl,this.settings.shouldLoopAdWhenFinished,this.settings.shouldPauseAdWhenFinished,l,this.settings.hlsModule,this.settings.isInApp,this.settings.pageDomain),this.wr.push(this._r.onVpaidEvent.subscribe((t=>{this.Pe(t)}))),this._r.initAd(t,i,e,n,o,{slot:this.Ri,videoSlot:this.Zi})}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorInitAdError+`_${t.message}`,errorCode:V.O.GeneralError}})}}startAd(){try{super.startAd(),this._r.startAd()}catch(t){this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorStartAdError+`_${t.message}`,errorCode:V.O.GeneralError}})}}stopAd(t){super.stopAd(t),this._r?this._r.stopAd(t):(0,d.n)({message:"stopAd",exception:t,level:d.D.WARN})}resizeAd(t,i,e){try{this._r.resizeAd(t,i,e)}catch(t){this.us("CnxMediaBidAdaptor","resizeAd",t)}}pauseAd(){try{this._r.pauseAd()}catch(t){this.us("CnxMediaBidAdaptor","pauseAd",t)}}resumeAd(){try{this._r.resumeAd()}catch(t){this.us("CnxMediaBidAdaptor","resumeAd",t)}}expandAd(){try{this._r.expandAd()}catch(t){this.us("CnxMediaBidAdaptor","expandAd",t)}}collapseAd(){try{this._r.collapseAd()}catch(t){this.us("CnxMediaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this._r.skipAd()}catch(t){this.us("CnxMediaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this._r.getAdRemainingTime()}catch(t){return this.us("CnxMediaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this._r?this._r.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.us("CnxMediaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this._r.getAdVolume()}catch(t){return this.us("CnxMediaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this._r.getAdMediaWidth(),height:this._r.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this._r.setAdVolume(t)}catch(t){this.us("CnxMediaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.Pr}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}hs(){var t;if(!this.settings.shouldPauseAdWhenFinished&&!this.settings.shouldLoopAdWhenFinished)try{super.hs(),(0,x.i)(this.wr),null===(t=this._r)||void 0===t||t.destroy()}catch(t){this.us("CnxMediaBidAdaptor","_destroy",t)}}Sr(t){return(null==t?void 0:t.includes(at.n.endPoints.base.video))?this.Ue.appendParamsToUrl(t):t}Ar(t,i,e){let s;s=t.filter((t=>t.codec===Z.L5.H264));const n=(0,et.DE)(i,s.map((t=>t.height)));return s=s.filter((t=>t.height===n)),s.length>0?this.Ue.appendParamsToUrl(`${at.n.endPoints.base.video}${e}/${s[0].file}`):null}}var dt=e(8576);class lt{constructor(t,i,e,s){this.imageUrl=t,this.Tr=i,this.Di=e,this.Vi=s,this.ui=new c.x,this.mi=new c.x,this.ji=new c.x,this.Ni=new c.x,this.be=[]}get onDisplayAd(){return this.ui.asObservable()}get onError(){return this.mi.asObservable()}get onClickAd(){return this.ji.asObservable()}get onClickClose(){return this.Ni.asObservable()}destroy(){var t;null===(t=this._s)||void 0===t||t.destroy()}initializeAd(t,i,e,s){this.kr=t,this.Cr(s,i,e)}getAdMediaDimensions(){var t;return null===(t=this._s)||void 0===t?void 0:t.getAdMediaDimensions()}Cr(t,i,e){this.Er=this.Tr.createElement("img"),this.Er.onload=()=>{this.Mr(t,i,e)},this.Er.onerror=()=>{this.mi.next(s.RG.VastNonLinearImageLoadFailure)},this.Er.src=this.imageUrl}Mr(t,i,e){const s=this.Lr(t,i,e);this.Br(s,t,i)}Lr(t,i,e){let s;return s=t?this.Rr(i,e):`height:${i.height}px; width: ${i.width}px;`,`<img alt='' src="${this.imageUrl}" style="${s} display: block; pointer-events: all; cursor: pointer">`}Br(t,i,e){this._s=new A(y.ProtoAdType.Nonlinear,t,s.ZJ.Html,this.kr,this.Tr,this.Di,this.Vi,{height:e.height,width:e.width,scalable:i?{maxHeightPercent:q.O.NON_LINEAR_MAX_HEIGHT_PERCENT,maxWidthPercent:q.O.NON_LINEAR_MAX_WIDTH_PERCENT}:null}),this.be.push(this._s.onDisplayAd.subscribe((()=>{this.ui.next()})),this._s.onClickClose.subscribe((()=>{this.Ni.next()})),this._s.onClickAd.subscribe((()=>{this.ji.next()})),this._s.onError.subscribe((()=>{this.mi.next(s.RG.DisplayIntegratorIframeLoad)}))),this._s.createBanner(e)}Rr(t,i){const e=(0,et.Tc)(i.height,q.O.NON_LINEAR_MAX_HEIGHT_PERCENT),s=(0,et.Tc)(i.width,q.O.NON_LINEAR_MAX_WIDTH_PERCENT),n=t.height/e;return t.width/s>n?"width: 100%;":"height: 100%;"}}const ut={[p.n.FirstQuartile]:s.fI.AdVideoFirstQuartile,[p.n.SecondQuartile]:s.fI.AdVideoMidpoint,[p.n.ThirdQuartile]:s.fI.AdVideoThirdQuartile,[p.n.FourthQuartile]:s.fI.AdVideoComplete};class pt extends R{constructor(t,i){super(t,i),this.Ki=t,this.settings=i,this.adMediaType="nonLinearVast",this.adSourceType=y.ProtoAdsourceTypeEnum.VastMedia,this.Or=[],this.Ts=500,this.Dr=0,this.nonLinearOnClick=()=>{this.Vr.nonLinearClickTracking.uri&&this.settings.globalDomUtilsService.trackWithImages([this.Vr.nonLinearClickTracking.uri]),this.Vr.nonLinearClickThrough&&this.settings.globalDomUtilsService.open(this.Vr.nonLinearClickThrough,dt.bS.Blank),this.Pe({type:s.fI.AdClickThru,payload:{}})}}initAd(t,i,e,n,o,h,c){try{if(super.initAd(t,i,e,n,o,h,c),!(0,r.BZ)(this.settings.vastResponse.nonLinearFiles))return this.Oe=H.Oq.NonlinearSupportedTypeNotFound,void this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.NonLinearUnsupportedMedia,errorCode:this.Oe}});if(this.Vr=this.Fr(),!this.Vr)return this.Oe=H.Oq.NonlinearExpectingDifferentSize,void this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.NonLinearUnsupportedMedia,errorCode:this.Oe}});this.Nr(),this.jr(),this.Pe({type:s.fI.AdLoaded,payload:{}})}catch(t){(0,a.$K)(this.Oe)||(this.Oe=H.Oq.NonlinearGeneralError),this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.AdaptorInitAdError+`_${t.message}`,errorCode:this.Oe}})}}startAd(){super.startAd(),this.ys.start(),this.Or.push(this.$r.onDisplayAd.subscribe((()=>{this.Pe({type:s.fI.AdStarted}),this.Pe({type:s.fI.AdVideoStart}),this.Pe({type:s.fI.AdImpression,payload:{}})})),this.$r.onError.subscribe((t=>{this.Oe=H.Oq.NonlinearUnableToFetchResource,this.Pe({type:s.fI.AdError,payload:{errorMessage:t,errorCode:this.Oe}})})),this.$r.onClickAd.subscribe((()=>this.nonLinearOnClick())),this.$r.onClickClose.subscribe((()=>{this.Pe({type:s.fI.AdUserClose,payload:{}}),this.stopAd(N.h)})));const t={height:this.Vr.height,width:this.Vr.width},i={height:this.Zi.clientHeight,width:this.Zi.clientWidth};this.$r.initializeAd(this.Ri,t,i,this.Vr.scalable)}get adVideoUrl(){return this.ps}get declaredDurationInSeconds(){return this.Dr/O.s_}getAdMediaSize(){var t;return null===(t=this.$r)||void 0===t?void 0:t.getAdMediaDimensions()}resizeAd(t,i,e){}pauseAd(){try{this.ys.stop(),this.Pe({type:s.fI.AdPaused}),this.Ke()}catch(t){this.us("NonLinearVastBidAdaptor","pauseAd",t)}}resumeAd(){this.ys.start(),this.Ke()}expandAd(){}collapseAd(){}getAdRemainingTime(){return this.ys.timeRemaining}getAdDuration(){return this.Dr/O.s_}getAdVolume(){return 0}Nr(){this.Vr.staticResource&&(this.$r=new lt(this.Vr.staticResource.uri,this.settings.globalDomUtilsService,this.settings.sessionId,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId),this.ps=this.Vr.staticResource.creativeType,this.Ur())}Ur(){this.Zi.style.visibility="hidden"}jr(){var t;this.Dr=(null===(t=this.settings.adManagerLineItem.protoLineItem.nonlinearLineItemSettings)||void 0===t?void 0:t.nonLinearAdTimeSeconds)*O.s_,this.ys=new n.B(this.Ki,this.Dr,this.Ts),this.Or.push(this.ys.onTimeUpdate.subscribe((()=>{this.Pe({type:s.fI.AdRemainingTimeChange})})),this.ys.onTimeElapsed.subscribe((()=>{this.stopAd("nonLinearTimerElapsed")})),this.ys.onQuartile.subscribe((t=>{this.Pe({type:ut[t],payload:{}})})))}hs(){var t,i;try{super.hs(),null===(t=this.ys)||void 0===t||t.stop(),(0,x.i)(this.Or),null===(i=this.$r)||void 0===i||i.destroy()}catch(t){this.us("NonLinearBidAdaptor","_destroy",t)}}Fr(){let t;if(t=this.settings.vastResponse.nonLinearFiles.find((t=>!0===t.scalable)),!t){const i=(0,et.Tc)(this.Zi.clientHeight,q.O.NON_LINEAR_MAX_HEIGHT_PERCENT);t=this.settings.vastResponse.nonLinearFiles.find((t=>t.height<=i&&t.width<=this.Zi.clientWidth))}return t}}var ft=e(1545),mt=e(4656);class vt{constructor(t,i,e,s,n){this.qr=t,this.Oi=i,this.Di=e,this.Hr=s,this.Vi=n,this.zr={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.qr}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Hr}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Hr}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.qi=new g.o(this.Oi,this.Di)}Wr(t){return this.qi.loadIframe({customHead:this.zr.headTamplate,customHtml:this.zr.bodyTamplate,container:t,customReportingLog:{heavyAdBlockTypeEnum:y.ProtoHeavyAdBlockTypeEnum.VpaidIframe,advertiserLineItemId:this.Vi},iframeClass:"omid-elem",title:w.$b})}loadAdUnitIframe(t){return new Promise(((i,e)=>{this.Wr(t).then((t=>{t.adContainer=t.iframe.contentWindow.document.querySelector(".ad-element"),i(t)})).catch((t=>{e(t)}))}))}destroyAdUnit(){var t,i;try{const e=null===(i=null===(t=this.qi.iframe)||void 0===t?void 0:t.contentWindow)||void 0===i?void 0:i.clearAll;e&&e()}catch(t){const{message:i,stack:e}=(0,h.W$)(t);(0,d.n)({message:"AdManager_VPAIClient_destroyAdUnit",exception:i,callStack:e,level:d.D.WARN,sessionId:this.Di},{throttle:2,shouldSendMaxLog:!0})}this.qi.destroy(),this.qi=null}}var gt,yt;!function(t){t[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe"}(gt||(gt={}));class bt extends f{constructor(t,i,e,n,o,h,c){super(),this.$n=t,this.Oi=i,this.Di=e,this.Gr=n,this.Vi=o,this.ne=h,this.Rs=c,this.Xr=[],this.Jr=new Set,this.Yr=new Set,this.Kr=(t,i,e)=>{const n={url:t,playerHandles:e};this.io(s.fI.AdClickThru,n)},this.io=(t,i)=>{if(this.Yr.add(t),!this.Jr.has(t))return t!==s.fI.AdImpression||this.Yr.has(s.fI.AdLoaded)?void this.eo(t,i):((0,d.n)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.Vi}_creativeId:${this.ne}_vpaidSrc:${this.$n}`,callStack:JSON.stringify((0,r.ee)(this.Yr)),level:d.D.WARN},{throttle:1e3}),this.Jr.add(s.fI.AdLoaded),void this.eo(s.fI.AdLoaded,i))},this.eo=(t,i)=>{switch(t){case s.fI.AdError:this.Ai.next({type:s.fI.AdError,payload:{errorMessage:(0,a.HD)(i)?i:JSON.stringify(i),errorCode:H.Oq.GeneralVpaidError}});break;case s.fI.AdLoaded:this.Ai.next({type:s.fI.AdLoaded,payload:{skipOffset:(0,a.as)(i)?i.skipOffset:void 0}});break;case s.fI.AdImpression:this.Ai.next({type:s.fI.AdImpression,payload:{}});break;case s.fI.AdClickThru:this.Ai.next({type:s.fI.AdClickThru,payload:(0,a.as)(i)?i:{}});break;default:this.Ai.next({type:s.fI[t]})}}}initAd(t,i,e,n,r,o){try{this.Cs=t,this.Es=i,this.Ks=e,this.so=n,this.no=r,this.ro=o,this.oo=new vt(this.$n,this.Oi,this.Di,this.Gr,this.Vi),this.ho=this.oo.loadAdUnitIframe(o.slot).then((t=>{this.ao(t)})).catch((t=>{this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.VpaidOnLoad,errorCode:H.Oq.GeneralVpaidError}})}))}catch(t){this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.VpaidOnLoad,errorCode:H.Oq.GeneralVpaidError}})}}startAd(){try{this.Yr.has(s.fI.AdImpression)&&!this.Jr.has(s.fI.AdImpression)&&((0,d.n)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.Vi}_creativeId:${this.ne}_vpaidSrc:${this.$n}`,callStack:JSON.stringify((0,r.ee)(this.Yr)),level:d.D.WARN},{throttle:1e3}),this.Jr.add(s.fI.AdImpression),this.Ai.next({type:s.fI.AdImpression,payload:{}})),this.co.startAd()}catch(t){this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.WrapperStartAdError,errorCode:H.Oq.GeneralVpaidError}})}}stopAd(t){var i;null===(i=this.ho)||void 0===i||i.then((()=>{this.co?this.co.stopAd(t):(0,d.n)({message:"stopAd",exception:t,level:d.D.WARN})}))}resizeAd(t,i,e){this.co.resizeAd(t,i,e)}pauseAd(){this.co.pauseAd()}resumeAd(){this.co.resumeAd(),this.Rs===z.M.Ios&&(0,o.UR)(this.ro.videoSlot)}expandAd(){this.co.expandAd()}collapseAd(){this.co.collapseAd()}skipAd(){this.co.skipAd()}getAdRemainingTime(){return this.co.getAdRemainingTime()}getAdDuration(){var t;return null===(t=this.co)||void 0===t?void 0:t.getAdDuration()}getAdVolume(){return this.co.getAdVolume()}setAdVolume(t){this.co.setAdVolume(t)}destroy(){var t;try{this.uo(),this.Xr.length=0,this.co=null,null===(t=this.oo)||void 0===t||t.destroyAdUnit()}catch(t){const{message:i,stack:e}=(0,h.W$)(t);(0,d.n)({level:d.D.WARN,message:"AdManager_VpaidIntegrator_destroyAd",exception:i,callStack:e})}}ao(t){const i=t.iframe.contentWindow.getVPAIDAd;if("function"==typeof i){const e=i();this.co=e,this.po(),this.fo(e)?e.initAd(this.Cs,this.Es,this.Ks,this.so,this.no,{slot:t.adContainer,videoSlot:this.ro.videoSlot}):this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.VpaidInvalid,errorCode:H.Oq.GeneralVpaidError}})}else this.Ai.next({type:s.fI.AdError,payload:{errorMessage:s.RG.VpaidGetVpaidAdError,errorCode:H.Oq.MediaFileNotFound}})}po(){Object.keys(s.fI).forEach((t=>{let i=this.io.bind(this,s.fI[t]);s.fI[t]===s.fI.AdClickThru&&(i=this.Kr),this.Xr.push({handler:i,event:t}),this.co.subscribe(i,t)}))}uo(){this.Xr.forEach((t=>{this.co.unsubscribe(t.handler,t.event)}))}fo(t){return Object.keys((0,r.ti)(gt)).every((i=>(0,a.mf)(t[gt[i]])))}}!function(t){t.VastIconsContainer="cnx-vast-icons",t.VastIcon="cnx-vast-icon"}(yt||(yt={}));class It{constructor(t,i,e){this.Ki=t,this.Ai=i,this.mo=e,this.vo=[],this.yo=[],this.Ts=500,this.yo.push(this.Ai.subscribe((t=>{t.type===s.fI.AdPaused&&this.bo(),t.type===s.fI.AdPlaying&&this.Io()})))}init(){(0,a.$K)(this.mo.offset)?this.wo(this.mo.offset,(()=>this.So())):this.So()}destroy(){var t;this.Ao(),this.Po.removeEventListener("click",this._o.bind(this)),null===(t=this.ys)||void 0===t||t.disable(),(0,x.i)(this.vo),(0,x.i)(this.yo),this.vo=[],this.yo=[]}So(){this.Po=this.xo(),this.Po.addEventListener("click",this._o.bind(this)),this.mo.$container.appendChild(this.Po),(0,a.$K)(this.mo.duration)&&this.wo(this.mo.duration,(()=>this.destroy())),(0,a.$K)(this.mo.iconViewTracking)&&this.mo.globalDomUtilsService.trackWithImages([this.mo.iconViewTracking])}wo(t,i){this.ys=new n.B(this.Ki,t,this.Ts),this.vo.push(this.ys.onTimeElapsed.subscribe((()=>{i()}))),this.ys.start()}Ao(){this.Po.remove()}bo(){var t;null===(t=this.ys)||void 0===t||t.stop()}Io(){var t;null===(t=this.ys)||void 0===t||t.start()}xo(){return this.mo.globalDomUtilsService.createElementByString(`\n            <cnx\n                class="${yt.VastIcon}"\n                style="\n                        position: absolute;\n                        ${this.To(this.mo.xPosition)}\n                        ${this.ko(this.mo.yPosition)}\n                        ${this.Co(this.mo.width)}\n                        ${this.Eo(this.mo.height)}\n                    "\n                >\n                ${this.Mo()}\n            </cnx>\n        `)}To(t){if(!(0,a.QM)(t)&&!(0,a.hj)(t))return"left: 0;";switch(t){case"left":return"left: 0;";case"right":return"right: 0;";default:return`left: ${t}px;`}}ko(t){if(!(0,a.QM)(t)&&!(0,a.hj)(t))return"top: 0;";switch(t){case"top":return"top: 0;";case"bottom":return"bottom: 0;";default:return`top: ${t}px;`}}Co(t){return(0,a.QM)(t)||(0,a.hj)(t)?"auto"===t?`width: ${t};`:`width: ${t}px;`:"width: auto;"}Eo(t){return(0,a.QM)(t)||(0,a.hj)(t)?"auto"===t?`height: ${t};`:`height: ${t}px;`:"height: auto;"}_o(){if(!(0,a.$K)(this.mo.iconClicks))return;const{iconClickTracking:t,iconClickThrough:i}=this.mo.iconClicks;(0,r.BZ)(t)&&this.mo.globalDomUtilsService.trackWithImages(t),(0,a.QM)(i)&&this.mo.globalDomUtilsService.open(i,dt.bS.Blank)}}class wt extends It{Mo(){return this.mo.resource}}class St extends It{Mo(){return`<iframe src="${this.mo.resource}"/>`}}class At extends It{Mo(){return`<img src="${this.mo.resource}"/>`}}const Pt=["AdChoices"];class _t{constructor(t,i,e,s,n){this.yi=t,this.Lo=i,this.Tr=e,this.Ki=s,this.Ai=n,this.Bo=[]}initIcons(){if(!(0,r.BZ)(this.Lo))return;const t=this.Ro(this.Lo);(0,r.BZ)(t)&&(this.Oo=this.Do(),this.yi.appendChild(this.Oo),t.forEach((t=>{const i=this.Vo(t);i.init(),this.Bo.push(i)})))}destroy(){for(;0!==this.Bo.length;){const t=this.Bo.length-1;this.Bo[t].destroy(),this.Bo.pop()}}Do(){return this.Tr.createElementByString(`<cnx class="${yt.VastIconsContainer}"></cnx>`)}Ro(t){let i=[...t].filter((t=>Pt.includes(t.program))).filter((t=>(0,a.QM)(t.staticResource)||(0,a.QM)(t.htmlResource)||(0,a.QM)(t.iframeResource)));return i=(0,r.qy)("program",i.reverse()),i}Vo(t){const{width:i,height:e,xPosition:s,yPosition:n,staticResource:r,htmlResource:o,iframeResource:h,iconViewTracking:a,iconClicks:c,duration:d,offset:l}=t,u={globalDomUtilsService:this.Tr,$container:this.Oo,resource:r||o||h,iconClicks:c,width:i,height:e,xPosition:s,yPosition:n,iconViewTracking:a,duration:d,offset:l};switch(u.resource){case r:return new At(this.Ki,this.Ai,u);case o:return new wt(this.Ki,this.Ai,u);case h:return new St(this.Ki,this.Ai,u)}}}var xt=e(5196),Tt=e(2484);const kt=["fb1bdb1d-9743-4237-94e3-35d254e13564","e9d12322-f412-4a4a-aacc-a0d36f91544c","cbee7f7d-b0ba-453b-a28f-a23bc304481e"],Ct=["omid"];class Et extends R{constructor(t,i){super(t,i),this.Ki=t,this.settings=i,this.adSourceType=y.ProtoAdsourceTypeEnum.Unknown,this.yo=[],this.creativeId=i.vastResponse.creativeId,this.Fo=T.h.getSessionChildContainer(this.settings.sessionId).resolve(ft.G)}initAd(t,i,e,n,o,h,a){try{super.initAd(t,i,e,n,o,h,a),(0,W.A)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.linearClickThrough).then((o=>{var h;if(o)return void this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.DomainBlocked,errorCode:E.Oq.GeneralError}});if(this.jo=this.$o(t,this.Zi),null===this.jo)return void this.Pe({type:s.fI.AdError,payload:{errorMessage:s.RG.VastUnsupportedMedia,errorCode:E.Oq.MediaFileNotFound}});(null===(h=this.jo.src)||void 0===h?void 0:h.includes(at.n.endPoints.base.video))&&(this.jo.src=this.Ue.appendParamsToUrl(this.jo.src)),this.adMediaType=this.jo.type,this.jo.getMediaFileType()===E.y$.Video?(this.Uo=new ht(this.settings.globalDomUtilsService,this.jo.src,this.Zi,this.settings.os,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.vastResponse.linearClickThrough,this.settings.shouldLoopAdWhenFinished),this.adSourceType=y.ProtoAdsourceTypeEnum.VastMedia):(this.Uo=new bt(this.jo.src,this.settings.globalDomUtilsService,this.settings.sessionId,this.$e,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os),this.adSourceType=y.ProtoAdsourceTypeEnum.Vpaid),(0,r.BZ)(this.settings.vastResponse.icons)&&(this.zo=new _t(this.te,this.settings.vastResponse.icons,this.settings.globalDomUtilsService,this.Ki,this.Uo.onVpaidEvent)),this.yo.push(this.Uo.onVpaidEvent.subscribe((t=>{var i;if(t.type===s.fI.AdLoaded&&(t.payload.skipOffset=this.settings.vastResponse.skipoffset,t.payload.containers={slot:this.Ri,videoSlot:this.Zi},t.payload.verificationScriptResources=this.settings.vastResponse.verifications.filter((t=>{var i;return(0,r.d3)(null===(i=t.javaScriptResource)||void 0===i?void 0:i.apiFramework,Ct)})).map((t=>({javaScriptResource:t.javaScriptResource.url,vendor:t.vendor,verificationParameters:t.verificationParameters,trackingEvents:t.trackingEvents})))),t.type===s.fI.AdClickThru){this.Wo=t.payload.url;const i=t.payload.url||this.settings.vastResponse.linearClickThrough;i&&t.payload.playerHandles&&this.settings.globalDomUtilsService.open(i,dt.bS.Blank)}t.type===s.fI.AdStarted&&(null===(i=this.zo)||void 0===i||i.initIcons()),t.type===s.fI.AdError&&(this.Oe=t.payload.errorCode),this.Pe(t)})));const a={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters};this.Uo.initAd(t,i,e,n,a,{slot:this.Ri,videoSlot:this.Zi})})).catch((t=>{this.Go(t)}))}catch(t){this.Go(t)}}startAd(){try{super.startAd();const t=this.settings.adLoadedPayload.payload.vastVerifications;if(!(0,r.BZ)(t))return void this.Uo.startAd();this.Fo.isOmsdkFullSupport?this.yo.push(this.Fo.omidResourcesReady.pipe((0,xt.P)((t=>t))).subscribe((()=>{this.Uo.startAd()})),this.Fo.verificationNotExecuted.subscribe((()=>{this.Xo()}))):(this.Xo(),this.Uo.startAd())}catch(t){const i=this.Oe||E.Oq.GeneralLinearError;this.Oe=i,this.Pe({type:s.fI.AdError,payload:{errorCode:i,errorMessage:s.RG.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.Uo?this.Uo.stopAd(t):(0,d.n)({message:"stopAd",exception:t,level:d.D.WARN})}resizeAd(t,i,e){try{this.Uo.resizeAd(t,i,e)}catch(t){this.us("VastBidAdaptor","resizeAd",t)}}pauseAd(){try{this.Uo.pauseAd()}catch(t){this.us("VastBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Uo.resumeAd()}catch(t){this.us("VastBidAdaptor","resumeAd",t)}}expandAd(){try{this.Uo.expandAd()}catch(t){this.us("VastBidAdaptor","expandAd",t)}}collapseAd(){try{this.Uo.collapseAd()}catch(t){this.us("VastBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.Uo.skipAd()}catch(t){this.us("VastBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.Uo.getAdRemainingTime()}catch(t){return this.us("VastBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.Uo&&this.Uo.getAdDuration()||Math.round(this.settings.vastResponse.duration/O.s_)}catch(t){return this.us("VastBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.Uo.getAdVolume()}catch(t){return this.us("VastBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){let t=0,i=0;return this.Uo instanceof ht?(t=this.Uo.getAdMediaWidth(),i=this.Uo.getAdMediaHeight()):(t=this.jo.width,i=this.jo.height),{width:t,height:i}}setAdVolume(t){try{super.setAdVolume(t),this.Uo.setAdVolume(t)}catch(t){this.us("VastBidAdaptor","setAdVolume",t)}}get adVideoUrl(){var t;return null===(t=this.jo)||void 0===t?void 0:t.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/O.s_}ts(t){const i=super.ts(t);return this.Jo(i)}Ze(t){const i=super.Ze(t);return this.Jo(i)}hs(){var t,i;if(!this.settings.shouldLoopAdWhenFinished)try{super.hs(),(0,x.i)(this.yo),null===(t=this.Uo)||void 0===t||t.destroy(),null===(i=this.zo)||void 0===i||i.destroy()}catch(t){this.us("VastBidAdaptor","_destroy",(0,h.W$)(t))}}Jo(t){var i;return t.payload.adSourceData.name=null===(i=this.settings.vastResponse)||void 0===i?void 0:i.adTitle,t.payload.clickThroughUrl=this.Wo||this.settings.vastResponse.linearClickThrough,t}Qo(t,i){return t.filter((t=>t.getMediaFileType()===E.y$.Video))}$o(t,i){const e=this.Qo(this.settings.vastResponse.mediaFiles,i),s=e.filter((t=>"video/mp4"===t.type)),n=this.settings.vastResponse.mediaFiles.filter((t=>t.getMediaFileType()===E.y$.Javascript));return this.Yo()&&this.Zo()&&n.length?(0,mt.qD)(n,t):s.length?(0,mt.qD)(s,t):e.length?(0,mt.qD)(e,t):n.length?(0,mt.qD)(n,t):null}Zo(){const{advertiserLineItemId:t}=this.settings.adManagerLineItem.protoLineItem;return kt.includes(t)}Yo(){const t=this.settings.vastResponse.extensions.filter((t=>t.type===E.Uq.AdVerifications));return(0,r.BZ)(t)||(0,r.BZ)(this.settings.vastResponse.verifications)}Go(t){const i=this.Oe||E.Oq.GeneralLinearError;this.Oe=i,this.Pe({type:s.fI.AdError,payload:{errorCode:i,errorMessage:s.RG.AdaptorInitAdError+`_${t.message}`}})}Xo(){Tt.Mz.trackError(this.settings.vastTracker.adError,this.settings.adMacroReplacer,this.settings.adManagerLineItem.protoLineItem,this.settings.callingState,E.Oq.VerificationUnitNotExecuted)}}},1307:(t,i,e)=>{"use strict";e.d(i,{qW:()=>n,oO:()=>o});e(8921);var s=e(9791);class n{get id(){return this.th}get timestamp(){return this.eh}set timestamp(t){this.eh=t}constructor(){this.th=(0,s.qs)()}}var r=e(4798);class o{constructor(t){this.data=t,(0,r.QM)(this.data.cnxBidId)||(this.data.cnxBidId=(0,s.qs)())}}e(4360)},7225:(t,i,e)=>{"use strict";var s;e.d(i,{t:()=>s}),function(t){t[t.Rtb=1]="Rtb",t[t.HeaderBidder=2]="HeaderBidder",t[t.Tam=3]="Tam"}(s||(s={}))},6899:(t,i,e)=>{"use strict";e.d(i,{t9:()=>s.t,TF:()=>r});var s=e(7225),n=e(289);const r={[n.ProtoCreativeTypeEnum.Rtb]:s.t.Rtb,[n.ProtoCreativeTypeEnum.HeaderBidder]:s.t.HeaderBidder,[n.ProtoCreativeTypeEnum.Tam]:s.t.Tam,[n.ProtoCreativeTypeEnum.TamDeal]:s.t.Tam,[n.ProtoCreativeTypeEnum.TamPrivateAuction]:s.t.Tam}},9592:(t,i,e)=>{"use strict";var s;e.d(i,{f:()=>s}),function(t){t.HandlingSdkUrl="HandlingSdkUrl",t.NetworkRequestUrl="NetworkRequestUrl",t.InvalidCreativeType="InvalidCreativeType",t.XmlInvalidString="XmlInvalidString",t.XmlParseGeneral="XmlParseGeneral",t.XmlInvalidTree="XmlInvalidTree",t.XmlInvalidAd="XmlInvalidAd",t.XmlAdaptorWrapperLimit="XmlAdaptorWrapperLimit",t.VastVersionNotSupported="VastVersionNotSupported",t.VastMediaFilesNotSupported="VastMediaFilesNotSupported",t.HTMLUnknownMimeType="HTMLUnknownMimeType",t.HTMLNotEnoughData="HTMLNotEnoughData",t.ImaAdsManagerInit="ImaAdsManagerInit",t.ImaVastEmptyResponse="ImaVastEmptyResponse",t.ImaRequestException="ImaRequestException",t.ImaTimeout="ImaTimeout",t.ImaInvalidResponse="ImaInvalidResponse",t.InvalidCreativeUrl="InvalidCreativeUrl",t.BidIsNotTargetingAllowedEver="BidIsNotTargetingAllowedEver"}(s||(s={}))},7689:(t,i,e)=>{"use strict";e.d(i,{Jd:()=>g,lU:()=>s,_I:()=>n});var s,n,r=e(5650);!function(t){t.VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected"}(s||(s={})),function(t){t[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All"}(n||(n={}));var o=e(4798),h=e(6716);class a{constructor(){this.sh=["viralgains","serving-sys.com","commercialadsdistributor"],this.nh=["beachfrontmedia","commercialadsdistributor"],this.rh=["commercialadsdistributor"],this.oh=["pixel.clearstream.tv","pixel.clrstm.com"],this.hh=new h.x,this.ah=new h.x}get onMalwareDetected(){return this.hh.asObservable()}get onBadUriDetected(){return this.ah.asObservable()}enforce(t,i){if((0,o.cL)(t)){this.dh=i;try{this.lh(t),this.ph(t),this.mh(t),this.gh(t)}catch(t){}}}stopEnforce(){}clearEnforce(){}yh(t,i,e,s){t.every((t=>!e.includes(t)))&&!i.getAttribute("cnx")&&(i.setAttribute("cnx","true"),this.ah.next({referenceId:this.dh,enforcementMessage:`${s}-${i}`}))}lh(t){const i=t.getAttribute("src");i&&(this.sh.forEach((t=>{i.includes(t)&&this.hh.next({referenceId:this.dh,enforcementMessage:`malware-${t}`})})),this.yh(["//","about:blank","about:self","javascript:"],t,i,"iframe"))}ph(t){(0,r.Sz)(t.contentDocument.getElementsByTagName("script")).forEach((t=>{const i=t.getAttribute("src");i&&(this.nh.forEach((t=>{i.includes(t)&&this.hh.next({referenceId:this.dh,enforcementMessage:`malware-${t}`})})),this.yh(["//"],t,i,"script"))}))}mh(t){(0,r.Sz)(t.contentDocument.getElementsByTagName("a")).forEach((t=>{const i=t.getAttribute("href");i&&this.rh.forEach((t=>{i.includes(t)&&this.hh.next({referenceId:this.dh,enforcementMessage:`malware-${t}`})}))}))}gh(t){(0,r.Sz)(t.contentDocument.getElementsByTagName("img")).forEach((t=>{const i=t.getAttribute("src");i&&this.oh.forEach((t=>{i.includes(t)&&this.hh.next({referenceId:this.dh,enforcementMessage:`malware-${t}`})}))}))}}var c=e(3020),d=e(1187);class l{constructor(t){this.bh=t=>t.cnxEnfStorage?t.cnxEnfStorage:null,this.wh=t;try{this.bh(this.wh)||this.Sh(this.wh)}catch(t){(0,d.n)({message:"AdManager_EnforcerMemory_bind_enforcement",exception:t.message,callStack:t.stack,level:d.D.CRITICAL})}}Sh(t){(0,c.ML)(t.document.head,t,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(t,i){if((0,o.cL)(t))try{t.contentWindow.self===top||t.contentWindow.Function.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i}),t.contentWindow.self===top||t.contentWindow.Object.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i})}catch(t){}}stopEnforce(){}clearEnforce(t){try{const i=this.bh(this.wh);i.eventListeners[t]&&(i.eventListeners[t].forEach((t=>{t.element.removeEventListener(t.type,t.handler,t.options)})),i.eventListeners[t]=[]),i.setInterval[t]&&(i.setInterval[t].forEach((t=>this.wh.clearInterval(t))),i.setInterval[t]=[]),i.setTimeout[t]&&(i.setTimeout[t].forEach((t=>this.wh.clearTimeout(t))),i.setTimeout[t]=[])}catch(t){}}}const u="cnxpl-vl",p="cnxpl-rf";class f{constructor(){this.Ah=!0,this._h=new h.x,this.xh=[],this.Th=t=>{if(this.Ah)return;const i=t.target;if(i.volume>0&&(i.volume=0,!i.paused)){const t=i.getAttribute(p);this._h.next(t)}t.preventDefault?t.preventDefault():t.returnValue=!1}}get onVolumeDetected(){return this._h.asObservable()}enforce(t,i){let e=t;(0,o.cL)(t)&&(e=t.contentDocument||t.contentWindow.document),this.Ah=!1;(0,r.Sz)(e.getElementsByTagName("video")).forEach((t=>{this.kh(t,i)}))}stopEnforce(){this.Ah=!0}clearEnforce(t){try{const i=[];this.xh=this.xh.filter((e=>e.getAttribute(p)!==t||(i.push(e),!1))),i.forEach((t=>{t.removeAttribute(u),t.removeAttribute(p),t.removeEventListener("volumechange",this.Th)}))}catch(t){}}kh(t,i){t&&!t.getAttribute("cnxpl-vl")&&(t.volume=0,t.setAttribute(u,"true"),t.setAttribute(p,i),t.addEventListener("volumechange",this.Th),this.xh.push(t))}}class m{Ch(t){const i=function(){};t.Element.prototype.scrollIntoView=i,t.Element.prototype.scrollIntoViewIfNeeded=i,t.scroll=i,t.scrollTo=i,t.scrollBy=i}enforce(t){(0,o.cL)(t)&&this.Ch(t.contentWindow)}stopEnforce(){}clearEnforce(){}}var v=e(9600);class g{constructor(t,i,e){if(this.Eh=e,this.Mh=null,this.Lh=new Map,this.Bh=n.None,this.Rh=300,this.be=[],this.Oh=new Map,this.ds=new h.x,this.Lh.set(n.MemoryLeak,new l(i)),e||this.Lh.set(n.ScrollHijack,new m),!t){const t=new f;this.Lh.set(n.Mute,t),this.be.push(t.onVolumeDetected.subscribe((t=>{this.Dh(s.VOLUME_DETECTED,t,"")})))}const r=new a;this.be.push(r.onBadUriDetected.subscribe((t=>{this.Dh(s.BADURI_DETECTED,t.referenceId,t.enforcementMessage)})),r.onMalwareDetected.subscribe((t=>{this.Dh(s.MALWARE_DETECTED,t.referenceId,t.enforcementMessage)}))),this.Lh.set(n.Malware,r)}get onEnforcerEvent(){return this.ds.asObservable()}registerContainer(t,i){this.Oh.get(t)||this.Oh.set(t,i)}deregisterContainer(t){this.Oh.get(t)&&(this.Lh.forEach((i=>{i.clearEnforce(this.Oh.get(t))})),this.Oh.delete(t),this.Oh.size||this.stop(n.All))}start(t){this.Eh&&(t^=n.ScrollHijack),this.Bh|=t,null===this.Mh&&(this.Mh=setInterval((()=>{try{this.Oh.forEach(((t,i)=>{this.Vh(i,t)}))}catch(t){}}),this.Rh))}stop(t){this.Bh&=~t,this.Bh===n.None&&(clearInterval(this.Mh),this.Mh=null),this.Lh.forEach(((i,e)=>{t&e&&i.stopEnforce()}))}destroy(){this.stop(n.All),(0,v.i)(this.be),this.Oh.forEach(((t,i)=>{this.deregisterContainer(i)}))}Vh(t,i){(0,r.Sz)(t.getElementsByTagName("iframe")).forEach((t=>{try{this.Vh(t,i)}catch(t){}})),this.Lh.forEach(((e,s)=>{this.Bh&s&&e.enforce(t,i)}))}Dh(t,i,e){let s;this.Oh.forEach(((t,e)=>{t===i&&(s=e)})),this.ds.next({message:e,type:t,detectedContainer:s})}}},7626:(t,i,e)=>{"use strict";var s;e.d(i,{E:()=>s}),function(t){t.InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-text",t.AdDurationLabel="cnx-ad-duration",t.AdTitleLabel="cnx-ad-title",t.AdMarkerTitleContainer="cnx-ad-marker-title",t.AdMarkerTitleText="cnx-ad-title-text",t.CardImage="cnx-ad-card-image",t.CardTitle="cnx-ad-card-title",t.AdUiContent="cnx-ui-ad-content",t.InAd="cnx-ui-ad"}(s||(s={}))},4793:(t,i,e)=>{"use strict";var s,n;e.d(i,{Ek:()=>o.E,lc:()=>s,gx:()=>n,aB:()=>r}),function(t){t.ShowLinearEvent="showLinearEvent",t.HideLinearEvent="hideLinearEvent",t.PauseLinearEvent="pauseLinearEvent",t.ResumeLinearEvent="resumeLinearEvent",t.SkipLinearEvent="skipLinearEvent"}(s||(s={})),function(t){t.ShowNonLinearEvent="showNonLinearEvent",t.HideNonLinearEvent="hideNonLinearEvent"}(n||(n={}));var r,o=e(7626);!function(t){t.ForceStopAdSlot="forceStopAdSlot",t.ForceStopAdPod="forceStopAdPod",t.ChangeVideo="changeVideo"}(r||(r={}))},1296:(t,i,e)=>{"use strict";e.d(i,{f:()=>E});var s=e(7332),n=e(2300),r=e(2246);class o extends r._{constructor(){super(...arguments),this.Fh=100}jh(){if(this.elapsedTimeoutId||!this.$h.duration)return;const t=Date.now();this.elapsedTimeoutId=setTimeout((()=>{this.$h.elapsedTime+=(Date.now()-t)/1e3;const i=this.$h.getComponent(n.r.ProgressBar);i&&i.setProgress((0,s.dQ)(0,this.$h.duration,0,100,this.$h.elapsedTime)),this.elapsedTimeoutId=null,this.jh()}),this.Fh)}initState(){super.initState(),this.$h.duration&&this.jh()}exitState(){super.exitState(),this.$h.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}var h=e(4291);class a extends h.d{initState(){super.initState()}exitState(){super.exitState()}}var c=e(9490),d=e(9762),l=e(1830),u=e(1277),p=e(3442),f=e(9391),m=e(7263);var v=e(8576),g=e(8983),y=e(4798),b=e(3020);class I extends m.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.qh=this.Oo.getElementsByClassName(g.mr.BackgroundImg)[0],this.zh=this.Oo.getElementsByClassName(g.mr.Icon)[0],this.zh.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"/></svg>',this.Wh=this.Oo.getElementsByClassName(g.mr.ButtonContainer)[0];const t=this.Oo.getElementsByClassName(g.mr.Button)[0];this.Gh=this.Oi.createElementByString(`<a class="${g.mr.Wrapper}" href="#">`),this.Gh.target=v.bS.Blank,this.Gh.appendChild(t),this.Wh.innerHTML="",this.Wh.appendChild(this.Gh),this.Qh=this.Oo.getElementsByClassName(g.mr.InfoContainer)[0],this.Kh=this.Oo.getElementsByClassName(g.mr.FallbackContainer)[0],this.Zh=this.Oo.getElementsByClassName(g.mr.SlotCountText)[0]}setBackgroundImg(t){(0,y.QM)(t)?((0,b.IV)(this.qh,g.Gj.DisplayNone),this.qh.src=t):(0,b.cn)(this.qh,g.Gj.DisplayNone)}setClickUrl(t){if(!(0,y.QM)(t))return(0,b.Ho)(this.Kh),void(0,b.MV)(this.Qh);(0,b.Ho)(this.Qh),(0,b.MV)(this.Kh),this.Gh.href=t}setFallbackText(t,i){const e=t||1,s=i||1;this.Zh.innerHTML=`Loading ad ${e}/${s}`}}var w=e(7309);class S extends w.h{constructor(){super(...arguments),this.eventList=[d.C[d.C.SkipAd],...this.eventList],this.ta=-1,this.ia=-1}initComponent(){super.initComponent(),this.hideComponent(),this.ea=this.Oo.getElementsByTagName("cnx-span")[0],this.ea.innerHTML="Ad",this.sa=this.Oo.querySelectorAll(`.${g.Hs.Timer} svg`)[0],this.Oo.setAttribute("aria-label","Skip Ad")}setSecondsUntilSkip(t){this.ta=Math.ceil(t),this.ia=-1,this.ta>0&&(0,b.T7)(this.sa,{"animation-duration":this.ta+"s"})}tickDown(t){const i=this.ta-Math.floor(t);if(i<0||0===this.ia)return;const e=(0,b.pv)(this.Oo,g.Hs.InTimer);this.ia=i,0===this.ia?(e&&(0,b.IV)(this.Oo,g.Hs.InTimer),this.ea.innerHTML="Ad"):(e||(0,b.cn)(this.Oo,g.Hs.InTimer),this.ea.innerHTML=`in ${this.ia}s`)}get tooltip(){}onClickHandler(){0===this.ia&&this.mediator.publish(this,d.C[d.C.SkipAd])}}class A extends p.A{constructor(){super(...arguments),this.na={[n.r.VolumeControls]:t=>new u.N(t,this.Oi,f.Z,this),[n.r.AdLoadingScreen]:t=>new I(t,this.Oi,this.ra,'<cnx class="cnx-pod-loading-screen-container"><img alt="Loading Pods" class="cnx-pod-loading-background"><cnx class="cnx-pod-loading-info"><cnx class="cnx-pod-open-new-icon"></cnx><cnx class="cnx-pod-visit-website-text"><cnx-span>Visit Advertiser website</cnx-span></cnx><cnx class="cnx-pod-read-more-container"><cnx-span class="cnx-pod-read-more-btn">GO TO PAGE</cnx-span></cnx></cnx><cnx class="cnx-pod-loading-fallback"><cnx class="cnx-pod-loading-spinner"></cnx><cnx-span class="cnx-pod-slot-count-text"></cnx-span></cnx></cnx>'),[n.r.SkipAdButton]:t=>new S(t,this.Oi,this.ra,'<cnx class="cnx-ad-skip-button cnx-ui-btn" role="button" tabindex="0"><cnx class="cnx-icon-button"><cnx class="cnx-skip-ad-text">Skip&nbsp;<cnx-span></cnx-span></cnx><cnx class="cnx-skip-ad-icon"><svg markup-inline viewBox="0 0 24 24" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"/></svg></cnx></cnx><cnx class="cnx-timer-loader"><svg markup-inline xmlns="http://www.w3.org/2000/svg" width="36" height="36"><circle class="cnx-svg-circle-stroke" cx="18" cy="18" r="17"/></svg></cnx></cnx>',this.mo.isMobile)},this.oa=t=>i=>{var e,s;return null===(s=(e=this.na)[t])||void 0===s?void 0:s.call(e,i)}}createComponent(t,i){return this.oa(t)(i)||super.createComponent(t,i)}}var P=e(4793),_=e(5650),x=e(1e3),T=e(6716),k=e(8395),C=e(9906);class E extends l.q{constructor(t,i,e,s,n,r={}){super(s,t,n,new A(t,e,s,r),r),this.ha=i,this.$container=s,this.settings=r,this.aa=new T.x,this.ca={[c.Ez.PlayingState]:new o(this),[c.Ez.PausedState]:new a(this)},this.da=0,this.la=null,this.pa=t=>{(0,b.og)(this.$uiContainer,g.s6.UiInView,t)},this.fa.setDistanceValues({top:4,bottom:4}),this.ca[c.Ez.PausedState].enterState(),this.ma=this.$container.querySelector(`.${P.Ek.CardImage}`),this.va=this.$container.querySelector(`.${P.Ek.CardTitle}`),this.ga=this.$container.querySelector(`.${P.Ek.AdMarkerTitleText}`),this.ya=this.$container.querySelector(`.${P.Ek.AdUiContent}`),this.Ki=C.h.getGlobalContainer().resolve(k.f)}get onUiEvent(){return this.aa.asObservable()}ba(t,i,e){var s,r,o;switch(super.ba(t,i,e),t){case d.C[d.C.Volume]:{const t=i.payload;this.aa.next({type:d.C.Volume,payload:{volume:t}});break}case d.C[d.C.Seek]:{const t=i.payload;this.aa.next({type:d.C.Seek,payload:{seek:t}});break}case d.C[d.C.Quality]:{const t=i.payload;this.aa.next({type:d.C.Quality,payload:{quality:t}});break}case d.C[d.C.HoverStart]:{const t=null===(s=null==i?void 0:i.payload)||void 0===s?void 0:s.targetComponent;this.aa.next({type:d.C.HoverStart,payload:t?{targetComponent:t}:void 0});break}case d.C[d.C.FocusStart]:this.Ia();break;case d.C[d.C.HoverEnd]:{const t=null===(r=null==i?void 0:i.payload)||void 0===r?void 0:r.targetComponent;this.aa.next({type:d.C.HoverEnd,payload:t?{targetComponent:t}:void 0});break}case d.C[d.C.StateChanged]:{const t=null===(o=null==i?void 0:i.payload)||void 0===o?void 0:o.targetComponent;this.aa.next({type:d.C.StateChanged,payload:t?{targetComponent:t}:void 0});break}case d.C[d.C.RebindComponent]:{const t=i.payload;this.aa.next({type:d.C.RebindComponent,payload:{uiComponentEnum:t}});break}case n.r[n.r.CloseButton]:this.aa.next({type:d.C.Close});break;default:this.aa.next({type:d.C[t]})}}Ia(){this.Ki.clearTimeout(this.wa),(0,b.cn)(this.$container,g.s6.PlayerFocused),this.wa=this.Ki.setTimeout((()=>{(0,b.IV)(this.$container,g.s6.PlayerFocused),this.fa.removeActiveTooltip()}),3e3)}updateDuration(t){const i=this.getComponent(n.r.ProgressBar),e=this.getComponent(n.r.TotalDurationLabel),r=this.getComponent(n.r.SkipAdButton);if(!t&&r&&(r.setSecondsUntilSkip(0),r.tickDown(0)),!t&&i)return i.setProgress(100),void i.updateWcagAttributes(0,0);this.elapsedTime=0,this.duration=t,i&&i.setProgress((0,s.dQ)(0,t,0,100,0)),e&&e.setTime(t),this.Sa(this.da)}updateVolume(t){const i=this.getComponent(n.r.VolumeControls),e=this.getComponent(n.r.VolumeButton);i&&i.setVolume(t),e&&e.setVolume(t)}get elapsedTime(){return this.da}set elapsedTime(t){this.da=t,this.Sa(this.da)}showSkipAdButton(t){const i=this.getComponent(n.r.SkipAdButton);i&&(i.showComponent(),i.setSecondsUntilSkip(t))}hideSkipAdButton(){const t=this.getComponent(n.r.SkipAdButton);t&&t.hideComponent()}addPodAdMarker(t,i){(0,b.cn)(this.$uiContainer,P.Ek.InPod);(0,_.Sz)(this.$uiContainer.getElementsByClassName(P.Ek.AdMarkerInPodTextContainer)).forEach((e=>{e.innerHTML=`${t+1}/${i}`}))}removeAddPodAdMarker(){(0,b.IV)(this.$uiContainer,P.Ek.InPod)}addDurationAdMarker(){(0,b.cn)(this.$uiContainer,P.Ek.AdDurationLabel)}removeDurationAdMarker(){(0,b.IV)(this.$uiContainer,P.Ek.AdDurationLabel)}Sa(t){const i=this.getComponent(n.r.ElapsedTimeLabel);i&&i.setTime(t);const e=this.getComponent(n.r.SkipAdButton);e&&e.tickDown(t);const s=this.getComponent(n.r.ProgressBar);null==s||s.updateWcagAttributes(this.da,this.duration);const r=this.getComponent(n.r.RemainingDurationLabel);if(r&&this.duration){const i=this.duration-t;i>=0&&r.setTime(i)}}hideAdLoadingScreen(){const t=this.getComponent(n.r.AdLoadingScreen);t&&t.hideComponent(),(0,b.IV)(this.$container,g.s6.PodLoadingScreen)}showAdLoadingScreen(t,i,e,s){const r=this.getComponent(n.r.AdLoadingScreen);r&&(r.showComponent(),r.setBackgroundImg(t),r.setClickUrl(i),r.setFallbackText(e,s),(0,b.cn)(this.$container,g.s6.PodLoadingScreen))}hideAdMarker(){const t=this.$container.querySelector(".cnx-ad-marker");(0,b.MV)(t)}hideProgressBar(){this.getComponent(n.r.ProgressBar).hideComponent()}setContinueReadingCard(t){this.ma.style.backgroundImage=`url("${t.imageSrc}")`,this.va.innerText=t.title?t.title:""}addAdMarkerTitle(t){this.ga.innerHTML=t}cardHasData(){return(0,y.QM)(this.ma.style.backgroundImage)&&(0,y.QM)(this.va.innerHTML)}showContinueReadingCard(t){(0,b.cn)(this.$container,g.s6.AdShowCard),null===this.la&&(this.la=this.globalDomUtilsService.requestAnimationFrameHelper((()=>{this.la=null,(0,b.T7)(t,{height:`${this.ya.clientHeight}px`})})))}hideContinueReadingCard(t){(0,b.IV)(this.$container,g.s6.AdShowCard),(0,b.aQ)(t,"height")}showAdMarkerTitle(){(0,b.cn)(this.$uiContainer,P.Ek.AdTitleLabel)}hideAdMarkerTitle(){(0,b.IV)(this.$uiContainer,P.Ek.AdTitleLabel)}show(){super.show(),this.ha.on(this.$uiContainer,this.pa,{threshold:.5})}hide(){super.hide();(0,b.og)(this.$uiContainer,g.s6.UiInView,!1),this.ha.off(this.$uiContainer,this.pa)}expand(){this.getComponent(n.r.ExpandButton).setState(x.q.expand)}collapse(){this.getComponent(n.r.ExpandButton).setState(x.q.collapse)}getComponent(t){return super.getComponent(t)}}},8696:(t,i,e)=>{"use strict";e.d(i,{I0:()=>s});e(1296);const s={imageMaxHeight:160,ratioWidth:16,ratioHeight:9}},408:(t,i,e)=>{"use strict";e.d(i,{ld:()=>f,pW:()=>s});class s{static getSelectionScore(t){return t.yoScore}}class n{static sortDescBySelectionScore(t){return[...t].sort(((t,i)=>s.getSelectionScore(i)-s.getSelectionScore(t)))}static getBestBySelectionScore(t){return n.sortDescBySelectionScore(t)[0]}}var r=e(9134),o=e(6888),h=e(402),a=e(5650);class c{constructor(t,i,e,s){this.Aa=t,this.Pa=i,this._a=e,this.xa=s}getRequestEvents(t){return this.Pa.getEvents(t)}hasAggregatorType(t){return this.Aa.hasAggregatorType(t)}getAll(){return this.Aa.lineItems}getAllByAggregator(t){return this.Aa.getByAggregation(t)}getAllByRequest(t){return t?this.Pa.lineItems:(0,a.V7)(this.Aa.lineItems,this.Pa.lineItems)}getAllCallable(t){return this.Aa.lineItems.filter((t=>!r.IX.getInstance().hasLineItemById(t.protoLineItem.advertiserLineItemId,t.protoLineItem.publisherLineItemId))).filter((i=>this.Ta(i,t))).filter((i=>h.rO.isLineItemTargetingAllowed(i,t))).filter((i=>this.ka(i,t)))}getBestCallable(t,i){if(!i)return;const e=this.Ca(t);return e?{state:i,lineItemList:this.Ea(e,t)}:void 0}ka(t,i){const{hasAggregator:e,protoLineItem:s}=t;return!(!e&&!s.forceCallingInEveryAO)||this.Ma(t,i)}Ma(t,i){const e=s.getSelectionScore(t),n=this.getAllByRequest(!0),r=this._a.getBidsByStatus([o.wy.IDLE,o.wy.LOADING,o.wy.LOADED]).filter((t=>this.La(t,i))).some((t=>e<s.getSelectionScore(t))),h=n.some((t=>e<s.getSelectionScore(t)));return!r&&!h}Ta(t,i){if(t.aggregators.size>0)return!1;const{advertiserLineItemId:e,forceCallingInEveryAO:s}=t.protoLineItem,n=this._a.getBidsByLineItemId(e).filter((t=>t.status!==o.wy.IMPRESSION));return!(!t.hasAggregator&&(n.length>0||t.bidsInFetch.size>0)&&!s)&&this.xa.callingValidationAggregator.canCall(t,i.adOpportunity.id)}Ca(t){let i=t;return t.some((t=>t.hasAggregator))&&(i=i.filter((t=>t.hasAggregator))),n.getBestBySelectionScore(i)}Ea(t,i){if(t.hasAggregator){const{creativeType:e}=t.protoLineItem,s=i.filter((t=>e===t.protoLineItem.creativeType));return n.sortDescBySelectionScore(s)}return[t]}La(t,i){return this.xa.impressionCapsValidationService.canCall(t.settings.adManagerLineItem,i.adOpportunity.id)&&h.rO.isBidTargetingAllowed(t,i)}}var d=e(5885),l=e(289),u=e(9906);class p{constructor(t,i,e,s,n){this.Ba=t,this._a=i,this.xa=e,this.mo=s,this.Di=n,this.Ra=(t,i)=>{const e=[],s=[];for(const n of t){this.La(n,i)?e.push(n):s.push(n)}return{allowedBidList:e,notAllowedBidList:s}}}static isBidTargetingAllowedEverInSession(t,i){const{protoLineItem:e}=t.settings.adManagerLineItem,{advertiserLineItemId:s,publisherLineItemId:n}=e,{sessionMaxAdDuration:o}=i.adBreakState,a=t.getAdDuration();return h.rO.isAllowedRegardingDuration(a,o)&&!r.IX.getInstance().hasLineItemById(s,n)}getBidEvents(t){return this._a.getEvents(t)}hasReachTheMaxNumberOfReadyBids(){const{maxNumberOfWins:t}=this.mo;if(-1===t)return!1;return this._a.getBidsByStatus([o.wy.LOADING,o.wy.LOADED,o.wy.STARTING,o.wy.IMPRESSION]).length>=t}hasLoadingBids(){const t=this._a.getBidsByStatus([o.wy.LOADING]);return(0,a.BZ)(t)}hasLoadedBids(){const t=this._a.getBidsByStatus([o.wy.LOADED]);return(0,a.BZ)(t)}hasAdsEligibleForFill(t){const i=this.Ba.bidInFetchList.filter((i=>this.Oa(i.adManagerLineItem,t))),e=this._a.getBidsByStatus([o.wy.IDLE,o.wy.LOADING,o.wy.LOADED]).filter((i=>this.La(i,t)));return(0,a.BZ)(e)||(0,a.BZ)(i)}getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(t){return n.sortDescBySelectionScore(this.Ba.bidInFetchList.filter((i=>this.Da(i.adManagerLineItem,t))))}getEligibleBidsInAuctionSortedBySelectionScore(t){return n.sortDescBySelectionScore(this._a.getBidsByStatus([o.wy.IDLE,o.wy.LOADING,o.wy.LOADED]).filter((i=>this.La(i,t))))}isBestBidLoaded(t){const i=this.getBestLoadedBid();if(!i)return!1;const e=this._a.getBidsByStatus([o.wy.IDLE]),s=this.selectBestBid(e,t),r=[...this._a.getBidsByStatus([o.wy.LOADING])];s.selectedBid&&r.push(s.selectedBid);const h=n.getBestBySelectionScore(r);return!h||i.yoScore>=h.yoScore}getBestLoadedBid(){const t=this._a.getBidsByStatus([o.wy.LOADED]);return n.getBestBySelectionScore(t)}getAllBidPricesSortedDesc(){return this._a.getAllBids().map((t=>t.price)).sort(((t,i)=>i-t))}getBestAllowedBidPrice(t){return[...this._a.getBidsByStatus([o.wy.IDLE,o.wy.LOADING,o.wy.LOADED])].filter((i=>this.La(i,t))).sort(((t,i)=>i.price-t.price)).map((t=>t.price))[0]||0}getWinnableBidPricesSortedDesc(){return this._a.getBidsByStatus([o.wy.LOADING,o.wy.LOADED]).sort(((t,i)=>i.price-t.price)).map((t=>t.price))}getBestBidAllowedByStatus(t,i){const e=this._a.getBidsByStatus(t);return this.Va(e,i)}getBestBidAllowed(t){const i=this._a.getAllBids();return this.Va(i,t)}selectBestBid(t,i){let e=t;const s=u.h.getSessionChildContainer(this.Di).resolve(d.P);if(s.isImaTestCaseForSS()||s.isMarriageDotComDomain()||s.isDailykosDotComDomain()){this._a.getBidsByStatus([o.wy.IMPRESSION,o.wy.LOADING,o.wy.LOADED,o.wy.STARTING]).find((t=>"ima"===t.adMediaType))&&(e=e.filter((t=>"ima"!==t.adMediaType)))}const r=this.Ra(e,i),{allowedBidList:h,notAllowedBidList:c}=r,p=(0,a.BZ)(h)&&n.getBestBySelectionScore(h)||null,f=c.map((t=>({bid:t,lossReason:this.Fa(t,i)}))),m=h.filter((t=>t!==p)).map((t=>({bid:t,lossReason:l.ProtoAuctionLossReasonEnum.CompetitorPriority})));return{state:i,selectedBid:p,unselectedBidList:[...f,...m]}}selectBestBidForWin(t,i){const e=this.Na(i),s=this.ja(t,i);return this.$a(e,s)}Na(t){const i=this._a.getBidsByStatus([o.wy.IDLE]);return this.selectBestBid(i,t)}ja(t,i){const e=[...t,...this._a.getBidsByStatus([o.wy.LOADED])];return this.selectBestBid(e,i)}$a(t,i){const e=Object.assign({},t);return t.selectedBid&&i.selectedBid?(s.getSelectionScore(i.selectedBid)>s.getSelectionScore(t.selectedBid)&&(e.selectedBid=null,e.unselectedBidList.push({bid:t.selectedBid,lossReason:l.ProtoAuctionLossReasonEnum.CompetitorPriority})),e):e}Fa(t,i){const e=t.getAdDuration(),s=i.adBreakState.remainingAdDuration;return h.rO.isAllowedRegardingDuration(e,s)?l.ProtoAuctionLossReasonEnum.AdOpportunityEnd:l.ProtoAuctionLossReasonEnum.TargetingMismatch}Da(t,i){const e=[l.ProtoCreativeTypeEnum.ThirdParty,l.ProtoCreativeTypeEnum.External],s=t.protoLineItem.creativeType,n=e.includes(s),r=this.Oa(t,i);return!n&&r}La(t,i){return this.xa.impressionCapsValidationService.canCall(t.settings.adManagerLineItem,i.adOpportunity.id)&&h.rO.isBidTargetingAllowed(t,i)}Oa(t,i){return this.xa.impressionCapsValidationService.canCall(t,i.adOpportunity.id)&&h.rO.isLineItemTargetingAllowed(t,i)}Va(t,i){const e=t.filter((t=>this.La(t,i)));return n.getBestBySelectionScore(e)}}class f{constructor(t,i,e,s,n,r,o){this.Aa=t,this.Pa=i,this.Ba=e,this._a=s,this.xa=n,this.mo=r,this.Ua=new c(this.Aa,this.Pa,this._a,{callingValidationAggregator:this.xa.callingValidationAggregator,impressionCapsValidationService:this.xa.impressionCapService}),this.qa=new p(this.Ba,this._a,{impressionCapsValidationService:this.xa.impressionCapService},{maxNumberOfWins:this.mo.maxNumberOfWins},o)}static isBidTargetingAllowedEverInSession(t,i){return p.isBidTargetingAllowedEverInSession(t,i)}getLineItemRequestEvents(t){return this.Ua.getRequestEvents(t)}getBidEvents(t){return this.qa.getBidEvents(t)}hasAggregatorType(t){return this.Ua.hasAggregatorType(t)}getAllLineItems(){return this.Ua.getAll()}getLineItemsByAggregation(t){return this.Ua.getAllByAggregator(t)}getLineItemsByRequest(t){return this.Ua.getAllByRequest(t)}getAllCallableLineItems(t){return this.Ua.getAllCallable(t)}getBestCallableLineItem(t,i){return this.Ua.getBestCallable(t,i)}hasLoadingBids(){return this.qa.hasLoadingBids()}hasLoadedBids(){return this.qa.hasLoadedBids()}isBestBidLoaded(t){return this.qa.isBestBidLoaded(t)}getBestLoadedBid(){return this.qa.getBestLoadedBid()}hasReachTheMaxNumberOfReadyBids(){return this.qa.hasReachTheMaxNumberOfReadyBids()}hasAdsEligibleForFill(t){return this.qa.hasAdsEligibleForFill(t)}getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(t){return this.qa.getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(t)}getEligibleBidsInAuctionSortedDescBySelectionScore(t){return this.qa.getEligibleBidsInAuctionSortedBySelectionScore(t)}getAllBidPricesSortedDesc(){return this.qa.getAllBidPricesSortedDesc()}getBestAllowedBidPrice(t){return this.qa.getBestAllowedBidPrice(t)}getWinnableBidPricesSortedDesc(){return this.qa.getWinnableBidPricesSortedDesc()}getBestBidAllowedByStatus(t,i){return this.qa.getBestBidAllowedByStatus(t,i)}getBestBidAllowed(t){return this.qa.getBestBidAllowed(t)}selectBestBid(t,i){return this.qa.selectBestBid(t,i)}selectBestBidForWin(t){const i=this._a.getBidsByStatus([o.wy.LOADING]);return this.qa.selectBestBidForWin(i,t)}}},3714:(t,i,e)=>{"use strict";e.d(i,{Ce:()=>g,T2:()=>c});var s=e(4798),n=e(9600);class r{}r.FETCH_BID_TIMEOUT=25e3;var o=e(9791),h=e(9592),a=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class c{constructor(t,i){this.imaAdSlot=t,this.imaDependencies=i,this.bn=null,this.Ha=!1,this.un=[]}static za(){return a(this,void 0,void 0,(function*(){return new Promise((t=>{setTimeout((()=>{t(null)}),r.FETCH_BID_TIMEOUT)}))}))}getImaAdModule(){return a(this,void 0,void 0,(function*(){try{const t=yield Promise.race([this.Wa(),c.za()]);if(!t)throw new Error(h.f.ImaTimeout);return this.Ha=!0,this.bn&&(0,n.i)(this.un),t}catch(t){throw this.Ha=!0,this.bn&&((0,n.i)(this.un),this.bn.destroy(),this.imaDependencies.adSlotContainerRecycler.recycleAdSlot(this.imaAdSlot)),(0,o.W$)(t)}}))}wn(){return this.imaDependencies.adContainerState.get(this.imaDependencies.adType)}Wa(){return a(this,void 0,void 0,(function*(){try{const t=yield this.imaAdSlot.fetchImaDependencies();return yield this.In(t)}catch(t){throw(0,o.W$)(t)}}))}In(t){if(this.Ha)throw new Error(h.f.ImaRequestException);return new Promise(((i,e)=>{const n=this.wn();if(!(0,s.$K)(n)||!(0,s.$K)(this.imaDependencies.url))throw new Error(h.f.ImaRequestException);this.bn=new g(t.imaSdk,t.imaAdsLoader,n.width,n.height,this.imaDependencies.url,this.imaAdSlot.videoSlot,this.imaDependencies.pageUrl,this.imaDependencies.sessionId,this.imaDependencies.advertiserLineItemId,!1,this.imaDependencies.xml,this.imaDependencies.adxFloorPricePredictionList),this.un.push(this.bn.onSuccess.subscribe((e=>{i(Object.assign(Object.assign({},e),t))})),this.bn.onError.subscribe((t=>{e(new Error(t))}))),this.bn.loadAd()}))}}var d=e(5885),l=e(9357),u=e(9906),p=e(5650),f=e(51),m=e(1187),v=e(6716);class g{constructor(t,i,e,s,n,r,a,c,d,u=!1,p=null,f=null){this.Bs=t,this.Os=i,this.Cs=e,this.Es=s,this.Ds=n,this.tn=r,this.Ga=a,this.Di=c,this.Xa=d,this.Ja=u,this.Qa=p,this.Ya=f,this.Ka=new v.x,this.mi=new v.x,this.Za={id:(0,o.qs)()},this.Vs=null,this.Us=t=>{if(!this.zs(t))return;const i=t.getError().getErrorCode();switch(this.Ja&&(0,m.n)({message:"Ima_Error_Code",exception:t.getError().getMessage(),level:m.D.INFO},{throttle:5}),i){case this.Bs.AdError.ErrorCode.VAST_EMPTY_RESPONSE:this.tc(h.f.ImaVastEmptyResponse);break;case this.Bs.AdError.ErrorCode.VAST_WRAPPER_ERROR:case this.Bs.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:this.tc(h.f.ImaInvalidResponse);break;default:this.tc(h.f.ImaRequestException)}},this.ic=t=>{this.zs(t)&&(this.Vs=t.getAdsManager(this.tn,{loadVideoTimeout:25*l.s_}),this.ec(),this.Ka.next({imaAdsManager:this.Vs,requestAdsContext:this.Za}))},this.Os.addEventListener(this.Bs.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.ic),this.Os.addEventListener(this.Bs.AdErrorEvent.Type.AD_ERROR,this.Us)}get onSuccess(){return this.Ka.asObservable()}get onError(){return this.mi.asObservable()}loadAd(){const t=new this.Bs.AdsRequest;["3ebdd57e-b5b8-4fd8-8887-6ae94a978a12","fe9242a7-7f5a-40f0-84ad-0d1cb921dbbe","5ee7c0e2-db41-417d-a2f2-4d91037b85bd","a28964ae-afa3-45d3-9f00-fa228cf89d74"].includes(this.Xa)&&(t.omidAccessModeRules={},t.omidAccessModeRules[google.ima.OmidVerificationVendor.OTHER]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.INTEGRAL_AD_SCIENCE]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.MOAT]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.DOUBLEVERIFY]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.PIXELATE]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.NIELSEN]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.COMSCORE]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.MEETRICS]=google.ima.OmidAccessMode.DOMAIN,t.omidAccessModeRules[google.ima.OmidVerificationVendor.GOOGLE]=google.ima.OmidAccessMode.FULL);const i=u.h.getSessionChildContainer(this.Di).resolve(d.P);if((0,s.QM)(this.Qa))t.adsResponse=this.Qa;else if(this.Ya&&(0,p.BZ)(this.Ya)){const i=this.Ya[0],{uprQueryName:e,uprQueryValue:s}=i;t.adTagUrl=(0,f.Bp)(this.Ds,e,s)}else t.adTagUrl=this.Ds;if(i.isImaTestCaseForSS()||i.isLegacyDotComDomain()){const e=i.adManagerSound<=0;t.setAdWillPlayMuted(e)}t.linearAdSlotWidth=t.nonLinearAdSlotWidth=this.Cs,t.linearAdSlotHeight=t.nonLinearAdSlotHeight=this.Es,t.pageUrl=this.Ga,this.Os.requestAds(t,this.Za)}destroy(){var t;try{this.ec(),null===(t=this.Vs)||void 0===t||t.destroy()}catch(t){}}tc(t){this.mi.next(t)}ec(){this.Os.removeEventListener(this.Bs.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.ic),this.Os.removeEventListener(this.Bs.AdErrorEvent.Type.AD_ERROR,this.Us)}zs(t){const i=t.getUserRequestContext();return!i||i.id===this.Za.id}}},5294:(t,i,e)=>{"use strict";e.d(i,{eT:()=>s,rL:()=>c,hR:()=>m});var s,n,r=e(6888),o=e(408);!function(t){t[t.TimeoutWithReadyBid=0]="TimeoutWithReadyBid",t[t.TimeoutWithoutReadyBid=1]="TimeoutWithoutReadyBid",t[t.Shorted=2]="Shorted",t[t.Prefetched=3]="Prefetched"}(s||(s={})),function(t){t[t.IsIma=-1]="IsIma",t[t.IsBidCall=-2]="IsBidCall"}(n||(n={}));var h=e(289),a=e(4798);class c{static getBidDemandType(t){const i=Object.keys(c.bidDemandTypeMap).filter((i=>(0,c.bidDemandTypeMap[i])(t.settings.adManagerLineItem.protoLineItem)))[0];if(!(0,a.$K)(i))return h.ProtoDemandTypeEnum.None;const e=Number.parseInt(i,10);return h.ProtoDemandTypeEnum[h.ProtoDemandTypeEnum[e]]}static isPrivateMarketplaceBid(t){return t.isPMP}static isOpenMarketBid(t){const{advertiserLineItemId:i,publisherLineItemId:e}=t;return!c.isPrivateMarketplaceBid(t)&&i!==e}static isSelfServedBid(t){const{advertiserLineItemId:i,publisherLineItemId:e}=t;return!c.isPrivateMarketplaceBid(t)&&i===e}}c.bidDemandTypeMap={[h.ProtoDemandTypeEnum.PMP]:t=>c.isPrivateMarketplaceBid(t),[h.ProtoDemandTypeEnum.OpenMarket]:t=>c.isOpenMarketBid(t),[h.ProtoDemandTypeEnum.SelfServed]:t=>c.isSelfServedBid(t)};var d,l=e(6992),u=e(4656),p=e(1187);class f{constructor(t,i,e,s){this.sc=t,this.rc=i,this.adManagerState=e,this.oc=[],this.hc=[],this.deltaTimestampAdStartAdOpportunity=Date.now()-s,this.oc=this.sc.getEligibleBidsInAuctionSortedDescBySelectionScore(this.adManagerState).filter((t=>t!==this.rc)),this.hc=this.sc.getEligibleBidsInFetchInAuctionSortedDescBySelectionScore(this.adManagerState),this.winnerDemandType=this.ac(),this.firstLoser=this.dc(),this.allLoserStatusInfo=this.fc(),this.firstOpenMarketLoser=this.mc(),this.auctionEndType=this.adManagerState.auctionEndType}ac(){return this.rc?c.getBidDemandType(this.rc):(this.vc("ImpressionAuctionSnapshot: No winner bid found"),h.ProtoDemandTypeEnum.None)}fc(){const t=this.hc.length;let i=0,e=0,s=0;return this.oc.forEach((t=>{switch(t.status){case r.wy.IDLE:i++;break;case r.wy.LOADING:e++;break;case r.wy.LOADED:s++}})),{verifyingBidsInAuction:t,idleBidsInAuction:i,loadingBidsInAuction:e,loadedBidsInAuction:s}}dc(){const t=this.oc[0],i=this.hc[0];if(!(0,a.$K)(t)&&!(0,a.$K)(i))return;let e=0;(0,a.$K)(t)&&(e=o.pW.getSelectionScore(t));let s,r,h,p,f,m,v,g,y,b=0;return(0,a.$K)(i)&&(b=o.pW.getSelectionScore(i)),e>b?(s=c.getBidDemandType(t),r=t.price,h=d.BID,p=t.settings.requestMetadata.data.encryptedPrice,f=t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,m=t.settings.adManagerLineItem.protoLineItem,v=t.settings.isIma,g=t.status,y=t.settings.isIma?n.IsIma:t.getAdDuration()):(s=(0,u.Bl)(i.adManagerLineItem),r=i.bidPrice,h=d.BID_IN_FETCH,p=i.encryptedPrice,f=i.adManagerLineItem.protoLineItem.advertiserLineItemId,m=i.adManagerLineItem.protoLineItem,v=i.isIma,g=l.eW.VERIFYING,y=n.IsBidCall),{loserType:h,demandType:s,encryptedPrice:p,customClientPrice:r,advertiserLineItemId:f,lineItem:m,isIma:v,status:g,adDuration:y}}mc(){const t=this.gc();if((0,a.$K)(t))return{demandType:h.ProtoDemandTypeEnum.OpenMarket,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,customClientPrice:t.settings.cpm,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}}gc(){return this.oc.find((t=>c.getBidDemandType(t)===h.ProtoDemandTypeEnum.OpenMarket))}vc(t){(0,p.n)({level:p.D.WARN,message:t},{throttle:1,shouldSendMaxLog:!1})}}!function(t){t.BID="bid",t.BID_IN_FETCH="bid_in_fetch"}(d||(d={}));class m{constructor(t){this.sc=t,this.yc=null}get lastSnapshot(){return this.yc}takeSnapshot(t,i,e){return this.yc=new f(this.sc,t,i,e),this.yc}}},2484:(t,i,e)=>{"use strict";e.d(i,{Mz:()=>p,E3:()=>m,Vx:()=>f,U4:()=>v,Ko:()=>g});var s=e(3775),n=e(6888),r=e(8090);class o{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.viewable_impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}var h=e(1187);class a{constructor(t){this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new o,t.inLine?this.bc(t.inLine):this.Ic(t.wrapper)}bc(t){this.wc(t.errors),this.Sc(t.impressions),this.Ac(t.creatives)}Ic(t){this.wc(t.errors),this.Sc(t.impressions),this.Ac(t.creatives)}Pc(t){this._c(t.trackingEvents),this.xc(t.videoClicks)}xc(t){t&&(this.kc(t.clickTrackings),this.Cc(t.customClicks))}kc(t){this.clickTrackings.push(...t)}Cc(t){this.customClicks.push(...t)}_c(t){t.forEach((t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(i){(0,h.n)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:i.stack,level:h.D.INFO})}}))}Ac(t){t.forEach((t=>{t.linear?this.Pc(t.linear):t.nonLinear&&this._c(t.nonLinear.trackingEvents)}))}wc(t){this.errorUrls.push(...t)}Sc(t){this.impressions.push(...t)}}var c=e(289),d=e(3020),l=e(9791);const u={[c.ProtoTrackerTriggerType.Impression]:"adImpression",[c.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[c.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[c.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[c.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[c.ProtoTrackerTriggerType.VideoClick]:"adClick",[c.ProtoTrackerTriggerType.Pause]:"adPause",[c.ProtoTrackerTriggerType.Resume]:"adResume",[c.ProtoTrackerTriggerType.Mute]:"adMute",[c.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class p{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adViewableImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static trackError(t,i,e,s,n=r.Oq.GeneralError,o=window.document.head){this.track(t,i,e,s,o,n)}static track(t,i,e,n,r=window.document.head,o){if(!Array.isArray(t))return;const{width:h,height:a}=n.adContainerState.get(e.adType),{adBreakType:u}=n.adBreakState,{mediaDescription:p,mediaDuration:f,mediaId:m,mediaUrl:v,mediaTitle:g}=n.media;t.forEach((t=>{if(t.url)try{const n=i.replace(t.url,e.vendorId,{adMacros:{adWidth:h,adHeight:a,adPostion:u,errorCode:o},mediaMacros:{mediaDescription:p,mediaDuration:f,mediaId:m,mediaUrl:v,mediaTitle:g}});switch(t.type){case c.ProtoTrackerType.Image:(0,l.Hh)([n],window);break;case c.ProtoTrackerType.Javascript:(0,d.dZ)({src:n},window.document.head,window);break;case c.ProtoTrackerType.IAS:(0,d.dZ)({src:n,attributes:[{name:s.b.GarbageCollector,value:""}]},r,window)}}catch(t){}}))}}function f(t,i){const e=new a(t);i.adError.push(...y(e.errorUrls)),i.adImpression.push(...y(e.impressions)),i.adViewableImpression.push(...y(e.trackingEvents.viewable_impression)),i.adClick.push(...y(e.clickTrackings)),i.adMute.push(...y(e.trackingEvents.mute)),i.adPause.push(...y(e.trackingEvents.pause)),i.adQuartileFirst.push(...y(e.trackingEvents.firstQuartile)),i.adQuartileSecond.push(...y(e.trackingEvents.midpoint)),i.adQuartileThird.push(...y(e.trackingEvents.thirdQuartile)),i.adQuartileFourth.push(...y(e.trackingEvents.complete)),i.adResume.push(...y(e.trackingEvents.resume)),i.adSkip.push(...y(e.trackingEvents.skip)),i.adStarted.push(...y(e.trackingEvents.creativeView)),i.adVideoStart.push(...y([...e.trackingEvents.start])),i.adUnmute.push(...i.adUnmute,...y(e.trackingEvents.unmute)),i.adUserAcceptInvitation.push(...y([...e.trackingEvents.acceptInvitation,...e.trackingEvents.acceptInvitationLinear])),i.adUserClose.push(...y(e.trackingEvents.close)),i.adUserMinimize.push(...i.adUserMinimize,...y([...e.trackingEvents.collapse,...e.trackingEvents.playerCollapse,...e.trackingEvents.adCollapse]))}function m(t,i){t.forEach((t=>function(t,i){(function(t,i){return i[u[t]]})(t.trigger,i).push({type:t.type,url:t.url})}(t,i)))}function v(t){return{type:c.ProtoTrackerType.Image,url:t}}function g(t,i){switch(t){case n.fI.AdImpression:return i.adImpression;case n.fI.AdClickThru:return i.adClick;case n.fI.AdStarted:return i.adStarted;case n.fI.AdVideoStart:return i.adVideoStart;case n.fI.AdVideoFirstQuartile:return i.adQuartileFirst;case n.fI.AdVideoMidpoint:return i.adQuartileSecond;case n.fI.AdVideoThirdQuartile:return i.adQuartileThird;case n.fI.AdVideoComplete:return i.adQuartileFourth;case n.fI.AdPaused:return i.adPause;case n.fI.AdPlaying:return i.adResume;case n.fI.AdSkipped:return i.adSkip;case n.fI.AdUserClose:return i.adUserClose;case n.fI.AdUserAcceptInvitation:return i.adUserAcceptInvitation;case n.fI.AdUserMinimize:return i.adUserMinimize;case n.fI.AdError:return i.adError}}function y(t){return t.map((t=>v(t)))}},8850:(t,i,e)=>{"use strict";var s;e.d(i,{O:()=>s}),function(t){t[t.XmlParsingError=100]="XmlParsingError",t[t.VastSchemaError=101]="VastSchemaError",t[t.InvalidVastVersionError=102]="InvalidVastVersionError",t[t.ExpectingDifferentLinearity=201]="ExpectingDifferentLinearity",t[t.GeneralLinearError=400]="GeneralLinearError",t[t.MediaFileNotFound=401]="MediaFileNotFound",t[t.MediaFileUriTimeout=402]="MediaFileUriTimeout",t[t.MediaFileNotSupported=403]="MediaFileNotSupported",t[t.VerificationUnitNotExecuted=410]="VerificationUnitNotExecuted",t[t.WrapperVastUriTimeout=301]="WrapperVastUriTimeout",t[t.WrapperLimitReached=302]="WrapperLimitReached",t[t.NoVastResponseAfterWrapper=303]="NoVastResponseAfterWrapper",t[t.ImpressionTimeout=304]="ImpressionTimeout",t[t.NonlinearGeneralError=500]="NonlinearGeneralError",t[t.NonlinearExpectingDifferentSize=501]="NonlinearExpectingDifferentSize",t[t.NonlinearUnableToFetchResource=502]="NonlinearUnableToFetchResource",t[t.NonlinearSupportedTypeNotFound=503]="NonlinearSupportedTypeNotFound",t[t.GeneralError=900]="GeneralError",t[t.GeneralVpaidError=901]="GeneralVpaidError"}(s||(s={}))},7720:(t,i,e)=>{"use strict";var s;e.d(i,{ev:()=>s,Oq:()=>o.O,Uq:()=>n,y$:()=>r}),function(t){t[t.Empty=0]="Empty",t[t.BadWrapper=1]="BadWrapper",t[t.MediaNotFound=2]="MediaNotFound"}(s||(s={}));var n,r,o=e(8850);!function(t){t.AdVerifications="AdVerifications"}(n||(n={})),function(t){t[t.Javascript=0]="Javascript",t[t.Video=1]="Video"}(r||(r={}))},2321:(t,i,e)=>{"use strict";e.d(i,{RA:()=>n,RC:()=>d,hj:()=>a,JO:()=>p,wz:()=>f,d1:()=>m,Nh:()=>v,bJ:()=>g,xt:()=>y,ML:()=>b,az:()=>I,wd:()=>w,Qr:()=>S,GU:()=>A,GX:()=>P,vZ:()=>_,im:()=>x});var s=e(7720);class n extends Error{constructor(t){super(t.errorReason),this.vastErrorTrackers=[],this.vastErrorCode=t.vastErrorCode||s.Oq.GeneralError,this.vastErrorTrackers=t.errorUrlTrackers||[]}}var r,o=e(894);!function(t){function i(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{i.push(o.y.getKeyValue(t))})),i}t.parseImpressions=function(t){return i(t)},t.parseCretives=function(t){const i=[];return t.forEach((t=>{i.push(new d(t))})),i},t.parseExtensions=function(t){return t.map((t=>new a(t)))},t.parseVerifications=function(t){return t.map((t=>new P(t)))},t.parseErrors=function(t){return i(t)},t.parseTrackingEvents=function(t,i){const e=[];return void 0!==t[0]&&t.forEach((t=>{e.push(new w(t,i))})),e}}(r||(r={}));var h=e(5650);class a{constructor(t){var i;this.adVerifications=void 0,this.type=t.keyAttributes.type,this.adVerifications=(null===(i=null==t?void 0:t.adverifications)||void 0===i?void 0:i.verification)?r.parseVerifications((0,h.qo)(t.adverifications.verification)):[]}}var c=e(1187);class d{constructor(t){if(this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.nonLinear=void 0,this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,this.adId=t.keyAttributes.adid,t.linear)try{this.linear=new g(t.linear)}catch(t){(0,c.n)({callStack:t.stack,level:c.D.WARN,exception:t.message,message:"Creative_Linear"})}if(t.nonlinearads)try{this.nonLinear=new I(t.nonlinearads)}catch(t){(0,c.n)({callStack:t.stack,level:c.D.WARN,exception:t.message,message:"Creative_NonLinear"})}}isSupported(){return!0}}var l=e(1310),u=e(4798);class p{constructor(t){var i,e,s,n,r,h,a;this.program=null===(i=t.keyAttributes)||void 0===i?void 0:i.program,this.width=null===(e=t.keyAttributes)||void 0===e?void 0:e.width,this.height=null===(s=t.keyAttributes)||void 0===s?void 0:s.height,this.pxRatio=null===(n=t.keyAttributes)||void 0===n?void 0:n.pxratio,this.xPosition=null===(r=t.keyAttributes)||void 0===r?void 0:r.xposition,this.yPosition=null===(h=t.keyAttributes)||void 0===h?void 0:h.yposition,this.apiFramework=null===(a=t.keyAttributes)||void 0===a?void 0:a.apiframework,this.offset=(0,u.$K)(t.keyAttributes.offset)?(0,l.pP)(t.keyAttributes.offset):void 0,this.duration=(0,u.$K)(t.keyAttributes.duration)?(0,l.pP)(t.keyAttributes.duration):void 0,this.staticResource=o.y.getKeyValue(t.staticresource),this.iframeResource=o.y.getKeyValue(t.iframeresource),this.htmlResource=o.y.getKeyValue(t.htmlresource),this.iconViewTracking=o.y.getKeyValue(t.iconviewtracking),(0,u.$K)(t.iconclicks)&&(this.iconClicks=new f(t.iconclicks))}}class f{constructor(t){this.iconClickTracking=[],this.iconClickThrough=o.y.getKeyValue(t.iconclickthrough),(0,u.$K)(t.iconclicktracking)&&(this.iconClickTracking=this.Ec((0,h.qo)(t.iconclicktracking)))}Ec(t){return(0,h.BZ)(t)?t.map((t=>o.y.getKeyValue(t))):[]}}class m{constructor(t){var i,e,s;this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adVerifications=void 0,this.adTitle=o.y.getKeyValue(t.adtitle),this.adSystem=o.y.getKeyValue(t.adsystem),this.impressions=r.parseImpressions((0,h.qo)(t.impression)),this.creatives=(null===(i=t.creatives)||void 0===i?void 0:i.creative)?r.parseCretives((0,h.qo)(t.creatives.creative)):[],this.description=o.y.getKeyValue(t.description),this.advertiser=o.y.getKeyValue(t.advertiser),this.surveys=o.y.getKeyValue(t.survey),this.errors=r.parseErrors((0,h.qo)(t.error)),this.pricing=o.y.getKeyValue(t.pricing),this.extensions=(null===(e=t.extensions)||void 0===e?void 0:e.extension)?r.parseExtensions((0,h.qo)(t.extensions.extension)):[],this.adVerifications=(null===(s=t.adverifications)||void 0===s?void 0:s.verification)?r.parseVerifications((0,h.qo)(t.adverifications.verification)):[]}isSupported(){return!0}}class v{constructor(t){var i,e;this.url=t.keyValue,this.apiFramework=null===(i=t.keyAttributes)||void 0===i?void 0:i.apiframework,this.browserOptional=null===(e=t.keyAttributes)||void 0===e?void 0:e.browseroptional}}class g{constructor(t){this.duration=void 0,this.mediaFiles=[],this.icons=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=(0,l.pP)(o.y.getKeyValue(t.duration)),this.skipoffset=(0,l.QI)(t.keyAttributes.skipoffset,this.duration),t.mediafiles&&(this.mediaFiles=this.Mc((0,h.qo)(t.mediafiles.mediafile))),t.trackingevents&&(this.trackingEvents=r.parseTrackingEvents((0,h.qo)(t.trackingevents.tracking),this.duration)),t.videoclicks&&(this.videoClicks=new _(t.videoclicks)),t.adparameters&&(this.adParameters=o.y.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=o.y.decodeXMLText(this.adParameters))),t.icons&&t.icons.icon&&(this.icons=this.Bc((0,h.qo)(t.icons.icon)))}Mc(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{const e=new y(t);i.push(e)})),i}Bc(t){return(0,h.BZ)(t)?t.map((t=>new p(t))):[]}isSupported(){return!0}}class y{constructor(t){this.Rc=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.Dc="VPAID",this.delivery=void 0,this.type=void 0,this.width=0,this.height=0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.isSupported=!0,this.delivery=t.keyAttributes.delivery,this.type=t.keyAttributes.type,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.codec=t.keyAttributes.codec,this.id=t.keyAttributes.id,this.bitrate=t.keyAttributes.bitrate,this.minBitrate=t.keyAttributes.minbitrate,this.maxBitrate=t.keyAttributes.maxbitrate,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.src=o.y.getKeyValue(t),this.isSupported=this.Vc()}getMediaFileType(){return this.apiFramework===this.Dc||(0,h.d3)(this.type,this.Rc)?s.y$.Javascript:s.y$.Video}Vc(){if("VPAID"===this.apiFramework||(0,h.d3)(this.type,this.Rc))return!0;if("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)return!1;if(!(0,u.QM)(this.type))return(0,c.n)({message:"MediaFile_type_not_provided",level:c.D.WARN}),!0;const t=document.createElement("video").canPlayType(this.type);return!!(0,u.QM)(t)}}class b{constructor(t){var i;this.minSuggestedDuration=void 0,this.staticResource={},this.htmlResource={},this.iframeResource={},this.nonLinearClickTracking={},this.id=t.keyAttributes.id,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.expandedWidth=t.keyAttributes.expandedheight,this.expandedHeight=t.keyAttributes.expandedwidth,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.minSuggestedDuration=(0,l.pP)(t.keyAttributes.minsuggestedduration),this.nonLinearClickThrough=null===(i=t.nonlinearclickthrough)||void 0===i?void 0:i.keyValue,t.nonlinearclicktracking&&(this.nonLinearClickTracking.id=t.nonlinearclicktracking.keyAttributes.id,this.nonLinearClickTracking.uri=t.nonlinearclicktracking.keyValue),t.staticresource&&(this.staticResource.creativeType=t.staticresource.keyAttributes.creativetype,this.staticResource.uri=t.staticresource.keyValue),t.iframeresource&&(this.iframeResource.uri=t.iframeresource.keyValue),t.htmlresource&&(this.htmlResource.uri=t.htmlresource.keyValue)}isSupported(){return"VPAID"===this.apiFramework?((0,c.n)({message:"AdManager_NonLinearAd_VPAID_found",level:c.D.INFO},{pacing:10,shouldSendMaxLog:!1}),!1):this.width&&this.height?!(!this.staticResource.creativeType||!this.staticResource.uri)||(this.htmlResource.uri&&(0,c.n)({message:"AdManager_NonLinearAd_htmlResource_found",level:c.D.INFO},{pacing:10,shouldSendMaxLog:!1}),this.iframeResource.uri&&(0,c.n)({message:"AdManager_NonLinearAd_iframeResource_found",level:c.D.INFO},{pacing:10,shouldSendMaxLog:!1}),!1):((0,c.n)({message:"AdManager_NonLinearAd_no_dimensions",level:c.D.INFO},{pacing:10,shouldSendMaxLog:!1}),!1)}}class I{constructor(t){if(this.nonLinearAdList=[],this.trackingEvents=[],this.Fc=!1,t.nonlinear){const i=(0,h.qo)(t.nonlinear);this.nonLinearAdList=this.Nc(i),this.Fc=(0,h.BZ)(i)&&0===this.nonLinearAdList.length}t.trackingevents&&(this.trackingEvents=r.parseTrackingEvents((0,h.qo)(t.trackingevents.tracking))),t.adparameters&&(this.adParameters=o.y.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=o.y.decodeXMLText(this.adParameters)))}isSupported(){return!0}get hasInvalidResource(){return this.Fc}Nc(t){return t.map((t=>new b(t))).filter((t=>t.isSupported()))}}class w{constructor(t,i){this.name=t.keyAttributes.event,this.uri=o.y.getKeyValue(t),"progress"===this.name&&(this.offset=(0,l.QI)(t.keyAttributes.offset,i))}}class S{constructor(t){Array.isArray(t)?this.jc(t):this.$c(t)}isSupported(){return!0}$c(t){this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,t.inline?this.inLine=new m(t.inline):t.wrapper&&(this.wrapper=new x(t.wrapper))}jc(t){const i=t.filter((t=>{const i=this.Uc(t).filter((t=>t.linear));return!!(0,h.BZ)(i)}));(0,h.BZ)(i)&&this.$c(i[0])}Uc(t){return t.inline?(0,h.qo)(t.inline.creatives.creative):t.wrapper?(0,h.qo)(t.wrapper.creatives.creative):[]}}class A{constructor(t){this.mediaFiles=[],this.nonLinearFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.linearClickThrough=void 0,this.creativeId=void 0,this.extensions=[],this.verifications=[],this.icons=[],t.forEach((t=>{t.inLine?(this.adTitle=t.inLine.adTitle,this.extensions=t.inLine.extensions,this.qc(t.inLine.extensions),this.Hc(t.inLine.adVerifications),this.Ac(t.inLine.creatives)):t.wrapper&&(this.Ac(t.wrapper.creatives),this.Hc(t.wrapper.adVerifications),this.qc(t.wrapper.extensions))}))}qc(t){(0,h.BZ)(t)&&t.forEach((t=>{(0,h.BZ)(t.adVerifications)&&this.Hc(t.adVerifications)}))}Hc(t){this.verifications=[...this.verifications,...t]}Pc(t){this.duration=t.duration,this.Wc(t.mediaFiles),this.Gc(t.skipoffset),this.Jc(t.adParameters),t.videoClicks&&t.videoClicks.clickThrough&&this.cr(t.videoClicks.clickThrough),(0,h.BZ)(t.icons)&&this.Qc(t.icons)}Kc(t){this.Zc(t.nonLinearAdList),this.Jc(t.adParameters)}Zc(t){this.nonLinearFiles=[...this.nonLinearFiles,...t]}Qc(t){this.icons.push(...t)}Jc(t){this.adParameters=t}Gc(t){this.skipoffset=t}Wc(t){this.mediaFiles=[...this.mediaFiles,...t]}cr(t){this.linearClickThrough=t}Ac(t){t.forEach((t=>{this.creativeId=t.id,t.linear&&this.Pc(t.linear),t.nonLinear&&this.Kc(t.nonLinear)}))}}class P{constructor(t){var i,e;try{this.vendor=t.keyAttributes.vendor,t.javascriptresource&&(this.javaScriptResource=new v(t.javascriptresource)),this.verificationParameters=null===(i=t.verificationparameters)||void 0===i?void 0:i.keyValue,this.trackingEvents=(null===(e=t.trackingevents)||void 0===e?void 0:e.tracking)?r.parseTrackingEvents((0,h.qo)(null==t?void 0:t.trackingevents.tracking)):[]}catch(t){(0,c.n)({message:"OMID_Verification_parse_error",level:c.D.WARN,callStack:t.stack,exception:t.message})}}}class _{constructor(t){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=o.y.getKeyValue(t.clickthrough),this.clickTrackings=this.td((0,h.qo)(t.clicktracking)),this.customClicks=this.td((0,h.qo)(t.customclick))}td(t){const i=[];return void 0!==t[0]&&t.forEach((t=>{i.push(o.y.getKeyValue(t))})),i}}class x{constructor(t){var i,e,s;this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adVerifications=void 0,this.extensions=void 0,this.adSystem=o.y.getKeyValue(t.adsystem),this.impressions=r.parseImpressions((0,h.qo)(t.impression)),this.VASTAdTagURI=o.y.getKeyValue(t.vastadtaguri),this.creatives=(null===(i=t.creatives)||void 0===i?void 0:i.creative)?r.parseCretives((0,h.qo)(t.creatives.creative)):[],this.errors=r.parseErrors((0,h.qo)(t.error)),this.fallowAdditionalWrappers=!t.keyAttributes.followadditionalwrappers||t.keyAttributes.followadditionalwrappers,this.allowMultipleAds=t.keyAttributes.allowmultipleads,this.fallbackOnNoAd=t.keyAttributes.fallbackonnoad,this.adVerifications=(null===(e=null==t?void 0:t.adverifications)||void 0===e?void 0:e.verification)?r.parseVerifications((0,h.qo)(t.adverifications.verification)):[],this.extensions=(null===(s=null==t?void 0:t.extensions)||void 0===s?void 0:s.extension)?r.parseExtensions((0,h.qo)(t.extensions.extension)):[]}}},894:(t,i,e)=>{"use strict";e.d(i,{y:()=>s});var s,n=e(4798),r=e(51);!function(t){function i(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():(0,r.jv)(t)?t:isFinite(Number(t))?parseFloat(t):isFinite(Date.parse(t))?new Date(t):"string"==typeof t?t.trim():t}t.JXONTree=function t(e){let s=0,n="";if(this.keyAttributes||(this.keyAttributes={}),e.hasChildNodes()){for(let i,s,r,o=0;o<e.childNodes.length;o++)i=e.childNodes.item(o),(i.nodeType-1|1)===Node.TEXT_NODE?n+=i.nodeType===Node.TEXT_NODE?i.nodeValue.trim():i.nodeValue:1!==i.nodeType||i.prefix||(s=i.nodeName.toLowerCase(),r=new t(i),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(r)):this[s]=r);this.keyValue=n?i(n):null}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes()){let t;for(;s<e.attributes.length;s++)t=e.attributes.item(s),this.keyAttributes[t.name.toLowerCase()]=i(t.value.trim())}},t.getKeyValue=function(t){if(t&&t.keyValue)return t.keyValue},t.decodeXMLText=function(t){if("string"==typeof t)return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},t.isValidXMLString=function(t){const i=(new DOMParser).parseFromString(t,"text/xml").documentElement.querySelector("parsererror");return(0,n.Ft)(i)},t.parseText=i}(s||(s={}))},8090:(t,i,e)=>{"use strict";e.d(i,{RA:()=>s.RA,Oq:()=>r.Oq,Uq:()=>r.Uq,GU:()=>s.GU,y$:()=>r.y$,H3:()=>l});var s=e(2321),n=e(894),r=e(7720),o=e(9592),h=e(5650),a=e(5139),c=e(289),d=e(4798);class l{constructor(t=2){this.ed=t}parseVastXml(t){var i,e;try{if(!n.y.isValidXMLString(t))return{hasError:!0,vastErrorCode:r.Oq.XmlParsingError,errorReason:o.f.XmlInvalidString};if(this.sd(t))return{hasError:!0,vastErrorCode:r.Oq.GeneralError,errorReason:o.f.XmlInvalidAd};const a=(new DOMParser).parseFromString(t,"application/xml"),c=new n.y.JXONTree(a.documentElement);if(!this.nd(c))return{hasError:!0,vastErrorCode:r.Oq.VastSchemaError,errorReason:o.f.XmlInvalidTree};if(!this.rd(c,this.ed))return{hasError:!0,vastErrorCode:r.Oq.InvalidVastVersionError,errorReason:o.f.VastVersionNotSupported};const d=new s.Qr(c.ad);let l=[],u=[];(0,h.BZ)(null===(i=null==d?void 0:d.inLine)||void 0===i?void 0:i.creatives)&&(l=d.inLine.creatives.filter((t=>{var i;return(0,h.BZ)(null===(i=null==t?void 0:t.linear)||void 0===i?void 0:i.mediaFiles)})),u=null===(e=null==d?void 0:d.inLine)||void 0===e?void 0:e.creatives.filter((t=>{var i;return(0,h.BZ)(null===(i=null==t?void 0:t.nonLinear)||void 0===i?void 0:i.nonLinearAdList)})));const p=this.od(d,l,u);return p.isValid?this.hd(d,u)?{hasError:!1,result:d}:{hasError:!0,vastErrorCode:r.Oq.MediaFileNotSupported,errorReason:o.f.VastMediaFilesNotSupported,errorUrlTrackers:this.dd(d)}:p.reason===r.ev.MediaNotFound&&this.ud(d)?{hasError:!0,vastErrorCode:r.Oq.NonlinearSupportedTypeNotFound,errorReason:o.f.XmlInvalidAd,errorUrlTrackers:this.dd(d)}:{hasError:!0,vastErrorCode:r.Oq.VastSchemaError,errorReason:o.f.XmlInvalidAd}}catch(t){return{hasError:!0,vastErrorCode:r.Oq.GeneralError,errorReason:o.f.XmlParseGeneral}}}dd(t){var i;const e=[];return null===(i=null==t?void 0:t.inLine)||void 0===i||i.errors.forEach((t=>{e.push({url:t,type:c.ProtoTrackerType.Image})})),e}ud(t){var i,e;return null===(e=null===(i=t.inLine)||void 0===i?void 0:i.creatives)||void 0===e?void 0:e.some((t=>{var i;return null===(i=t.nonLinear)||void 0===i?void 0:i.hasInvalidResource}))}hd(t,i){var e,s;if((0,d.$K)(t.wrapper))return!0;null===(e=null==t?void 0:t.inLine)||void 0===e||e.creatives.forEach((t=>{var i;(0,h.BZ)(null===(i=null==t?void 0:t.linear)||void 0===i?void 0:i.mediaFiles)&&(t.linear.mediaFiles=this.fd(t.linear.mediaFiles))}));const n=null===(s=null==t?void 0:t.inLine)||void 0===s?void 0:s.creatives.reduce(((t,i)=>{var e;return(0,h.BZ)(null===(e=null==i?void 0:i.linear)||void 0===e?void 0:e.mediaFiles)?[...t,...i.linear.mediaFiles]:t}),[]);return!(!(0,h.BZ)(n)&&!(0,h.BZ)(i))}fd(t){return t.filter((t=>t.isSupported))}sd(t){return a.c.KEYWORDS_FOR_BANNED_VAST.some((i=>t.includes(i)))}rd(t,i){const e=parseInt(t.keyAttributes.version,10);return!(e&&e<i)}nd(t){return!!t.ad}od(t,i,e){const s=t.wrapper;return t.inLine||s?s&&!s.VASTAdTagURI?{isValid:!1,reason:r.ev.BadWrapper}:s||(0,h.BZ)(i)||(0,h.BZ)(e)?{isValid:!0}:{isValid:!1,reason:r.ev.MediaNotFound}:{isValid:!1,reason:r.ev.Empty}}}},3716:(t,i,e)=>{"use strict";e.d(i,{z:()=>u,Sb:()=>s});var s,n=e(6888);!function(t){t[t.ON_BID=0]="ON_BID",t[t.ON_BID_LOADING=1]="ON_BID_LOADING",t[t.ON_BID_LOADING_CONSUMED=2]="ON_BID_LOADING_CONSUMED",t[t.ON_BID_LOADED=3]="ON_BID_LOADED",t[t.ON_BID_STARTING=4]="ON_BID_STARTING",t[t.ON_BID_IN_IMPRESSION=5]="ON_BID_IN_IMPRESSION",t[t.ON_BID_LOADED_CONSUMED=6]="ON_BID_LOADED_CONSUMED"}(s||(s={}));var r=e(6716);class o{constructor(){this.vd=new r.x,this.gd=new r.x,this.bd=new r.x,this.Id=new r.x,this.Sd=new r.x,this.Pd=new r.x,this._d=new r.x,this.xd={[s.ON_BID]:this.vd,[s.ON_BID_LOADING]:this.gd,[s.ON_BID_LOADING_CONSUMED]:this.Pd,[s.ON_BID_LOADED]:this.bd,[s.ON_BID_STARTING]:this.Id,[s.ON_BID_IN_IMPRESSION]:this.Sd,[s.ON_BID_LOADED_CONSUMED]:this._d},this.Td={[n.wy.IDLE]:t=>{this.vd.next(t)},[n.wy.LOADING]:t=>{this.gd.next(t)},[n.wy.LOADED]:t=>{this.bd.next(t)},[n.wy.STARTING]:t=>{this.Id.next(t)},[n.wy.IMPRESSION]:t=>{this.Sd.next(t)},[n.wy.CONSUMED_LOADING]:t=>{this.Pd.next(t)},[n.wy.CONSUMED_LOADED]:t=>{this._d.next(t)},[n.wy.INVALIDATED]:t=>{[n.wy.IDLE,n.wy.LOADING].includes(t.status)?this.Pd.next(t):this._d.next(t)}}}bidStatusChanged(t,i){(0,this.Td[i])(t)}getBidObservable(t){return this.xd[t].asObservable()}}var h=e(1310),a=e(4798),c=e(8659),d=e(5650),l=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let u=class{constructor(){this.Cd=[],this.Ld=new o,this.Bd=new Map}getEvents(t){return this.Ld.getBidObservable(t)}addBid(t){this.Rd(t),this.Cd.push(t),this.Ld.bidStatusChanged(t,n.wy.IDLE)}getAllBids(){return this.Od(),this.Cd}getBidsByLineItemId(t){return this.getAllBids().filter((i=>{const{advertiserLineItemId:e,publisherLineItemId:s}=i.settings.adManagerLineItem.protoLineItem;return[e,s].includes(t)}))}getBidsByStatus(t){return this.getAllBids().filter((i=>t.includes(i.status)))}Dd(t,i){[n.wy.CONSUMED_LOADING,n.wy.CONSUMED_LOADED,n.wy.INVALIDATED].includes(i)&&this.Vd(t),this.Ld.bidStatusChanged(t,i)}Vd(t){this.Fd(t),(0,d.sj)(this.Cd,t)}Nd(){return this.Cd.filter((t=>{const i=t.createdTimestamp,e=t.settings.adManagerLineItem.protoLineItem.networkExpiryTimeSeconds;return(0,a.r)(e)&&(0,h.H8)(i)>=e}))}Od(){this.Nd().forEach((t=>t.invalidate()))}Rd(t){const i=t.onStatusChanged.subscribe((i=>{this.Dd(t,i)}));this.Bd.set(t.settings.bidId,i)}Fd(t){const{bidId:i}=t.settings,e=this.Bd.get(i);null==e||e.unsubscribe(),this.Bd.delete(i)}};u=l([(0,c.b2)(),(0,c.Yn)(c.Fw.ContainerScoped)],u)},6992:(t,i,e)=>{"use strict";e.d(i,{TA:()=>o,eW:()=>h});var s=e(5650),n=e(8659),r=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let o=class{constructor(){this.bidInFetchList=[]}add(t){this.bidInFetchList.push(t)}remove(t){(0,s.sj)(this.bidInFetchList,t)}getById(t){return this.bidInFetchList.find((i=>i.bidId===t))}};var h;o=r([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],o),function(t){t[t.VERIFYING=-1]="VERIFYING"}(h||(h={}))},8797:(t,i,e)=>{"use strict";var s;e.d(i,{S6:()=>c,N7:()=>s}),function(t){t[t.ON_STARTED=0]="ON_STARTED",t[t.ON_END=1]="ON_END"}(s||(s={}));var n=e(6716);class r{constructor(){this.jd=new n.x,this.$d=new n.x,this.Ud={[s.ON_STARTED]:this.jd,[s.ON_END]:this.$d},this.qd={[s.ON_STARTED]:t=>this.jd.next(t),[s.ON_END]:t=>this.$d.next(t)}}getCallingObservable(t){return this.Ud[t].asObservable()}triggerEvent(t,i){(0,this.qd[t])(i)}}var o=e(5650),h=e(8659),a=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let c=class{constructor(){this.Hd=new r,this.zd=[]}get lineItems(){return this.zd}add(t){this.zd=[...this.lineItems,...t],this.Hd.triggerEvent(s.ON_STARTED,t)}remove(t){this.zd=this.lineItems.filter((i=>!(0,o.d3)(i,t))),this.Hd.triggerEvent(s.ON_END,t)}getEvents(t){return this.Hd.getCallingObservable(t)}};c=a([(0,h.b2)(),(0,h.Yn)(h.Fw.ContainerScoped)],c)},9134:(t,i,e)=>{"use strict";e.d(i,{z:()=>s.z,TA:()=>n.TA,vZ:()=>c,S6:()=>d.S6,IX:()=>u});var s=e(3716),n=e(6992),r=e(6899),o=e(5650),h=e(8659),a=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let c=class{constructor(){this.Wd=[]}get lineItems(){return[...this.Wd]}add(t){this.Wd.push(...t)}remove(t){this.Wd.indexOf(t)<0||(0,o.sj)(this.Wd,t)}getByAggregation(t){return this.lineItems.filter((i=>i.hasAggregator===t))}getByPublisherLineItemId(t){return this.lineItems.find((i=>i.protoLineItem.publisherLineItemId===t))}hasAggregatorType(t){return this.lineItems.some((i=>{const e=i.protoLineItem.creativeType;return e&&r.TF[e]===t}))}};c=a([(0,h.b2)(),(0,h.Yn)(h.Fw.ContainerScoped)],c);var d=e(8797),l=e(4798);class u{constructor(){this.Gd=new Set}static getInstance(){return this.INSTANCE||(this.INSTANCE=new u),this.INSTANCE}static Xd(t,i){const e=t.lineItems.find((t=>{const{advertiserLineItemId:e,publisherLineItemId:s}=t.protoLineItem;return[e,s].includes(i)}));(0,l.$K)(e)&&t.remove(e)}static Qd(t,i){t.getBidsByLineItemId(i).forEach((t=>t.invalidate()))}add(t,i,e){t.filter((t=>!this.Gd.has(t))).forEach((t=>{this.Gd.add(t),u.Xd(i,t),u.Qd(e,t)}))}hasLineItemById(t,i){return this.Gd.has(t)||this.Gd.has(i)}clear(){this.Gd.clear()}}},402:(t,i,e)=>{"use strict";e.d(i,{Yh:()=>r,sL:()=>a,X3:()=>m,H1:()=>k,IS:()=>g,a_:()=>C,rO:()=>A});var s=e(289);const n={[s.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[s.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[s.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class r{constructor(t,i){this.Yd=t,this.Kd=i}replace(t,i,e){this.Yd.setAdWidth(e.adMacros.adWidth),this.Yd.setAdHeight(e.adMacros.adHeight),this.Yd.setAdPosition(n[e.adMacros.adPostion]),this.Yd.setErrorCode(e.adMacros.errorCode),e.mediaMacros.mediaDescription&&this.Yd.setVideoDescription(e.mediaMacros.mediaDescription),e.mediaMacros.mediaDuration&&this.Yd.setVideoDuration(e.mediaMacros.mediaDuration),e.mediaMacros.mediaId&&this.Yd.setVideoId(e.mediaMacros.mediaId),e.mediaMacros.mediaTitle&&this.Yd.setVideoTitle(e.mediaMacros.mediaTitle),e.mediaMacros.mediaUrl&&this.Yd.setVideoUrl(e.mediaMacros.mediaUrl);const s=this.Kd.isConsent(i);this.Yd.setGDPR(this.Kd.isConsentRequired()?1:0),this.Yd.setConsent(s?1:0),this.Yd.setGDPRConsent(this.Kd.getConsentPayload()),this.Yd.setNPA(this.Kd.isPersonalisedAdsAllowed()?0:1);const r=this.Kd.getTrackableUser(),o=this.Kd.isConsentConnatix()&&s?r:void 0;return this.Yd.setUUID(o),this.Yd.setupMacros(t)}}var o=e(4656);const h={[s.ProtoCreativeTypeEnum.External]:t=>t.floorPrice||t.customCpm,[s.ProtoCreativeTypeEnum.MediaFile]:t=>t.floorPrice||t.customCpm,[s.ProtoCreativeTypeEnum.ThirdParty]:t=>t.floorPrice||t.customCpm||t.adxFloorPrice,[s.ProtoCreativeTypeEnum.HeaderBidder]:t=>t.prebidjsCPM,[s.ProtoCreativeTypeEnum.Rtb]:t=>(0,o.RC)(t.obfuscatedPrice),[s.ProtoCreativeTypeEnum.Tam]:t=>(0,o.RC)(t.obfuscatedPrice),[s.ProtoCreativeTypeEnum.TamDeal]:t=>(0,o.RC)(t.obfuscatedPrice),[s.ProtoCreativeTypeEnum.TamPrivateAuction]:t=>(0,o.RC)(t.obfuscatedPrice)};class a{static getBidPriceByCreative(t,i){return(0,h[t])(i)}}var c=e(6888),d=e(3020),l=e(9791),u=e(1187);const p={ImaObjectNotFound:c.RG.ImaObjectNotFound,ImaScriptFailure:c.RG.ImaScriptFailure},f="//imasdk.googleapis.com/js/sdkloader/ima3.js";class m{static preloadImaSdk(t){(0,d._w)(f,t)}static fetchImaSdk(t,i){return new Promise(((e,s)=>{const n=m.Zd(t);if(n)return void e(n);const r=i&&1===(0,l.Vm)([99,1]);(0,d.dZ)({src:f},t.document.head,t,(()=>{const i=m.Zd(t);i?e(i):(r&&(0,u.n)({message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:u.D.CRITICAL},{throttle:2,shouldSendMaxLog:!1}),s(p.ImaObjectNotFound))}),(()=>{s(p.ImaScriptFailure)}),r,"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")}))}static Zd(t){return t.google&&t.google.ima}}var v=e(6716);class g{constructor(t){this.Ki=t,this.tl=null,this.il=new v.x}start(){return this.el(),this}stop(){return this.sl(),this}onTimer(){return this.il.asObservable()}destroy(){this.sl()}el(){null===this.tl&&(this.tl=this.Ki.setInterval((()=>{this.il.next()}),500))}sl(){this.Ki.clearInterval(this.tl),this.tl=null}}var y=e(7916),b=e(5139),I=e(5650),w=e(7332),S=e(4798);class A{static isLineItemTargetingAllowed(t,i){return A.isAllowedByViewability(t,i)&&A.isAllowedBySound(t,i)&&A.isAllowedByAdBreakType(t,i)&&A.isAllowedByMediaTargeting(t,i)&&A.isAllowedByPodTargeting(t,i)&&A.isAllowedByContextualTargeting(t,i)&&A.isAllowedByPlayerSizeTargeting(t,i)&&A.isAllowedByPlayerOrientationTargeting(t,i)&&A.isAllowedByJsQueryTargeting(t,i)&&A.isAllowedByAdTagInCaseOfExternal(t)}static isBidTargetingAllowed(t,i){const e=t.getAdDuration(),{sessionMaxAdDuration:s,remainingAdDuration:n}=i.adBreakState,{adManagerLineItem:r,dimensions:o}=t.settings,{adType:h,nonlinearLineItemSettings:a}=r.protoLineItem;return A.isLineItemTargetingAllowed(r,i)&&A.isAllowedRegardingDuration(e,s)&&A.isAllowedRegardingDuration(e,n)&&A.isDimensionsAllowedForNonLinearBanner(h,a,o,i)&&A.isAllowedByPageFocus(r,i)}static isAllowedByJsQueryTargeting(t,i){let e=!0;return t.protoLineItem.queryTargeting.filter((t=>t.rule===s.ProtoLineItemQueryTargetingRuleEnum.Only)).forEach((t=>{this.nl(t.keyValue,i.queryJsTargeting)||(e=!1)})),t.protoLineItem.queryTargeting.filter((t=>t.rule===s.ProtoLineItemQueryTargetingRuleEnum.Except)).forEach((t=>{this.nl(t.keyValue,i.queryJsTargeting)&&(e=!1)})),e}static nl(t,i){let e=!1;return Object.keys(i).forEach((s=>{i[s]===t[s]&&(e=!0)})),e}static isAllowedByAdTagInCaseOfExternal(t){return!t.protoLineItem.isExternal||((0,S.QM)(t.protoLineItem.adTag)||(0,S.QM)(t.protoLineItem.prebidJsBidParamsJSONString)||(0,S.QM)(t.protoLineItem.externalMediaFile)||(0,S.QM)(t.protoLineItem.externalHlsFile))}static isAllowedBySound(t,i){return!t.protoLineItem.sound||i.sound}static isAllowedByViewability(t,i){const e=i.adContainerState.get(t.protoLineItem.adType).viewability;return!t.protoLineItem.viewability||e}static isAllowedByAdBreakType(t,i){return!t.protoLineItem.adBreakSettings||t.protoLineItem.adBreakSettings.adBreakTargeting.some((t=>{if(t.adRollType===i.adBreakState.adBreakType)return A.isAdBreakTypeAllowed(t.adBreakTypeEnum,i.adBreakState.isAdPodBreak)}))}static isAllowedByPageFocus(t,i){return!(t.protoLineItem.removeOutOfFocus&&!i.isPageInFocus)}static isAllowedByMediaTargeting(t,i){return!(t.protoLineItem.mediaIdTargeting&&!A.stringTargetingFiltering(i.media.mediaId,t.protoLineItem.mediaIdTargeting))&&(!(t.protoLineItem.mediaKeywordsTargeting&&!A.stringTargetingFiltering(i.media.mediaKeywords,t.protoLineItem.mediaKeywordsTargeting))&&!(t.protoLineItem.mediaLanguageTargeting&&!A.stringTargetingFiltering(i.media.mediaLanguage,t.protoLineItem.mediaLanguageTargeting)))}static isAllowedByContextualTargeting(t,i){var e,s;const{advertiserContextualTargeting:n,publisherContextualTargeting:r}=t.protoLineItem,o=(null===(e=i.media.mediaInsights)||void 0===e?void 0:e.insights)||[],h=(null===(s=i.page.insights)||void 0===s?void 0:s.insights)||[];return!((0,I.BZ)(n)&&!A.isContextualTargetingValid(n,o,h))&&!((0,I.BZ)(r)&&!A.isContextualTargetingValid(r,o,h))}static isAllowedByPlayerSizeTargeting(t,i){const{playerSizeTargetings:e}=t.protoLineItem,{width:n}=i.adContainerState.get(t.protoLineItem.adType);return!(0,S.as)(e)||!(0,S.hj)(n)||(e.sizeChoiceCriteria===s.ProtoSizeChoiceCriteriaEnum.GreaterThan?!(0,S.hj)(e.minWidth)||n>=e.minWidth:e.sizeChoiceCriteria===s.ProtoSizeChoiceCriteriaEnum.SmallerThan?!(0,S.hj)(e.maxWidth)||n<=e.maxWidth:e.sizeChoiceCriteria!==s.ProtoSizeChoiceCriteriaEnum.Between||(!(0,S.hj)(e.maxWidth)||!(0,S.hj)(e.minWidth)||n>=e.minWidth&&n<=e.maxWidth))}static isAllowedByPlayerOrientationTargeting(t,i){const{playerOrientationTargeting:e}=t.protoLineItem;switch(e){case s.ProtoPlayerOrientationTargetingEnum.Landscape:if(i.playerOrientation===y.g.Portrait)return!1;break;case s.ProtoPlayerOrientationTargetingEnum.Portrait:if(i.playerOrientation===y.g.Landscape)return!1}return!0}static isAllowedByPodTargeting(t,i){var e;const n=null===(e=t.protoLineItem.adBreakSettings)||void 0===e?void 0:e.adPodTargeting;if(!n)return!0;if(!i.adBreakState.isAdPodBreak)return!0;const r=i.adBreakState.adPodSlotIndex;let o=!0;switch(n.adSlotTargetingType){case s.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(r<n.adSlotPositions[0]||r>n.adSlotPositions[1])&&(o=!1);break;case s.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===n.adSlotPositions.indexOf(r)&&(o=!1)}return n.targetingType===s.ProtoLineItemTargetingTypeEnum.Except&&(o=!o),o}static isAllowedRegardingDuration(t,i){return!t||0===i||t<=i}static isDimensionsAllowedForNonLinearBanner(t,i,e,s){if(!(0,o.lZ)(t,null==i?void 0:i.nonLinearRequestType))return!0;const n=Math.ceil((0,w.Tc)(s.height,b.O.NON_LINEAR_MAX_HEIGHT_PERCENT));return!(!e||(null==e?void 0:e.width)>s.width||(null==e?void 0:e.height)>n)}static stringTargetingFiltering(t,i){if((0,I.BZ)(i.items)&&Array.isArray(t)){const e=(0,I.tN)(t,i.items).length;return i.choiceCriteria===s.ProtoChoiceCriteriaEnum.Only?e>0:0===e}const e=(0,I.d3)(t,i.items);return i.choiceCriteria===s.ProtoChoiceCriteriaEnum.Only?e:!e}static isAdBreakTypeAllowed(t,i){switch(t){case s.ProtoLineItemAdBreakTypeEnum.All:return!0;case s.ProtoLineItemAdBreakTypeEnum.AdPod:return i;case s.ProtoLineItemAdBreakTypeEnum.SingleAd:return!i}}static isContextualTargetingValid(t,i,e){return t.some((t=>A.isContextualTargetingCaseValid(t,i,e)))}static isContextualTargetingCaseValid(t,i,e){for(let n=0;n<t.filters.length;n++){const r=t.filters[n],o=r.hashedItemsIds,h=i.filter((t=>o.includes(t))).length,a=e.filter((t=>o.includes(t))).length,c=A.isContextualTargetingFilterValid(r.type,h,o),d=A.isContextualTargetingFilterValid(r.type,a,o);switch(r.level){case s.ProtoContextualTargetingLevelEnum.Media:if(!c)return!1;break;case s.ProtoContextualTargetingLevelEnum.Page:if(!d)return!1;break;case s.ProtoContextualTargetingLevelEnum.Both:if(!c||!d)return!1}}return!0}static isContextualTargetingFilterValid(t,i,e){switch(t){case s.ProtoLineItemContextualTargetingEnum.IncludeAny:if(0===i)return!1;break;case s.ProtoLineItemContextualTargetingEnum.IncludeAll:if(i!==e.length)return!1;break;case s.ProtoLineItemContextualTargetingEnum.ExcludeAny:if(i>0)return!1;break;case s.ProtoLineItemContextualTargetingEnum.ExcludeAll:if(i===e.length)return!1}return!0}}var P,_,x=e(51);class T{}T.IMA_CORRELATOR_LENGTH=10,T.IMA_SCOR_LENGTH=10,function(t){t.DoesNotApply="0",t.Applies="1"}(P||(P={})),function(t){t.PersonalizedAds="0",t.NonPersonalizedAds="1"}(_||(_={}));class k{constructor(t,i){this.rl=t,this.Kd=i}static wn(t){return`${t.width}x${t.height}`}appendParams(t,i){if(!this.ol()||this.rl.isInApp)return t;const e=new URL(t);return e.searchParams.set("tfcd","0"),e.searchParams.set("gdfp_req","1"),e.searchParams.set("unviewed_position_start","1"),e.searchParams.set("env","vp"),e.searchParams.set("hl","en"),e.searchParams.set("sdk_apis","1,2"),e.searchParams.set("output","vast"),e.searchParams.set("correlator",String((0,l.Ae)(T.IMA_CORRELATOR_LENGTH))),e.searchParams.set("sid",(0,l.qs)()),e.searchParams.set("scor",String((0,l.Ae)(T.IMA_SCOR_LENGTH))),e.searchParams.set("url",this.hl()),e.searchParams.set("description_url",this.hl()),e.searchParams.set("sz",k.wn(i)),e.searchParams.set("gdpr",this.al()),e.searchParams.set("npa",this.cl()),this.Kd.isPersonalisedAdsAllowed()&&e.searchParams.set("gdpr_consent",this.dl()),e.href}ol(){return(0,S.QM)(this.rl.pageUrl)&&"true"===(0,x.Ph)("cnxImaTest",this.rl.pageUrl)}hl(){return(0,S.QM)(this.rl.pageUrl)?encodeURIComponent(this.rl.pageUrl):""}al(){return this.Kd.isConsentRequired()?P.Applies:P.DoesNotApply}dl(){return(0,S.QM)(this.Kd.getConsentPayload())?this.Kd.getConsentPayload():""}cl(){return this.Kd.isPersonalisedAdsAllowed()?_.PersonalizedAds:_.NonPersonalizedAds}}class C{static createRecord(t){const i=new E;return C.ll.set(t,i),i}static getPlayerRecord(t){return C.ll.get(t)}}C.ll=new Map;class E{constructor(){this.ul={},this.pl=Date.now()}setOutOfViewAdPrice(t){this.ul.outOfViewAdPrice=t>0?Math.round(1e3*t):t}setOutOfViewAdLineItemId(t){this.ul.outOfViewAdLineItemId=t}setInViewAdPrice(t){this.ul.inViewAdPrice=t>0?Math.round(1e3*t):t}setDistanceWhenOutOfViewStarted(t){this.ul.distanceWhenOutOfViewStarted=Math.round(t)}setTimeUntilNextOpportunity(t){this.ul.timeUntilNextOpportunity=t}get missedImpressionsLogs(){return this.ul.outOfViewTimeRunning=Date.now()-this.pl,this.ul}}},4656:(t,i,e)=>{"use strict";e.d(i,{RC:()=>b,pd:()=>I,aW:()=>v,qD:()=>m,mn:()=>a,ZN:()=>c,Bl:()=>p,AA:()=>d,lZ:()=>l,pi:()=>u});var s=e(7423),n=e(4798),r=e(5294),o=e(289);const h={[s.k.LINEAR]:[o.ProtoAdType.Video,o.ProtoAdType.Overlay],[s.k.NONLINEAR]:[o.ProtoAdType.Nonlinear]};function a(t,i){return t.filter((t=>h[i].includes(t.adType)))}function c(t,i){return t.find((t=>t.adManagerLineItem.protoLineItem.advertiserLineItemId===i)).adManagerLineItem}const d=({playerSkippability:t,playerSkipMin:i,playerSkipAfter:e,lineItemSkippability:s,lineItemSkipMin:n})=>{let r={skippable:!0,skipafter:e};switch(t){case o.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan:r=function({skippabitySettings:t,playerSkipMin:i,lineItemSkippability:e,lineItemSkipMin:s}){if(e===o.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan)s<i?t.skipmin=i:(t.skipmin=s,t.minDuration=s);else t.skipmin=i;return t}({skippabitySettings:r,playerSkipMin:i,lineItemSkippability:s,lineItemSkipMin:n});break;case o.ProtoPlayerSkippabilityType.RequireAdsToBeSkippable:s===o.ProtoLineItemSkippabilityType.RequirePublisherToAllowNonSkipAdsShorterThan&&(r.skipmin=n,r.minDuration=n)}return r};function l(t,i){return t===o.ProtoAdType.Nonlinear&&i===o.ProtoNonlinearRequestType.Banner}function u(t,i){return{adTag:(0,n.$K)(t.url)?t.url:i.adTag,requestCap:(0,n.$K)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,impressionCap:(0,n.$K)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,resetRequestsCapTime:(0,n.$K)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,resetImpressionsCapTime:(0,n.$K)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,resetCapType:(0,n.$K)(t.resetCapType)?t.resetCapType:i.resetCapType}}function p(t){const i=Object.keys(r.rL.bidDemandTypeMap).filter((i=>(0,r.rL.bidDemandTypeMap[i])(t.protoLineItem)))[0];if(!(0,n.$K)(i))return o.ProtoDemandTypeEnum.None;const e=Number.parseInt(i,10);return o.ProtoDemandTypeEnum[o.ProtoDemandTypeEnum[e]]}var f=e(9791);function m(t,i){t.sort(((t,i)=>t.width===i.width?t.bitrate-i.bitrate:t.width-i.width));for(let e=0;e<t.length;e++)if(t[e].width>=i)return t[e-1]||t[e];return t[t.length-1]}const v=()=>`cnx_bid_slot_${(0,f.qs)()}`,g=2,y=41;function b(t){return(t+y)*g}function I(t){return t/g-y}},5267:(t,i,e)=>{"use strict";e.r(i),e.d(i,{ElementsAdHandler:()=>Le,OutstreamAdHandler:()=>Re,PlayspaceAdHandler:()=>Ve});e(8696);var s=e(6888),n=e(289),r=e(4793),o=e(6716),h=e(7423),a=e(9600),c=e(5106),d=e(9906),l=e(5204);class u{constructor(t,i,e,n,r,h,a,c,u,p,f){this.fl=t,this.ml=i,this.vl=e,this.rl=n,this.gl=r,this.yl=h,this.bl=a,this.Il=c,this._appSettings=u,this.Ue=p,this.Sl=f,this.Al=s.zc.Normal,this.be=[],this._l=new o.x,this.Ai=new o.x,this.Tl=new o.x,this.kl=new o.x,this.Cl=new o.x,this.El=new o.x,this.Ml=new o.x,this.Ll=new o.x,this.Rl=new o.x,this.Ol=new o.x,this.Dl=new o.x,this.Vl=new o.x,this.Fl=new o.x,this.Nl=new o.x,this.jl=this.$l(),this.Ul();const m=d.h.getSessionChildContainer(this.Il.config.sessionId).resolve(l.k);this.ql=this.Hl(m),this.zl(),this.Wl=this.Gl(m),this.Wl&&this.Jl(),this.ml&&this.disableAdvertising()}get onMissedImpression(){return this.Ol.asObservable()}inFloatingChanged(t){this.fl=t,this.jl.inFloatingChanged(t)}canPrefetchAds(t){this.jl.canPrefetchAds(t)}hasAdsEligibleForFill(){return this.jl.hasAdsEligibleForFill()}Ql(t,i){const e=[{container:this.Yl,width:t,height:i,type:n.ProtoAdType.Overlay},{container:this.Yl,width:t,height:i,type:n.ProtoAdType.Video},{container:this.Kl,width:t,height:i,type:n.ProtoAdType.Nonlinear}];return this.Kl||e.pop(),e}Ul(){this.be.push(this.jl.onAdsEnable.subscribe((t=>{this._l.next(t)})),this.jl.onPrefetchStart.subscribe((()=>{this.Tl.next()})))}Jl(){var t,i,e;this.be.push(null===(t=this.Wl)||void 0===t?void 0:t.onVpaidEvent.subscribe((t=>{this.Ai.next(t)})),null===(i=this.Wl)||void 0===i?void 0:i.onNonLinearEvent.subscribe((t=>{t.type===r.gx.ShowNonLinearEvent&&this.linearInImpression&&this.Wl.pause(),this.Dl.next(t)})),null===(e=this.Wl)||void 0===e?void 0:e.onExperienceEvent.subscribe((t=>{this.Vl.next({type:t.type,payload:t.payload})})),this.jl.onNonlinearImpressionPrice.subscribe((t=>{this.Fl.next(t)})),this.jl.onNonlinearImpressionRevenue.subscribe((t=>{this.Nl.next(t)})))}zl(){this.be.push(this.ql.onVpaidEvent.subscribe((t=>{this.Ai.next(t)})),this.ql.onUiComponentEvent.subscribe((t=>{this.Cl.next(t)})),this.ql.onExperienceEvent.subscribe((t=>{this.El.next({type:t.type,payload:t.payload})})),this.ql.onLinearEvent.subscribe((t=>{var i;t.type===r.lc.ShowLinearEvent&&(null===(i=this.Wl)||void 0===i||i.pause()),this.kl.next(t)})),this.jl.onLinearImpressionPrice.subscribe((t=>{this.Ml.next(t)})),this.jl.onMissedImpression.subscribe((t=>{this.Ol.next(t)})),this.jl.onLinearImpressionRevenue.subscribe((t=>{this.Ll.next(t)})),this.jl.onLinearNoFill.subscribe((()=>{this.Rl.next()})))}Zl(t,i,e){this.jl.initAd(t,i,this.Al,1,e,this.Ql(t,i),this.Il)}setLineItemMetadata(t,i){this.jl.setLineItemMetadata(t,i)}adStateChange(t,i){var e;this.ql.adStateChange(t,i),null===(e=this.Wl)||void 0===e||e.adStateChange(t,i)}contentPlaybackStateChanged(t){var i;null===(i=this.Wl)||void 0===i||i.contentPlaybackStateChanged(t)}disableAds(t,i){this.jl.disableAds(t,i)}enableAds(t){this.jl.enableAds(t)}disableAdvertising(){this.jl.disableAdvertising()}enableAdvertising(){this.jl.enableAdvertising()}start(t,i,e,s=!1,n=!1){n&&this.startNonLinear(),this.startLinear(e,s),this.Zl(t,i,e)}stopAd(t){var i;this.ql.stopAd(t),null===(i=this.Wl)||void 0===i||i.stopAd(t)}play(){this.ql.play()}pause(){var t;this.ql.pause(),null===(t=this.Wl)||void 0===t||t.pause()}togglePlay(t=!1){this.ql.togglePlay(t)}resumeWithoutUserInteraction(t){var i;this.ql.resumeWithoutUserInteraction(),null===(i=this.Wl)||void 0===i||i.resumeWithoutUserInteraction(t)}resizeAd(t,i,e,s){var n;this.setVastViewMode(e),this.ql.resizeAd(t,i),null===(n=this.Wl)||void 0===n||n.resizeAd(t,i,s)}setPlayerOrientation(t){this.jl.setPlayerOrientation(t)}updateJsQueryTargeting(t){this.jl.updateJsQueryTargeting(t)}removeJsQueryTargeting(t){this.jl.removeJsQueryTargeting(t)}setVastViewMode(t){this.Al=t,this.jl.setVastViewMode(t)}contentChanged(){this.jl.onContentChange()}newLinearAdOpportunity(t){this.jl.newLinearAdOpportunity(t)}destroy(){var t,i,e;(0,a.i)(this.be),this.ql.destroy(),null===(t=this.Wl)||void 0===t||t.destroy(),null===(i=this.jl)||void 0===i||i.disableAds(h.k.LINEAR,{disableReason:c.m.Unknown}),null===(e=this.jl)||void 0===e||e.disableAds(h.k.NONLINEAR,{disableReason:c.m.Unknown}),this.jl.destroy()}get onAdsEnable(){return this._l.asObservable()}get onVpaidEvent(){return this.Ai.asObservable()}get onPrefetchStart(){return this.Tl.asObservable()}startNonLinear(){var t;null===(t=this.Wl)||void 0===t||t.start()}contentEnded(){var t;null===(t=this.Wl)||void 0===t||t.pause()}get onNonLinearEvent(){return this.Dl.asObservable()}get onNonLinearExperienceEvent(){return this.Vl.asObservable()}get onNonLinearImpressionPrice(){return this.Fl.asObservable()}get onNonLinearImpressionRevenue(){return this.Nl.asObservable()}get nonLinearInImpression(){return!!this.Wl&&this.Wl.inImpression}get Kl(){var t;return null===(t=this.Wl)||void 0===t?void 0:t.adContainer}startLinear(t,i=!1){this.ql.start(t,i)}setMediaRestrictions(t){this.jl.setMediaRestrictions(t)}getNewLinearAdOpportunity(){return this.jl.getNewLinearAdOpportunity()}getLinearVolume(){return this.ql.getVolume()}setLinearVolume(t){this.ql.setVolume(t)}increaseVolume(t,i=!1){this.ql.increaseVolume(t,i)}decreaseVolume(t,i=!1){this.ql.decreaseVolume(t,i)}toggleMute(t=!1){this.ql.toggleMute(t)}hideLinear(){this.ql.hide()}showLinear(){this.ql.show()}updateContinueReadingCard(){this.ql.updateContinueReadingCard()}setContinueReadingCard(t){this.ql.setContinueReadingCard(t)}hideContinueReadingCard(){this.ql.hideContinueReadingCard()}setAdMarkerTitle(t){this.ql.setAdMarkerTitle(t)}hideAdMarkerTitle(){this.ql.hideAdMarkerTitle()}enterAdPodLoadingState(){this.ql.enterAdPodLoadingState()}setAdLoadingBackgroundUrl(t){this.ql.setAdLoadingBackgroundUrl(t)}updateLinearPodRemainingTime(t){this.jl.updateLinearPodRemainingTime(t)}setCustomMacros(t){this.jl.setCustomMacros(t)}enablePrefetchForLinearity(t){this.jl.enablePrefetchForLinearity(t)}get onLinearEvent(){return this.kl.asObservable()}get onLinearUiComponentEvent(){return this.Cl.asObservable()}get onLinearExperienceEvent(){return this.El.asObservable()}get onLinearImpressionPrice(){return this.Ml.asObservable()}get onLinearImpressionRevenue(){return this.Ll.asObservable()}get onLinearNoFill(){return this.Rl.asObservable()}get linearInImpression(){return this.ql.inImpression}get Yl(){return this.ql.adContainer}get tu(){return this.ql.secondaryAdContainer}get linearAdUserInterface(){return this.ql.adUserInterface}get onFullcreenChange(){return this.ql.onFullcreenChange}get linearAdInWin(){return this.ql.adInWin}get firstLinearAdShown(){return this.ql.firstAdShown}get inAdPodLoadingState(){return this.ql.inAdPodLoadingState}getLinearAdContainerWidth(){return this.ql.getMainAdContainerWidth()}userInteraction(t){this.jl.userInteraction(t)}}var p,f=e(1307),m=e(5139);!function(t){t[t.NoPrefetch=0]="NoPrefetch",t[t.StartSessionPrefetch=1]="StartSessionPrefetch",t[t.MidSessionPrefetch=2]="MidSessionPrefetch"}(p||(p={}));class v{constructor(t,i){this.qn=t,this.eu=new o.x,this.Tl=new o.x,this.su=p.NoPrefetch,this.ru=i===n.ProtoAdPlaybackMode.ScrollToPlay}get prefetchType(){return this.su}get startSessionPrefetch(){return this.ru}set startSessionPrefetch(t){this.ru=t}get onMidSessionPrefetchReady(){return this.eu.asObservable()}get onPrefetchStart(){return this.Tl.asObservable()}enablePrefetch(t,i,e){this.ru=!1,this.su=t,this.Tl.next(),null==e||e.enablePredict(i,t)}disablePrefetch(){this.su=p.NoPrefetch}tryPreparingMidSessionPrefetch(t,i){if(!this.ou(t))return;const e=null==t?void 0:t.disableReason;e===c.m.TimeoutBetweenAds&&this.eu.next(p.MidSessionPrefetch),e===c.m.InImpression&&this.hu(t,i)&&this.eu.next(p.MidSessionPrefetch)}ou(t){return this.su===p.NoPrefetch&&null!==t&&t.adBreakLength!==Number.POSITIVE_INFINITY}hu(t,i){return i&&t.adBreakLength<=m.O.MID_SESSION_PREFETCH_MINIMUM_TIME&&!this.qn}}var g=e(9357),y=e(4065),b=e(8395);class I{get onAdLifeEnding(){return this.au.asObservable()}constructor(t,i){this.cu=t,this.du=i,this.au=new o.x,this.be=[],this.lu=!1;const e=d.h.getGlobalContainer().resolve(b.f);this.ys=new y.B(e),this.uu(),this.po(),this.pu()}isDurationExpired(){return this.lu}destroy(){this.ys.disable(),this.be.forEach((t=>t.unsubscribe()))}uu(){this.be.push(this.ys.onTimeElapsed.subscribe((()=>{this.ys.stop(),this.lu=!0,this.au.next()})))}po(){this.be.push(this.cu.subscribe((t=>{switch(t.type){case s.fI.AdImpression:this.fu(t.payload.adSourceData.length);break;case s.fI.AdPlaying:this.pu();break;case s.fI.AdPaused:this.mu();break;case s.fI.AdStopped:case s.fI.AdSkipped:case s.fI.AdError:this.vu();break;case s.fI.AdVideoFirstQuartile:this.gu()}})))}mu(){this.ys.stop()}pu(){this.ys.start()}fu(t){if(this.yu=Date.now(),t){this.bu=t*g.s_;const i=this.bu-this.du;this.Iu(i),this.ys.start()}}vu(){this.ys.stop(),this.lu=!1}gu(){if(this.bu)return;const t=Date.now()-this.yu;this.bu=4*t;const i=this.bu-t-this.du;this.Iu(i)}Iu(t){const i=t<0?0:t;this.ys.reset(i)}}var w=e(4798);class S{constructor(t,i){this.mo={[h.k.LINEAR]:{enable:!1,disablePayload:null,usePrefetch:!0},[h.k.NONLINEAR]:{enable:!1,disablePayload:null,usePrefetch:!1}},this.eu=new o.x,this.Tl=new o.x,this.be=[],this.wu(t,i)}get onMidSessionPrefetchReady(){return this.eu.asObservable()}get onPrefetchStart(){return this.Tl.asObservable()}getAllLinearityKeys(){return Object.keys(this.mo)}enable(t){this.mo[t].enable=!0,this.mo[t].disablePayload=null}disable(t,i){this.mo[t].enable=!1,this.mo[t].disablePayload=i}getDisablePayload(t){return this.mo[t].disablePayload}setAdManager(t,i){this.mo[t].adManager=i,this.mo[t].usePrefetch&&(this.mo[t].adLifecycleObserver=new I(i.onVpaidEvent,m.O.MID_SESSION_PREFETCH_MINIMUM_TIME),this.be.push(this.mo[t].adLifecycleObserver.onAdLifeEnding.subscribe((()=>{const i=this.getDisablePayload(t),e=this.mo[t].adLifecycleObserver.isDurationExpired();this.mo[t].adPrefetch.tryPreparingMidSessionPrefetch(i,e)}))))}isAdManagerEnable(t){return this.mo[t].enable}getAllAdManagers(){return this.getAllLinearityKeys().map((t=>this.mo[t].adManager))}getAllAvailableAdManagers(){return this.getAllAdManagers().filter((t=>(0,w.$K)(t)))}getAdManagerByLinearity(t){return this.mo[t].adManager}usePrefetch(t){return this.mo[t].usePrefetch}enablePrefetch(t,i,e,s){this.usePrefetch(t)&&this.mo[t].adPrefetch.enablePrefetch(i,e,s)}startSessionPrefetch(t,i){this.mo[t].adPrefetch.startSessionPrefetch=i}disablePrefetch(t){this.usePrefetch(t)&&this.mo[t].adPrefetch.disablePrefetch()}getPrefetchType(t){if(this.usePrefetch(t))return this.mo[t].adPrefetch.prefetchType}hasStartSessionPrefetch(t){return!!this.usePrefetch(t)&&this.mo[t].adPrefetch.startSessionPrefetch}tryPreparingMidSessionPrefetch(t,i){var e;if(!this.usePrefetch(t))return;const s=(null===(e=this.mo[t].adLifecycleObserver)||void 0===e?void 0:e.isDurationExpired())||!1;this.mo[t].adPrefetch.tryPreparingMidSessionPrefetch(i,s)}destroy(){(0,a.i)(this.be),this.getAllAvailableAdManagers().forEach((t=>t.destroy()))}wu(t,i){this.getAllLinearityKeys().forEach((e=>{this.mo[e].usePrefetch&&(this.mo[e].adPrefetch=new v(t,i),this.Su(e))}))}Su(t){const i=this.mo[t].adPrefetch;this.be.push(i.onMidSessionPrefetchReady.subscribe((i=>{this.eu.next({prefetchType:i,linearity:h.k[t]})})),i.onPrefetchStart.subscribe((()=>{this.Tl.next()})))}}var A=e(3716),P=e(5650),_=e(4656);class x{constructor(){this.Au=Date.now(),this.Pu={advertiser:{}}}addPrebid(t){(0,w.$K)(this.Pu.advertiser[t])||this._u(t),this.Pu.advertiser[t].prebidData.push({timestamp:Date.now()})}addBid(t,i){(0,w.$K)(this.Pu.advertiser[t])||this._u(t),this.Pu.advertiser[t].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:i})}addImpression(t,i){(0,w.$K)(this.Pu.advertiser[t])||this._u(t),this.Pu.advertiser[t].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:i})}shouldRequestLineItem(t){const i=Date.now();return!(this.xu(i,3)&&this.Tu(t,i,5)<-.5&&this.ku(t,i,3)>=11.5&&this.Cu(t,i,10,.1)<.35)}xu(t,i){return t-this.Au>=i*g.uD}Tu(t,i,e){const s=this.Pu.advertiser[t];if(!(0,w.$K)(s))return-1;const n=this.Eu(s.impressionRevenueList,i,e).map((t=>t.obfuscatedPrice));let r=0;return(0,P.BZ)(n)&&(r=n.reduce(((t,i)=>t+(0,_.RC)(i)))),this.Mu(r)}ku(t,i,e){const s=this.Pu.advertiser[t];if(!(0,w.$K)(s))return-1;const n=this.Eu(s.prebidData,i,e).length;return this.Mu(n)}Cu(t,i,e,s){const n=this.Pu.advertiser[t];if(!(0,w.$K)(n))return-1;const r=this.Eu(n.impressionRevenueList,i,e).map((t=>t.floorPrice)),o=this.Lu(r,s);return this.Mu(o)}Eu(t,i,e){const s=i-g.s_,n=i-e*g.uD,r=[];for(let i=t.length-1;i>=0&&t[i].timestamp>=n;i--)t[i].timestamp<=s&&r.push(t[i]);return r}Mu(t){return 0===t?-1:t}_u(t){this.Pu.advertiser[t]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}Lu(t,i){if(0===t.length)return 0;if(i<=0)return t[0];if(i>=1)return t[t.length-1];const e=((t=t.sort(((t,i)=>t-i))).length-1)*i,s=Math.floor(e),n=s+1,r=e%1;return n>=t.length?t[s]:t[s]*(1-r)+t[n]*r}}class T{constructor(){this.Bu=[]}canCall(t,i){return this.Bu.every((e=>e.canCall(t,i)))}registerRequestForLineItem(t,i){return this.Bu.forEach((e=>{e.registerRequestForLineItem(t,i)})),this}registerImpressionForLineItem(t,i){return this.Bu.forEach((e=>{e.registerImpressionForLineItem(t,i)})),this}registerCallingValidator(t){return this.Bu.push(t),this}registerCallingValidators(t){return t.forEach((t=>{this.registerCallingValidator(t)})),this}destroy(){this.Bu.forEach((t=>{t.destroy()}))}}class k{resetCapsBasedOnExternalEvent(t){const i=this.Tt.keys();for(const e of i)this.Ru(e,t)&&this.Ou(e,C)}resetCapsOnLineItemMetadataUpdate(t){this.Ou(t,C)}Ru(t,i){return t.protoLineItem.resetCapType===i}Du(t){return this.Ru(t,n.ProtoResetCapTypeEnum.TimeCapping)&&this.Vu(t)>0}}const C="uncategorized";class E{constructor(t){this.Fu=t,this.Nu=new Map}setNumberOfImpressions({value:t,categoryId:i}){(0,w.$K)(i)&&this.Fu===n.ProtoResetCapTypeEnum.OpportunityCapping||(i=C),this.Nu.set(i,t)}getNumberOfImpressions({categoryId:t}){return(0,w.$K)(t)&&this.Fu===n.ProtoResetCapTypeEnum.OpportunityCapping||(t=C),this.Nu.get(t)||0}}class M extends k{constructor(t=Date.now()){super(),this.Uu=t,this.Tt=new Map}canCall(t,i){this.qu(t);const e=this.Tt.get(t);return void 0===e||(0===t.protoLineItem.impressionCap||e.getNumberOfImpressions({categoryId:i})<t.protoLineItem.impressionCap)}registerImpressionForLineItem(t,i){let e=this.Tt.get(t);return void 0===e&&(this.Tt.set(t,new E(t.protoLineItem.resetCapType)),e=this.Tt.get(t),this.Du(t)&&(e.nextImpressionCapResetTimestamp=this.Hu(this.Vu(t)))),e.setNumberOfImpressions({value:e.getNumberOfImpressions({categoryId:i})+1,categoryId:i}),this}registerRequestForLineItem(t,i){return this}destroy(){this.Tt.clear()}Ou(t,i){var e;null===(e=this.Tt.get(t))||void 0===e||e.setNumberOfImpressions({value:0,categoryId:i})}Vu(t){return t.protoLineItem.resetImpressionsCapTime*g.s_}qu(t,i=Date.now()){if(!this.Du(t))return;const e=this.Tt.get(t);void 0!==e&&this.zu(t,i)&&(e.setNumberOfImpressions({value:0}),e.nextImpressionCapResetTimestamp=this.Hu(this.Vu(t),i))}zu(t,i){return i>=this.Tt.get(t).nextImpressionCapResetTimestamp}Hu(t,i=Date.now()){const e=Math.ceil((i-this.Uu)/t)*t;return this.Uu+e}}class L{constructor(t){this.Fu=t,this.Wu=new Map}setNumberOfRequests({value:t,categoryId:i}){(0,w.$K)(i)&&this.Fu===n.ProtoResetCapTypeEnum.OpportunityCapping||(i=C),this.Wu.set(i,t)}getNumberOfRequests({categoryId:t}){return(0,w.$K)(t)&&this.Fu===n.ProtoResetCapTypeEnum.OpportunityCapping||(t=C),this.Wu.get(t)||0}}class B extends k{constructor(t=Date.now()){super(),this.Uu=t,this.allowResetOnTime=!0,this.Tt=new Map}canCall(t,i){this.qu(t);const e=this.Tt.get(t);return void 0===e||(0===t.protoLineItem.requestCap||e.getNumberOfRequests({categoryId:i})<t.protoLineItem.requestCap)}registerRequestForLineItem(t,i,e=Date.now()){let s=this.Tt.get(t);return void 0===s&&(this.Tt.set(t,new L(t.protoLineItem.resetCapType)),s=this.Tt.get(t),this.Du(t)&&(s.nextRequestCapResetTimestamp=this.Hu(this.Vu(t)))),s.setNumberOfRequests({value:s.getNumberOfRequests({categoryId:i})+1,categoryId:i}),this}registerImpressionForLineItem(t){return this}getAvailableRequestsForLineItem(t,i){const e=this.Tt.get(t);return void 0===e?t.protoLineItem.requestCap:t.protoLineItem.requestCap-e.getNumberOfRequests({categoryId:i})}restoreOneCapForLineItem(t,i){if(t.protoLineItem.ignoreFilledRequests){const e=this.Tt.get(t);if(void 0===e)return;const s=e.getNumberOfRequests({categoryId:i});s>0&&e.setNumberOfRequests({value:s-1,categoryId:i})}}destroy(){this.Tt.clear()}Ou(t,i){var e;null===(e=this.Tt.get(t))||void 0===e||e.setNumberOfRequests({value:0,categoryId:i})}Vu(t){return t.protoLineItem.resetRequestsCapTime*g.s_}qu(t,i=Date.now()){if(!this.Du(t))return;const e=this.Tt.get(t);void 0!==e&&this.zu(t,i)&&(e.setNumberOfRequests({value:0}),e.nextRequestCapResetTimestamp=this.Hu(this.Vu(t),i))}zu(t,i){return i>=this.Tt.get(t).nextRequestCapResetTimestamp&&this.allowResetOnTime}Hu(t,i=Date.now()){const e=Math.ceil((i-this.Uu)/t)*t;return this.Uu+e}}class R{constructor(){this.Tt=new Map}registerRequestForLineItem(t,i,e=Date.now()){let s=this.Tt.get(t);return void 0===s&&(this.Tt.set(t,{}),s=this.Tt.get(t)),s.lastRequestTimestamp=e,s.categoryId=i,this}registerImpressionForLineItem(t){return this}canCall(t,i,e=Date.now()){const s=this.Tt.get(t);if(void 0===s)return!0;if(0===t.protoLineItem.timeBetweenRequests)return!0;if(e>=s.lastRequestTimestamp+t.protoLineItem.timeBetweenRequests*g.s_)return!0;return!(s.categoryId===i||t.protoLineItem.resetCapType!==n.ProtoResetCapTypeEnum.OpportunityCapping)}destroy(){this.Tt.clear()}}var O=e(402),D=e(8797),V=e(1187),F=e(408);class N{constructor(t){this.mo=t,this.Gu=new o.x,this.Xu=[],this.Ju=!1,this.Qu=!1,this.be=[]}get onAuctionMechanismEnded(){return this.Gu.asObservable()}startNewAuction(t){this.Yu=t.callingState,this.Qu=t.waitForNewReadyBid,this.Ku(),this.Zu(),this.ep(),this.sp()}cancelAuction(){this.Ku()}updateState(t){if(this.Yu=t,0===this.Xu.length)return;const i=this.Yu.stateSettings.currentState||this.Yu.stateSettings.currentState;if(!i)return;const e=this.mo.adSelector.getLineItemsByRequest(!0).map((t=>t.protoLineItem.advertiserLineItemId)),s=this.mo.adSelector.getAllCallableLineItems(i).map((t=>t.protoLineItem.advertiserLineItemId));this.Xu=this.Xu.filter((t=>t.isAdCalled||(0,P.d3)(t.lineItemId,s)||(0,P.d3)(t.lineItemId,e))),this.sp()}onNothingToWin(){0!==this.Xu.length&&this.Xu.every((t=>!0===t.isAdCalled))&&this.sp()}onNothingToCall(){0!==this.Xu.length&&(this.np(),this.sp())}np(){const t=this.mo.adSelector.getLineItemsByRequest(!0).map((t=>t.protoLineItem.advertiserLineItemId));this.Xu=this.Xu.filter((i=>!0===i.isAdCalled||!1===i.isAdCalled&&(0,P.d3)(i.lineItemId,t)))}rp(){this.Ku(),this.Gu.next()}ep(){this.be.push(this.mo.adSelector.getLineItemRequestEvents(D.N7.ON_END).subscribe((t=>{this.op(t),this.sp()})),this.mo.adSelector.getBidEvents(A.Sb.ON_BID_LOADED).subscribe((t=>{this.Ju=!0,this.sp()})),this.mo.adSelector.getBidEvents(A.Sb.ON_BID_LOADING_CONSUMED).subscribe((t=>{this.sp()})))}op(t){this.Xu.forEach((i=>{t.some((t=>t.protoLineItem.advertiserLineItemId===i.lineItemId))&&(i.isAdCalled=!0)}))}ap(){(0,a.i)(this.be)}sp(){if(0!==this.Xu.length){if((!this.Qu||this.Ju)&&this.Xu.every((t=>!0===t.isAdCalled))){const t=this.Yu.stateSettings.currentState||this.Yu.stateSettings.predictedState;this.mo.adSelector.isBestBidLoaded(t)&&this.rp()}}else this.rp()}Ku(){this.Xu=[],this.Ju=!1,this.ap()}Zu(){this.dp(),this.lp(),this.up()}up(){this.mo.adSelector.getLineItemsByRequest(!0).forEach((t=>{this.pp(t)}))}lp(){const t=this.Yu.stateSettings.currentState||this.Yu.stateSettings.predictedState;if(!t)return void(0,V.n)({message:"ShortCircuitMechanism_registerClientSideLineItem_no_state",level:V.D.INFO},{throttle:10,shouldSendMaxLog:!1});const i=this.mo.adSelector.getAllCallableLineItems(t).filter((t=>!t.hasAggregator)),e=i.filter((t=>t.protoLineItem.forceCallingInEveryAO)),s=this.fp(i,t);if(!s)return void this.mp(e);const n=this.mo.adSelector.getBestLoadedBid();(n?F.pW.getSelectionScore(n):0)>F.pW.getSelectionScore(s)?this.mp(e):(this.pp(s),e.filter((t=>t!==s)).forEach((t=>{this.pp(t)})))}dp(){const t=this.Yu.stateSettings.currentState||this.Yu.stateSettings.predictedState;if(!t)return void(0,V.n)({message:"ShortCircuitMechanism_registerAggregatedLineItems_no_state",level:V.D.INFO},{throttle:1,shouldSendMaxLog:!1});this.mo.adSelector.getAllCallableLineItems(t).filter((t=>t.hasAggregator)).forEach((t=>{this.pp(t)}))}fp(t,i){const e=this.mo.adSelector.getBestCallableLineItem(t,i);if(e&&(0,P.BZ)(e.lineItemList))return e.lineItemList[0]}pp(t){this.Xu.some((i=>i.lineItemId===t.protoLineItem.advertiserLineItemId))||this.Xu.push({isAdCalled:!1,lineItemId:t.protoLineItem.advertiserLineItemId})}mp(t){t.forEach((t=>{this.pp(t)}))}}var j,$=e(9791);!function(t){t.ShortCircuitEnd="short",t.TimeoutEnd="timeout",t.Prefetch="prefetched"}(j||(j={}));class U{constructor(t,i){this.Ki=t,this.vp=null,this.gp=new o.x,this.Gu=new o.x,this.yp=null,this.bp={inPrefetchMode:!1,startTime:0,prefetchEnded:!1},this.wp={id:"",auctionEnded:!1},this.Sp=new N({adSelector:i.adSelector,sessionId:i.sessionId}),this.Ap()}get onAuctionStopCalling(){return this.Gu.asObservable()}get onAuctionEnd(){return this.gp.asObservable()}updateState(t){this.Sp.updateState(t)}cancelAuction(){this.bp.inPrefetchMode=!1,this.Sp.cancelAuction(),this.Pp()}startPrefetch(t){this.Pp(),this.bp={inPrefetchMode:!0,startTime:Date.now(),prefetchEnded:!1},this.Sp.startNewAuction({callingState:t,waitForNewReadyBid:!0})}startAuction(t,i,e=3e3){if(this.wp.id===i)return void(this.wp.auctionEnded&&(0,w.$K)(this.wp.auctionEndedType)&&this.rp(this.wp.auctionEndedType));this.vp=Date.now(),this.wp={auctionEnded:!1,id:i},this.Pp();let s=e;this.bp.inPrefetchMode?(s-=Date.now()-this.bp.startTime,s<0||this.bp.prefetchEnded?this.rp(j.Prefetch):this._p(s)):(this.Sp.startNewAuction({callingState:t,waitForNewReadyBid:!1}),this._p(s)),this.bp.inPrefetchMode=!1}onNothingToWin(){this.Sp.onNothingToWin()}onNothingToCall(){this.Sp.onNothingToCall()}destroy(){this.xp.unsubscribe(),this.xp=null}Ap(){this.xp=this.Sp.onAuctionMechanismEnded.subscribe((()=>{this.kp()}))}kp(){this.bp.prefetchEnded=!0,this.Gu.next(),this.bp.inPrefetchMode||this.rp(j.ShortCircuitEnd)}_p(t){this.yp=this.Ki.setTimeout((()=>{this.rp(j.TimeoutEnd)}),t)}rp(t){null!==this.vp&&(0,w.$K)(t)&&(this.Cp(t,Date.now()-this.vp),this.vp=null),this.wp.auctionEnded=!0,this.wp.auctionEndedType=t,this.cancelAuction(),this.gp.next(t)}Pp(){this.Ki.clearTimeout(this.yp),this.yp=null}Cp(t,i){(0,$.Vm)([99,1])&&(0,V.n)({message:"AuctionManager_end_auction",exception:t,callStack:this.Ep(i),level:V.D.INFO},{shouldSendMaxLog:!1,throttle:1e4})}Ep(t,i=0){const e=[0,.25,.5,.75,1,1.25,1.5,1.75,2,2.25,2.5,2.75,3,4,5][i];return void 0===e?"over_5s":t<=1e3*e?`${e}`:this.Ep(t,i+1)}}var q=e(8921),H=e(9134),z=e(3020),W=e(3802);const G=["11d44b9b-1330-432c-bcd7-4a095b47cdbd"];class X{constructor(t,i){this.Mp=t,this.Lp=i,this.Op=3e3,this.bu=null,this.Dp=!1,G.includes(this.Mp.settings.adManagerLineItem.protoLineItem.advertiserLineItemId)||this.Vp()}Vp(){this.Fp=this.Mp.onVpaidEvent.subscribe((t=>{var i,e,n,r,o,h,a,c,d;switch(t.type){case s.fI.AdImpression:this.Np();break;case s.fI.AdVideoFirstQuartile:this.jp();break;case s.fI.AdVideoMidpoint:null===(i=this.$p)||void 0===i||i.reset();break;case s.fI.AdVideoThirdQuartile:null===(e=this.$p)||void 0===e||e.reset();break;case s.fI.AdVideoComplete:null===(n=this.$p)||void 0===n||n.stop();break;case s.fI.AdStopped:null===(r=this.$p)||void 0===r||r.stop();break;case s.fI.AdError:null===(o=this.$p)||void 0===o||o.stop();break;case s.fI.AdPaused:null===(h=this.$p)||void 0===h||h.stop();break;case s.fI.AdSkipped:null===(a=this.$p)||void 0===a||a.stop();break;case s.fI.AdPlaying:null===(c=this.$p)||void 0===c||c.start();break;case s.fI.AdUserClose:null===(d=this.$p)||void 0===d||d.stop();break;case s.fI.AdExpandedChange:case s.fI.AdClickThru:case s.fI.AdInteraction:case s.fI.AdUserAcceptInvitation:case s.fI.AdLinearChange:case s.fI.AdUserMinimize:this.destroy()}}))}Np(){const t=d.h.getGlobalContainer().resolve(b.f);let i=this.Mp.getAdDuration();(0,w.r)(i)?(i*=1e3,this.Dp=!0):i=1e3*this.Lp,this.bu=i;const e=this.qp();this.$p=new y.B(t,e),this.$p.onTimeElapsed.subscribe((()=>{this.Fp.unsubscribe(),this.Fp=null,this.Mp.stopAd("adNotLoading")})),this.$p.start()}jp(){if(this.Dp)this.$p.reset();else{this.bu=4*this.$p.timeElapsed;const t=this.qp();this.$p.reset(t)}}qp(){return this.bu/4+this.Op}destroy(){var t;this.Fp&&(this.Fp.unsubscribe(),this.Fp=null),null===(t=this.$p)||void 0===t||t.stop()}}const J=30*g.s_;class Q{constructor(){this.zp=null}onAdRemoved(){this.zp=null,this.Wp()}pauseViaUserInteraction(){this.zp&&(this.zp.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.zp&&(this.zp.pausedWithUserInteraction=!1,this.Wp())}Gp(t){this.zp={currentAd:t,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:J,lastAdPausedStartedTimestamp:void 0},this.Wp()}checkPauseAd(t,i){t&&(null===this.zp&&this.Gp(t),i?this.Xp(t):this.Jp(t))}Jp(t){this.Qp(t)&&(this.zp.isPaused=!0,this.zp.lastAdPausedStartedTimestamp=Date.now(),t.pauseAd(),this.Wp(),this.Yp=setTimeout((()=>{t.stopAd("pauseOutOfView"),this.zp=null,this.Wp()}),this.zp.remainingTimeForAdToBePaused))}Xp(t){t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&this.zp.isPaused&&!this.zp.pausedWithUserInteraction&&(this.Wp(),this.zp.isPaused=!1,this.zp.remainingTimeForAdToBePaused=this.zp.remainingTimeForAdToBePaused-(Date.now()-this.zp.lastAdPausedStartedTimestamp),t.resumeAd())}Wp(){clearTimeout(this.Yp),this.Yp=void 0}Qp(t){return t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&!this.zp.isPaused&&!this.zp.pausedWithUserInteraction}}var Y=e(2484),K=e(5356),Z=e(7332);class tt{constructor(t,i,e,s,n){this.Mp=t,this.Zp=i,this.tf=e,this.if=s,this.mo=n,this.ef=!1,this.sf=!1,this.nf=[],this.rf=new Q,this.Ai=new o.x,this.Vp(),this.hf=new X(this.Mp,this.mo.maxAdDuration),this.resizeAd()}get onVpaidEvent(){return this.Ai.asObservable()}get inImpression(){return this.ef}setVastViewMode(t){this.mo.adViewMode=t;const{width:i,height:e}=this.Zp.getContainerStateMap().get(this.Mp.settings.adManagerLineItem.protoLineItem.adType);this.Mp.resizeAd(i,e,this.mo.adViewMode)}getAdVolume(){return this.Mp.getAdVolume()}setAdVolume(t,i){if(i){const{adMacroReplacer:e,adManagerState:s}=i;this.af(t,s,e)}this.Mp.setAdVolume(t)}resizeAd(){const{width:t,height:i,viewability:e}=this.Zp.getContainerStateMap().get(this.Mp.settings.adManagerLineItem.protoLineItem.adType);this.rf.checkPauseAd(this.Mp,e),this.Mp.resizeAd(t,i,this.mo.adViewMode)}skipAd(){this.Mp.setAdVolume(0),this.Mp.skipAd()}stopAd(t){this.Mp.stopAd(t)}pauseAd(t){this.Mp.pauseAd(),t&&this.rf.pauseViaUserInteraction()}resumeAd(t){this.Mp.resumeAd(),t&&this.rf.resumeViaUserInteraction()}getMediaSize(){const t=this.Mp.getAdMediaSize().width,i=this.Mp.getAdMediaSize().height,{widthRatio:e,heightRatio:s}=(0,Z.dO)(t,i);return{width:t,height:i,widthRatio:e,heightRatio:s,adType:this.Mp.settings.adManagerLineItem.protoLineItem.adType}}getMetadata(){return{advertiserLineItemId:this.Mp.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.Mp.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.Mp.settings.adManagerLineItem.protoLineItem.adType,duration:this.Mp.getAdDuration(),adSkipMode:this.Mp.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.Mp.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,adSourceType:this.Mp.adSourceType}}destroy(){this.ef=!1,this.rf.onAdRemoved(),this.Fp.unsubscribe(),this.Fp=null,this.hf.destroy()}Vp(){this.Fp=this.Mp.onVpaidEvent.subscribe((t=>{switch(t.type){case s.fI.AdImpression:this.cf();break;case s.fI.AdVideoFirstQuartile:this.df(n.ProtoQuartilesEnum.First);break;case s.fI.AdVideoMidpoint:this.df(n.ProtoQuartilesEnum.Second);break;case s.fI.AdVideoThirdQuartile:this.df(n.ProtoQuartilesEnum.Third);break;case s.fI.AdVideoComplete:this.df(n.ProtoQuartilesEnum.Fourth)}this.Ai.next(t)}))}cf(){this.sf=this.lf(this.Mp.skipOffset,this.Mp.getAdDuration()),this.ef=!0;const{viewability:t}=this.Zp.getContainerStateMap().get(this.Mp.settings.adManagerLineItem.protoLineItem.adType);this.rf.checkPauseAd(this.Mp,t)}df(t){const i=this.nf.indexOf(t)>=0&&!(this.mo.pauseAdWhenFinished||this.mo.loopAdWhenFinished),e=this.if.adBreakState,{adManagerLineItem:s}=this.Mp.settings;if(i)return void(1===(0,$.Vm)([99,1])&&(0,V.n)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:V.D.WARN,exception:s.protoLineItem.advertiserLineItemId,callStack:this.Mp.adMediaType}));this.nf.push(t);const{requestMetadata:n}=this.Mp.settings,{advertiserLineItemId:r,publisherLineItemId:o}=s.protoLineItem,{rtbSeatId:h,rtbAdomain:a,dspId:c}=n.data;this.tf.adQuartile.next({advertiserLineItemId:r,publisherLineItemId:o,rtbSeatId:h,dspId:c,rtbADomain:a,type:W.EN.fromProtoGetQuartile(t),adBreakType:W.EN.fromProtoAdBreakType(e.adBreakType),hasSkipAd:this.sf})}lf(t,i){if((0,w.hj)(t)&&t>=0)return!0;return(0,K.Xj)(i,this.mo.skipAdSettings)}af(t,i,e){const s=this.Mp.getAdVolume();let n=null;0===s&&t>0?n=this.Mp.settings.vastTracker.adUnmute:s>0&&0===t&&(n=this.Mp.settings.vastTracker.adMute);const r=this.Mp.settings.adManagerLineItem.protoLineItem;n&&Y.Mz.track(n,e,r,i)}}var it=e(5294),et=e(5885),st=e(1545),nt=e(6666);class rt{constructor(t,i){this.Zp=t,this.rl=i,this.uf=!1,this.pf=!1,this.ff=!1}get predictMode(){return this.uf}get adFetchingAllowed(){return this.pf}get impressionsAllowed(){return this.ff}get currentAdPlayerState(){return this.vf}get predictedAdPlayerState(){return this.gf}partialStateUpdate(t){this.vf&&(this.vf=Object.assign(Object.assign({},this.vf),t)),this.gf&&(this.gf=Object.assign(Object.assign({},this.gf),t))}getCurrentAdManagerState(t=!1){let i=this.vf;!this.currentAdPlayerState&&t&&(i=this.gf);const e=this.Zp.getContainerStateMap();return this.getAdManagerState(i,e)}getPredictedAdManagerState(){const t=this.gf,i=this.yf();return this.getAdManagerState(t,i)}getAdManagerState(t,i){if(!t)return;const{width:e,height:s,viewability:n}=this.Zp.getMainContainerState(),{clickToPlay:r,mediaMetadata:o,sound:h,adBreakState:a,linearAdOpportunity:c,playerOrientation:d,inFloating:l,queryJsTargeting:u}=t;return{width:e,height:s,viewability:n,clickToPlay:r,media:o,sound:!!h,soundValue:h,adContainerState:i,adBreakState:a,adOpportunity:c,playerOrientation:d,page:{insights:nt.k.pageInsights},inFloating:l,auctionEndType:this.bf,isPageInFocus:this.rl.isPageInFocus,queryJsTargeting:u}}yf(){let t;return this.gf.prefetchStateType===p.StartSessionPrefetch?(t=new Map,this.Zp.getContainerStateMap().forEach(((i,e)=>{t.set(e,Object.assign(Object.assign({},i),{viewability:!0}))}))):t=this.Zp.getContainerStateMap(),t}getCallSettings(){return{maxParallelCalls:m.O.PARALLEL_CALLS_DEFAULT,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}getWinSettings(){return{desiredBitRate:m.O.DEFAULT_DESIRED_BITRATE,maxParallelWins:m.O.PARALLEL_WINS_DEFAULT,vastViewMode:this.currentAdPlayerState?this.currentAdPlayerState.vastViewMode:this.predictedAdPlayerState.vastViewMode,stateSettings:{currentState:this.getCurrentAdManagerState(),predictedState:this.getPredictedAdManagerState()}}}enableImpression(t){this.uf=!1,this.vf=t,this.gf||(this.gf=this.vf),this.pf=!0}disableImpression(){this.ff=!1,this.pf=!1}enablePredict(t,i){this.vf=null,this.uf=!0,this.gf=t,this.gf.prefetchStateType=i,this.pf=!0}auctionEnd(t){this.bf=t,this.ff=!0}auctionStopCalling(){this.predictMode&&(this.pf=!1)}}var ot=e(3775),ht=e(6153);const at="cnx-ad-slot";class ct{constructor(t,i,e){this.parentContainer=t,this.Tr=i,this.Di=e,this.isImaSlot=!1,this.slotsContainer=this.Tr.createElementByString('<div class= "cnx-ad-bid-slot"></div>');const s=this.Tr.createElementByString(`<div class="${at}"></div>`);this.adSlot=this.Tr.createElementByString(`<div class="${at}"></div>`),this.videoSlot=this.Tr.createElementByString(`<video class="${at} cnx-ad-video-slot"></video>`);const n=ht.n.defaultVideoPosterURL;(0,w.QM)(n)&&this.videoSlot.setAttribute("poster",n),this.videoSlot.setAttribute("playsinline",""),this.videoSlot.setAttribute("webkit-playsinline",""),this.videoSlot.setAttribute("aria-label","Advertisement"),this.slotsContainer.setAttribute("aria-hidden","true"),s.appendChild(this.videoSlot),s.appendChild(this.adSlot),this.slotsContainer.appendChild(s),this.parentContainer.appendChild(this.slotsContainer)}destroy(){this.parentContainer.removeChild(this.slotsContainer)}If(){this.parentContainer.querySelectorAll(`[${ot.b.GarbageCollector}]`).forEach((t=>{(0,z.bX)(t)}))}sanitize(){this.If()}}class dt extends ct{constructor(){super(...arguments),this.isImaSlot=!0,this.wf=!1,this.Sf={imaAdDisplayContainer:void 0,imaAdsLoader:void 0,imaSdk:void 0}}fetchImaDependencies(){return O.X3.fetchImaSdk(window,!0).then((t=>this.Af(t)))}destroy(){this.Sf.imaAdsLoader&&this.Sf.imaAdsLoader.destroy(),this.Sf.imaAdDisplayContainer&&this.Sf.imaAdDisplayContainer.destroy(),super.destroy()}sanitize(){this.Sf.imaAdsLoader.contentComplete(),super.sanitize()}Af(t){if(this.wf)return this.Sf;t.settings.setDisableCustomPlaybackForIOS10Plus(!0);const i=this.Pf(t),e=this.xf(t,i);return this.Sf={imaSdk:t,imaAdDisplayContainer:i,imaAdsLoader:e},this.wf=!0,this.Sf}Pf(t){const i=new t.AdDisplayContainer(this.adSlot,this.videoSlot);return i.initialize(),i}xf(t,i){const e=new t.AdsLoader(i),s=d.h.getSessionChildContainer(this.Di).resolve(et.P);return e.getSettings().setVpaidMode(t.ImaSdkSettings.VpaidMode.INSECURE),s.isImaTestCaseForSS()||s.isRDDotComDomain()||s.isBudgetYourTripDotComDomain()||e.getSettings().setAutoPlayAdBreaks(!1),e}}class lt{constructor(t){this.settings=t,this.Tf=new Set,this.kf=new Set}preloadImaSdkSlots(t){O.X3.preloadImaSdk(window);const i=d.h.getSessionChildContainer(this.settings.sessionId).resolve(et.P);if(!i.isImaTestCaseForSS()&&!i.isMarriageDotComDomain()&&!i.isDailykosDotComDomain())for(let i=1;i<=3;i++){const i=new dt(t,this.settings.globalDomUtilsService,this.settings.sessionId);i.fetchImaDependencies(),this.Tf.add(i)}}requestAdSlot(t){const i=new ct(t,this.settings.globalDomUtilsService,this.settings.sessionId);return this.Cf(i),i}requestAdSlotIma(t){let i=this.Ef();return i||(i=new dt(t,this.settings.globalDomUtilsService,this.settings.sessionId)),this.Cf(i),i}destroyAdSlot(t){this.kf.delete(t),t.destroy()}recycleAdSlot(t){this.kf.delete(t),this.Mf(t)?(t.sanitize(),this.Tf.add(t)):this.destroyAdSlot(t)}Mf(t){return t.isImaSlot}Ef(){let t=null;return this.Tf.forEach((i=>{this.Mf(i)&&null===t&&(t=i)})),t}Cf(t){this.Tf.delete(t),this.kf.add(t)}}var ut=e(9592);const pt={[ut.f.HandlingSdkUrl]:n.ConnatixNoBidReasonEnum.CsRequestException,[ut.f.NetworkRequestUrl]:n.ConnatixNoBidReasonEnum.CsRequestException,[ut.f.InvalidCreativeType]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[ut.f.XmlInvalidString]:n.ConnatixNoBidReasonEnum.CsEmptyResponse,[ut.f.XmlParseGeneral]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[ut.f.XmlInvalidTree]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[ut.f.XmlInvalidAd]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[ut.f.XmlAdaptorWrapperLimit]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[ut.f.VastVersionNotSupported]:n.ConnatixNoBidReasonEnum.VastVersionNotSupported,[ut.f.HTMLUnknownMimeType]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[ut.f.HTMLNotEnoughData]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[ut.f.ImaAdsManagerInit]:n.ConnatixNoBidReasonEnum.CsRequestException,[ut.f.ImaVastEmptyResponse]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[ut.f.ImaRequestException]:n.ConnatixNoBidReasonEnum.CsRequestException,[ut.f.ImaTimeout]:n.ConnatixNoBidReasonEnum.Timeout,[ut.f.ImaInvalidResponse]:n.ConnatixNoBidReasonEnum.CsInvalidResponse,[ut.f.InvalidCreativeUrl]:n.ConnatixNoBidReasonEnum.CsRequestException,[ut.f.BidIsNotTargetingAllowedEver]:n.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver,[ut.f.VastMediaFilesNotSupported]:n.ConnatixNoBidReasonEnum.CsInvalidResponse};e(7129);var ft=e(7225),mt=e(6899),vt=e(5742),gt=e(7945),yt=e(307),bt=e(51),It=e(6578),wt=e(9741),St=e(2450),At=e(5027),Pt=e(252),_t=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class xt{constructor(t,i,e,s,n,r){this.Lf=t,this.Bf=i,this.Il=e,this.rl=s,this.Rf=n,this.Df=r,this.Vf=new Map,this.Ff=!1,this.Fo=d.h.getSessionChildContainer(this.Il.config.sessionId).resolve(st.G),this.Ff=this.Fo.isOmsdkFullSupport}request(t){return _t(this,void 0,void 0,(function*(){const{width:i,height:e}=t.callingState,s=this.Nf(i,e),n=this.jf(t);return!s||Object.keys(n.lineItems).length<=0?{bids:[],noBids:[]}:this.$f(n).then((i=>((0,w.$K)(n.liveRampAtsEnvelope)&&St.$.setEnvelopeStatus(i.liveRampEnvelopeStatus),this.Uf(i,t)))).catch((t=>((0,V.n)({message:"RtbCallAggregator",exception:t.message,level:V.D.CRITICAL},{pacing:1}),{bids:[],noBids:[]})))}))}Uf(t,i){const e={bids:[],noBids:[]};return t.lineItemResponses.forEach((t=>{const s=(0,_.ZN)(i.lineItemRequestDataList,t.id);(0,w.$K)(t.cachedFloorPrice)&&this.Vf.set(t.id,t.cachedFloorPrice),t.bids.forEach((t=>{const n=s.protoLineItem;if(t=Object.assign(Object.assign({},t),this.qf(n)),this.Hf(n,t))return(0,V.n)({level:V.D.WARN,message:"RtbCallAggregator_nonLinear_banner_0_dimensions",exception:`lineItemId:${s.protoLineItem.advertiserLineItemId}`},{throttle:5}),void e.noBids.push(this.zf(s));const r=this.Wf(t,s,i.callingState);e.bids.push(r)}));const n=t.noBidsCount;for(let t=0;t<n;t++)e.noBids.push(this.zf(s))})),e}Wf(t,i,e){return{lineItem:i,vastTracker:this.Jf(t,i),state:e,requestMetadata:new f.oO({requestedFloorPrice:t.requestedFloorPrice,isUserSynced:t.syncedUser,requestNumber:i.historicalMetrics.requestNumber,encryptedPrice:t.encryptedPrice,dspId:t.dspId,rtbAdomain:t.adomain,rtbSeatId:t.seatId,rtbCampainId:t.campaignId,cnxBidId:t.cnxBidId,requestTrackingHandledByServer:!0,logAuctionInformation:t.logAuctionInformation,auctionBidId:t.auctionBidId,rtbRequestId:t.rtbRequestId,liveRampType:t.liveRampType,floorPriceInformation:t.floorPriceInformation,discount:t.discount,serverBillingNoticeUrls:t.serverBillingNoticeUrls}),creativeId:t.creativeId,dimensions:{width:t.width,height:t.height},html:t.vastTag,mime:t.mime,obfuscatedPrice:t.gtkpbp,successRate:t.successRate,vastTag:t.vastTag}}qf(t){return{}}Hf(t,i){var e;return(0,_.lZ)(t.adType,null===(e=t.nonlinearLineItemSettings)||void 0===e?void 0:e.nonLinearRequestType)&&(!i.height||!i.width)}zf(t){return{lineItem:t,requestMetadata:new f.oO({requestNumber:t.historicalMetrics.requestNumber,partnerReason:n.PartnerNoBidReasonEnum.Unknown,requestTrackingHandledByServer:!0}),reason:n.ConnatixNoBidReasonEnum.NoBid}}Jf(t,i){const e=new Y.Mz;(0,Y.E3)(i.protoLineItem.trackers,e);const s=[...t.billingNoticeUrlList,t.adQualityCheckUrl].filter((t=>(0,w.QM)(t))).map((t=>(0,Y.U4)(t)));return e.adImpression.push(...s),(0,w.QM)(t.winNoticeUrl)&&e.adWin.push((0,Y.U4)(t.winNoticeUrl)),e}Qf(t,i){if(t.protoLineItem.adType!==n.ProtoAdType.Overlay)return null;const e=i.adContainerState.get(n.ProtoAdType.Video),s=i.adContainerState.get(n.ProtoAdType.Overlay);return e.height!==s.height||e.width!==s.width?{width:s.width,height:s.height}:void 0}Yf(t,i){const e={};return t.filter((t=>this.Kf(t))).forEach((t=>{const s=t.adManagerLineItem,n=this.Qf(s,i);let r;this.Vf.has(s.protoLineItem.advertiserLineItemId)&&(r=this.Vf.get(s.protoLineItem.advertiserLineItemId));const o=this.Zf(s);e[s.protoLineItem.advertiserLineItemId]=Object.assign({availableRequests:t.maxAvailableRequests,gdprConsent:this.Il.services.UserManagerService.isConsent(s.protoLineItem.vendorId),cachedFloorPrice:r,publisherLineItemId:s.protoLineItem.publisherLineItemId,slotHeight:null==n?void 0:n.height,slotWidth:null==n?void 0:n.width,requestNumber:s.historicalMetrics.requestNumber},o)})),e}Zf(t){const i=(0,_.AA)({playerSkippability:this.Bf.skippability,playerSkipMin:this.Bf.skipMin,playerSkipAfter:this.Bf.skipAdAfter,lineItemSkippability:t.protoLineItem.skippability,lineItemSkipMin:t.protoLineItem.skipMin}),e=i.skippable?n.ProtoSkipEnabledEnum.Yes:n.ProtoSkipEnabledEnum.No;return Object.assign(Object.assign({},i),{skip:e})}Kf(t){return!!t.adManagerLineItem.protoLineItem.forceCallingInEveryAO||this.Rf.shouldRequestLineItem(t.adManagerLineItem.protoLineItem.advertiserLineItemId)}jf(t){const{width:i,height:e,viewability:s}=t.callingState,{width:n,height:r}=this.rl.playerDimensions,o=d.h.getGlobalContainer().resolve(Pt._);return{metadata:this.rl.trackingRequestMeta,gdprCompliant:this.Il.services.UserManagerService.isGDPR(),gdprConsentData:this.Il.services.UserManagerService.getConsentPayload(),soundOn:t.callingState.sound,videoHeight:e,videoWidth:i,testMode:"true"===(0,bt.Ph)("cnxRtbTest",this.Il.config.pageUrl),explorationMode:this.Il.config.explorationMode,viewability:s,outstream:this.Lf,domainURL:this.Il.config.domainURL,isClickToPlay:t.callingState.clickToPlay,appVersion:this.Il.config.appVersion,deviceID:this.Il.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.Il.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.Il.services.UserManagerService.getUsPrivacyString(),gdprConsentMode:this.Il.services.UserManagerService.gdprConsentMode,customMacros:this.Il.services.MacrosService.getExtraMacros(),maxAdDuration:t.maxAdDuration,lineItems:this.Yf(t.lineItemRequestDataList,t.callingState),maxBidPrice:t.maxBidPrice,playerWidth:n,playerHeight:r,useNewSkippability:!0,liveRampAtsEnvelope:this.Il.services.UserManagerService.identityEnvelope,lineItemAbTestInformation:this.Df,connectionType:At.n.getConnectionType(this.Il.config.deviceType),OMSDKSupport:this.Ff,OMSDKVersion:this.Fo.omsdkVersion,intentIqEids:o.getEidsList()}}$f(t){return It.n.sendProtoRequest({endpoint:ht.n.endPoints.api.rtb,protoRequest:n.ProtoRtbRequest,protoResponse:n.ProtoRtbResponse,requestData:t,queryParams:{[yt.Fk]:gt.g.version,[yt.cc]:ht.n.tier},shouldLogErrors:!1,shouldSetClientHintsHeaders:!0})}Nf(t,i){return 0!==t&&0!==i||((0,V.n)({message:"AdManager_BidderCaller_dimensions",exception:`width:${t}_height:${i}_destroyed:${wt.S.playerDestroyed}`,level:V.D.CRITICAL,sessionId:this.Il.config.sessionId},{throttle:5}),!1)}}var Tt,kt,Ct,Et,Mt,Lt,Bt,Rt,Ot,Dt,Vt,Ft=e(1828);!function(t){t.AppNexus="appnexus",t.IndexExchange="ix",t.OpenX="openx",t.Pubmatic="pubmatic",t.RhythmOne="rhythmone",t.Rubicon="rubicon",t.SpotX="spotx",t.Telaria="telaria",t.MediaNet="medianet",t.Adman="adman",t.SynacorMedia="synacormedia",t.Undertone="undertone",t.AmxRTB="amx",t.Smaato="smaato",t.SmartAdServer="smartadserver",t.TheMediaGrid="grid",t.Rise="rise",t.YahooSSP="yahoossp",t.Unruly="unruly",t.Kargo="kargo",t.SmileWanted="smilewanted",t.TrustX="trustx",t.EmxDigital="emx_digital",t.KrushMedia="krushmedia",t.Conversant="conversant",t.Criteo="criteo",t.TripleLift="triplelift",t.PulsePoint="pulsepoint",t.Adtelligent="adtelligent",t.Yieldmo="yieldmo",t.PgamMedia="pgammedia",t.NextMillennium="nextMillennium",t.AdYouLike="adyoulike",t.FreeWheelSSP="freewheel-ssp",t.ColossusSSP="colossusssp",t.ResetDigital="resetdigital",t.MediaFuse="mediafuse",t.Sharethrough="sharethrough",t.Insticator="insticator"}(Tt||(Tt={}));class Nt{static logMissingRequireParam(t,i,e){(0,V.n)({level:V.D.CRITICAL,message:`PrebidJS_${t}_adapter_missing_${i}_li_${e}`})}static logMissingRequireIntegrationsParams(t,i,e){const s=i.map((t=>t.join("_and_"))).join("_or_");(0,V.n)({level:V.D.CRITICAL,message:`PrebidJS_${t}_adapter_needs_${s}_li_${e}`})}get config(){return this.tm}}!function(t){t[t.Unknown=0]="Unknown",t[t.AboveTheFold=1]="AboveTheFold",t[t.Deprecated=2]="Deprecated",t[t.BelowTheFold=3]="BelowTheFold",t[t.Header=4]="Header",t[t.Footer=5]="Footer",t[t.Sidebar=6]="Sidebar",t[t.Fullscreen=7]="Fullscreen"}(kt||(kt={})),function(t){t.Gross="gross",t.Net="net"}(Ct||(Ct={})),function(t){t.Instream="instream",t.Outstream="outstream"}(Et||(Et={})),function(t){t.InApp="mobile_app",t.MobileWeb="mobile_web",t.Web="web"}(Mt||(Mt={})),function(t){t.NATIVE="native",t.VIDEO="video",t.BANNER="banner"}(Lt||(Lt={})),function(t){t.Outstream="outstream",t.PreRoll="pre_roll",t.MidRoll="mid_roll",t.PostRoll="post_roll"}(Bt||(Bt={})),function(t){t[t.Instream=1]="Instream",t[t.InBanner=2]="InBanner",t[t.Outstream=3]="Outstream",t[t.InFeed=4]="InFeed",t[t.Floating=5]="Floating"}(Rt||(Rt={})),function(t){t[t.AutoplaySoundOn=1]="AutoplaySoundOn",t[t.AutoPlaySoundOff=2]="AutoPlaySoundOff",t[t.ClickToPlay=3]="ClickToPlay",t[t.MouseOver=4]="MouseOver",t[t.ScrollToPlaySoundOn=5]="ScrollToPlaySoundOn",t[t.ScrollToPlaySoundOff=6]="ScrollToPlaySoundOff"}(Ot||(Ot={})),function(t){t.AutoPlaySoundOn="auto_play_sound_on",t.AutoPlaySoundOff="auto_play_sound_off",t.AutoPlaySoundUnknown="auto_play_sound_unknown",t.ClickToPlay="click_to_play",t.MouseOver="mouse_over"}(Dt||(Dt={})),function(t){t[t.Instream=201]="Instream",t[t.Outstream=203]="Outstream"}(Vt||(Vt={}));var jt,$t=e(8211);!function(t){t[t.Nonsecure=0]="Nonsecure",t[t.Secure=1]="Secure"}(jt||(jt={}));const Ut={[Tt.AppNexus]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:32,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.hj)(e.placementId))return void Nt.logMissingRequireParam("appnexus","placementId",i.lineItemId);const{floorPrice:s}=i;(0,w.r)(s)&&(e.reserve=s);const{deviceId:n,os:r}=i;if((0,w.QM)(n))switch(e.app=Object.assign({},e.app),r){case $t.M.Android:e.app.device_id={aaid:n};break;case $t.M.Ios:e.app.device_id={idfa:n}}return e.video=Object.assign(Object.assign({},e.video),{skippable:!!i.skippabilitySettings.skip,skipoffset:i.skippabilitySettings.skipafter}),e}},[Tt.IndexExchange]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:10,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.siteId))return void Nt.logMissingRequireParam("ix","siteId",i.lineItemId);const{floorPrice:s,isOutstream:n}=i;if((0,w.r)(s)&&(e.bidFloor=s,e.bidFloorCur="USD"),n){const{inFloating:t,hasFloatingCapability:s,playerWidth:n,playerHeight:r}=i;e.video.playerConfig={floatOnScroll:s,floatSize:t?[n,r]:void 0}}return e}},[Tt.OpenX]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:69,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,w.QM)(e.unit))return void Nt.logMissingRequireParam("openx","unit",s);if(!(0,w.QM)(e.delDomain))return void Nt.logMissingRequireParam("openx","delDomain",s);const{floorPrice:n}=i;return(0,w.r)(n)&&(e.customFloor=n),e}},[Tt.Pubmatic]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:76,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.publisherId))return void Nt.logMissingRequireParam("pubmatic","publisherId",i.lineItemId);const s=i.floorPrice;return(0,w.r)(s)&&(e.kadfloor=String(s)),i.isOutstream&&(e.outstreamAU=i.adUnitCode),e.kadpageurl=i.pageUrl,e}},[Tt.RhythmOne]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:36,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){if((0,w.QM)(t.placementId))return t;Nt.logMissingRequireParam("rhythmone","placementId",i.lineItemId)}},[Tt.Rubicon]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:52,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,w.hj)(e.accountId))return void Nt.logMissingRequireParam("rubicon","accountId",s);if(!(0,w.hj)(e.siteId))return void Nt.logMissingRequireParam("rubicon","siteId",s);if(!(0,w.hj)(e.zoneId))return void Nt.logMissingRequireParam("rubicon","zoneId",s);const n=i.floorPrice;return(0,w.r)(n)&&(e.floor=n),e}},[Tt.SpotX]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:165,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.channel_id))return void Nt.logMissingRequireParam("spotx","channel_id",i.lineItemId);(0,w.QM)(e.ad_unit)||(e.ad_unit=i.isOutstream?Et.Outstream:Et.Instream);const{floorPrice:s,isOutstream:n,bidSlotId:r}=i;return(0,w.r)(s)&&(e.price_floor=s),n&&(e.outstream_options={slot:r}),e.page=i.pageUrl,e}},[Tt.Telaria]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:52,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s,pageUrl:n}=i;if((0,w.QM)(t.adCode)){if((0,w.QM)(t.supplyCode))return e.srcPageUrl=n,t;Nt.logMissingRequireParam("telaria","supplyCode",s)}else Nt.logMissingRequireParam("telaria","adCode",s)}},[Tt.MediaNet]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:142,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,w.QM)(e.cid))return void Nt.logMissingRequireParam("medianet","cid",s);if(!(0,w.QM)(e.crid))return void Nt.logMissingRequireParam("medianet","crid",s);const{floorPrice:n}=i;return(0,w.r)(n)&&(e.bidFloor=n),e.site=Object.assign(Object.assign({},e.site||{}),{page:i.pageUrl}),e}},[Tt.Adman]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:149,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.placementId))return void Nt.logMissingRequireParam("adman","placementId",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.bidfloor=s),e.traffic=Lt.VIDEO,e}},[Tt.SynacorMedia]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:void 0,gdprSupport:!1,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,w.QM)(e.seatId))return void Nt.logMissingRequireParam("synacormedia","seatId",s);if(!(0,w.QM)(e.tagId))return void Nt.logMissingRequireParam("synacormedia","tagId",s);const{floorPrice:n}=i;return(0,w.r)(n)&&(e.bidfloor=n),e}},[Tt.Undertone]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:677,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if((0,w.hj)(e.publisherId)){if((0,w.QM)(e.placementId))return e.video=Object.assign(Object.assign({},e.video||{}),{skippable:!!i.skippabilitySettings.skip}),e;Nt.logMissingRequireParam("undertone","placementId",s)}else Nt.logMissingRequireParam("undertone","publisherId",s)}},[Tt.AmxRTB]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:737,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.tagId))return void Nt.logMissingRequireParam("amx","tagId",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.floor=s),e}},[Tt.Smaato]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:82,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const{lineItemId:e}=i;if((0,w.QM)(t.publisherId)){if((0,w.QM)(t.adspaceId))return t;Nt.logMissingRequireParam("smaato","adspaceId",e)}else Nt.logMissingRequireParam("smaato","publisherId",e)}},[Tt.SmartAdServer]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:18,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{lineItemId:s}=i;if(!(0,w.hj)(e.siteId))return void Nt.logMissingRequireParam("smartadserver","siteId",s);if(!(0,w.hj)(e.pageId))return void Nt.logMissingRequireParam("smartadserver","pageId",s);if(!(0,w.hj)(e.formatId))return void Nt.logMissingRequireParam("smartadserver","formatId",s);const{floorPrice:n}=i;return(0,w.r)(n)&&(e.bidfloor=n),e}},[Tt.TheMediaGrid]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:686,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.r)(e.uid))return void Nt.logMissingRequireParam("grid","uid",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.bidFloor=s),e}},[Tt.Rise]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:1043,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.org))return void Nt.logMissingRequireParam("rise","org",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.floorPrice=s),e}},[Tt.YahooSSP]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:25,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=(0,w.QM)(e.pos)&&(0,w.QM)(e.dcn),n=(0,w.QM)(e.pubId);if(!s&&!n)return void Nt.logMissingRequireParam("yahoossp","required",i.lineItemId);const{floorPrice:r}=i;return(0,w.r)(r)&&(e.bidOverride={imp:{bidfloor:r}}),e}},[Tt.Unruly]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:36,gdprSupport:!1,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t);if((0,w.hj)(e.siteId))return i.isOutstream&&(e.featureOverrides={canRunUnmissable:!0}),(0,w.r)(i.floorPrice)&&(e.floor=i.floorPrice),e;Nt.logMissingRequireParam("unruly","siteId",i.lineItemId)}},[Tt.Kargo]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:972,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){if((0,w.QM)(t.placementId))return t;Nt.logMissingRequireParam("kargo","placementId",i.lineItemId)}},[Tt.SmileWanted]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:639,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.zoneId))return void Nt.logMissingRequireParam("smilewanted","zoneId",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.bidfloor=s),e}},[Tt.TrustX]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.hj)(e.uid))return void Nt.logMissingRequireParam("trustx","uid",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.bidFloor=s),e}},[Tt.EmxDigital]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:183,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.tagid))return void Nt.logMissingRequireParam("emx_digital","tagid",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.bidfloor=s.toString()),e}},[Tt.KrushMedia]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.key))return void Nt.logMissingRequireParam("krushmedia","key",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.bidfloor=s),e.traffic=Lt.VIDEO,e}},[Tt.Conversant]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:24,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.site_id))return void Nt.logMissingRequireParam("conversant","site_id",i.lineItemId);e.secure=jt.Secure;const{floorPrice:s}=i;return(0,w.r)(s)&&(e.bidfloor=s),e}},[Tt.Criteo]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:91,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,w.hj)(e.networkId))return e;Nt.logMissingRequireParam("criteo","networkId",i.lineItemId)}},[Tt.TripleLift]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:28,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.inventoryCode))return void Nt.logMissingRequireParam("triplelift","inventoryCode",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.floor=s),e}},[Tt.PulsePoint]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:81,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.hj)(e.cp))return void Nt.logMissingRequireParam("pulsepoint","cp",i.lineItemId);if(!(0,w.hj)(e.ct))return void Nt.logMissingRequireParam("pulsepoint","ct",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.bidfloor=s),e}},[Tt.Adtelligent]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:410,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,w.hj)(e.aid))return e;Nt.logMissingRequireParam("adtelligent","aid",i.lineItemId)}},[Tt.Yieldmo]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:173,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.placementId))return void Nt.logMissingRequireParam("yieldmo","placementId",i.lineItemId);const{floorPrice:s,isOutstream:r,adBreakType:o}=i;if((0,w.r)(s)&&(e.bidFloor=s),r)e.video.startdelay=0;else switch(o){case n.ProtoAdBreakTypeEnum.PreRoll:e.video.startdelay=0;break;case n.ProtoAdBreakTypeEnum.MidRoll:e.video.startdelay=1;break;case n.ProtoAdBreakTypeEnum.PostRoll:e.video.startdelay=-2;break;default:e.video.startdelay=0}return e}},[Tt.PgamMedia]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,w.QM)(e.AV_PUBLISHERID)){if((0,w.QM)(e.AV_CHANNELID))return e;Nt.logMissingRequireParam("pgammedia","AV_CHANNELID",i.lineItemId)}else Nt.logMissingRequireParam("pgammedia","AV_PUBLISHERID",i.lineItemId)}},[Tt.NextMillennium]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:1060,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,w.QM)(e.placement_id)||(0,w.QM)(e.group_id))return e;Nt.logMissingRequireIntegrationsParams("nextMillennium",[["placement_id"],["group_id"]],i.lineItemId)}},[Tt.AdYouLike]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:259,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,w.QM)(e.placement))return e;Nt.logMissingRequireParam("adyoulike","placement",i.lineItemId)}},[Tt.FreeWheelSSP]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:285,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if((0,w.QM)(t.zoneId))return e;Nt.logMissingRequireParam("freewheel-ssp","zoneId",i.lineItemId)}},[Tt.ColossusSSP]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),s=(0,w.hj)(e.placement_id),n=(0,w.hj)(e.group_id);if(s||n)return e;Nt.logMissingRequireIntegrationsParams("colossusssp",[["placement_id"],["group_id"]],i.lineItemId)}},[Tt.ResetDigital]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:void 0,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t),s=(0,w.QM)(e.pubId),n=(0,w.QM)(e.zoneId);if(s||n)return e;Nt.logMissingRequireIntegrationsParams("resetdigital",[["pubId"],["zoneId"]],i.lineItemId)}},[Tt.MediaFuse]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:void 0,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t),{placementId:s}=e;if(!(0,w.hj)(s))return void Nt.logMissingRequireParam("mediafuse","placementId",i.lineItemId);const{floorPrice:n}=i;(0,w.r)(n)&&(e.reserve=n);const{deviceId:r,os:o}=i;if((0,w.QM)(r))switch(e.app=Object.assign({},e.app),o){case $t.M.Android:e.app.device_id={aaid:r};break;case $t.M.Ios:e.app.device_id={idfa:r}}return e.video=Object.assign(Object.assign({},e.video),{skippable:!!i.skippabilitySettings.skip,skipoffset:i.skippabilitySettings.skipafter}),e}},[Tt.Sharethrough]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:80,gdprSupport:!0,ccpaSupport:!0}}getBidParams(t,i){const e=Object.assign({},t);if(!(0,w.QM)(e.pkey))return void Nt.logMissingRequireParam("sharethrough","pkey",i.lineItemId);const{floorPrice:s}=i;return(0,w.r)(s)&&(e.floor=s),e}},[Tt.Insticator]:new class extends Nt{constructor(){super(...arguments),this.tm={vendorId:910,gdprSupport:!0,ccpaSupport:!1}}getBidParams(t,i){const e=Object.assign({},t);if((0,w.QM)(e.adUnitId))return e;Nt.logMissingRequireParam("insticator","adUnitId",i.lineItemId)}}},qt="pbjs";class Ht{constructor(t,i){this.Oi=t,this.Di=i,this.nm=!0,this.qi=new Ft.o(this.Oi,this.Di)}loadPrebidJs(t){return new Promise(((i,e)=>{if(this.rm)return i(this.rm);this.insertPrebidJs().then((e=>{this.rm=e,this.rm.setConfig(t),this.rm.setBidderConfig({bidders:[Tt.TrustX,Tt.TripleLift,Tt.Conversant,Tt.Criteo,Tt.Kargo],config:{localStorageWriteAllowed:!0}},this.nm),i(e)})).catch((t=>e(t)))}))}insertPrebidJs(){return new Promise(((t,i)=>{this.qi.loadIframe({customHead:"<style> html, body {display: none}</style>",customHtml:`<script id='cnx-prebid-loader' type='text/javascript' src='${ht.n.endPoints.assets.plugins.prebidScript}'><\/script>`,customIframeAttributes:[{key:"class",value:"cnx-prebid-loader"}],container:this.Oi.querySelector("head"),visible:!1}).then((e=>{if(e.iframe.contentWindow[qt])return this.om(e.iframe),t(e.iframe.contentWindow[qt]);i(new Error("pbjs could not be found on the iframe window"))})).catch((t=>{i(t)}))}))}om(t){const i=this.Oi.global.permutive;(0,w.$K)(i)&&(t.contentWindow.permutive=i)}}var zt=e(3199);const Wt=(t,i)=>({[n.ProtoPlayerPlaybackModeEnum.Autoplay]:i!==n.ProtoPlayerSoundMode.Mute?Ot.AutoplaySoundOn:Ot.AutoPlaySoundOff,[n.ProtoPlayerPlaybackModeEnum.ClickToPlay]:Ot.ClickToPlay,[n.ProtoPlayerPlaybackModeEnum.ScrollToPlay]:i!==n.ProtoPlayerSoundMode.Mute?Ot.ScrollToPlaySoundOn:Ot.ScrollToPlaySoundOff}[t]);class Gt{constructor(t){this.Kd=t}isAdapterCallable(t){const i=(t=>{const i=Object.keys(Tt).find((i=>Tt[i]===t));if(i)return Tt[i]})(t);return!!i&&(this.Kd.isGDPR()?this.hm(i):!this.Kd.isCcpaApplicable()||this.am(i))}dm(t){return Ut[t].config.gdprSupport}hm(t){if(this.dm(t))return!0;const i=Ut[t].config.vendorId,e=(0,w.hj)(i)?`${i}`:"";return this.Kd.isConsent(e,zt.Z)}am(t){return!!Ut[t].config.ccpaSupport||!!this.Kd.isSellUserAllowed()}}var Xt=e(3003);class Jt{constructor(t,i={}){this.um=t,this.pm=i,this.fm="{{",this.vm="}}",this.gm=new RegExp(`${this.fm}(.*?)${this.vm}`,"g")}replaceMacros(t,i){const e=(0,Xt.Ed)(t,this.gm);if(!(0,P.BZ)(e))return t;const s=this.bm(t,e,i);return this.replaceMacros(s,i)}setMacros(t){this.pm=Object.assign(Object.assign({},this.pm),t)}bm(t,i,e){const s=t;return i.reduce(((t,i)=>this.Im(t,i,e)),s)}Im(t,i,e){const s=this.wm(i);if(!this.Am(s,e))return t.replace(i,null);let n=null,r=!1;this.Pm(s,e)?n=this.um.getMacroValue(s,e):this._m(s)&&(n=this.pm[s],(0,w.HD)(n)||(r=!0));const o=this.Tm(n);if(r){return t.replace(`"${i}"`,o).replace(i,o)}return t.replace(i,o)}Am(t,i){return this.Pm(t,i)||this._m(t)}Pm(t,i){return this.um.hasMacroValue(t,i)}_m(t){return(0,w.$K)(this.pm[t])}wm(t){return t.replace(this.fm,"").replace(this.vm,"")}Tm(t){return[null,void 0,NaN].includes(t)?null:Array.isArray(t)||(0,w.as)(t)?JSON.stringify(t):t.toString()}}const Qt=t=>({id:t.appId,name:t.appName,bundle:t.bundleID,domain:t.domainURL,storeurl:t.storeURL,cat:t.appCategories,ver:t.appVersion,privacypolicy:t.appPrivacyPolicy,paid:t.appIsPaid}),Yt="https://prebid.adnxs.com/pbc/v1/cache",Kt=()=>({url:Yt}),Zt=(t,i)=>t?{gdpr:ti()}:i?{usp:ii()}:{},ti=()=>({cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["permutive"]},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}),ii=()=>({cmpApi:"iab",timeout:2e3}),ei=()=>({ix:{timeout:900}}),si=t=>({validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.businessDomain,hp:1,sid:(0,w.QM)(t.supplyChainId)?t.supplyChainId:null}]}}),ni=t=>{if(!(0,w.as)(t))return null;return`1.0,1!${(0,w.QM)(t.businessDomain)?encodeURI(t.businessDomain):""},${(0,w.QM)(t.supplyChainId)?encodeURI(t.supplyChainId):""},1`};var ri;!function(t){t.CACHE_ID="CACHE_ID"}(ri||(ri={}));const oi=()=>({targetingControls:{addTargetingKeys:[ri.CACHE_ID]}}),hi=()=>({userSync:{syncEnabled:!0,iframeEnabled:!0,pixelEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"},image:{bidders:"*",filter:"include"}},syncsPerBidder:0,syncDelay:3e3,auctionDelay:0,aliasSyncEnabled:!0,userIds:[{name:"criteo"},{name:"pubCommonId",params:{enableSharedId:!0},storage:{type:"cookie",name:"_pubcid",expires:180}},{name:"uid2"}]}}),ai=t=>({realTimeData:{dataProviders:[{name:"permutive",params:(0,w.as)(t)?t:{}}]}});var ci;!function(t){t.Banner="banner",t.Video="video",t.All="all"}(ci||(ci={}));const di=()=>({yahoossp:{mode:ci.Video}}),li=t=>({currency:"USD",schema:{fields:["mediaType"]},values:{video:t}}),ui=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],pi=[2,3,5,6],fi={VPAID_1:1,VPAID_2:2},mi=[fi.VPAID_1,fi.VPAID_2],vi=[fi.VPAID_1,fi.VPAID_2],gi=(t,i)=>{const{skip:e,skippable:s,skipmin:n,skipafter:r}=i,{width:o,height:h,isOutstreamContext:a,maxAdDuration:c,inFloating:d,initialSoundMode:l,playbackMode:u}=t;let p=Rt.Instream;return a&&(p=Rt.Floating),d&&(p=Rt.Outstream),{video:{w:Math.floor(o),h:Math.floor(h),playerSize:[Math.floor(o),Math.floor(h)],context:a?"outstream":"instream",mimes:ui,protocols:pi,linearity:1,api:mi,frameworks:vi,maxduration:c,minduration:0,skip:e,skippable:s,skipmin:n,skipafter:r,placement:p,playbackmethod:[Wt(u,l)]}}};var yi;!function(t){t.CnxSupplyType="CNX_SUPPLY_TYPE",t.CnxAdUnit="CNX_AD_UNIT",t.CnxVideoMimes="CNX_VIDEO_MIMES",t.CnxVideoApi="CNX_VIDEO_API",t.CnxVideoId="CNX_VIDEO_ID",t.CnxAtsEnvelope="CNX_ATS_ENVELOPE",t.CnxSupplyChain="CNX_SUPPLY_CHAIN",t.CnxIntegrationMode="CNX_INTEGRATION_MODE",t.CnxVideoFrameworks="CNX_VIDEO_FRAMEWORKS",t.CnxVideoSkippable="CNX_VIDEO_SKIPPABLE",t.CnxVideoSkipOffset="CNX_VIDEO_SKIP_OFFSET",t.CnxVideoMaxDuration="CNX_VIDEO_MAX_DURATION",t.CnxVideoStartDelay="CNX_VIDEO_START_DELAY",t.CnxVideoPlaybackMethodInteger="CNX_VIDEO_PLAYBACK_METHOD_INTEGER",t.CnxVideoPlaybackMethodsString="CNX_VIDEO_PLAYBACK_METHOD_STRING",t.CnxVideoProtocols="CNX_VIDEO_PROTOCOLS",t.CnxVideoLinearity="CNX_VIDEO_LINEARITY",t.CnxVideoPlacement="CNX_VIDEO_PLACEMENT",t.CnxVideoContext="CNX_VIDEO_CONTEXT",t.CnxVideoSizeId="CNX_VIDEO_SIZE_ID",t.CnxVideoLanguage="CNX_VIDEO_LANGUAGE",t.CnxVideoVolume="CNX_VIDEO_VOLUME",t.UserLanguage="USER_LANGUAGE",t.AppDeviceId="APP_DEVICE_ID",t.Width="WIDTH",t.Height="HEIGHT",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.DoNotTrack="DNT",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.PageUrl="PAGE_URL"}(yi||(yi={}));class bi{constructor(t,i,e,s,n){this._appSettings=t,this.km=i,this.Kd=e,this.Cm=s,this.Em=n,this.Mm={[yi.PageUrl]:()=>this.km.pageUrl,[yi.AppBundle]:()=>this._appSettings.bundleID,[yi.AppName]:()=>this._appSettings.appName,[yi.AppDeviceId]:t=>this.Lm(t),[yi.CnxAdUnit]:()=>this.Bm(),[yi.CnxSupplyType]:()=>this.Rm(),[yi.CnxVideoContext]:t=>this.Om(t),[yi.CnxIntegrationMode]:()=>this.km.isAmp?"AMP":void 0,[yi.Width]:t=>Math.floor(t.videoWidth),[yi.Height]:t=>Math.floor(t.videoHeight),[yi.CnxSupplyChain]:t=>t.supplyChain,[yi.CnxVideoApi]:()=>Object.values(fi),[yi.CnxVideoFrameworks]:()=>vi,[yi.CnxVideoMimes]:()=>ui,[yi.CnxVideoProtocols]:()=>pi,[yi.CnxVideoLinearity]:()=>1,[yi.CnxVideoMaxDuration]:t=>t.videoMaxAdDuration,[yi.CnxVideoLanguage]:()=>"en",[yi.CnxVideoId]:t=>t.mediaId,[yi.CnxAtsEnvelope]:t=>t.liveRampEnvelope,[yi.CnxVideoSkippable]:t=>t.skippabilitySettings.skippable,[yi.CnxVideoSkipOffset]:t=>t.skippabilitySettings.skipafter,[yi.CnxVideoPlaybackMethodInteger]:()=>this.Dm(),[yi.CnxVideoPlaybackMethodsString]:()=>this.Fm(),[yi.CnxVideoPlacement]:t=>this.Nm(t),[yi.CnxVideoSizeId]:()=>this.jm(),[yi.CnxVideoStartDelay]:()=>this.Em,[yi.CnxVideoVolume]:t=>t.videoVolume,[yi.DoNotTrack]:()=>{},[yi.UserLanguage]:()=>this.$m(),[yi.UserLat]:()=>this.km.geoLocation.lat,[yi.UserLong]:()=>this.km.geoLocation.lon}}getMacroValue(t,i){const e=this.Mm[t];if(e)return e(i)}hasMacroValue(t,i){return(0,w.$K)(this.getMacroValue(t,i))}Lm(t){const i=this.Kd.isConsent(t.vendorId);return this.Kd.isConsentConnatix()&&i?this.Kd.getTrackableUser():void 0}Bm(){return this.Cm.isOutstream?Et.Outstream:Et.Instream}Rm(){return this.km.isInApp?Mt.InApp:this.km.isMobile?Mt.MobileWeb:Mt.Web}Om(t){if(this.Cm.isOutstream)return Bt.Outstream;return{[n.ProtoAdBreakTypeEnum.None]:Bt.PreRoll,[n.ProtoAdBreakTypeEnum.PreRoll]:Bt.PreRoll,[n.ProtoAdBreakTypeEnum.MidRoll]:Bt.MidRoll,[n.ProtoAdBreakTypeEnum.PostRoll]:Bt.PostRoll}[t.adBreakType]}Dm(){return Wt(this.Cm.playbackMode,this.Cm.initialSoundMode)}Fm(){const t=this.Cm.playbackMode,i=this.Cm.initialSoundMode;return t===n.ProtoPlayerPlaybackModeEnum.Autoplay?i===n.ProtoPlayerSoundMode.On?Dt.AutoPlaySoundOn:i===n.ProtoPlayerSoundMode.Mute?Dt.AutoPlaySoundOff:Dt.AutoPlaySoundUnknown:t===n.ProtoPlayerPlaybackModeEnum.ClickToPlay?Dt.ClickToPlay:void 0}jm(){return this.Cm.isOutstream?Vt.Outstream:Vt.Instream}$m(){const t=navigator.language;if((0,w.QM)(t))return t.split("-")[0].toUpperCase()}Nm(t){return t.inFloating?Rt.Floating:this.Cm.isOutstream?Rt.Outstream:Rt.Instream}}class Ii{constructor(t,i,e,s,n,r,o){this.Um=t,this.qm=i,this.Oi=e,this.Hm=s,this.Kd=n,this.tm=r,this.zm=o,this.Ga=this.tm.pageUrl,this.Di=this.tm.sessionId,this.Rs=this.tm.os.os,this.Wm=new Ht(this.Oi,this.Di)}requestHeaderBidder(t,i){return new Promise(((e,s)=>{this.Gm().then((s=>{const n=t.map((t=>this.Xm(s,t,i).then((t=>t))));Promise.all(n).then((t=>{e(t)}))})).catch((t=>{s(n.ConnatixNoBidReasonEnum.NoBid)}))}))}setMacros(t){this.Um.setMacros(t)}Jm(t,i){const e={lineItemSkippability:t,lineItemSkipMin:i,playerSkippability:this.Hm.skippability,playerSkipMin:this.Hm.skipMin,playerSkipAfter:this.Hm.skipAdAfter},s=(0,_.AA)(e),n=s.skippable?1:0;return Object.assign({skip:n},s)}Xm(t,i,e){return new Promise((s=>{let r=[];if(i.availableRequests>0)if((0,w.$K)(i.lineItem.floorPricesNew)&&(0,P.BZ)(i.lineItem.floorPricesNew.floorPrices)){const s=i.lineItem.floorPricesNew.floorPrices.map((t=>t.price));r=this.Qm(i.lineItem.floorPricesNew,i.availableRequests,i.maxBidPrice).map((n=>this.Ym(t,i.lineItem,i.bidderName,i.bidderParams,s,n,e)))}else{const s={requestedFloorPrice:i.lineItem.floorPrice,floorPriceInformation:{floorPrices:[],floorPriceIndexUsed:-1,floorPriceFactorBypassReason:n.FloorPriceBypassReasonEnum.FixedCpm}},o=this.Ym(t,i.lineItem,i.bidderName,i.bidderParams,[],s,e);r.push(o)}Promise.all(r).then((t=>{const e=[],n=[],r=i.lineItem.advertiserLineItemId;t.forEach((t=>{t.reason?n.push(t):e.push(t)}));s({bids:e,noBids:n,lineItemId:r})}))}))}Ym(t,i,e,s,n,r,o){return new Promise((h=>{this.Zm(t,i,e,s,n,r,o).then((t=>{h(t)})).catch((t=>{h(t)}))}))}Gm(){const t=((t,i,e,s,n,r)=>{const o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({usePrebidCache:!0},hi()),ei()),oi()),di()),ai(r));return o.floors={},(0,w.QM)(n)&&(o.pageUrl=n),o.usePrebidCache&&(o.cache=Kt()),s&&(o.schain=si(s)),(t||i)&&(o.consentManagement=Zt(t,i)),e.isInApp&&(o.app=Qt(e),o.ortb2={app:Qt(e)}),o})(this.Kd.isGDPR(),this.Kd.isCcpaApplicable(),this.tm,this.qm,this.Ga,this.zm);return new Promise(((i,e)=>{this.Wm.loadPrebidJs(t).then((t=>{i(t)})).catch((t=>{(0,V.n)({message:"AdManager_HeaderBidder_unable_to_load_prebidJs_script",exception:t.message,callStack:t.stack,level:V.D.CRITICAL,sessionId:this.Di}),e(t)}))}))}tv(t){const i=Object.keys(t),e=i.filter((i=>!(0,w.as)(t[i]))),s=i.filter((i=>(0,w.as)(t[i])));return e.forEach((i=>{null!==t[i]&&"null"!==t[i]||delete t[i]})),s.forEach((i=>{this.tv(t[i])})),t}Zm(t,i,e,s,r,o,h){return new Promise(((a,c)=>{const d=this.Jm(i.skippability,i.skipMin),l=((t,i,e,s)=>{const n={code:(0,$.qs)(),mediaTypes:gi(t,e),bids:[]},r=[Tt.Smaato,Tt.Yieldmo];return!t.isOutstreamContext&&r.includes(s)&&(n.mediaTypes.video.startdelay=0),(0,w.r)(i)&&(n.floors=li(i)),n})(h,o.requestedFloorPrice,d,e);try{const{width:t,height:e,maxAdDuration:n,videoVolume:r,inFloating:o,adBreakType:a,mediaLanguage:c,mediaId:u,liveRampEnvelope:p}=h,f=this.Um.replaceMacros(s,{videoWidth:t,videoHeight:e,videoMaxAdDuration:n,vendorId:i.vendorId,skippabilitySettings:d,videoVolume:r,inFloating:o,adBreakType:a,mediaLanguage:c,mediaId:u,supplyChain:ni(this.qm),liveRampEnvelope:p}),m=JSON.parse(f),v=this.tv(m);l.bids=[v]}catch(t){(0,V.n)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:t.message,callStack:t.stack,level:V.D.WARN,sessionId:this.Di});const i=Object.assign({bidderName:e,reason:n.ConnatixNoBidReasonEnum.NoBid},o);return void c(i)}const u=(0,_.aW)();l.bids.forEach((t=>this.sv(t,o.requestedFloorPrice,i.advertiserLineItemId,u,d,h,l.code,this.Kd.getDeviceId(),this.Rs))),t.que.push((()=>{t.addAdUnits(l);const s={timeout:i.headerBidderTimeout,adUnits:[l],bidsBackHandler:()=>{var s;try{const h=t.getHighestCpmBids(l.code)[0];if(!h){const t=Object.assign({bidderName:e,reason:n.ConnatixNoBidReasonEnum.CsEmptyResponse},o);return void c(t)}let d,p;if(this.nv(h))d=(t=>`${Yt}?uuid=${t.adserverTargeting.hb_cache_id}`)(h);else if(d=h.vastUrl,p=h.vastXml,!d&&!p){(0,V.n)({level:V.D.WARN,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(h),sessionId:this.Di});const t=Object.assign({bidderName:e,reason:n.ConnatixNoBidReasonEnum.CsEmptyResponse},o);return void c(t)}const f=h.cpm||h.adResponse.ad.cpm,{advertiserLineItemId:m}=i,v=Object.assign(Object.assign({},o),{bidderName:e,adTagUrl:d,adTagXml:p,lineItemId:m,cpm:f,slotId:u,bidId:l.code});(0,w.r)(o.requestedFloorPrice)&&f<o.requestedFloorPrice&&(0,V.n)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:V.D.WARN,exception:`floorPrices_${r}_floorPrice_${o.requestedFloorPrice}_index_${null===(s=o.floorPriceInformation)||void 0===s?void 0:s.floorPriceIndexUsed}_cpm_${f}_li_${i.advertiserLineItemId}`,callStack:e,sessionId:this.Di},{shouldSendMaxLog:!1,throttle:5}),a(v)}catch(t){(0,V.n)({level:V.D.WARN,message:"AdManager_HeaderBidder_Prebidjs_error",exception:t.message,callStack:t.stack,sessionId:this.Di});const i=Object.assign({bidderName:e,reason:n.ConnatixNoBidReasonEnum.NoBid},o);c(i)}}};t.requestBids(s)}))}))}sv(t,i,e,s,n,r,o,h,a){var c;const d=null===(c=Ut[t.bidder])||void 0===c?void 0:c.getBidParams;if(!d)return;const{width:l,height:u,isOutstreamContext:p,maxAdDuration:f,adBreakType:m,inFloating:v,hasFloatingCapability:g}=r;t.params=d(t.params,{playerWidth:l,playerHeight:u,maxDuration:f,pageUrl:this.Ga,floorPrice:i,lineItemId:e,isOutstream:p,bidSlotId:s,skippabilitySettings:n,adBreakType:m,adUnitCode:o,inFloating:v,hasFloatingCapability:g,deviceId:h,os:a})}nv(t){return t.adserverTargeting&&(0,w.QM)(t.adserverTargeting.hb_cache_id)}Qm(t,i,e){if(0===i)return[];const{floorPrices:s,recommended:n}=t,r=s.map(((i,e)=>{if(e<n)return{requestedFloorPrice:i.price,floorPriceInformation:{floorPrices:t.floorPrices.map((({price:t})=>t)),floorPriceIndexUsed:e,floorPriceFactorBypassReason:i.floorPriceBypassReason}}})).filter((t=>(0,w.$K)(t)));return this.rv(r,i,e)}rv(t,i,e){let s=i;const r=t.filter((({requestedFloorPrice:t})=>t>=e&&s>0&&(s--,!0)));if((0,P.BZ)(r))return r;return[{requestedFloorPrice:e,floorPriceInformation:{floorPrices:t.map((({requestedFloorPrice:t})=>t)),floorPriceIndexUsed:-1,floorPriceFactorBypassReason:n.FloorPriceBypassReasonEnum.BidInHand}}]}}var wi=e(6661);class Si{constructor(t,i,e,s,n){this.Cm=t,this.qm=i,this.Il=e,this._appSettings=s,this.Hm=n,this.ov=new Map,this.hv=t=>t.replace(/\s/g,"").match(/"bidder":.+?(?=",)/).toString().split('bidder":"')[1];const r=new bi(this._appSettings,this.Il.config,this.Il.services.UserManagerService,this.Cm,null),o=this._appSettings.customJsTargetingObject,h=new Jt(r,o),a=d.h.getSessionChildContainer(this.Il.config.sessionId).resolve(wi.c.ExternalPrebidJSPermutiveConfig);this.av=new Ii(h,this.qm,this.Il.services.GlobalDomUtilsService,this.Hm,this.Il.services.UserManagerService,this.Il.config,a),this.dv=new Gt(this.Il.services.UserManagerService)}request(t){const{width:i,height:e}=t.callingState,s=this.Nf(i,e);this.lv(t.lineItemRequestDataList);const n=this.uv(t.lineItemRequestDataList);return(0,P.BZ)(n)&&s?(t.lineItemRequestDataList=n,this.fv(t).then((i=>Promise.resolve(this.mv(i,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]})))):Promise.resolve({bids:[],noBids:[]})}setMacros(t){this.av.setMacros(t)}mv(t,i){const e={bids:[],noBids:[]};return t.forEach((t=>{const s=(0,_.ZN)(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=t.bidId,r=new Y.Mz,o=new f.oO({requestedFloorPrice:t.requestedFloorPrice,prebidJsBidderName:t.bidderName,requestNumber:s.historicalMetrics.requestNumber,floorPriceInformation:t.floorPriceInformation});(0,Y.E3)(s.protoLineItem.trackers,r),((0,w.QM)(t.adTagUrl)||(0,w.QM)(t.adTagXml))&&e.bids.push({bidId:n,lineItem:s,requestMetadata:o,state:i.callingState,vastTracker:r,shouldRequestWithCredentials:!1,vastTag:t.adTagXml,url:t.adTagUrl,prebidjsCPM:t.cpm,slotId:t.slotId})})),t.noBids.forEach((t=>{const i=new f.oO({requestedFloorPrice:t.requestedFloorPrice,requestNumber:s.historicalMetrics.requestNumber,prebidJsBidderName:t.bidderName,floorPriceInformation:t.floorPriceInformation});e.noBids.push({lineItem:s,requestMetadata:i,reason:t.reason})}))})),e}fv(t){const{width:i,height:e,media:s,soundValue:n}=t.callingState,r={width:i,height:e,maxAdDuration:t.maxAdDuration,videoVolume:n,hasFloatingCapability:this.Cm.hasFloatingCapability,inFloating:t.callingState.inFloating,adBreakType:t.callingState.adBreakState.adBreakType,mediaLanguage:s.mediaLanguage,mediaId:s.mediaId,isOutstreamContext:this.Cm.isOutstream,initialSoundMode:this.Cm.initialSoundMode,playbackMode:this.Cm.playbackMode,liveRampEnvelope:this.Cm.liveRampEnvelope},o=t.lineItemRequestDataList.map((i=>this.vv(i,t.maxBidPrice)));return this.av.requestHeaderBidder(o,r)}vv(t,i){const e=t.adManagerLineItem;return{availableRequests:t.maxAvailableRequests,lineItem:e.protoLineItem,maxBidPrice:i,bidderName:this.ov.get(t.adManagerLineItem).bidderName,bidderParams:this.ov.get(t.adManagerLineItem).bidderParamsJSONStringWithMacros}}uv(t){return t.filter((t=>{var i;const e=(null===(i=this.ov.get(t.adManagerLineItem))||void 0===i?void 0:i.bidderName)||"";return this.gv(e)}))}lv(t){t.map((t=>t.adManagerLineItem)).filter((t=>!this.ov.has(t))).forEach((t=>{try{const i=t.protoLineItem.prebidJsBidParamsJSONString,e=this.hv(i);this.ov.set(t,{bidderName:e,bidderParamsJSONStringWithMacros:i})}catch(i){this.yv(i,t.protoLineItem.advertiserLineItemId)}}))}yv(t,i){(0,V.n)({message:"PrebidJS_cannot_parse_bidderParams_"+i,level:V.D.WARN,exception:`${t}`,sessionId:this.Il.config.sessionId},{throttle:1,shouldSendMaxLog:!1})}Nf(t,i){return 0!==t&&0!==i||((0,V.n)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${wt.S.playerDestroyed}`,level:V.D.CRITICAL,sessionId:this.Il.config.sessionId},{throttle:5}),!1)}gv(t){return this.dv.isAdapterCallable(t)}}var Ai=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Pi{constructor(t,i){this.Il=t,this.rl=i}callCoreTam(t){return Ai(this,void 0,void 0,(function*(){const i=t.map((t=>{const i={lineItemId:t.lineItemId,code:t.coreTamCode,metadata:this.rl.trackingRequestMeta,exploration:this.Il.config.explorationMode};return this.bv(i)}));return Promise.all(i)}))}bv(t){return Ai(this,void 0,void 0,(function*(){try{const i=yield It.n.sendProtoRequest({endpoint:ht.n.endPoints.api.tam,protoRequest:n.ProtoCoreTamBidRequest,protoResponse:n.ProtoCoreTamBidResponse,requestData:t,queryParams:{[yt.Fk]:gt.g.version,[yt.cc]:ht.n.tier},shouldLogErrors:!0});return(0,w.QM)(i.errorMessage)?{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:n.ConnatixNoBidReasonEnum.RequestException}:(0,w.QM)(i.encryptedBidPrice)?{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:i,rejectReason:null}:{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:n.ConnatixNoBidReasonEnum.InvalidResponse}}catch(i){return{lineItemId:t.lineItemId,coreTamCode:t.code,coreTamBidResponse:null,rejectReason:n.ConnatixNoBidReasonEnum.RequestException}}}))}}class _i{static getTargetingFromBid(t){var i,e;return{amzniid:t.amzniid||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid),amznbid:t.amznbid||(null===(e=t.targeting)||void 0===e?void 0:e.amznbid)}}static hasTargeting(t){const i=_i.getTargetingFromBid(t);return(0,w.QM)(i.amzniid)&&(0,w.QM)(i.amznbid)}constructor(t){this.Iv=t.amznbid,this.wv=t.amzniid}get amazonBidCode(){return this.Iv}getVast(){return`${Ei.VAST_TAG_BASE_URL}?b=${this.wv}&pp=${this.Iv}&rnd=${(0,$.qs)()}`}}class xi{static hasTargetings(t){const i=xi.getTargetingsFromBid(t);return(0,P.BZ)(i)}static getTargetingsFromBid(t){const i=xi.getDeals(t);return(0,P.BZ)(i)?i.map((i=>{const e=`${i}amzniid`;return{targetingDeal:i,targetingKey:e,targetingValue:t.targeting[e]}})).filter((t=>(0,w.QM)(t.targetingValue))):[]}static getDeals(t){var i;return t.amzndeals||(null===(i=t.targeting)||void 0===i?void 0:i.amzndeals)}constructor(t){this.Sv=t.targetingDeal,this.Pv=t.targetingKey,this._v=t.targetingValue}get targetingDeal(){return this.Sv}get targetingKey(){return this.Pv}get targetingValue(){return this._v}getVast(){return`${Ei.VAST_TAG_BASE_URL}?b=${this._v}&rnd=${(0,$.qs)()}`}}class Ti{static getTargetingFromBid(t){var i,e;return{amzniid_sp:t.amzniid_sp||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid_sp),amznbid_sp:t.amznbid_sp||(null===(e=t.targeting)||void 0===e?void 0:e.amznbid_sp)}}static hasTargeting(t){const i=Ti.getTargetingFromBid(t);return(0,w.QM)(i.amzniid_sp)&&(0,w.QM)(i.amznbid_sp)}constructor(t){this.Iv=t.amznbid_sp,this.wv=t.amzniid_sp}get amazonBidCode(){return this.Iv}getVast(){return`${Ei.VAST_TAG_BASE_URL}?b=${this.wv}&rnd=${(0,$.qs)()}`}}class ki{static createObjects(t,i){const e=[];switch(t.creativeType){case n.ProtoCreativeTypeEnum.Tam:if(_i.hasTargeting(i)){const t=_i.getTargetingFromBid(i);e.push(new _i(t))}break;case n.ProtoCreativeTypeEnum.TamDeal:if(xi.hasTargetings(i)){const s=xi.getTargetingsFromBid(i).filter((i=>i.targetingDeal===t.amazonDealId)).map((t=>new xi(t)));e.push(...s)}break;case n.ProtoCreativeTypeEnum.TamPrivateAuction:if(Ti.hasTargeting(i)){const t=Ti.getTargetingFromBid(i);e.push(new Ti(t))}}return e}}class Ci{constructor(t,i){this.xv=t,this.Cd=[],i.forEach((t=>{const i=ki.createObjects(this.xv,t);this.Cd.push(...i)}))}get amazonBidList(){return this.Cd}get lineItem(){return this.xv}get hasCoreTamDependency(){return this.Cd.every((t=>(0,w.QM)(t.amazonBidCode)))}}var Ei,Mi=e(9022),Li=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Bi{constructor(t,i,e,s,n,r){this.Il=t,this.Tv=i,this.kv=e,this.Oi=s,this.Di=n,this.rl=r;const o=this.Il.config.topWindow;this.Cv=(0,$.pE)(o).topFrame}requestBids(t){return this.Ev(t)}Ev(t){return Li(this,void 0,void 0,(function*(){try{yield this.Mv();const i=yield this.Bv(),e=this.Rv(t,i),s=yield this.Ov(e);return this.Dv(e,s)}catch(i){return this.Vv(t,i)}}))}Vv(t,i){return i.message?t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:n.ConnatixNoBidReasonEnum.CsRequestException}]}))):t.map((t=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:i}]})))}Dv(t,i){return t.map((t=>{const e=i.filter((i=>t.lineItem.advertiserLineItemId===i.lineItemId));return this.Fv(t,e)}))}Fv(t,i){return t.hasCoreTamDependency?this.Nv(t,i):this.$v(t)}$v(t){const i=t.amazonBidList.map((i=>({encryptedPrice:null,vastTag:i.getVast(),ofskp:(0,_.pd)(t.lineItem.floorPrice),successRate:t.lineItem.successRate,slotId:(0,_.aW)()})));return(0,P.BZ)(i)?{bids:i,lineItemId:t.lineItem.advertiserLineItemId,noBids:[]}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:n.ConnatixNoBidReasonEnum.NoBid}]}}Nv(t,i){const e=i.map((i=>this.Uv(t,i))).filter((t=>t.amazonBid&&!(0,w.Cz)(t.coreTamRequestOutput.rejectReason,n.ConnatixNoBidReasonEnum))).map((t=>({encryptedPrice:t.coreTamRequestOutput.coreTamBidResponse.encryptedBidPrice,vastTag:t.amazonBid.getVast(),ofskp:t.coreTamRequestOutput.coreTamBidResponse.ofskp,successRate:t.coreTamRequestOutput.coreTamBidResponse.successRate,slotId:(0,_.aW)()}))),s=i.filter((t=>t.rejectReason)).map((t=>({reason:t.rejectReason})));return(0,P.BZ)(e)||(0,P.BZ)(s)?{bids:e,noBids:s,lineItemId:t.lineItem.advertiserLineItemId}:{bids:[],lineItemId:t.lineItem.advertiserLineItemId,noBids:[{reason:n.ConnatixNoBidReasonEnum.NoBid}]}}Uv(t,i){return{coreTamRequestOutput:i,amazonBid:t.amazonBidList.find((t=>t.amazonBidCode===i.coreTamCode))}}Ov(t){return Li(this,void 0,void 0,(function*(){const i=t.reduce(this.qv,[]);return this.Hv(i)}))}qv(t,i){return[...t,...i.amazonBidList.filter((t=>t.amazonBidCode)).map((t=>({lineItemId:i.lineItem.advertiserLineItemId,coreTamCode:t.amazonBidCode})))]}Rv(t,i){return t.map((t=>new Ci(t,i)))}Hv(t){return this.kv.callCoreTam(t)}Bv(){return new Promise(((t,i)=>{(0,w.$K)(this.zv)?this.zv.fetchBids({slots:[{slotID:this.Tv,mediaType:Ei.MEDIA_TYPE}]},(e=>{(0,P.BZ)(e)?t(e):i(n.ConnatixNoBidReasonEnum.EmptyResponse)})):i(n.ConnatixNoBidReasonEnum.NoLibInPage)}))}Mv(){return Li(this,void 0,void 0,(function*(){if(!(0,w.$K)(this.zv)){if((0,w.QM)(this.rl.amazonTamPubId)){const t=yield this.Wv();return this.zv=t,void this.zv.init({pubID:this.rl.amazonTamPubId,deals:!0})}this.zv=this.Cv[Ei.SDK_NAME_ON_PUB_WINDOW]}}))}Wv(){const t=new Ft.o(this.Oi,this.Di);return new Promise(((i,e)=>{t.loadIframe({customHead:"<style> html, body {display: none}</style>",customHtml:`<script id='cnx-apstag-loader' type='text/javascript' src='${ht.n.endPoints.assets.plugins.apstagScript}'><\/script>`,customIframeAttributes:[{key:"class",value:"cnx-apstag-loader"}],container:this.Oi.querySelector("head"),visible:!1,title:Mi.$b}).then((t=>{if(t.iframe.contentWindow[Ei.SDK_NAME_ON_PUB_WINDOW])return i(t.iframe.contentWindow[Ei.SDK_NAME_ON_PUB_WINDOW]);e(new Error("Amazon TAM not found"))})).catch((t=>{e(t)}))}))}}!function(t){t.SDK_NAME_ON_PUB_WINDOW="apstag",t.MEDIA_TYPE="video",t.VAST_TAG_BASE_URL="https://aax.amazon-adsystem.com/e/dtb/vast"}(Ei||(Ei={}));class Ri{constructor(t,i,e){this.Il=t,this.Gv=i,this.rl=e,this.Xv=new Bi(this.Il,this.Gv,new Pi(this.Il,this.rl),this.Il.services.GlobalDomUtilsService,this.Il.config.sessionId,this.rl)}request(t){const{width:i,height:e}=t.callingState;return this.Nf(i,e)?this.Jv(t).then((i=>Promise.resolve(this.Qv(i,t)))).catch((()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}Jv(t){const i=t.lineItemRequestDataList.map((t=>t.adManagerLineItem.protoLineItem));return this.Xv.requestBids(i)}Qv(t,i){const e={bids:[],noBids:[]};return t.forEach((t=>{const s=(0,_.ZN)(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach((t=>{const n=new Y.Mz,r=new f.oO({encryptedPrice:t.encryptedPrice,requestNumber:s.historicalMetrics.requestNumber});(0,Y.E3)(s.protoLineItem.trackers,n),e.bids.push({requestMetadata:r,vastTracker:n,lineItem:s,url:t.vastTag,state:i.callingState,successRate:t.successRate,obfuscatedPrice:t.ofskp,shouldRequestWithCredentials:!1,slotId:t.slotId})})),t.noBids.forEach((t=>{e.noBids.push({lineItem:s,requestMetadata:new f.oO({requestNumber:s.historicalMetrics.requestNumber}),reason:t.reason})}))})),e}Nf(t,i){return 0!==t&&0!==i||((0,V.n)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${wt.S.playerDestroyed}`,level:V.D.CRITICAL,sessionId:this.Il.config.sessionId},{throttle:5}),!1)}}var Oi=e(4360);class Di{}Di.SHOULD_CALL_WITH_CREDENTIALS_DEFAULT=!0,Di.MIN_VAST_VERSION=2,Di.DEFAULT_MAX_WRAPPER_LIMIT=10;class Vi{}Vi.AD_TAG_DUMMY_PREFIX="https://adx.connatix.com",Vi.IMA_URL_PART=".g.doubleclick.net";var Fi=e(2857),Ni=e(2321),ji=e(6210),$i=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Ui{static getHlsModule(t,i){return $i(this,void 0,void 0,(function*(){let e=null;if((0,w.QM)(i)&&(e=yield(0,Fi.zJ)(t),!e))throw new Error(ut.f.NetworkRequestUrl);return e}))}static getAdUnitPath(t){return t.slice(Vi.AD_TAG_DUMMY_PREFIX.length)}static isImaLineItem(t){if(ji._.includes(t.protoLineItem.advertiserLineItemId))return!0;const i=t.protoLineItem.adTag;return!(!(0,w.$K)(i)||(0,w.Ft)(i))&&Ui.isImaUrl(i)}static isImaUrl(t){return t.includes(Vi.IMA_URL_PART)}static getFinalUrl(t,i,e,s){let n=t;try{const t=i.callingState.adContainerState.get(i.adManagerLineItem.protoLineItem.adType);(0,w.$K)(t)&&(n=Ui.Yv(n,e,t,i),n=s.appendParams(n,t))}catch(t){throw new Error(ut.f.InvalidCreativeUrl)}return n}static setVastInfo(t,i,e){(0,Y.Vx)(t,i.vastTracker),e.push(t)}static isValidHtmlMimeType(t){return Object.values(s.ZJ).some((i=>i===t))}static isVideoAd(t){const{protoLineItem:i}=t.adManagerLineItem;return i.adType===n.ProtoAdType.Video}static isNonlinearVideoAd(t){var i;const{protoLineItem:e}=t.adManagerLineItem;return e.adType===n.ProtoAdType.Nonlinear&&(null===(i=e.nonlinearLineItemSettings)||void 0===i?void 0:i.nonLinearRequestType)===n.ProtoNonlinearRequestType.Video}static haveExpectedAdType(t,i){const e=new Ni.GU(t),{mediaFiles:s,nonLinearFiles:r}=e;return i===n.ProtoAdType.Video&&(0,P.BZ)(s)||i===n.ProtoAdType.Nonlinear&&(0,P.BZ)(r)}static notifyBidFetchStart(t,i){t.onBidFetchStart.next(i),i.adManagerLineItem.bidsInFetch.add(i.bidId)}static notifyBidFetchEnd(t,i){t.onBidFetchEnd.next(i),i.adManagerLineItem.bidsInFetch.delete(i.bidId)}static Yv(t,i,e,s){const n={adHeight:e.height,adWidth:e.width,adPostion:s.callingState.adBreakState.adBreakType},r={mediaDescription:s.callingState.media.mediaDescription,mediaDuration:s.callingState.media.mediaDuration,mediaId:s.callingState.media.mediaId,mediaTitle:s.callingState.media.mediaTitle,mediaUrl:s.callingState.media.mediaUrl};return i.replace(t,s.adManagerLineItem.protoLineItem.vendorId,{adMacros:n,mediaMacros:r})}}var qi,Hi=e(3714),zi=e(8090),Wi=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Gi{constructor(t){this.Kv=t}fetchBid(t){return Wi(this,void 0,void 0,(function*(){const i=this.Zv(t),e={bidPrice:i.price,bidId:i.bidId,yoScore:i.yoScore,isIma:i.isIma,encryptedPrice:t.requestMetadata.data.encryptedPrice,adManagerLineItem:t.lineItem};let s;try{Ui.notifyBidFetchStart(this.Kv.adEvents,e),s=yield this.tg(t,i)}catch(t){throw(0,$.W$)(t)}finally{Ui.notifyBidFetchEnd(this.Kv.adEvents,e)}return s.shouldBeDiscarded=e.shouldBeDiscarded,this.ig(t.lineItem.protoLineItem.publisherLineItemId),s}))}tg(t,i){return Wi(this,void 0,void 0,(function*(){const e=t.url||i.adManagerLineItem.protoLineItem.adTag||"",s=t.vastTag;switch(t.lineItem.protoLineItem.creativeType){case n.ProtoCreativeTypeEnum.External:case n.ProtoCreativeTypeEnum.ThirdParty:return t.lineItem.protoLineItem.adType===n.ProtoAdType.Overlay?this.eg(i):this.sg(e,i,t);case n.ProtoCreativeTypeEnum.MediaFile:return this.ng(i);case n.ProtoCreativeTypeEnum.Rtb:return this.rg(i,t);case n.ProtoCreativeTypeEnum.HeaderBidder:return(0,w.QM)(s)?this.hg(s,i,t):this.sg(e,i,t);case n.ProtoCreativeTypeEnum.Tam:case n.ProtoCreativeTypeEnum.TamDeal:case n.ProtoCreativeTypeEnum.TamPrivateAuction:return this.sg(e,i,t);default:throw new Error(ut.f.InvalidCreativeType)}}))}Zv(t){const{lineItem:i,obfuscatedPrice:e,vastTracker:s,state:n,requestMetadata:r,prebidjsCPM:o,slotId:h,bidId:a,creativeId:c}=t,{globalDomUtilsService:d,viewabilityService:l,adEnforcer:u,os:p,adSlotContainerRecycler:f,urlSuffixerService:m,sessionId:v}=this.Kv,{creativeType:g,advertiserLineItemId:y,floorPrice:b,customCpm:I,adxFloorPricePredictionList:S,adType:A,lineItemPriority:x}=i.protoLineItem,T=(0,P.BZ)(S)?(0,_.RC)(S[0].floorPriceObfuscated):0;let k=O.sL.getBidPriceByCreative(g,{floorPrice:b,adxFloorPrice:T,customCpm:I,obfuscatedPrice:e,prebidjsCPM:o});(0,w.r)(k)||((0,V.n)({message:"AdManager_BidFactory_no_cpm_on_bid",level:V.D.ERROR},{throttle:1,shouldSendMaxLog:!1}),k=0);const C=this.Kv.yoScoreCalculator.calculateBidYoScore(y,{priority:x,cpm:k}),E=this.Kv.adContainerMap.get(A);if(!(0,w.$K)(E))throw new Error("AdManager_BidFactory_adContainer_is_undefined");return{adxFloorPricePredictionList:S,adContainer:E,requestMetadata:r,globalDomUtilsService:d,viewabilityService:l,adEnforcer:u,os:p,adSlotContainerRecycler:f,urlSuffixerService:m,sessionId:v,yoScore:C,price:k,vastTracker:s,cpm:o||b||I,adManagerLineItem:i,callingState:n,externalCreativeId:c,bidId:a||(0,$.qs)(),bidSlotId:h||(0,_.aW)(),isIma:Ui.isImaLineItem(i)}}ag(t,i){const{mime:e,html:s,dimensions:n}=i;if(!(0,w.$K)(e)||!(0,w.$K)(s)||!(0,w.$K)(n))throw new Error(ut.f.HTMLNotEnoughData);if(!Ui.isValidHtmlMimeType(e))throw new Error(ut.f.HTMLUnknownMimeType);return new Oi.EM(this.Kv.timerService,Object.assign(Object.assign({},t),{html:s,mime:e,dimensions:n}))}ng(t){return Wi(this,void 0,void 0,(function*(){return new Oi.Kz(this.Kv.timerService,Object.assign(Object.assign({},t),{hlsModule:yield Ui.getHlsModule(this.Kv.globalDomUtilsService.global,t.adManagerLineItem.protoLineItem.externalHlsFile),mediaId:t.adManagerLineItem.protoLineItem.mediaCreativeId,renditions:t.adManagerLineItem.protoLineItem.renditions,clickUrl:t.adManagerLineItem.protoLineItem.mediaCreativeClickUrl,externalMediaFile:t.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:t.adManagerLineItem.protoLineItem.externalHlsFile,shouldPauseAdWhenFinished:this.Kv.shouldPauseAdWhenFinished,shouldLoopAdWhenFinished:this.Kv.shouldLoopAdWhenFinished,isInApp:this.Kv.isInApp,pageDomain:this.Kv.pageDomain}))}))}eg(t){return new Oi.pe(this.Kv.timerService,Object.assign(Object.assign({},t),{adxAdUnitPath:Ui.getAdUnitPath(t.adManagerLineItem.protoLineItem.adTag),domain:this.Kv.pageDomain}))}sg(t,i,e,s){return Wi(this,void 0,void 0,(function*(){const r=Ui.getFinalUrl(t,i,this.Kv.adMacroReplacer,this.Kv.imaVastUrlBuilderService),o=Ui.isImaUrl(r);if(i.isIma||o){if(i.adManagerLineItem.protoLineItem.adType!==n.ProtoAdType.Nonlinear)return this.cg(i,{url:r});(0,V.n)({message:"AdManager_BidFactory_found_ima_in_nonLinear",level:V.D.INFO,sessionId:i.sessionId})}return this.dg(r,i,e,s)}))}cg(t,i){return Wi(this,void 0,void 0,(function*(){const e=(0,w.$K)(i.url)?i.url:"",s=(0,w.$K)(i.xml)?i.xml:"",n=d.h.getSessionChildContainer(t.sessionId).resolve(et.P);return n.isImaTestCaseForSS()||n.isMarriageDotComDomain()||n.isDailykosDotComDomain()?this.ug(e,s,t):this.pg(e,s,t)}))}ug(t,i,e){return new Oi.O5(this.Kv.timerService,Object.assign(Object.assign({},e),{pageUrl:this.Kv.pageUrl,url:t,xml:i,vastAd:i}))}pg(t,i,e){return Wi(this,void 0,void 0,(function*(){const s=this.Kv.adSlotContainerRecycler.requestAdSlotIma(e.adContainer),n={url:t,xml:i,pageUrl:this.Kv.pageUrl,sessionId:e.sessionId,adContainerState:e.callingState.adContainerState,advertiserLineItemId:e.adManagerLineItem.protoLineItem.advertiserLineItemId,adType:e.adManagerLineItem.protoLineItem.adType,adSlotContainerRecycler:e.adSlotContainerRecycler,adxFloorPricePredictionList:e.adxFloorPricePredictionList};let r;const o=new Hi.T2(s,n);try{r=yield o.getImaAdModule()}catch(t){throw(0,$.W$)(t)}return new Oi.f1(this.Kv.timerService,Object.assign(Object.assign({},e),{imaSdk:r.imaSdk,imaAdsLoader:r.imaAdsLoader,imaAdsManager:r.imaAdsManager,requestAdsContext:r.requestAdsContext,pageUrl:this.Kv.pageUrl,imaAdSlotContainer:s,url:t,vastAd:i||t}))}))}dg(t,i,e,s){return Wi(this,void 0,void 0,(function*(){const n=(0,w.$K)(e.shouldRequestWithCredentials)?e.shouldRequestWithCredentials:Di.SHOULD_CALL_WITH_CREDENTIALS_DEFAULT;let r="";try{r=yield It.n.fetchXMLRequest(t,n)}catch(t){if(!1===n)throw new zi.RA({hasError:!0,errorReason:ut.f.NetworkRequestUrl,vastErrorCode:zi.Oq.WrapperVastUriTimeout})}if(!(0,w.QM)(r)){try{r=yield It.n.fetchXMLRequest(t,!1)}catch(t){throw new zi.RA({hasError:!0,errorReason:ut.f.NetworkRequestUrl,vastErrorCode:zi.Oq.WrapperVastUriTimeout})}if(!(0,w.QM)(r))throw new zi.RA({hasError:!0,errorReason:ut.f.XmlInvalidString,vastErrorCode:zi.Oq.NoVastResponseAfterWrapper})}return this.hg(r,i,e,s)}))}hg(t,i,e,s){return Wi(this,void 0,void 0,(function*(){const r=new zi.H3(Di.MIN_VAST_VERSION).parseVastXml(t);if(!0===r.hasError){const{errorReason:t,vastErrorCode:i,errorUrlTrackers:e}=r;throw new zi.RA({hasError:!0,errorUrlTrackers:e,errorReason:t,vastErrorCode:i})}const o=(0,w.$K)(s)?s.vastAdsChain:[];if(Ui.setVastInfo(r.result,i,o),r.result.wrapper){const t=(0,w.$K)(s)?s.maxWrapperLimit:Di.DEFAULT_MAX_WRAPPER_LIMIT;if(t<=0)throw new zi.RA({hasError:!0,errorReason:ut.f.XmlAdaptorWrapperLimit,vastErrorCode:zi.Oq.WrapperLimitReached});return this.sg(r.result.wrapper.VASTAdTagURI,i,e,{vastAdsChain:o,maxWrapperLimit:t-1})}const{adType:h}=i.adManagerLineItem.protoLineItem;if(!Ui.haveExpectedAdType(o,h))throw new zi.RA({hasError:!0,errorReason:ut.f.InvalidCreativeType,vastErrorCode:zi.Oq.ExpectingDifferentLinearity});return h===n.ProtoAdType.Nonlinear?new Oi.pr(this.Kv.timerService,Object.assign(Object.assign({},i),{vastResponse:new zi.GU(o)})):new Oi.SI(this.Kv.timerService,Object.assign(Object.assign({},i),{vastResponse:new zi.GU(o),shouldLoopAdWhenFinished:this.Kv.shouldLoopAdWhenFinished,adMacroReplacer:this.Kv.adMacroReplacer,vastAd:t}))}))}rg(t,i){return Wi(this,void 0,void 0,(function*(){const e=Ui.isVideoAd(t),s=Ui.isNonlinearVideoAd(t),n=t.isIma;if(e||s){if(!(0,w.$K)(i.vastTag))throw new Error(ut.f.InvalidCreativeUrl);return n?this.cg(t,{xml:i.vastTag}):this.hg(i.vastTag,t,i)}return this.ag(t,i)}))}ig(t){const i="8f47f6ee-f18a-4fc9-ad3f-b9059a70c096";if(![i,"c74e47f4-efbc-47ab-99ce-752cb267d2b2"].includes(t))return;const e=t===i?"Preroll_Recirc_Video_GPT_Tag":"Midroll_Recirc_Video_GPT_Tag";(0,$.Vm)([99,1])&&(0,V.n)({message:`MNY-1684--${e}--${t}`,level:V.D.INFO,exception:t})}}!function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.STOPPING=2]="STOPPING"}(qi||(qi={}));class Xi{constructor(t){this.fg=t,this.vg=qi.IDLE,this.gg=Promise.resolve()}start(){(this.vg===qi.IDLE||this.vg===qi.STOPPING)&&(this.vg=qi.RUNNING,this.yg())}stop(){this.vg=qi.STOPPING}setPromiseNotifier(t){return this.bg=t,this}setIdleNotifier(t){return this.wg=t,this}getState(){return this.vg}Sg(){const t=this.fg();void 0!==t?this.gg=t.then((t=>{this.bg&&this.bg(t)})).then((()=>{this.vg===qi.STOPPING&&(this.vg=qi.IDLE)})):this.vg=qi.IDLE}yg(){this.vg===qi.IDLE?this.wg&&this.wg():this.vg===qi.RUNNING&&(this.Sg(),this.gg.then((()=>{this.yg()})))}}class Ji{constructor(t,i=1){this.fg=t,this.Ag=i,this.Pg=[],this._g(i)}start(){return this.Pg.forEach((t=>{t.start()})),this}stop(){return this.Pg.forEach((t=>{t.stop()})),this}setPromiseNotifier(t){return this.Pg.forEach((i=>{i.setPromiseNotifier(t)})),this}setAllThreadsIdleNotifier(t){return this.xg=t,this.Tg(),this}setNumberOfThreads(t){if(t<=0)return;this.Ag=t;const i=t-this.Ag;i>0?this._g(i):i<0&&this.kg(i)}getState(){return this.Pg.reduce(((t,i)=>(t[i.getState()]++,t)),{[qi.IDLE]:0,[qi.RUNNING]:0,[qi.STOPPING]:0})}_g(t){for(let i=0;i<t;i++){const t=new Xi(this.fg).setPromiseNotifier(this.bg);this.Pg.push(t)}}kg(t){t=Math.min(t,this.Pg.length);for(let i=0;i<t;i++)this.Pg.pop().stop()}Tg(){const t=()=>{this.getState()[qi.IDLE]===this.Pg.length&&this.xg()};this.Pg.forEach((i=>{i.setIdleNotifier(t)}))}}var Qi=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Yi{constructor(t,i){this.settings=t,this.tf=i,this.Cg=new Map,this.be=[],this.Eg=!1,this.Mg=new o.x,this.Bg=new o.x,this.vd=new o.x,this.Rg=new o.x,this.Og=()=>{const t=this.Dg();if(t)return this.Mg.next(t.lineItemList),this.Vg(t.lineItemList,t.state).then((()=>{this.Bg.next(t.lineItemList),this.Fg()})).catch((()=>{this.Bg.next(t.lineItemList),this.Fg()}));this.settings.auctionManager.onNothingToCall()},this.settings.adSelector.getAllLineItems().forEach((t=>{t.hasAggregator?t.protoLineItem.timeBetweenRequests=10:t.protoLineItem.timeBetweenRequests=6})),this.be.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe((()=>{this.jg()})),this.settings.adSelector.getBidEvents(A.Sb.ON_BID_LOADING).subscribe((()=>{this.jg()})),this.settings.adSelector.getBidEvents(A.Sb.ON_BID_LOADING_CONSUMED).subscribe((()=>{this.jg()})),this.settings.adSelector.getBidEvents(A.Sb.ON_BID_LOADED_CONSUMED).subscribe((()=>{this.jg()}))),this.$g=new Ji(this.Og,5),this.Ug=new O.H1(this.settings.generalRepository,this.settings.app.services.UserManagerService);const e=d.h.getGlobalContainer().resolve(b.f);this.qg=new Gi({globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,viewabilityService:this.settings.app.services.ViewabilityService,timerService:e,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,yoScoreCalculator:this.settings.yoScoreCalculator,urlSuffixerService:this.settings.app.services.UrlSuffixerService,interactionService:this.settings.app.services.InteractionService,sessionId:this.settings.app.config.sessionId,pageUrl:this.settings.app.config.pageUrl,pageDomain:this.settings.app.config.pageDomain,adContainerMap:this.settings.adContainerMap,shouldPauseAdWhenFinished:this.settings.pauseAdWhenFinished,shouldLoopAdWhenFinished:this.settings.loopAdWhenFinished,isInApp:this.settings.app.config.isInApp,adEvents:this.tf,adMacroReplacer:this.settings.adMacroReplacer,imaVastUrlBuilderService:this.Ug}),this.settings.adSelector.hasAggregatorType(ft.t.Rtb)&&this.Cg.set(ft.t.Rtb,{auctionPending:!1,caller:new xt(this.settings.playerData.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.generalRepository,this.settings.adRequestGatekeeper,this.settings.lineItemAbTestInformation)}),this.settings.adSelector.hasAggregatorType(ft.t.HeaderBidder)&&this.Cg.set(ft.t.HeaderBidder,{auctionPending:!1,caller:new Si(this.settings.playerData,this.settings.schainSettings,this.settings.app,this.settings.appSettings,this.settings.skipAdSettings)}),this.settings.adSelector.hasAggregatorType(ft.t.Tam)&&this.Cg.set(ft.t.Tam,{auctionPending:!1,caller:new Ri(this.settings.app,this.settings.amazonSlotId,this.settings.generalRepository)}),this.$g.setAllThreadsIdleNotifier((()=>{this.settings.lineItemServices.lineItemServicesTimer.start()}))}get onLineItemsRequestStart(){return this.Mg.asObservable()}get onLineItemsRequestEnd(){return this.Bg.asObservable()}get onBid(){return this.vd.asObservable()}get onFirstAggregatedBatchFinished(){return this.Rg.asObservable()}call(t){this.$g.setNumberOfThreads(t.maxParallelCalls),this.Hg=t,this.Eg=!0,this.jg()}stop(){this.Eg=!1,this.$g.stop()}setMacros(t){const i=this.Cg.get(ft.t.HeaderBidder);i&&i.caller.setMacros(t)}destroy(){this.stop(),this.settings.callingValidationAggregator.destroy(),(0,a.i)(this.be)}Fg(){let t=!0;this.Cg.forEach((i=>{i.auctionPending&&(t=!1)})),t&&this.Rg.next()}jg(){this.Eg&&this.$g.start()}Dg(){const t=this.Hg.stateSettings.currentState||this.Hg.stateSettings.predictedState;if(!t)return void(0,V.n)({message:"AdCallerController_no_state",level:V.D.INFO},{throttle:10,shouldSendMaxLog:!1});const i=this.settings.adSelector.getAllCallableLineItems(t),e=this.settings.adSelector.getBestCallableLineItem(i,t);return e||void 0}Vg(t,i){return t[0].hasAggregator?this.zg(t,i):this.Wg(t[0],i)}Xg(t,i,e){if((0,w.$K)(e))return e;const s=this.Jg(t),n=new f.oO(s),r=new Y.Mz,o={lineItem:t,vastTracker:r,requestMetadata:n,state:i};return(0,Y.E3)(t.protoLineItem.trackers,r),o}Wg(t,i,e){return Qi(this,void 0,void 0,(function*(){const s=Date.now(),r=this.Xg(t,i,e);(0,w.$K)(e)||this.Yg(t);let o=null;try{o=yield this.qg.fetchBid(r),this.Kg(o,s)}catch(e){const o=null==e?void 0:e.vastErrorCode,h=null==e?void 0:e.vastErrorTrackers,a=pt[e.message]?pt[e.message]:n.ConnatixNoBidReasonEnum.RequestException;this.Zg(i,t,a,r.requestMetadata,r.vastTracker,Date.now()-s,ut.f[e.message],o,h)}}))}Jg(t){let i={requestNumber:t.historicalMetrics.requestNumber};const{adxFloorPricePredictionList:e}=t.protoLineItem;if(e&&(0,P.BZ)(e)){const t=e[0],{predictedPriceObfuscated:s,floorPriceObfuscated:n}=t,r=(0,_.RC)(s),o=(0,_.RC)(n);i=Object.assign(Object.assign({},i),{floorPriceInformation:{adxPredictedFloorPrice:r},requestedFloorPrice:o})}return i}Yg(t){this.settings.callingValidationAggregator.registerRequestForLineItem(t,this.ty()),t.historicalMetrics.requestNumber++}Kg(t,i){try{this.iy(t,Date.now()-i)}catch(t){(0,V.n)({message:"AdManager_AdCallerController_handleBidFactoryRequestSuccess",exception:t.message,callStack:t.stack,level:V.D.CRITICAL},{throttle:5})}}zg(t,i){const e=this.Cg.get(mt.TF[t[0].protoLineItem.creativeType]);t.forEach((t=>t.aggregators.add(e.caller))),e.auctionPending=!0;const s={lineItemRequestDataList:t.map((t=>({adManagerLineItem:t,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(t,this.ty())}))),callingState:i,maxAdDuration:i.adBreakState.maxAdDuration,maxBidPrice:this.settings.adSelector.getBestAllowedBidPrice(i)};return this.ey(e,s,t,i)}ey(t,i,e,s){return t.caller.request(i).then((i=>{i.bids.length||i.noBids.length||e.forEach((t=>{this.Yg(t)})),e.forEach((i=>{i.aggregators.delete(t.caller),i.historicalMetrics.requestNumber++})),i.noBids.forEach((t=>{this.settings.callingValidationAggregator.registerRequestForLineItem(t.lineItem,this.ty()),this.Zg(s,t.lineItem,t.reason,t.requestMetadata)}));const n=i.bids.map((t=>(this.settings.callingValidationAggregator.registerRequestForLineItem(t.lineItem,this.ty()),this.Wg(t.lineItem,t.state,t))));return Promise.all(n)})).finally((()=>{t.auctionPending=!1}))}iy(t,i){if(t.shouldBeDiscarded)return;const e=t.settings.adManagerLineItem,s=t.settings.requestMetadata,n=t.settings.requestMetadata.data.floorPriceInformation;let r={shouldTrackBid:!t.settings.requestMetadata.data.requestTrackingHandledByServer,advertiserLineItemId:e.protoLineItem.advertiserLineItemId,publisherLineItemId:e.protoLineItem.publisherLineItemId,impressionTrackers:t.settings.vastTracker.adImpression};r.shouldTrackBid&&(r=Object.assign(Object.assign({},r),{requestedFloorPrice:s.data.requestedFloorPrice,requestsCount:s.data.requestNumber,isUserSynced:s.data.isUserSynced,prebidJsBidderName:s.data.prebidJsBidderName,customClientPrice:t.settings.cpm,timeSpentMs:i,rtbDspId:s.data.dspId,encryptedPrice:s.data.encryptedPrice,rtbADomain:s.data.rtbAdomain,rtbCreativeId:t.creativeId,rtbSeatId:s.data.rtbSeatId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,floorPriceInformation:n?W.wE.fromProtoFloorPriceInformation(n):void 0,dynamicElkFields:{1:`${At.n.getConnectionType(this.settings.app.config.deviceType)}`,2:vt.f.getCidForElkTracking()}})),this.tf.adBid.next(r),this.settings.adRequestGatekeeper.addBid(e.protoLineItem.advertiserLineItemId,s.data.requestedFloorPrice),F.ld.isBidTargetingAllowedEverInSession(t,t.settings.callingState)?this.vd.next(t):this.settings.auctionInfoLogging.bidIsNotWinnableEverInSession(t)}Zg(t,i,e,s,n,r,o,h,a=[]){const c=[...(null==n?void 0:n.adError)||[],...a];if((0,P.BZ)(c)&&Y.Mz.trackError(c,this.settings.adMacroReplacer,i.protoLineItem,t,h),!s.data.requestTrackingHandledByServer){const t=s.data.floorPriceInformation,n={advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,partnerCustomHeaders:s.data.partnerCustomHeaders,partnerReason:W.EN.fromProtoPrebidPartnerReason(s.data.partnerReason),requestedFloorPrice:s.data.requestedFloorPrice,requestsCount:s.data.requestNumber,isUserSynced:s.data.isUserSynced,prebidJsBidderName:s.data.prebidJsBidderName,playerReason:W.EN.fromProtoPrebidReason(e),timeSpentMs:r,floorPriceInformation:t?W.wE.fromProtoFloorPriceInformation(t):void 0,dynamicElkFields:{1:`${At.n.getConnectionType(this.settings.app.config.deviceType)}`,2:vt.f.getCidForElkTracking()}};this.tf.adPrebid.next(n)}this.settings.adRequestGatekeeper.addPrebid(i.protoLineItem.advertiserLineItemId)}ty(){return(this.Hg.stateSettings.currentState||this.Hg.stateSettings.predictedState).adOpportunity.id}}var Ki=e(5788);class Zi{constructor(t,i,e,s){this.sy=t,this.ny=i,this.oy=e,this.ha=s,this.hy=new o.x,this.ly=new Map,this.uy=[],this.forceTriggerUpdateState=()=>{this.uy.forEach((t=>this.py(t)))},this.py=(t,i)=>{this.ly.set(t,this.my(this.ny.get(t),i))},this.vy=t=>{this.gy([n.ProtoAdType.Video],t)},this.yy=t=>{this.gy([n.ProtoAdType.Overlay],t)},this.by=t=>{this.gy([n.ProtoAdType.Nonlinear],t)},this.Sy=()=>{this.gy(this.uy)},this.gy=(t,i)=>{t.forEach((t=>this.py(t,i))),this.hy.next()},this.Ay={[n.ProtoAdType.Video]:this.vy,[n.ProtoAdType.Overlay]:this.yy,[n.ProtoAdType.Nonlinear]:this.by},this.uy=[...this.ny.keys()],this.uy.forEach((t=>this.py(t))),this.Py()}get onContainerStateUpdate(){return this.hy.asObservable()}getContainerMap(){return this.ny}getContainerStateMap(){return this.ly}getMainContainer(){return this.ny.get(this.sy)}getMainContainerState(){return this.getContainerStateMap().get(this.sy)}destroy(){this.ny.forEach(((t,i)=>{this.oy.off(t,this.Sy),this.ha.off(t,this.Ay[i])}))}Py(){this.ny.forEach(((t,i)=>{this.oy.on(t,this.Sy),this.ha.on(t,this.Ay[i],{threshold:Ki.fJ})}))}my(t,i){let e=i;return void 0===e&&(e=this.ha.check({element:t,threshold:Ki.fJ})),{width:t.clientWidth,height:t.clientHeight,viewability:e}}}var te,ie=e(7689),ee=e(3816),se=e(1310);!function(t){t[t.Prebid=1]="Prebid",t[t.Amazon=2]="Amazon",t[t.Google=3]="Google",t[t.OpenRTB=4]="OpenRTB"}(te||(te={}));var ne=e(5968);class re{constructor(t,i){this.mo=t,this.tf=i,this._y=!1,this.rc=void 0,this.xy=!1,this.Ty=[],this.be=[],this.sf=!1,this.ky=new o.x,this.Cy=new o.x,this.Ol=new o.x,this.Ey=!1,this.My=-1,this.be.push(this.mo.adSelector.getBidEvents(A.Sb.ON_BID_LOADED).subscribe((()=>{this.Ly()})),this.mo.adSelector.getBidEvents(A.Sb.ON_BID_IN_IMPRESSION).subscribe((t=>{this.By(t)})),this.mo.adSelector.getBidEvents(A.Sb.ON_BID_LOADED_CONSUMED).subscribe((t=>{t.started&&t.status!==s.wy.INVALIDATED&&this.Ry(t)})),this.mo.impressionCapsTimer.onTimer().subscribe((()=>{this.Ly()})))}get onAdSelected(){return this.ky.asObservable()}get onAdFinished(){return this.Cy.asObservable()}start(t){this.Oy=t,this._y=!0,this.Ly()}stop(){this._y=!1}destroy(){this.stop(),(0,a.i)(this.be),this.rc&&this.Dy()}get onMissedImpression(){return this.Ol.asObservable()}Ly(){var t;if(!this._y||this.xy)return;const i=this.mo.adSelector.getBestBidAllowedByStatus([s.wy.LOADED],this.Oy);if(!i)return;const e=this.rc&&F.pW.getSelectionScore(this.rc)<F.pW.getSelectionScore(i);this.rc&&this.mo.removeBidIfHigherYoScore&&e?(this.Dy(),null===(t=this.rc)||void 0===t||t.stopAd("removeStartedBid"),this.Vy(i)):this.rc||this.Vy(i)}Vy(t){this.rc=t,this.mo.internalAuctionSnapshot.takeSnapshot(this.rc,this.Oy,this.Oy.adOpportunity.timestamp),this.ky.next(t),this.Fy(),this.Ny(t),t.startAd()}Dy(){this.rc&&(this.rc=void 0,(0,a.i)(this.Ty),this.Ty=[])}Fy(){const t=this.Oy.adOpportunity;if(this.jy!==t)return this.jy=t,void(this.My=0);this.My++}By(t){this.xy&&((0,V.n)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}`,callStack:`${t.adMediaType}`,level:V.D.CRITICAL,sessionId:this.mo.sessionId},{throttle:1e3,extraLogsPercentage:5}),(0,V.n)({message:"StartedBidInImpression_bidStatusHistory",exception:`${t.adMediaType}_advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}_vastAd:${JSON.stringify(t.settings.vastAd)}`,callStack:`${JSON.stringify(t.bidStatusHistory)}`,level:V.D.INFO,sessionId:this.mo.sessionId},{throttle:1e3})),this.xy=!0,this.sf=this.lf(t.skipOffset,t.getAdDuration()),this.$y(t),this.mo.adRequestGatekeeper.addImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.obfuscatedPrice),this.mo.impressionCapsService.registerImpressionForLineItem(t.settings.adManagerLineItem,this.Oy.adOpportunity.id),this.mo.requestCapsService.restoreOneCapForLineItem(t.settings.adManagerLineItem,this.Oy.adOpportunity.id);const i=this.mo.auctionInfoLogging.onImpression(t);this.Uy(t,i)}$y(t){if(t.settings.adManagerLineItem.protoLineItem.creativeType!==n.ProtoCreativeTypeEnum.Rtb)return;const i=t.settings.adManagerLineItem.protoLineItem.vendorId;if(!Pt._.SUPPORTED_VENDORS.map((t=>t.toString())).includes(i))return;const e=Object.keys(ne.$6).find((t=>ne.$6[t]===i));d.h.getGlobalContainer().resolve(Pt._).reportExternalWin({biddingPlatformId:te.OpenRTB,partnerAuctionId:t.settings.callingState.adOpportunity.id,bidderCode:e,cpm:t.price,currency:"USD",placementId:t.settings.bidSlotId})}Ry(t){this.Hy(t),this.mo.loopAdWhenFinished?t.resumeAd():this.mo.pauseAdWhenFinished?t.pauseAd():(this.Cy.next(t),this.Dy(),this.Ly())}Hy(t){if(this.xy)return this.Ey=!1,void(this.xy=!1);if(!t.shouldTrackPostbid)return;const i=this.mo.auctionInfoLogging.onPostBid(t);this.zy(t,i)}Wy(t,i){this.Ey=!0,t.setOutOfViewAdLineItemId(i.settings.adManagerLineItem.protoLineItem.advertiserLineItemId),t.setOutOfViewAdPrice(i.price);const e=this.Gy();t.setInViewAdPrice(e);const s=(0,z.oW)(i.settings.adContainer);t.setDistanceWhenOutOfViewStarted(s.top)}Gy(){return this.mo.adSelector.getWinnableBidPricesSortedDesc()[0]||-1}Xy(){const t=this.mo.internalAuctionSnapshot.lastSnapshot,i=null==t?void 0:t.firstLoser,e=null==t?void 0:t.allLoserStatusInfo;let s,n,r;return(0,w.$K)(i)&&(s=i.lineItem,r=i.isIma,n=i.status),{firstLoser:i,bidStatus:n,highestLosingBidLineItem:s,allLoserStatusInfo:e,firstLoserIsIma:r}}Uy(t,i){var e,s,n,r,o,h,a,c,d;const{adBreakState:l}=this.Oy,u=(0,w.hj)((0,Z.oK)(t.getAdDuration(),2))?(0,Z.oK)(t.getAdDuration(),2):0,p=(0,w.hj)((0,Z.oK)(t.declaredDurationInSeconds,2))?(0,Z.oK)(t.declaredDurationInSeconds,2):0,f=u-p,m=(0,se.H8)(t.createdTimestamp),v=this.Oy.adContainerState.get(t.settings.adManagerLineItem.protoLineItem.adType).viewability;let g;if(v||this.Wy(O.a_.createRecord(this.mo.playerId),t),(0,w.$K)(this.mo.internalAuctionSnapshot.lastSnapshot)){const{winnerDemandType:t,firstLoser:i,firstOpenMarketLoser:e}=this.mo.internalAuctionSnapshot.lastSnapshot;g={winnerDemandType:t,firstLoser:i,firstOpenMarketLoser:e}}else(0,V.n)({message:"AdImpressionerController: No internal auction snapshot found",level:V.D.WARN},{throttle:1,shouldSendMaxLog:!1});const{floorPriceInformation:y,discount:b,liveRampType:I,serverBillingNoticeUrls:S}=t.settings.requestMetadata.data,A=this.Xy(),P=(0,w.$K)(A.firstLoser)?100*(t.price-A.firstLoser.customClientPrice):null,_=A.allLoserStatusInfo;let x,T;(0,w.$K)(this.mo.internalAuctionSnapshot.lastSnapshot)&&(x=this.mo.internalAuctionSnapshot.lastSnapshot.auctionEndType,T=this.mo.internalAuctionSnapshot.lastSnapshot.deltaTimestampAdStartAdOpportunity);const k={adPodSlotPosition:l.adPodSlotIndex,adSourceType:W.EN.fromProtoAdSourceType(t.adSourceType),advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:t.settings.cpm,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,rtbADomain:t.settings.requestMetadata.data.rtbAdomain,rtbCreativeId:t.creativeId,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,isUserSynced:t.settings.requestMetadata.data.isUserSynced,timeSpentMs:t.startingTimeMs,vastMediaType:t.adMediaType,rtbDspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTimeMs:null===(e=t.settings.bidLifecycle)||void 0===e?void 0:e.winToAdLoadedTime,startAdToImpressionTimeMs:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.startAdToImpressionTime,impressionDurationSeconds:f,declaredDurationSeconds:p,isExplorationMode:this.mo.explorationMode,requestsCount:t.settings.requestMetadata.data.requestNumber,requestedFloorPrice:t.settings.requestMetadata.data.requestedFloorPrice,floorPriceInformation:y?W.wE.fromProtoFloorPriceInformation(y):void 0,bidElapsedTimeSeconds:m,adBreakType:W.EN.fromProtoAdBreakType(l.adBreakType),liveRampType:I?W.EN.fromProtoLiveRamp(I):void 0,internalAuctionInformation:g?W.W1.fromProtoInternalAuction(g):void 0,auctionInformation:i?W.Ti.fromProtoAuctionInformation(i):void 0,dynamicElkFields:{1:t.settings.requestMetadata.data.rtbRequestId,2:t.settings.requestMetadata.data.auctionBidId,4:`${v}`,5:`${t.settings.adManagerLineItem.protoLineItem.viewability}`,6:`${(0,w.$K)(null===(n=A.highestLosingBidLineItem)||void 0===n?void 0:n.lineItemPriority)?null===(r=A.highestLosingBidLineItem)||void 0===r?void 0:r.lineItemPriority:0}`,7:`${(0,w.$K)(A.bidStatus)?A.bidStatus:null}`,8:`${(0,w.$K)(t.price)?t.price:0}`,9:`${(0,w.$K)(null===(o=A.firstLoser)||void 0===o?void 0:o.customClientPrice)?A.firstLoser.customClientPrice:0}`,11:`${x}`,10:`${(0,w.$K)(null===(h=A.firstLoser)||void 0===h?void 0:h.demandType)?null===(a=A.firstLoser)||void 0===a?void 0:a.demandType:0}`,12:(0,w.hj)(T)?`${T}`:"0",13:`${(0,w.$K)(_)?_.verifyingBidsInAuction:0}`,14:`${(0,w.$K)(_)?_.idleBidsInAuction:0}`,15:`${(0,w.$K)(_)?_.loadingBidsInAuction:0}`,16:`${(0,w.$K)(_)?_.loadedBidsInAuction:0}`,17:`${(0,w.$K)(this.jy.id)?this.jy.id:""}`,18:`${(0,w.$K)(null===(c=A.highestLosingBidLineItem)||void 0===c?void 0:c.creativeType)?null===(d=A.highestLosingBidLineItem)||void 0===d?void 0:d.creativeType:null}`,19:`${(0,w.$K)(A.firstLoserIsIma)?A.firstLoserIsIma:null}`,20:`${P}`,21:`${this.My}`,22:`${At.n.getConnectionType(this.mo.deviceType)}`,23:vt.f.getCidForElkTracking()},hasAdSkip:this.sf,discount:b?ee.d.fromProtoDiscount(b):void 0,serverBillingNoticeUrls:S};this.tf.adImpression.next(k)}zy(t,i){var e;const{adBreakState:s}=this.Oy,n=(0,se.H8)(t.createdTimestamp),r=(0,w.$K)(i)?W.EN.fromProtoAuctionPostbidReason(this.mo.auctionInfoLogging.getGeneralPostbidReason(t.errorReason)):void 0,{discount:o,liveRampType:h}=t.settings.requestMetadata.data,a=t.settings.requestMetadata.data.floorPriceInformation;let c,d;(0,w.$K)(this.mo.internalAuctionSnapshot.lastSnapshot)&&(c=this.mo.internalAuctionSnapshot.lastSnapshot.auctionEndType,d=this.mo.internalAuctionSnapshot.lastSnapshot.deltaTimestampAdStartAdOpportunity);const l={adPodSlotPosition:s.adPodSlotIndex,adSourceType:W.EN.fromProtoAdSourceType(t.adSourceType),advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,reason:t.errorReason,isBidLoaded:!0,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,isUserSynced:t.settings.requestMetadata.data.isUserSynced,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbADomain:t.settings.requestMetadata.data.rtbAdomain,rtbCreativeId:t.creativeId,timeSpentMs:t.startingTimeMs,rtbDspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTimeMs:null===(e=t.settings.bidLifecycle)||void 0===e?void 0:e.winToAdLoadedTime,requestsCount:t.settings.requestMetadata.data.requestNumber,requestedFloorPrice:t.settings.requestMetadata.data.requestedFloorPrice,floorPriceInformation:a?W.wE.fromProtoFloorPriceInformation(a):void 0,liveRampType:h?W.EN.fromProtoLiveRamp(h):void 0,bidElapsedTimeSeconds:n,adBreakType:W.EN.fromProtoAdBreakType(s.adBreakType),auctionInformation:i?W.Ti.fromProtoAuctionInformation(i):void 0,auctionReason:r,discount:o?ee.d.fromProtoDiscount(o):void 0,dynamicElkFields:{1:`${c}`,2:(0,w.hj)(d)?`${d}`:"0",7:`${(0,w.$K)(this.jy.id)?this.jy.id:""}`,8:`${this.My}`,9:`${At.n.getConnectionType(this.mo.deviceType)}`,10:vt.f.getCidForElkTracking()}};this.tf.adPostbid.next(l)}Ny(t){this.Ty.push(t.onAdSlotViewabilityChanged.subscribe((t=>{if(t&&this.Ey){const t=O.a_.getPlayerRecord(this.mo.playerId);this.Ol.next(t),this.Ey=!1}})),t.onVpaidEvent.subscribe((i=>{const e=(0,Y.Ko)(i.type,t.settings.vastTracker);!(0,P.BZ)(e)&&i.type===s.fI.AdImpression&&(t.adSourceType===n.ProtoAdsourceTypeEnum.Vpaid||t.adSourceType===n.ProtoAdsourceTypeEnum.VastMedia)&&(0,V.n)({message:"AdManager_AdImpressionController_tracker_impression_not_found",exception:`creativeId: ${t.creativeId}, advertiserLineItemId: ${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}`,level:V.D.CRITICAL},{shouldSendMaxLog:!1});let r;i.type===s.fI.AdError&&(r=i.payload.errorCode||zi.Oq.GeneralError),Y.Mz.track(e,this.mo.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState,t.getTrackerSlot(),r)}))),this.Ty.push(t.onAdViewableImpression.subscribe((i=>{const{publisherLineItemId:e,advertiserLineItemId:s,rtbSeatId:n,dspId:r,rtbAdomain:o}=i,h=t.settings.requestMetadata.data.discount;this.tf.adInView.next({publisherLineItemId:e,advertiserLineItemId:s,rtbSeatId:n,rtbDspId:r,adBreakType:W.EN.fromProtoAdBreakType(this.Oy.adBreakState.adBreakType),discount:h?ee.d.fromProtoDiscount(h):void 0,hasSkipAd:this.sf,rtbADomain:o}),Y.Mz.track(t.settings.vastTracker.adViewableImpression,this.mo.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState)})))}lf(t,i){if((0,w.hj)(t)&&t>=0)return!0;return(0,K.Xj)(i,this.mo.skipAdSettings)}}class oe{constructor(t,i){this.mo=t,this.Jy=i,this.be=[],this.Qy=!1,this.Yy=()=>{if(this.mo.adSelector.hasReachTheMaxNumberOfReadyBids())return void this.mo.auctionManager.onNothingToWin();const t=this.Ky(),{selectedBid:i,state:e}=t;if(!i)return;this.mo.auctionInfoLogging.winBid(i);const{width:s,height:n}=e.adContainerState.get(i.settings.adManagerLineItem.protoLineItem.adType);i.initAd(s,n,this.Zy.vastViewMode,this.mo.desiredBitRateForWins,void 0,void 0,e.soundValue);const{vastTracker:r,adManagerLineItem:o}=i.settings;return Y.Mz.track(r.adWin,this.mo.adMacroReplacer,o.protoLineItem,e),Promise.resolve()},this.$g=new Ji(this.Yy,10),this.be.push(this.mo.adSelector.getBidEvents(A.Sb.ON_BID).subscribe((t=>{const i=this.Ky();this.mo.auctionInfoLogging.newBidAdded(t,i),this.ib()})),this.mo.adSelector.getBidEvents(A.Sb.ON_BID_STARTING).subscribe((()=>{this.ib()})),this.mo.adSelector.getBidEvents(A.Sb.ON_BID_LOADED_CONSUMED).subscribe((t=>{if(!t.started&&t.status!==s.wy.INVALIDATED){const i=this.mo.auctionInfoLogging.onPostBid(t),e=!0;this.eb(t,i,e)}this.ib()})),this.mo.adSelector.getBidEvents(A.Sb.ON_BID_LOADING_CONSUMED).subscribe((t=>{if(t.status!==s.wy.INVALIDATED){const i=this.mo.auctionInfoLogging.onPostBid(t);this.eb(t,i)}this.ib()})),this.mo.impressionCapsTimer.onTimer().subscribe((()=>{this.ib()})))}win(t){this.Zy=t,this.$g.setNumberOfThreads(t.maxParallelWins),this.Qy=!0,this.ib()}stop(){this.Qy=!1,this.$g.stop()}destroy(){this.stop(),(0,a.i)(this.be)}ib(){this.Qy&&this.$g.start()}Ky(){const t=this.Zy.stateSettings.currentState||this.Zy.stateSettings.predictedState;return this.mo.adSelector.selectBestBidForWin(t)}eb(t,i,e=!1){var s,n,r,o,h;Y.Mz.trackError(t.settings.vastTracker.adError,this.mo.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState,t.vastErrorCode);const a=(null===(n=null===(s=this.Zy.stateSettings)||void 0===s?void 0:s.currentState)||void 0===n?void 0:n.adBreakState)||(null===(o=null===(r=this.Zy.stateSettings)||void 0===r?void 0:r.predictedState)||void 0===o?void 0:o.adBreakState),c=(0,se.H8)(t.createdTimestamp),d=(0,w.$K)(i)?W.EN.fromProtoAuctionPostbidReason(this.mo.auctionInfoLogging.getGeneralPostbidReason(t.errorReason)):void 0,{discount:l,liveRampType:u}=t.settings.requestMetadata.data,p=t.settings.requestMetadata.data.floorPriceInformation,f={adPodSlotPosition:a.adPodSlotIndex,adSourceType:W.EN.fromProtoAdSourceType(t.adSourceType),advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,reason:t.errorReason,isBidLoaded:e,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,isUserSynced:t.settings.requestMetadata.data.isUserSynced,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbADomain:t.settings.requestMetadata.data.rtbAdomain,rtbCreativeId:t.creativeId,timeSpentMs:t.loadingTimeMs,rtbDspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTimeMs:null===(h=t.settings.bidLifecycle)||void 0===h?void 0:h.winToAdLoadedTime,requestsCount:t.settings.requestMetadata.data.requestNumber,requestedFloorPrice:t.settings.requestMetadata.data.requestedFloorPrice,floorPriceInformation:p?W.wE.fromProtoFloorPriceInformation(p):void 0,liveRampType:u?W.EN.fromProtoLiveRamp(u):void 0,bidElapsedTimeSeconds:c,auctionInformation:i?W.Ti.fromProtoAuctionInformation(i):void 0,auctionReason:d,discount:l?ee.d.fromProtoDiscount(l):void 0,dynamicElkFields:{10:vt.f.getCidForElkTracking()}};this.Jy.adPostbid.next(f)}}class he{constructor(t,i){this.sc=t,this.tf=i,this.sb=new Map}bidIsNotWinnableEverInSession(t){if(!this.nb(t))return;const i=[...this.sc.getAllBidPricesSortedDesc(),t.price].sort(((t,i)=>i-t)),e=this.rb(i);this.ob(t.settings.requestMetadata.data.cnxBidId,e,n.ProtoAuctionLossReasonEnum.TargetingMismatch)}newBidAdded(t,i){this.nb(t)&&(i.selectedBid?i.selectedBid!==t?this.hb(t,i):this.ab(t):this.hb(t,i))}winBid(t){if(!this.nb(t))return;const i=this.sc.getAllBidPricesSortedDesc(),e=this.rb(i);this.sb.set(t,e)}onPostBid(t){return this.cb(t)}onImpression(t){return this.cb(t)}nb(t){return t.settings.requestMetadata.data.logAuctionInformation}ab(t){const{cnxBidId:i}=t.settings.requestMetadata.data,e=this.sc.getAllBidPricesSortedDesc(),s=this.rb(e);this.ob(i,s,n.ProtoAuctionLossReasonEnum.CompetitorPriority)}cb(t){const i=this.lb(t);return this.ub(t),i}hb(t,i){var e,s,n,r;const o=this.pb(t,i);if(!(0,w.$K)(o))return void this.fb("AdManager_AuctionInfoLogging_lossReason_cannot_be_found",t.settings.requestMetadata.data.cnxBidId,null===(r=null===(n=null===(s=null===(e=i.selectedBid)||void 0===e?void 0:e.settings)||void 0===s?void 0:s.requestMetadata)||void 0===n?void 0:n.data)||void 0===r?void 0:r.cnxBidId);const{cnxBidId:h}=t.settings.requestMetadata.data,a=this.sc.getAllBidPricesSortedDesc(),c=this.rb(a);this.ob(h,c,o)}lb(t){if(this.sb.has(t))return this.sb.get(t);this.nb(t)&&this.fb("AdManager_AuctionInfoLogging_cannot_find_win_bid_snapshot",t.settings.requestMetadata.data.cnxBidId)}ub(t){this.sb.has(t)&&this.sb.delete(t)}pb(t,i){var e;return null===(e=i.unselectedBidList.find((i=>i.bid===t)))||void 0===e?void 0:e.lossReason}getGeneralPostbidReason(t){switch(t){case s.RG.ImaScriptFailure:case s.RG.ImaObjectNotFound:case s.RG.ImaManagerInit:case s.RG.ImaInitSdkError:case s.RG.AdxOverlayGptScriptLoad:case s.RG.DisplayIntegratorIframeLoad:return n.ProtoAuctionPostbidReasonEnum.SDKFailure;case s.RG.VastUnsupportedMedia:case s.RG.CnxMediaSrcNotSupported:return n.ProtoAuctionPostbidReasonEnum.UnsupportedMedia;case s.RG.DomainBlocked:case s.RG.AdaptorInitAdError:case s.RG.AdaptorStartAdError:case s.RG.WrapperInitAdError:case s.RG.WrapperStartAdError:return n.ProtoAuctionPostbidReasonEnum.TargetingMismatch;default:return n.ProtoAuctionPostbidReasonEnum.CreativeError}}rb(t){const i=t[0]?(0,_.pd)(t[0]):void 0,e=t[1]?(0,_.pd)(t[1]):void 0;return i||this.fb("AdManager_AuctionInfoLogging_highestBidPrice_missing",`${i}`),{bidDensity:t.length,highestObfuscatedBidPrice:i,secondHighestObfuscatedBidPrice:e}}ob(t,i,e){this.tf.auctionInformation.next({cnxBidId:t,auctionInformation:i?W.Ti.fromProtoAuctionInformation(i):void 0,auctionLossReason:W.EN.fromProtoAuctionLossReason(e)})}fb(t,i="",e=""){(0,V.n)({message:t,level:V.D.CRITICAL,callStack:i,exception:e},{throttle:5})}}class ae{constructor(){this.vb=new Map}calculateLineItemYoScore(t){return this.gb(t)}calculateBidYoScore(t){return this.gb(t)}gb(t){const i=this.vb.get(t);if((0,w.$K)(i))return i;const e=Math.random();return this.vb.set(t,e),e}}class ce{calculateLineItemYoScore(t,i,e){return e?Math.random():this.yb(i)}calculateBidYoScore(t,i){return this.yb(i)}yb(t){const{cpm:i,priority:e}=t;return i+200*e}}class de{constructor(t){this.bb=t?new ae:new ce}calculateLineItemYoScore(t,i,e){return this.bb.calculateLineItemYoScore(t,i,e)}calculateBidYoScore(t,i){return this.bb.calculateBidYoScore(t,i)}}class le{constructor(t,i,e){this.mo=t,this.wb=i,this.tf=e,this.Ab=!1,this.Ai=new o.x,this.Pb=new o.x,this.Ol=new o.x,this._b=new o.x,this.be=[],this.xb=t=>{H.IX.getInstance().add(t,this.Aa,this.Tb)},this.kb=t=>{this.Pb.next(t)},this.Cb=(t,i)=>{const e=this.Aa.lineItems.find((i=>i.protoLineItem.advertiserLineItemId===t));e&&(e.protoLineItem.viewability=i)},this.hy=()=>{var t;null===(t=this.Eb)||void 0===t||t.resizeAd(),this.Mb()},this.Fe=d.h.getSessionChildContainer(this.mo.app.config.sessionId).resolve(et.P),this.Fo=d.h.getSessionChildContainer(this.mo.app.config.sessionId).resolve(st.G);const s=this.mo.adContainerMap.get(this.Lb());this.Bb=(0,z.LT)(s),this.tf.startBidTracking.next(),this.Rb(),this.Ob(),this.Db(),this.Vb()}get onVpaidEvent(){return this.Ai.asObservable()}get onImpressionRevenueEvent(){return this.Pb.asObservable()}get onNoFill(){return this._b.asObservable()}setAdVolume(t){var i;this.if.partialStateUpdate({sound:t});const e={adManagerState:this.if.getCurrentAdManagerState(!0),adMacroReplacer:this.Fb};null===(i=this.Eb)||void 0===i||i.setAdVolume(t,e),this.Fe.adManagerSound=t}setAdViewMode(t){var i;this.if.partialStateUpdate({vastViewMode:t}),null===(i=this.Eb)||void 0===i||i.setVastViewMode(t)}getCurrentAdMetadata(){var t;return null===(t=this.Eb)||void 0===t?void 0:t.getMetadata()}getCurrentAdMediaSize(){var t;return null===(t=this.Eb)||void 0===t?void 0:t.getMediaSize()}pauseAd(t){var i;null===(i=this.Eb)||void 0===i||i.pauseAd(t)}resumeAd(t){var i;null===(i=this.Eb)||void 0===i||i.resumeAd(t)}skipAd(){var t;null===(t=this.Eb)||void 0===t||t.skipAd()}stopAd(t){var i;null===(i=this.Eb)||void 0===i||i.stopAd(t)}setPlayerOrientation(t){this.if.partialStateUpdate({playerOrientation:t}),this.Mb()}setQueryJsTargeting(t){this.if.partialStateUpdate({queryJsTargeting:t}),this.Mb()}enableImpressions(t){this.if.enableImpression(t),this.Zp.forceTriggerUpdateState(),this.jb.allowResetOnTime=!0,this.Ub(t),this.qb()}disableImpressions(t=!1){(this.if.impressionsAllowed||t)&&(this.Hb.stop(),this.zb.stop(),this.if.disableImpression(),this.Eb&&!this.Eb.inImpression&&this.mo.app.config.isInApp&&this.Eb.stopAd("inApp_disable"))}enablePredict(t,i){if(this.mo.disablePrefetch)return;switch(this.if.enablePredict(t,i),i){case p.StartSessionPrefetch:this.jb.allowResetOnTime=!1;break;case p.MidSessionPrefetch:this.jb.allowResetOnTime=!0}this.qb();const e=this.if.getCallSettings();this.Gb.startPrefetch(e)}isLoadingAds(){return!!this.Eb||this.sc.hasLoadingBids()}getMainContainerState(){return this.Zp.getMainContainerState()}getMainContainer(){return this.Zp.getMainContainer()}setCustomMacros(t){this.zb.setMacros(t)}destroy(){var t;this.disableImpressions(),(0,a.i)(this.be),this.zb.destroy(),this.Xb.destroy(),this.Hb.destroy(),this.Jb.destroy(),this.Qb(),null===(t=this.Eb)||void 0===t||t.stopAd("adManagerDestroy"),this.Yb()}Rb(){const t=d.h.getGlobalContainer().resolve(b.f);this.Jb=new O.IS(t),this.Kb=new M,this.jb=new B,this.Zb=new R,this.tI=(new T).registerCallingValidators([this.jb,this.Kb,this.Zb]),this.Rf=new x,this.Fb=new O.Yh(this.mo.app.services.MacrosService,this.mo.app.services.UserManagerService)}Ob(){this.bb=new de(this.mo.app.config.explorationMode);const t=this.mo.lineItemList.map((t=>new q.o(t,this.bb)));this.Aa=new H.vZ,this.Aa.add(t),this.Pa=new H.S6,this.Ba=new H.TA,this.Tb=new H.z,this.Zp=new Zi(this.Lb(),this.mo.adContainerMap,this.mo.app.services.ResizeObserver,this.mo.app.services.ViewabilityService),this.iI=new lt({globalDomUtilsService:this.mo.app.services.GlobalDomUtilsService,recycleAdSlots:!0,sessionId:this.mo.app.config.sessionId}),this.if=new rt(this.Zp,this.mo.generalRepository),this.sc=new F.ld(this.Aa,this.Pa,this.Ba,this.Tb,{callingValidationAggregator:this.tI,impressionCapService:this.Kb},{maxNumberOfWins:m.O.MAX_WINS_DEFAULT},this.mo.app.config.sessionId);const i=d.h.getGlobalContainer().resolve(b.f);this.Gb=new U(i,{sessionId:this.mo.app.config.sessionId,adSelector:this.sc});const e=d.h.getSessionChildContainer(this.mo.app.config.sessionId).resolve(l.k),s=new he(this.sc,e);this.zb=new Yi({yoScoreCalculator:this.bb,playerData:this.mo.playerData,generalRepository:this.mo.generalRepository,auctionInfoLogging:s,adSelector:this.sc,adContainerMap:this.mo.adContainerMap,amazonSlotId:this.mo.amazonTamSlotId,app:this.mo.app,appSettings:this.mo.appSettings,schainSettings:this.mo.pbjsSchainSettings,skipAdSettings:this.mo.skipPlayerSettings,sessionId:this.mo.app.config.sessionId,adMacroReplacer:this.Fb,lineItemServices:{lineItemServicesTimer:this.Jb,requestCapsService:this.jb},adRequestGatekeeper:this.Rf,adEnforcer:new ie.Jd(this.mo.app.config.isMobile,this.Bb,this.mo.disableScrollHijackEnforcement),pauseAdWhenFinished:this.mo.pauseAdWhenFinished,loopAdWhenFinished:this.mo.loopAdWhenFinished,os:this.mo.app.config.os.os,adSlotContainerRecycler:this.iI,callingValidationAggregator:this.tI,auctionManager:this.Gb,lineItemAbTestInformation:this.mo.lineItemAbTestInformation},e),this.Xb=new oe({desiredBitRateForWins:m.O.DEFAULT_DESIRED_BITRATE,playerId:this.mo.app.config.playerId,sessionId:this.mo.app.config.sessionId,adSelector:this.sc,auctionManager:this.Gb,auctionInfoLogging:s,impressionCapsTimer:this.Jb,adMacroReplacer:this.Fb},e),this.Hb=new re({adContainer:this.Zp,adSelector:this.sc,auctionInfoLogging:s,internalAuctionSnapshot:new it.hR(this.sc),impressionCapsService:this.Kb,impressionCapsTimer:this.Jb,requestCapsService:this.jb,removeBidIfHigherYoScore:m.O.REMOVE_BIDS_DEFAULT,adRequestGatekeeper:this.Rf,pauseAdWhenFinished:this.mo.pauseAdWhenFinished,loopAdWhenFinished:this.mo.loopAdWhenFinished,adMacroReplacer:this.Fb,explorationMode:this.mo.app.config.explorationMode,playerId:this.mo.app.config.playerId,skipAdSettings:this.mo.skipPlayerSettings,fullSessionLog:this.mo.generalRepository.canTrackAllRequests,deviceType:this.mo.app.config.deviceType,sessionId:this.mo.app.config.sessionId},e)}Db(){this.be.push(this.wb.onLineItemPlatformCapped.subscribe((t=>{this.xb(t)})),this.wb.onImpressionRevenue.subscribe((t=>{this.kb(t)})),this.wb.onLineItemViewabilityChange.subscribe((([t,i])=>{this.Cb(t,i)})))}Vb(){this.be.push(this.zb.onLineItemsRequestStart.subscribe((t=>{this.Pa.add(t)})),this.zb.onLineItemsRequestEnd.subscribe((t=>{this.Pa.remove(t)})),this.tf.onBidFetchStart.subscribe((t=>{this.Ba.add(t)})),this.tf.onBidFetchEnd.subscribe((t=>{this.Ba.remove(t)})),this.zb.onBid.subscribe((t=>{this.Tb.addBid(t)})),this.Gb.onAuctionEnd.subscribe((t=>{this.gp(t)})),this.Gb.onAuctionStopCalling.subscribe((()=>{this.eI()})),this.Zp.onContainerStateUpdate.subscribe((()=>{this.hy()})),this.Hb.onAdSelected.subscribe((t=>{this.ky(t)})),this.Hb.onAdFinished.subscribe((t=>{this.Cy()})),this.Hb.onMissedImpression.subscribe((t=>{this.Ol.next(t)})))}get onMissedImpression(){return this.Ol.asObservable()}gp(t){this.if.auctionEnd(this.sI(t)),this.if.impressionsAllowed&&this.nI()}sI(t){switch(t){case j.Prefetch:return it.eT.Prefetched;case j.ShortCircuitEnd:return it.eT.Shorted;case j.TimeoutEnd:return this.sc.hasLoadedBids()?it.eT.TimeoutWithReadyBid:it.eT.TimeoutWithoutReadyBid;default:return}}hasAdsEligibleForFill(t){const i=this.if.getAdManagerState(t,this.Zp.getContainerStateMap());return this.sc.hasAdsEligibleForFill(i)}eI(){this.if.predictMode&&this.zb.stop(),this.if.auctionStopCalling()}ky(t){const{currentAdPlayerState:i,predictedAdPlayerState:e}=this.if,s=(i||e).vastViewMode,n=this.if.getCurrentAdManagerState().adBreakState.maxAdDuration,r=this.if.getCurrentAdManagerState()||this.if.getPredictedAdManagerState();this.Eb=new tt(t,this.Zp,this.tf,r,{adViewMode:s,maxAdDuration:n,skipAdSettings:this.mo.skipPlayerSettings,loopAdWhenFinished:this.mo.loopAdWhenFinished,pauseAdWhenFinished:this.mo.pauseAdWhenFinished}),this.oI(),this.Eb.setAdVolume(this.if.currentAdPlayerState.sound);const o=t.settings.adLoadedPayload.payload.vastVerifications;(0,P.BZ)(o)&&this.Fo.isOmsdkFullSupport&&this.Fo.addVerificationNode(o,t.settings.adLoadedPayload.payload.containers),this.hI(t)}hI(t){var i;this.Ai.next({type:s.fI.AdLoaded,payload:null===(i=t.settings.adLoadedPayload)||void 0===i?void 0:i.payload})}Cy(){this.Fo.clearPendingProcesses(),this.Yb()}Mb(){this.if.adFetchingAllowed&&this.qb(),this.if.impressionsAllowed&&this.nI()}qb(){this.Ab||(this.Ab=!0,this.mo.app.services.UserManagerService.ccpaInfoLogging(this.mo.app.config.playerId));const t=this.if.getCallSettings();this.zb.call(t);const i=this.if.getWinSettings();this.Xb.win(i)}nI(){(this.if.currentAdPlayerState||this.if.predictedAdPlayerState)&&this.if.currentAdPlayerState&&this.Hb.start(this.if.getCurrentAdManagerState())}oI(){this.aI=this.Eb.onVpaidEvent.subscribe((t=>{var i;if(t.type===s.fI.AdImpression)try{const t=(null===(i=this.if.getCurrentAdManagerState())||void 0===i?void 0:i.soundValue)||0;this.Eb.setAdVolume(t)}catch(t){(0,V.n)({level:V.D.WARN,message:"AdManager_current_sound",exception:t.message,callStack:t.stack})}this.Ai.next(t)}))}Yb(){var t;null===(t=this.Eb)||void 0===t||t.destroy(),this.Eb=null,this.Qb()}Qb(){var t;null===(t=this.aI)||void 0===t||t.unsubscribe(),this.aI=null}Ub(t){const i=[this.Kb,this.jb];t.newContent&&i.forEach((t=>{t.resetCapsBasedOnExternalEvent(n.ProtoResetCapTypeEnum.ContentCapping)}))}}var ue=e(6115);class pe extends le{constructor(t,i,e){super(t,i,e),this.gp=t=>{this.cI()||this._b.next(),super.gp(t)};const s=this.Zp.getMainContainer();this.iI.preloadImaSdkSlots(s),this.sc.getBidEvents(A.Sb.ON_BID_LOADED_CONSUMED).subscribe((()=>{this.cI()||this._b.next()}))}enableImpressions(t){super.enableImpressions(t);const i=this.if.getCallSettings();this.Gb.startAuction(i,t.linearAdOpportunity.id)}disableImpressions(t=!1){(this.if.impressionsAllowed||t)&&(this.Gb.cancelAuction(),super.disableImpressions(t))}qb(){const t=this.if.getCallSettings();this.Gb.updateState(t),super.qb()}Lb(){return n.ProtoAdType.Video}setLineItemMetadata(t,i){const e=this.dI(t);(0,w.mf)(i)&&i(e)}dI(t){try{const i=this.Aa.getByPublisherLineItemId(t.id);if(!(0,w.$K)(i))return{success:!1,errorReason:ue.q.NoLineItem};if(!i.protoLineItem.isExternal)return{success:!1,errorReason:ue.q.NoSupportForCreativeType};if(!this.uI(t,i))return{success:!1,errorReason:ue.q.MetadataInvalid};return this.Tb.getBidsByStatus([s.wy.STARTING,s.wy.IMPRESSION]).find((t=>t.settings.adManagerLineItem===i))?{success:!1,errorReason:ue.q.AdAlreadyStarted}:(i.updateMetadata(t),this.pI(t.id),this.mI(i),this.vI(i),{success:!0})}catch(t){return{success:!1,errorReason:ue.q.Unknown}}}vI(t){this.Ba.bidInFetchList.filter((i=>i.adManagerLineItem===t)).forEach((t=>t.shouldBeDiscarded=!0))}uI(t,i){const{adTag:e,resetCapType:s,requestCap:r,impressionCap:o,resetRequestsCapTime:h,resetImpressionsCapTime:a}=(0,_.pi)(t,i.protoLineItem);return!(!(0,w.QM)(e)||!(0,w.$K)(s))&&(!(s===n.ProtoResetCapTypeEnum.OpportunityCapping&&!(0,w.Xc)(r))&&(!(s!==n.ProtoResetCapTypeEnum.OpportunityCapping&&!(0,w.r)(r)&&!(0,w.r)(o))&&!!this.gI(s,r,o,h,a)))}gI(t,i,e,s,r){return t!==n.ProtoResetCapTypeEnum.TimeCapping||!((0,w.r)(i)&&!(0,w.Xc)(s))&&!((0,w.r)(e)&&!(0,w.Xc)(r))}mI(t){[this.Kb,this.jb].forEach((i=>{i.resetCapsOnLineItemMetadataUpdate(t)}))}pI(t){this.Tb.getBidsByLineItemId(t).forEach((t=>{t.invalidate()}))}cI(){const t=this.if.getCurrentAdManagerState()||this.if.getPredictedAdManagerState(),i=this.sc.getBestBidAllowed(t);return(0,w.$K)(i)}}class fe extends le{Lb(){return n.ProtoAdType.Nonlinear}enableImpressions(t){super.enableImpressions(t),this.gp()}}var me,ve=e(9154);!function(t){t.adLoadedPayload=t=>({payload:{adType:t.payload.adType,adSkipMode:t.payload.adSkipMode,adLoadedData:{skipOffset:t.payload.adLoadedData.skipOffset}}}),t.impressionPayload=(t,i,e)=>{const{adId:s,adVideoUrl:n,creativeId:r,name:o,length:h,imaMetadata:a,moatTrackingEnabled:c}=t.payload.adSourceData,{adType:d,adSkipMode:l,clickThroughUrl:u,customAdData:p,adSourceData:f}=t.payload;return{payload:{adType:d,adBreakType:e,adSkipMode:l,adSourceData:{moatTrackingEnabled:c,adId:s,length:h,imaMetadata:a,adVideoUrl:n,creativeId:r,name:o},clickThroughUrl:u,customAdData:{ADVERTISER:null==p?void 0:p.ADVERTISER,CAMPAIGN_ID:null==p?void 0:p.CAMPAIGN_ID,CREATIVE_ID:p.CREATIVE_ID},adDuration:f.length,selectedAdSlot:i}}},t.defaultPayload=t=>({payload:{adType:t.payload.adType}})}(me||(me={}));var ge=e(6286),ye=e(7531);class be{constructor(t,i,e){this.vl=t,this.Sl=i,this.bl=e,this.be=[],this._l=new o.x,this.yI=new o.x,this.bI=new o.x,this.Ll=new o.x,this.II=new o.x,this.Ml=new o.x,this.Fl=new o.x,this.Rl=new o.x,this.Ol=new o.x,this.Tl=new o.x,this.wI=new Map,this.AI=!0,this.xI=!0,this.TI={[h.k.LINEAR]:(t,i)=>{const e=new pe(t,t.trackingResponseService,i);this.mo.setAdManager(h.k.LINEAR,e)},[h.k.NONLINEAR]:(t,i)=>{const e=new fe(t,t.trackingResponseService,i);this.mo.setAdManager(h.k.NONLINEAR,e)}},this.kI={mediaMetadata:{},clickToPlay:!1,linearAdOpportunity:new f.qW,newContent:!1,sound:0,vastViewMode:s.zc.Normal,adBreakState:this.bl.getAdBreakState(),playerOrientation:this.Sl,inFloating:this.vl.playerData.inFloating,queryJsTargeting:this.vl.queryJsTargeting},this.mo=new S(this.vl.loopAdWhenFinished,this.vl.adPlaybackMode),this.AI=this.vl.canPrefetchBeforePreroll}get onMissedImpression(){return this.Ol.asObservable()}get onLinearNoFill(){return this.Rl.asObservable()}get onAdsEnable(){return this._l.asObservable()}get onLinearVpaidEvent(){return this.yI.asObservable()}get onNonlinearVpaidEvent(){return this.bI.asObservable()}get onLinearImpressionRevenue(){return this.Ll.asObservable()}get onNonlinearImpressionRevenue(){return this.II.asObservable()}get onLinearImpressionPrice(){return this.Ml.asObservable()}get onNonlinearImpressionPrice(){return this.Fl.asObservable()}get onPrefetchStart(){return this.Tl.asObservable()}hasAdsEligibleForFill(){var t;return Boolean(null===(t=this.mo.getAdManagerByLinearity(h.k.LINEAR))||void 0===t?void 0:t.hasAdsEligibleForFill(this.kI))}getCurrentAdBreakType(){return this.kI.adBreakState.adBreakType}canPrefetchAds(t){const i=this.mo.getAdManagerByLinearity(t);this.CI(t,p.StartSessionPrefetch,i)}initAd(t,i,e,s,n,r,o){this.EI(r),this.Zl(o),this.mo.getAllLinearityKeys().forEach((t=>{this.MI(h.k[t],{sound:n})}))}getNewLinearAdOpportunity(){return this.mo.getPrefetchType(h.k.LINEAR)===p.NoPrefetch?new f.qW:this.kI.linearAdOpportunity}getAdContainerSize(t){const i=this.wI.get(t);return{height:(null==i?void 0:i.clientHeight)||0,width:(null==i?void 0:i.clientWidth)||0}}getMainAdContainerWidth(t){var i;return null===(i=this.mo.getAdManagerByLinearity(t))||void 0===i?void 0:i.getMainContainerState().width}getCurrentAdMetadata(t){var i;return null===(i=this.mo.getAdManagerByLinearity(t))||void 0===i?void 0:i.getCurrentAdMetadata()}getCurrentAdMediaSize(t){var i;return null===(i=this.mo.getAdManagerByLinearity(t))||void 0===i?void 0:i.getCurrentAdMediaSize()}isAdInWin(t){const i=this.mo.getAdManagerByLinearity(t);return(null==i?void 0:i.isLoadingAds())||!1}enableAds(t){this.mo.enable(t),this.MI(t),this._l.next(t)}disableAds(t,i){this.mo.disable(t,i);const e=this.mo.getAdManagerByLinearity(t);if(!e)return;const s=(null==i?void 0:i.disableReason)===c.m.ForceDisable;e.disableImpressions(s),(null==i?void 0:i.disableReason)!==c.m.ForceDisable&&this.mo.usePrefetch(t)&&this.mo.tryPreparingMidSessionPrefetch(t,i)}disableAdvertising(){this.xI=!1}enableAdvertising(){this.xI=!0,this.mo.getAllLinearityKeys().forEach((t=>{const i=h.k[t];this.enablePrefetchForLinearity(i)}))}setAdVolume(t,i){var e;null===(e=this.mo.getAdManagerByLinearity(t))||void 0===e||e.setAdVolume(i),this.MI(t,{sound:i})}pauseAd(t,i){var e;null===(e=this.mo.getAdManagerByLinearity(t))||void 0===e||e.pauseAd(i)}resumeAd(t,i){var e;null===(e=this.mo.getAdManagerByLinearity(t))||void 0===e||e.resumeAd(i)}skipAd(t){var i;null===(i=this.mo.getAdManagerByLinearity(t))||void 0===i||i.skipAd()}stopAd(t,i){var e;null===(e=this.mo.getAdManagerByLinearity(t))||void 0===e||e.stopAd(i)}onAdStateChange(t,i,e){const s=ve.H[i];this.LI(t,e,s),s===n.ProtoAdBreakTypeEnum.PreRoll&&(this.AI=!0)}onContentChange(){this.mo.getAllLinearityKeys().forEach((t=>{this.MI(h.k[t],{newContent:!0})}))}setMediaRestrictions(t){const i=Object.assign(this.kI.mediaMetadata,t);this.mo.getAllLinearityKeys().forEach((t=>{const e=h.k[t];this.MI(e,{mediaMetadata:i}),this.enablePrefetchForLinearity(e)}))}userInteraction(t){this.mo.getAllLinearityKeys().forEach((t=>{this.MI(h.k[t],{clickToPlay:!0})}))}setPlayerOrientation(t){this.kI.playerOrientation=t,this.mo.getAllAvailableAdManagers().forEach((i=>i.setPlayerOrientation(t)))}updateJsQueryTargeting(t){this.kI.queryJsTargeting=(0,ye.S1)(this.kI.queryJsTargeting,t),this.BI()}removeJsQueryTargeting(t){this.kI.queryJsTargeting=(0,ye.G_)(this.kI.queryJsTargeting,t),this.BI()}setVastViewMode(t){this.RI({vastViewMode:t})}newLinearAdOpportunity(t){const i=h.k.LINEAR;this.mo.usePrefetch(i)&&(this.kI.linearAdOpportunity=t,this.kI.linearAdOpportunity.timestamp=Date.now(),this.MI(i,{linearAdOpportunity:this.kI.linearAdOpportunity}),this.mo.disablePrefetch(i))}updateLinearPodRemainingTime(t){const i=this.kI.adBreakState;this.OI(t)&&this.LI(h.k.LINEAR,t,i.adBreakType)}inFloatingChanged(t){this.kI.inFloating=t}setCustomMacros(t){this.mo.getAllAvailableAdManagers().forEach((i=>i.setCustomMacros(t)))}setLineItemMetadata(t,i){const e=this.mo.getAdManagerByLinearity(h.k.LINEAR);(0,w.$K)(e)?e.setLineItemMetadata(t,i):i({success:!1,errorReason:ue.q.AdManagerNotInitialized})}destroy(){try{(0,a.i)(this.be),this.mo.destroy()}catch(t){(0,V.n)({message:"AdManagerBridge_destroy",level:V.D.WARN,exception:t.message,callStack:t.stack})}}OI(t){const i=this.kI.adBreakState;return!(t<=0)&&!(Math.round(t/g.s_)>i.remainingAdDuration)}BI(){this.mo.getAllAvailableAdManagers().forEach((t=>t.setQueryJsTargeting(this.kI.queryJsTargeting)))}EI(t){t.forEach((t=>{this.wI.set(t.type,t.container)}))}LI(t,i,e){this.MI(t,{adBreakState:this.bl.getAdBreakState({adSlotDuration:i,adBreakType:e})})}MI(t,i){this.RI(i);const e=this.mo.getAdManagerByLinearity(t);if(e&&this.mo.isAdManagerEnable(t)){if(this.mo.usePrefetch(t)){const i=!1;this.mo.startSessionPrefetch(t,i)}e.enableImpressions(this.kI),this.DI()}}RI(t){Object.assign(this.kI,t),this.kI.adBreakState=this.bl.getAdBreakState({adSlotDuration:this.kI.adBreakState.remainingAdDuration,adBreakType:this.kI.adBreakState.adBreakType})}DI(){this.RI({clickToPlay:!1,newContent:!1})}enablePrefetchForLinearity(t){if(this.mo.usePrefetch(t)&&this.mo.hasStartSessionPrefetch(t)){const i=this.mo.getAdManagerByLinearity(t);this.CI(t,p.StartSessionPrefetch,i)}}CI(t,i,e){this.AI&&this.xI&&(this.kI.linearAdOpportunity=new f.qW,this.mo.enablePrefetch(t,i,this.kI,e))}Zl(t){const i=(0,_.mn)(this.vl.adSourceSettings.lineItems,h.k.NONLINEAR),e=(0,_.mn)(this.vl.adSourceSettings.lineItems,h.k.LINEAR);(0,P.BZ)(i)&&this.VI(h.k.NONLINEAR,i,t),(0,P.BZ)(e)&&this.VI(h.k.LINEAR,e,t),this.FI(),this.NI(),this.$I()}$I(){const t=this.mo.getAdManagerByLinearity(h.k.LINEAR);this.be.push(null==t?void 0:t.onMissedImpression.subscribe((t=>{this.Ol.next(t)})))}VI(t,i,e){const s=d.h.getSessionChildContainer(e.config.sessionId).resolve(ge.j),n=d.h.getSessionChildContainer(e.config.sessionId).resolve(l.k),r={playerData:this.vl.playerData,generalRepository:this.vl.generalRepository,trackingResponseService:s,lineItemList:i,adBreakHelper:this.bl,adContainerMap:this.wI,amazonTamSlotId:this.vl.amazonTamSlotId,pbjsSchainSettings:this.vl.prebidJsSupplyChain,skipPlayerSettings:this.vl.skipPlayerSettings,disableScrollHijackEnforcement:!this.vl.adSourceSettings.disableScrollHijackEnforcement,pauseAdWhenFinished:this.vl.pauseAdWhenFinished,loopAdWhenFinished:this.vl.loopAdWhenFinished,app:e,lineItemAbTestInformation:this.vl.lineItemAbTestInformation,appSettings:this.vl.appSettings,disablePrefetch:this.vl.disablePrefetch};(0,this.TI[t])(r,n),this.be.push(this.mo.onMidSessionPrefetchReady.subscribe((i=>{const{linearity:e,prefetchType:s}=i,n=this.mo.getAdManagerByLinearity(e);this.CI(t,s,n)})),this.mo.onPrefetchStart.subscribe((()=>{this.Tl.next()})))}FI(){const t={[h.k.LINEAR]:this.yI,[h.k.NONLINEAR]:this.bI};Object.keys(t).forEach((i=>{const e=h.k[i];this.UI(e,t[e])}))}UI(t,i){const e=this.mo.getAdManagerByLinearity(t);e&&this.be.push(e.onVpaidEvent.subscribe((e=>{var n,r;switch(e.type){case s.fI.AdLoaded:i.next({type:s.fI.AdLoaded,payload:me.adLoadedPayload(e)});break;case s.fI.AdImpression:{const o=null===(r=null===(n=this.mo.getAdManagerByLinearity(t))||void 0===n?void 0:n.getCurrentAdMetadata())||void 0===r?void 0:r.adType,h=this.wI.get(o),a=this.getCurrentAdBreakType();i.next({type:s.fI.AdImpression,payload:me.impressionPayload(e,h,a)});break}case s.fI.AdVideoStart:case s.fI.AdError:i.next(e);break;default:i.next({type:e.type,payload:me.defaultPayload(e)})}})))}NI(){const t=this.mo.getAdManagerByLinearity(h.k.LINEAR),i=this.mo.getAdManagerByLinearity(h.k.NONLINEAR);t&&this.be.push(t.onImpressionRevenueEvent.subscribe((t=>{this.Ll.next(t),this.Ml.next(t.impressionRevenue)})),t.onNoFill.subscribe((()=>{this.Rl.next()}))),i&&this.be.push(i.onImpressionRevenueEvent.subscribe((t=>{this.II.next(t),this.Fl.next(t.impressionRevenue)})))}}var Ie=e(8983),we=e(5227),Se=e(9490);var Ae=e(1296),Pe=e(9762),_e=e(2300);class xe{constructor(t){this.showExpandButton=t}get template(){return`\n            <cnx class="cnx-ui cnx-ui-ad">\n                <cnx class="cnx-ui-ad-content ${this.showExpandButton?"cnx-ad-fs":""}">\n                    <cnx class="cnx-ad-marker" aria-label="Ad" role="img">\n                        <cnx class="cnx-marker-cnt-first">\n                            <cnx class="cnx-marker-cnt-second">\n                                <cnx class="cnx-ad-marker-svg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><path d="M26,22H0V0H31.93L32,16A6,6,0,0,1,26,22Z" style="fill:#ffc800;fill-rule:evenodd"/><path d="M12,5.29h0L16.45,16.7H14.83l-1.06-2.85H8.86l-1,2.85H6.21L10.6,5.31h0Zm5.89,11.42V5.29h3.63A5.52,5.52,0,0,1,26.65,11a5.33,5.33,0,0,1-4.93,5.7H17.89Zm1.46-1.36h2.17c1.77,0,3.7-1.49,3.7-4.35s-1.93-4.28-3.7-4.28H19.35Zm-8-8.16-2,5.24h3.86Z" style="fill-rule:evenodd"/></svg>\n</cnx>\n                                <cnx class="cnx-ad-marker-text">1/1</cnx>\n                            </cnx>\n                            <cnx class="cnx-ad-marker-duration">[[${_e.r.RemainingDurationLabel}]]</cnx>\n                        </cnx>\n                        <cnx class="cnx-ad-marker-title"><cnx-span class="cnx-ad-title-text"></cnx-span></cnx>\n                    </cnx>\n                    <cnx class="cnx-ad-buttons">\n                        <cnx class="cnx-ad-play-button cnx-ui-btn">[[${_e.r.PlayButton}]]</cnx>\n                        <cnx class="cnx-ad-volume-controls">[[${_e.r.VolumeControls}]]</cnx>\n                        <cnx class="cnx-ad-volume-button cnx-ui-btn">[[${_e.r.VolumeButton}]]</cnx>\n                    </cnx>\n                    [[${_e.r.SkipAdButton}]]\n                    <cnx class="cnx-ad-close-button cnx-ui-btn">[[${_e.r.CloseButton}]]</cnx>\n                    ${this.getExpandTemplate()}\n                    <cnx class="cnx-ad-progress-bar">[[${_e.r.ProgressBar}]]</cnx>\n                </cnx>\n                <cnx class="cnx-ad-card">\n                    <svg class="${r.Ek.CardImage}" viewBox="0 0 16 9" />\n                    <cnx class="cnx-ad-card-text">\n                        <cnx>Continue watching</cnx>\n                        <cnx class="${r.Ek.CardTitle}"></cnx>\n                        <cnx>after the ad</cnx>\n                    </cnx>\n                </cnx>\n                [[${_e.r.AdLoadingScreen}]]\n            </cnx>\n        `.trim()}getExpandTemplate(){return this.showExpandButton?`<cnx class="cnx-ad-expand-button cnx-ui-btn cnx-hide-on-volume-hover cnx-d-sm-none">[[${_e.r.ExpandButton}]]</cnx>`:""}}var Te=e(3360);class ke{constructor(t,i,e,s,n,r,h,a,c){this.vl=t,this.gl=i,this.yl=e,this.bl=s,this.Il=n,this.Ue=r,this.Sl=h,this.jl=a,this.tf=c,this.qI=[],this.HI=!1,this.zI=!1,this.ef=!1,this.WI=0,this.GI=0,this.XI=!0,this.JI=!1,this.YI=!1,this.KI=!1,this.be=[],this.kl=new o.x,this.Ai=new o.x,this.ZI=new o.x,this.tw=new o.x,this.iw=new o.x}ew(){this.be.push(this.rw(),this.ow())}hw(t){switch(t.type){case s.fI.AdPaused:this.kl.next({type:r.lc.PauseLinearEvent});break;case s.fI.AdPlaying:this.kl.next({type:r.lc.ResumeLinearEvent});break;case s.fI.AdImpression:this.kl.next({type:r.lc.ShowLinearEvent,payload:t.payload});break;case s.fI.AdSkipped:this.kl.next({type:r.lc.SkipLinearEvent});break;case s.fI.AdStopped:this.kl.next({type:r.lc.HideLinearEvent});break;case s.fI.AdError:this.inImpression&&this.kl.next({type:r.lc.HideLinearEvent})}}aw(t){var i;this.cw(),this.updateContinueReadingCard(),t.payload.adDuration=null===(i=this.jl.getCurrentAdMetadata(h.k.LINEAR))||void 0===i?void 0:i.duration,t.payload.adDuration||this.HI||this.show(),this.HI=!0,this.ef=!0,this.JI&&this.dw(),t.payload.adDuration?this.lw.addDurationAdMarker():this.lw.removeDurationAdMarker(),this.lw.updateDuration(t.payload.adDuration),this.lw.changeState(Se.Ez.PlayingState),this.uw=t.payload.clickThroughUrl,this.pw(t.payload.selectedAdSlot),this.bl.getTotalNumberOfSlots()>1?this.lw.addPodAdMarker(this.bl.getCurrentSlotIndex(),this.bl.getTotalNumberOfSlots()):this.lw.removeAddPodAdMarker()}fw(t=!1){const i=(e=this.vl,s=this.Il.config,{logoUrl:e.logoUrl,isMobile:s.isMobile,closeButtonMode:e.closeButtonMode,floatingCloseButtonMode:e.floatingSettings.floatingCloseButtonMode,isCloseButton:e.isCloseButton,sharingDestinations:e.sharingDestinations});var e,s;this.lw=new Ae.f(this.Il.services.GlobalDomUtilsService,this.Il.services.ViewabilityService,this.Il.services.InteractionService,this.gl,new xe(t).template,i),this.Il.config.isMobile&&(0,z.cn)(this.gl,Ie.s6.Mobile),this.lw.hide()}mw(){this.Zp=this.gw(),this.yw(this.Zp),this.qI.push(this.Zp)}gw(t=""){return this.Il.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${t}"></div>`)}yw(t){this.gl.appendChild(t)}rw(){return this.jl.onLinearVpaidEvent.subscribe((t=>{let i=!1;switch(t.type){case s.fI.AdLoaded:this.JI=this.bw(t.payload),this.JI&&(t.payload.payload.adLoadedData.skipOffset=this.vl.skipAdAfter);break;case s.fI.AdPaused:this.KI=!1,this.lw.changeState(Se.Ez.PausedState);break;case s.fI.AdPlaying:this.KI=!0,this.lw.changeState(Se.Ez.PlayingState);break;case s.fI.AdImpression:this.KI=!0,this.aw(t.payload);break;case s.fI.AdSkipped:this.Iw(n.ProtoAdClickTypeEnum.AdSkipClick),this.ww(),i=!0;break;case s.fI.AdStopped:case s.fI.AdError:if(this.Sw())return;this.ww(),i=!0;break;case s.fI.AdClickThru:this.Iw(n.ProtoAdClickTypeEnum.AdClickThrough)}this.XI&&(this.Ai.next(t),this.hw(t)),this.XI=!0,i&&(this.ef=!1,this.KI=!1,this.lw.changeState(Se.Ez.PausedState))}))}ow(){return this.lw.onUiEvent.subscribe((t=>{switch(t.type){case Pe.C.Volume:this.setVolume(t.payload.volume),this.Iw(n.ProtoAdClickTypeEnum.VolumeClick);break;case Pe.C.Play:this.Iw(n.ProtoAdClickTypeEnum.PlayClick),this.play();break;case Pe.C.Pause:this.Iw(n.ProtoAdClickTypeEnum.PauseClick),this.pause();break;case Pe.C.Expand:this.Iw(n.ProtoAdClickTypeEnum.FullScreenClick),this.iw.next(Pe.C.Expand);break;case Pe.C.Collapse:this.Iw(n.ProtoAdClickTypeEnum.ExitFullScreenClick),this.iw.next(Pe.C.Collapse);break;case Pe.C.Close:this.tw.next({type:we.Uh.UserInteraction,payload:{playback:!1}}),this.ZI.next({type:Pe.C.Close});break;case Pe.C.Mute:this.setVolume(0),this.Iw(n.ProtoAdClickTypeEnum.MuteClick);break;case Pe.C.Unmute:this.setVolume(1),this.Iw(n.ProtoAdClickTypeEnum.UnmuteClick);break;case Pe.C.SkipAd:this.Aw()}}))}dw(){this.lw.showSkipAdButton(this.vl.skipAdAfter)}Iw(t){var i;const e=null===(i=this.jl)||void 0===i?void 0:i.getCurrentAdMetadata(h.k.LINEAR);if(!e)return;const{advertiserLineItemId:s,publisherLineItemId:n}=e,r=this.jl.getCurrentAdBreakType();this.tf.adClick.next({advertiserLineItemId:s,publisherLineItemId:n,adBreakType:W.EN.fromProtoAdBreakType(r),type:W.EN.fromProtoAdClickType(t)})}bw(t){var i;const e=null===(i=this.jl)||void 0===i?void 0:i.getCurrentAdMetadata(h.k.LINEAR);if(!e)return!1;const{adSourceType:s}=e,{skipOffset:n}=t.payload.adLoadedData;return!(0,K.AK)(s,n)&&(0,K.Xj)(e.duration,this.vl)}pw(t){this.qI.filter((i=>i!==t)).forEach((t=>{(0,z.cn)(t,Ie.Gj.Hide)}))}ww(){this.qI.forEach((t=>{(0,z.IV)(t,Ie.Gj.Hide)}))}Pw(){this.YI=!1,this.lw.hideAdLoadingScreen()}cw(){this.lw.hideSkipAdButton()}start(t,i=!1){try{this.fw(i),this.mw(),this.setVolume(t),this.ew()}catch(t){(0,V.n)({callStack:t.stack,level:V.D.CRITICAL,exception:t.message,message:"linearAdhandler_start"})}}getVolume(){return this.WI}increaseVolume(t,i=!1){if(i&&this.Iw(n.ProtoAdClickTypeEnum.VolumeClick),this.WI+t>1)return void this.setVolume(1);const e=this.WI+t;this.setVolume(e)}decreaseVolume(t,i=!1){if(i&&this.Iw(n.ProtoAdClickTypeEnum.VolumeClick),this.getVolume()-t<0)return void this.setVolume(0);const e=this.getVolume()-t;this.setVolume(e)}toggleMute(t=!1){if(t&&this.Iw(0===this.WI?n.ProtoAdClickTypeEnum.UnmuteClick:n.ProtoAdClickTypeEnum.MuteClick),0===this.WI)return this.GI=this.GI>0?this.GI:.2,void this.setVolume(this.GI);this.GI=this.WI,this.setVolume(0)}hide(){(0,z.IV)(this.gl,Ie.s6.Ad,Ie.s6.AdOverlayType);const t=this.gl.parentElement;t&&(0,z.IV)(t,Ie.s6.AdContainer),this.lw.hide(),this.tf.adBreakEnd.next()}show(){var t,i;const e=[Ie.s6.Ad],s=null===(i=null===(t=this.jl)||void 0===t?void 0:t.getCurrentAdMetadata(h.k.LINEAR))||void 0===i?void 0:i.adType;s===n.ProtoAdType.Overlay&&e.push(Ie.s6.AdOverlayType),this.xw=s,(0,z.cn)(this.gl,...e);const r=this.gl.parentElement;r&&(0,z.cn)(r,Ie.s6.AdContainer),this.lw.show(),this.lw.updateVolume(this.WI),this.Pw(),this.tf.adBreakStart.next({adSkippableInSeconds:this.dw?this.vl.skipAdAfter:0,isLinear:!0})}setVolume(t){this.WI=t,this.jl.setAdVolume(h.k.LINEAR,t),this.lw&&this.lw.updateVolume(t),this.tw.next({type:we.Uh.UserInteraction,payload:{volume:!0}}),this.ZI.next({type:Pe.C.Volume,payload:{volume:t}})}resizeAd(t,i){this.inImpression&&(this.updateContinueReadingCard(),this.updateShowAdMarkerTitle())}adStateChange(t,i){this.jl.onAdStateChange(h.k.LINEAR,t,i)}getMainAdContainerWidth(){return this.jl.getMainAdContainerWidth(h.k.LINEAR)}resumeWithoutUserInteraction(){this.inImpression&&this.jl.resumeAd(h.k.LINEAR,!1)}play(){if(!this.inImpression)return;this.jl.resumeAd(h.k.LINEAR,!0),this.tw.next({type:we.Uh.UserInteraction,payload:{playback:!0}}),this.KI=!0}Tw(t){if((0,bt.Ph)("cnxShowAdCard",this.Il.config.pageUrl))return!0;let i=!1;if(t.adType===n.ProtoAdType.Video){const e=this.gl.clientWidth*(t.heightRatio/t.widthRatio);i=this.gl.clientHeight-e>=76}return t.adType===n.ProtoAdType.Overlay&&(i=this.gl.clientHeight-t.height>=76),i}updateContinueReadingCard(){const t=this.jl.getCurrentAdMediaSize(h.k.LINEAR);(0,w.$K)(t)&&(this.Tw(t)?this.lw.showContinueReadingCard(this.Zp):this.lw.hideContinueReadingCard(this.Zp))}updateShowAdMarkerTitle(){this.zI&&this.gl.clientWidth>=320?this.lw.showAdMarkerTitle():this.lw.hideAdMarkerTitle()}setContinueReadingCard(t){this.lw.setContinueReadingCard({imageSrc:Te.Q.getSmartCroppedImageUrl(t.imageSrc,270,150,this.Ue),title:t.title})}hideContinueReadingCard(){this.lw.hideContinueReadingCard(this.Zp)}setAdMarkerTitle(t){this.lw.addAdMarkerTitle(t),this.zI=!0,this.gl.clientWidth>=320&&this.lw.showAdMarkerTitle()}hideAdMarkerTitle(){this.lw.hideAdMarkerTitle()}pause(){if(!this.inImpression)return;this.jl.pauseAd(h.k.LINEAR,!0),this.tw.next({type:we.Uh.UserInteraction,payload:{playback:!1}}),this.KI=!1}togglePlay(t=!1){t&&this.Iw(this.KI?n.ProtoAdClickTypeEnum.PauseClick:n.ProtoAdClickTypeEnum.PlayClick),this.KI?this.pause():this.play()}stopAd(t){const i=()=>{this.Ai.next({type:s.fI.AdStopped,payload:{payload:{adType:n.ProtoAdType.Video}}});const i=t===r.aB.ForceStopAdSlot;this.kl.next({type:r.lc.HideLinearEvent,forced:i}),this.XI=!1};this.jl?(i(),this.jl.stopAd(h.k.LINEAR,t)):this.inAdPodLoadingState&&i()}Aw(){this.jl&&this.inImpression?this.jl.skipAd(h.k.LINEAR):this.YI&&(this.Ai.next({type:s.fI.AdSkipped}),this.Pw())}enterAdPodLoadingState(){this.YI=!0;const{width:t,height:i}=this.jl.getAdContainerSize(this.xw);this.lw.showAdLoadingScreen(Te.Q.getSmartCroppedImageUrl(this.Cw,t,i,this.Ue),this.uw,this.bl.getNextSlotIndex(),this.bl.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(t){this.Cw=t}destroy(){var t;(0,a.i)(this.be),null===(t=this.lw)||void 0===t||t.destroy()}get onVpaidEvent(){return this.Ai.asObservable()}get onUiComponentEvent(){return this.ZI.asObservable()}get onExperienceEvent(){return this.tw.asObservable()}get onLinearEvent(){return this.kl.asObservable()}get adUserInterface(){return this.lw}get adContainer(){return this.Zp}get secondaryAdContainer(){return this.tu}get firstAdShown(){return this.HI}get inImpression(){return this.ef}get adInWin(){return this.jl.isAdInWin(h.k.LINEAR)}get inAdPodLoadingState(){return this.YI}get onFullcreenChange(){return this.iw.asObservable()}}class Ce extends ke{aw(t){super.aw(t),this.vl.outstreamAdAsContent&&this.Ew()}Sw(){return this.vl.outstreamAdAsContent}Ew(){this.lw.hideProgressBar(),this.lw.hideAdMarker(),this.cw()}}class Ee{constructor(t,i,e,n,r,h,a,c,d){this.vl=t,this.gl=i,this.yl=e,this.bl=n,this.Il=r,this.Ue=h,this.Sl=a,this.jl=c,this.tf=d,this.be=[],this.Dl=new o.x,this.Ai=new o.x,this.tw=new o.x,this.qI=[],this.ef=!1,this.Al=s.zc.Normal,this.Mw=!1}ew(){this.be.push(this.jl.onNonlinearVpaidEvent.subscribe((t=>{switch(t.type){case s.fI.AdImpression:this.aw(t.payload);break;case s.fI.AdUserClose:this.Iw(n.ProtoAdClickTypeEnum.AdUserClose);break;case s.fI.AdError:this.ww();break;case s.fI.AdClickThru:this.Iw(n.ProtoAdClickTypeEnum.AdClickThrough)}this.Ai.next(t),this.Lw(t)})))}Lw(t){switch(t.type){case s.fI.AdImpression:this.show(),this.Dl.next({type:r.gx.ShowNonLinearEvent,payload:t.payload});break;case s.fI.AdUserClose:this.hide();break;case s.fI.AdStopped:this.hide(),this.Dl.next({type:r.gx.HideNonLinearEvent});break;case s.fI.AdError:this.inImpression&&this.Dl.next({type:r.gx.HideNonLinearEvent})}}aw(t){this.ef=!0,this.pw(t.payload.selectedAdSlot)}mw(){this.Zp=this.gw(),this.yw(this.Zp),this.qI.push(this.Zp)}gw(t=""){return this.Il.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-non-linear-ad-container cnx-full-height ${t}"></div>`)}yw(t){this.gl.appendChild(t)}Iw(t){var i;const e=null===(i=this.jl)||void 0===i?void 0:i.getCurrentAdMetadata(h.k.NONLINEAR);if(!e)return;const{advertiserLineItemId:s,publisherLineItemId:n}=e,r=this.jl.getCurrentAdBreakType();this.tf.adClick.next({advertiserLineItemId:s,publisherLineItemId:n,adBreakType:W.EN.fromProtoAdBreakType(r),type:W.EN.fromProtoAdClickType(t)})}pw(t){this.qI.filter((i=>i!==t)).forEach((t=>{(0,z.cn)(t,Ie.Gj.Hide)}))}ww(){this.qI.forEach((t=>{(0,z.IV)(t,Ie.Gj.Hide)}))}Bw(){var t;const i=null===(t=this.jl.getCurrentAdMediaSize(h.k.NONLINEAR))||void 0===t?void 0:t.height;if(!(0,w.r)(i))return!0;const e=this.adContainer.clientHeight,s=(0,Z.Tc)(e,m.O.NON_LINEAR_MAX_HEIGHT_PERCENT);return Math.ceil(s)<i}start(){try{this.mw(),this.ew()}catch(t){(0,V.n)({callStack:t.stack,level:V.D.CRITICAL,exception:t.message,message:"nonLinearAdhandler_start"})}}hide(){(0,z.IV)(this.gl,Ie.s6.AdNonLinear),this.tf.adBreakEnd.next()}show(){(0,z.cn)(this.gl,Ie.s6.AdNonLinear),this.tf.adBreakStart.next({adSkippableInSeconds:0,isLinear:!1})}adStateChange(t,i){this.inImpression&&(t===n.ProtoAdSlotsEnum.PreRoll||t===n.ProtoAdSlotsEnum.PostRoll?this.pause():this.resumeWithoutUserInteraction(t),this.jl.onAdStateChange(h.k.NONLINEAR,t,i))}contentPlaybackStateChanged(t){this.Mw=t,this.Mw||this.pause()}resizeAd(t,i,e){this.inImpression&&this.Mw&&(this.Bw()?this.pause():this.resumeWithoutUserInteraction(e))}resumeWithoutUserInteraction(t){this.inImpression&&t!==n.ProtoAdSlotsEnum.PreRoll&&t!==n.ProtoAdSlotsEnum.PostRoll&&(this.Bw()||(this.show(),this.jl.resumeAd(h.k.NONLINEAR,!1)))}pause(){if(!this.inImpression)return;this.hide();this.jl.pauseAd(h.k.NONLINEAR,!0),this.tw.next({type:we.Uh.UserInteraction,payload:{playback:!1}})}stopAd(t){if(!this.inImpression)return;const i=()=>{this.Ai.next({type:s.fI.AdStopped,payload:{payload:{adType:n.ProtoAdType.Nonlinear}}}),this.Dl.next({type:r.gx.HideNonLinearEvent})};this.jl&&(i(),this.jl.stopAd(h.k.NONLINEAR,t))}destroy(){(0,a.i)(this.be)}get onExperienceEvent(){return this.tw.asObservable()}get onNonLinearEvent(){return this.Dl.asObservable()}get onVpaidEvent(){return this.Ai.asObservable()}get adContainer(){return this.Zp}get inImpression(){return this.ef}get adInWin(){return this.jl.isAdInWin(h.k.NONLINEAR)}}class Me extends Ee{}class Le extends u{$l(){const t={playerData:{isOutstream:this.vl.isOutStreamType(),playbackMode:this.vl.playbackMode,initialSoundMode:this.vl.soundMode,hasFloatingCapability:this.vl.floatingSettings.hasFloatingCapability,inFloating:this.fl,liveRampEnvelope:this.Il.services.UserManagerService.identityEnvelope},appSettings:this._appSettings,generalRepository:this.rl,adSourceSettings:this.vl.lineItemSettings,pauseAdWhenFinished:this.vl.pauseAdWhenFinished,loopAdWhenFinished:this.vl.loopAdWhenFinished,skipPlayerSettings:{skipAdAfter:this.vl.skipAdAfter,skipMin:this.vl.skipMin,skippability:this.vl.skippability},adPlaybackMode:this.vl.adPlaybackMode,amazonTamSlotId:this.vl.amazonTamSlotId,prebidJsSupplyChain:this.vl.supplyChainSettings,lineItemAbTestInformation:this.vl.lineItemAbTestInformation,disablePrefetch:this.vl.disablePrefetch,canPrefetchBeforePreroll:this.vl.prefetchOnPreroll,queryJsTargeting:this.vl.queryJsTargeting};return new be(t,this.Sl,this.bl)}Hl(t){return new Ce(this.vl,this.gl,this.yl,this.bl,this.Il,this.Ue,this.Sl,this.jl,t)}Gl(t){return new Me(this.vl,this.gl,this.yl,this.bl,this.Il,this.Ue,this.Sl,this.jl,t)}}var Be=e(8216);class Re extends Le{constructor(){super(...arguments),this.Rw=[],this.enterFullScreen=()=>{this.Ow.enterFullScreen().then().catch((t=>{(0,V.n)({level:V.D.WARN,message:"OutstreamAdHandler_enterFullscreen"})}))},this.exitFullscreen=()=>{this.Ow.exitFullScreen()},this.Dw=()=>{this.Il.services.InteractionService.enableScrollEvent(),this.Il.services.EventsStorageService.emitOnExitFullscreen(),this.linearAdUserInterface.collapse(),this.setVastViewMode(s.zc.Normal)},this.Vw=()=>{this.Il.services.InteractionService.disableScrollEvent(),this.Il.services.EventsStorageService.emitOnEnterFullscreen(),this.linearAdUserInterface.expand(),this.setVastViewMode(s.zc.Fullscreen)}}initFullScreen(){this.Ow=new Be.I(this.Il.services.GlobalDomUtilsService,this.Yl.parentElement,this.Il.config.os.os),this.Nw()}Nw(){this.Rw.push(this.onFullcreenChange.subscribe((t=>{t===Pe.C.Expand?this.enterFullScreen():this.exitFullscreen()}))),this.jw()}jw(){const t=this.Ow.onFullScreenEnter.subscribe((()=>this.Vw())),i=this.Ow.onFullScreenExit.subscribe((()=>this.Dw()));this.Rw.push(i,t)}destroy(){super.destroy(),(0,a.i)(this.Rw)}Tw(){return!1}}var Oe=e(8021);class De extends ke{$w(){this.tu=this.gw(Oe.m$.VideoSizeSlot),this.yw(this.tu),this.qI.push(this.tu)}mw(){super.mw(),this.$w()}pw(t){super.pw(t),t===this.tu&&(0,z.cn)(this.gl,Ie.s6.AdFullSize)}Aw(){super.Aw(),this.jl.userInteraction(!0)}Sw(){return!1}updateContinueReadingCard(){const t=this.jl.getCurrentAdMediaSize(h.k.LINEAR);(0,w.$K)(t)&&(this.Tw(t)?this.lw.showContinueReadingCard(this.Zp):this.lw.hideContinueReadingCard(this.Zp))}}class Ve extends u{$l(){const t={playerData:{isOutstream:!1,playbackMode:this.vl.playbackMode,initialSoundMode:this.vl.soundMode,hasFloatingCapability:this.vl.floatingSettings.hasFloatingCapability,inFloating:this.fl,liveRampEnvelope:this.Il.services.UserManagerService.identityEnvelope},appSettings:this._appSettings,generalRepository:this.rl,adSourceSettings:this.vl.lineItemSettings,pauseAdWhenFinished:this.vl.pauseAdWhenFinished,loopAdWhenFinished:this.vl.loopAdWhenFinished,skipPlayerSettings:{skipAdAfter:this.vl.skipAdAfter,skipMin:this.vl.skipMin,skippability:this.vl.skippability},adPlaybackMode:this.vl.adPlaybackMode,amazonTamSlotId:this.vl.amazonTamSlotId,prebidJsSupplyChain:this.vl.supplyChainSettings,lineItemAbTestInformation:this.vl.lineItemAbTestInformation,disablePrefetch:this.vl.disablePrefetch,queryJsTargeting:this.vl.queryJsTargeting,canPrefetchBeforePreroll:!0};return new be(t,this.Sl,this.bl)}Ql(t,i){return[{container:this.Yl,width:this.Yl.offsetWidth,height:this.Yl.offsetHeight,type:n.ProtoAdType.Overlay},{container:this.tu,width:this.tu.offsetWidth,height:this.tu.offsetHeight,type:n.ProtoAdType.Video}]}Hl(t){return new De(this.vl,this.gl,this.yl,this.bl,this.Il,this.Ue,this.Sl,this.jl,t)}Gl(){}}},8532:(t,i,e)=>{"use strict";e.d(i,{Km:()=>o,Zr:()=>n,jJ:()=>r,n9:()=>h,q0:()=>s});const s={Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"},n={FullscreenChanged:"fullscreenChanged",PlayerFloatChanged:"playerFloatChanged",FloatingEnterStart:"floatingEnterStart",FloatingEnterStop:"floatingEnterStop",FloatingExitStart:"floatingExitStart",FloatingExitStop:"floatingExitStop",CloseButtonClicked:"closeButtonClicked"},r={OmidViewabilityThreshold:"OmidViewabilityThreshold",OmidAdSessionStart:"omidAdSessionStart",OmidAdSessionFinish:"omidAdSessionFinish"},o=Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked",ImpressionPrice:"impressionPrice",ImpressionRevenue:"impressionRevenue",Bid:"bid",PrefetchStart:"prefetchStart"},s),n),r),{AdLoaded:"adLoaded",AdStarted:"adStarted",AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdVolumeChange:"adVolumeChange",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"});var h;!function(t){t.SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError",t.InvalidGUID="InvalidGUID"}(h||(h={}))},8576:(t,i,e)=>{"use strict";var s,n,r,o,h;e.d(i,{FX:()=>r,Ht:()=>a,Oc:()=>h,_S:()=>o,bS:()=>c,do:()=>n,lI:()=>s}),function(t){t.Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie"}(s||(s={})),function(t){t.Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o"}(n||(n={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.ETHERNET=1]="ETHERNET",t[t.WIFI=2]="WIFI",t[t.CELLULAR_UNKNOWN=3]="CELLULAR_UNKNOWN",t[t.CELLULAR_2G=4]="CELLULAR_2G",t[t.CELLULAR_3G=5]="CELLULAR_3G",t[t.CELLULAR_4G=6]="CELLULAR_4G",t[t.CELLULAR_5G=7]="CELLULAR_5G"}(r||(r={})),function(t){t.ETHERNET="ethernet",t.WIFI="wifi",t.CELLULAR="cellular"}(o||(o={})),function(t){t.CELLULAR_SLOW_2G="slow-2g",t.CELLULAR_2G="2g",t.CELLULAR_3G="3g",t.CELLULAR_4G="4g"}(h||(h={}));const a=[{name:n.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:n.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];var c;!function(t){t.Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"}(c||(c={}))},8983:(t,i,e)=>{"use strict";e.d(i,{Gj:()=>s,Hs:()=>A,Ig:()=>c,Ih:()=>b,Ng:()=>d,Nq:()=>a,QO:()=>p,Rp:()=>x,Rq:()=>h,Yk:()=>f,_7:()=>m,hQ:()=>y,iu:()=>l,jG:()=>v,mr:()=>P,oV:()=>w,p0:()=>_,pT:()=>S,s6:()=>n,sN:()=>I,s_:()=>r});var s,n,r,o=e(1988);!function(t){t.Invisible="cnx-mod-invisible",t.HovarableButton="cnx-ui-btn-hoverable",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.NoHeight="cnx-mod-no-height",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none"}(s||(s={})),function(t){t.Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdNonLinear="cnx-in-ad-non-linear",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.AdShowCard="cnx-ad-show-card",t.AdContainer="cnx-in-ad-container",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.PodLoadingScreen="cnx-in-pod-loading",t.AdShowCountdown="cnx-ad-show-countdown",t.CloseOn="cnx-close-on",t.CloseOff="cnx-close-off",t.CloseHover="cnx-close-hover",t.CloseFloatOn="cnx-close-float-on",t.CloseFloatOff="cnx-close-float-off",t.CloseFloatHover="cnx-close-float-hover",t.UiInView="cnx-ui-in-view",t.ClickToPlayThumbnail="cnx-click-to-play-thumbnail",t.VideoWrapper="cnx-video-wrapper",t.PlayerFocused="cnx-focused",t.TabFocus="cnx-tab-focus",t.AdUserInteraction="cnx-ad-user-interaction",t.BottomButtonsContainer="cnx-ui-buttons",t.HeadButtonsContainer="cnx-ui-head-buttons",t.MuteWatermark="cnx-mute-watermark"}(n||(n={})),function(t){t.Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended"}(r||(r={}));const h={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"},a={Xxl:"",Xl:o.Z.XL,Lg:o.Z.LG,Md:o.Z.MD,Sm:o.Z.SM,Xs:o.Z.XS,Xxs:""};var c,d,l,u,p,f,m;!function(t){t.Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed"}(c||(c={})),function(t){t.ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container"}(d||(d={})),function(t){t.Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill"}(l||(l={})),function(t){t.InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family"}(u||(u={})),function(t){t.Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF"}(p||(p={})),function(t){t.CaptionContainer="cnx-captions-text-holder"}(f||(f={})),function(t){t.MainClass="cnx-float",t.TransitionClass="cnx-float-transition",t.InstantTransitionClass="cnx-float-instant-transition",t.AlwaysFloating="cnx-always-floating",t.PinnedTopFloating="cnx-pinned-top-floating",t.PinnedFloating="cnx-pinned",t.PinnedBottomFloating="cnx-pinned-bottom-floating",t.PinnedWrapper="cnx-pinned-wrapper",t.ContentWrapper="cnx-content-wrapper",t.HidePinnedTitle="cnx-hide-pinned-title-in-ad"}(m||(m={}));const v={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};var g,y,b;!function(t){t.CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right"}(g||(g={})),function(t){t.OpacityInTransition="cnx-tooltip-animation-in"}(y||(y={})),function(t){t.Card="cnx-g-card",t.CardSlot="cnx-g-card-slot",t.CardImage="cnx-g-card-image",t.CardText="cnx-g-card-text",t.CardTextContainer="cnx-g-card-text-container",t.CardPlaceholder="cnx-g-card-placeholder",t.CardRail="cnx-g-rail",t.StyleDetailed="cnx-g-style-detailed",t.StyleVisual="cnx-g-style-visual",t.ExploreMore="cnx-g-explore-more",t.FadeOut="cnx-g-fade-out"}(b||(b={}));const I={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},w="cnx-ratio",S="cnx-hide-video",A={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},P={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"},_={CloseButton:"cnx-ad-close-non-linear-button"},x={Wrapper:"cnx-a11y-status"}},3775:(t,i,e)=>{"use strict";var s;e.d(i,{b:()=>s}),function(t){t.GarbageCollector="data-cnx-gc",t.ContextMenuSettings="cnx-ui-cm-settings"}(s||(s={}))},7945:(t,i,e)=>{"use strict";e.d(i,{g:()=>s,x:()=>n});const s=JSON.parse('{"version":274128,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production"}'),n=!0},5227:(t,i,e)=>{"use strict";var s,n;e.d(i,{Uh:()=>n,Xh:()=>s,dP:()=>r}),function(t){t.SessionRendered="rendered",t.SessionView="enter_view"}(s||(s={})),function(t){t.UserInteraction="userInteraction",t.GeneralUserInteraction="generalUserInteraction",t.CanStart="canStart",t.Destroy="destroy"}(n||(n={}));const r={StateChanged:"stateChanged"}},5788:(t,i,e)=>{"use strict";var s,n;e.d(i,{Gf:()=>r,I_:()=>o,Xx:()=>n,fJ:()=>a,lm:()=>c,oC:()=>h,vh:()=>s}),function(t){t[t.DirectionIn=0]="DirectionIn",t[t.DirectionOut=1]="DirectionOut",t[t.FadeIn=2]="FadeIn"}(s||(s={})),function(t){t.Float="float",t.Embed="embed"}(n||(n={}));const r=400,o=1e3,h=20,a=.5,c=500},1712:(t,i,e)=>{"use strict";e.d(i,{F:()=>s});const s={subdivision:{California:5332921,Virginia:6254928},country:{US:6252001}}},4581:(t,i,e)=>{"use strict";e.d(i,{x:()=>s});const s="//securepubads.g.doubleclick.net/tag/js/gpt.js"},9022:(t,i,e)=>{"use strict";e.d(i,{$b:()=>a,f3:()=>n,fJ:()=>o,kd:()=>h,xs:()=>r});var s=e(289);const n=31,r={[s.ProtoAdType.Video]:2e3,[s.ProtoAdType.Overlay]:1e3,[s.ProtoAdType.Nonlinear]:1e3},o=.5,h="connatix.com",a="Advertisement"},8211:(t,i,e)=>{"use strict";e.d(i,{M:()=>r,a:()=>n});var s=e(289);const n=[s.ProtoDeviceType.Smartphone,s.ProtoDeviceType.Tablet];var r;!function(t){t.Ios="ios",t.Android="android",t.Mac="macos",t.Windows="windows",t.Linux="linux",t.IPadOS="ipados"}(r||(r={}))},307:(t,i,e)=>{"use strict";e.d(i,{Fk:()=>n,Kp:()=>o,a8:()=>h,br:()=>s,cc:()=>r,ym:()=>a});const s="https://info.connatix.com/",n="v",r="tier",o="pid",h="sid",a="cid"},1509:(t,i,e)=>{"use strict";var s;e.d(i,{n:()=>s}),function(t){t[t.FirstQuartile=0]="FirstQuartile",t[t.SecondQuartile=1]="SecondQuartile",t[t.ThirdQuartile=2]="ThirdQuartile",t[t.FourthQuartile=3]="FourthQuartile"}(s||(s={}))},9357:(t,i,e)=>{"use strict";e.d(i,{T9:()=>s,Y0:()=>h,oG:()=>c,p7:()=>n,s_:()=>o,ti:()=>a,uD:()=>r});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=36e5,r=6e4,o=1e3,h=60,a=864e5,c=60},5968:(t,i,e)=>{"use strict";var s;e.d(i,{$6:()=>s,K1:()=>n,tb:()=>r}),function(t){t.Connatix="143",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia="",t.AmxRTB="737",t.Smaato="82",t.TheMediaGrid="686",t.Rise="1043"}(s||(s={}));const n="cnx_usr_storage",r=["1YNY"]},9490:(t,i,e)=>{"use strict";var s,n,r,o;e.d(i,{Ez:()=>r,L5:()=>o,Qg:()=>l,T$:()=>h,XQ:()=>a,ZH:()=>n,d0:()=>u,gQ:()=>d,se:()=>c,wB:()=>s}),function(t){t.Play="play",t.Playing="playing",t.Pause="pause",t.Mute="mute",t.Unmute="unmute",t.Canplay="canplay",t.Ended="ended",t.Timeupdate="timeupdate",t.Seeking="seeking",t.Seeked="seeked",t.Volumechange="volumechange",t.Durationchange="durationchange",t.Fullscreen="fullscreen",t.LoadedData="loadeddata",t.LoadedMetadata="loadedmetadata",t.Error="error",t.BufferProgress="progress"}(s||(s={})),function(t){t[t.Auto=0]="Auto",t[t.Strict=1]="Strict"}(n||(n={})),function(t){t[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported",t[t.InCuePoint=12]="InCuePoint"}(r||(r={})),function(t){t.H264="h264",t.Hevc="hevc"}(o||(o={}));const h={PlayError:"playError",NewVideo:"newVideo",Buffering:"buffering",Buffered:"buffered",LevelSwitching:"levelSwitching",EndOfStream:"endOfStream",LiveStreamNotPlayable:"liveNotPlayable"},a={Change:"VideoQualityChanged",CurrentQuality:"CurrentQuality",Loaded:"QualityListLoaded"};var c;!function(t){t[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p"}(c||(c={}));const d=720,l=5e3,u={NewThumbnail:"NewThumbnail"}},7423:(t,i,e)=>{"use strict";var s;e.d(i,{k:()=>s}),function(t){t.LINEAR="LINEAR",t.NONLINEAR="NONLINEAR"}(s||(s={}))},6027:(t,i,e)=>{"use strict";e.d(i,{e:()=>h,j:()=>s});var s,n=e(9791);class r{}r.clientAb0=4,r.clientAb1=(0,n.Vm)([0,50,50]);class o{}o.clientAb0=4,o.clientAb1=(0,n.Vm)([0,50,50]),function(t){t[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService"}(s||(s={}));class h{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static getABValueForKey(t){return this.abServiceType===s.PlayspaceABService?o[t]:r[t]}static setClientAb0(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb0=t;else r.clientAb0=t}static setClientAb1(t){if(this.abServiceType===s.PlayspaceABService)o.clientAb1=t;else r.clientAb1=t}}},2450:(t,i,e)=>{"use strict";e.d(i,{$:()=>a});const s="ats-liveramp-envelope-request";var n=e(289),r=e(9791),o=e(4798),h=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class a{static getEnvelopeFromParentAts(t){var i;return h(this,void 0,void 0,(function*(){if(!(null===(i=a.envelope)||void 0===i?void 0:i.envelope))try{const i=yield this.Uw(t);return(0,o.$K)(i)?void(a.envelope=JSON.parse(i)):void a.communicateViaPostMessage(t)}catch(t){}}))}static Uw(t){return h(this,void 0,void 0,(function*(){if(t.ats){try{return t.ats.retrieveEnvelope().then((t=>t))}catch(t){}return this.retrieveEnvelopeWithCallback(t)}}))}static retrieveEnvelopeWithCallback(t){return h(this,void 0,void 0,(function*(){try{return yield t.ats.retrieveEnvelope((t=>t))}catch(t){}}))}static communicateViaPostMessage(t){a.dispatchEnvelopeRequestEvent(t),a.addEnvelopeListener()}static dispatchEnvelopeRequestEvent(t){try{t.postMessage(s,"*")}catch(i){void 0!==t.contentWindow&&t.contentWindow.postMessage(s,"*")}}static receiveEnvelopeListener(t){t&&t.data&&"ats-liveramp-envelope-result"===t.data.message&&t.data.result&&(a.envelope=JSON.parse(t.data.result),window.removeEventListener("message",a.receiveEnvelopeListener))}static addEnvelopeListener(){window.addEventListener("message",a.receiveEnvelopeListener,!1)}static getEnvelopeWithConsent(t,i){return new Promise(((e,s)=>{i.isConsentConnatix()?a.getEnvelopeFromParentAts(t).then((()=>{var t;(null===(t=a.envelope)||void 0===t?void 0:t.envelope)?e(a.envelope.envelope):setTimeout((()=>s()),500)})):setTimeout((()=>s()),500)}))}static getEnvelope(t,i){return h(this,void 0,void 0,(function*(){yield(0,r.Up)((()=>a.getEnvelopeWithConsent(t,i))).catch((()=>{}))}))}static setEnvelopeStatus(t){a.envelopeStatus=t}static getValidEnvelope(){var t;return(null===(t=a.envelope)||void 0===t?void 0:t.envelope)&&a.envelopeStatus===n.LiveRampEnvelopeStatusEnum.Ok?a.envelope.envelope:null}static wasRequestEnhanced(t){var i;return(null===(i=a.envelope)||void 0===i?void 0:i.envelope)&&t===n.LiveRampEnvelopeStatusEnum.Ok}static destroy(){a.envelope=null}}a.envelope=null,a.envelopeStatus=n.LiveRampEnvelopeStatusEnum.Ok},9710:(t,i,e)=>{"use strict";e.d(i,{_:()=>d});var s=e(4581);const n=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],r="cnxtestadblock";var o=e(3020),h=e(9791),a=e(4798),c=e(3);class d{static get isBannerBlocked(){return this.qw}static onAdBlockerDetected(){return this.Hw.asObservable()}static detectUsingCSS(t){try{let i=!1;t.document.body.insertAdjacentHTML("beforeend",this.zw(t));const e=t.document.getElementById(r);return 0!==e.getBoundingClientRect().height&&0!==e.getBoundingClientRect().width||(i=!0),t.document.body.removeChild(e),this.Ww(i),i}catch(t){return this.Ww(!1),!1}}static detectUsingScript(){return new Promise((t=>{const i=(0,h.pE)(window).topFrame,e=i=>{this.Hw.next(i),this.Hw.complete(),t(i)},n=()=>(0,a.QM)(i.googletag.getVersion())?e(!1):e(!0);i.googletag&&e(!1),(0,o.dZ)({src:s.x},i.document.head,i,(()=>{var t;return i.googletag?null===(t=i.googletag.cmd)||void 0===t?void 0:t.push(n):e(!0)}),(()=>e(!0)))}))}static Ww(t){this.qw=t,this.qw&&(this.Hw.next(!0),this.Hw.complete())}static zw(t){const i=t.location.hostname.toLowerCase().indexOf("aljazeera.net")>-1;let e=[...n];i&&(e=e.filter((t=>"text-ads"!==t&&"text-ad-links"!==t)));const s=e.join(" ");return`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="${r}" class="${s}"></div>`}}d.qw=null,d.Hw=new c.t(1)},7129:(t,i,e)=>{"use strict";var s;!function(t){t.prebid="prebid",t.bid="bid",t.win="win",t.impression="impression",t.viewableImpression="viewableImpression",t.postbid="postbid",t.initAd="initAd",t.request="request",t.startAd="startAd",t.adVerification="adVerification"}(s||(s={}))},9741:(t,i,e)=>{"use strict";e.d(i,{S:()=>s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.playerDestroyed=!1,s.incrementLogCount=t=>{s.logCount[t]?(++s.maxLogOverflowCount[t],++s.logCount[t]):(s.logCount[t]=1,s.maxLogOverflowCount[t]=1)},s.isMaxLog=(t,i)=>!!(s.logCount[t]&&s.logCount[t]>i),s.isMaxLogOverflow=t=>s.maxLogOverflowCount[t]>s.MaxLogOverflow&&(s.maxLogOverflowCount[t]=1,!0),s.setMaxLogSent=t=>{s.maxLogSent[t]=!0},s.isMaxLogSent=t=>!!s.maxLogSent[t]},5742:(t,i,e)=>{"use strict";e.d(i,{f:()=>n});var s=e(307);class n{static getCidKeyValueObject(){return!!this.customerId&&{[s.ym]:this.customerId}}static getCidForElkTracking(){return this.customerId?this.customerId:""}}n.customerId=null},8395:(t,i,e)=>{"use strict";e.d(i,{f:()=>d});var s=e(1187),n=e(8843),r=e(6196);var o,h=e(8659),a=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},c=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)};let d=o=class{constructor(){var t,i;this.Gw=new Map,this.Xw=0,this.Qw=(void 0===(t=o.TIME_BETWEEN_TICKS)&&(t=0),void 0===i&&(i=n.z),t<0&&(t=0),(0,r.H)(t,t,i)),this.Qw.subscribe((()=>this.Yw()))}setTimeout(t,i=0){return this.Kw(t,i,!0)}clearTimeout(t){this.Gw.delete(t)}setInterval(t,i=0){return this.Kw(t,i,!1)}clearInterval(t){this.Gw.delete(t)}Zw(t){try{t.callback()}catch(t){(0,s.n)({message:"TimerService_error",callStack:t.stack,exception:t.message,level:s.D.INFO},{throttle:1})}}Yw(){const t=(new Date).getTime(),i=[];for(const[e,s]of this.Gw)t-s.startTime<s.duration*(s.intervalTimesCalled+1)||(this.Zw(s),s.isTimeout?i.push(e):s.intervalTimesCalled++);for(const t of i)this.Gw.delete(t)}Kw(t,i,e){const s=++this.Xw;return this.Gw.set(s,{startTime:(new Date).getTime(),isTimeout:e,callback:t,duration:i,intervalTimesCalled:0}),s}};d.TIME_BETWEEN_TICKS=100,d=o=a([(0,h.ri)(),c("design:paramtypes",[])],d)},6115:(t,i,e)=>{"use strict";var s,n;e.d(i,{B:()=>n,q:()=>s}),function(t){t.NoLineItem="No line item",t.MetadataInvalid="Metadata invalid",t.AdAlreadyStarted="Ad already started",t.NoSupportForCreativeType="Only js api defined creatives can be updated",t.AdManagerNotInitialized="Ad manager not initialized",t.Unknown="The line item could not be updated"}(s||(s={})),function(t){t[t.Normal=0]="Normal",t[t.Buzzfeed=1]="Buzzfeed"}(n||(n={}))},7916:(t,i,e)=>{"use strict";var s;e.d(i,{g:()=>s}),function(t){t[t.None=0]="None",t[t.Portrait=1]="Portrait",t[t.Landscape=2]="Landscape"}(s||(s={}))},9223:(t,i,e)=>{"use strict";var s,n;e.d(i,{P:()=>n,_:()=>s}),function(t){t.absolute="absolute",t.relative="relative"}(s||(s={})),function(t){t.auto="auto",t.all="all"}(n||(n={}))},5935:(t,i,e)=>{"use strict";e.d(i,{X:()=>c});var s=e(8211),n=e(9791),r=e(8576),o=e(51),h=e(4798),a=e(3802);class c{constructor(t){this.mo=t,this.tS=100,this.iS=(0,n.pE)(window).topFrame,this.eS=s.a.indexOf(this.mo.browser.device)>-1,this.Hr=(0,n.dz)(),this.sS={browserType:this.nS(),browserVersion:this.mo.browser.browserVersion},this.Rs=this.rS(),this.oS=a.EN.fromProtoGetDeviceType(this.mo.browser.device),this.hS=this.pageUrl.substr(0,this.tS),this.Gn=(0,o.ge)(this.hS),this.aS=(0,o.FM)(this.hS)}nS(){let t;return Object.keys(r.lI).forEach((i=>{this.mo.browser.browserType.toLowerCase().includes(r.lI[i])&&(t=r.lI[i])})),t}rS(){let t,i=0;const e=this.mo.browser.osCode.split("_"),n=e[0].toLowerCase();return Object.keys(s.M).forEach((i=>{n.includes(s.M[i])&&(t=s.M[i])})),t===s.M.IPadOS&&(t=s.M.Ios),e.length>1&&(i=parseFloat(`${e[1]||0}.${e[2]||0}`)),{os:t,osVersion:i}}get device(){return this.mo.browser.device}get browser(){return this.sS}get os(){return this.Rs}get deviceType(){return this.oS}get geoLocation(){return this.mo.geoLocation}get pageUrl(){return this.mo.pageUrl||""}get sessionId(){return this.mo.sessionId}get pageUrlTrunc(){return this.hS}get pageDomain(){return this.Gn}get pageDomainFullPath(){return this.aS}get isMobile(){return this.eS}get isInApp(){return(0,h.QM)(this.mo.bundleID)}get isAmp(){return this.mo.isAmp}get playerId(){return this.mo.playerId}get appId(){return this.Hr}get bundleID(){return(0,h.QM)(this.mo.iOSAppID)?this.mo.iOSAppID:this.mo.bundleID}get domainURL(){return this.mo.domainURL}get storeURL(){return this.mo.storeURL}get explorationMode(){return this.mo.explorationMode}get appName(){return this.mo.appName}get appCategories(){return this.mo.appCategories}get appVersion(){return this.mo.appVersion}get sdkVersion(){return this.mo.sdkVersion}get appPrivacyPolicy(){return this.mo.appPrivacyPolicy}get appIsPaid(){return this.mo.appIsPaid}get topWindow(){return this.iS}get appPageURL(){return this.mo.appPageURL}get isOVPDomain(){return this.mo.isOVPDomain}}},5106:(t,i,e)=>{"use strict";var s;e.d(i,{m:()=>s}),function(t){t[t.Unknown=0]="Unknown",t[t.TimeoutBetweenAds=1]="TimeoutBetweenAds",t[t.InImpression=2]="InImpression",t[t.LinearDemandMissing=3]="LinearDemandMissing",t[t.ForceDisable=4]="ForceDisable"}(s||(s={}))},9098:(t,i,e)=>{"use strict";e.d(i,{M4:()=>h,_n:()=>a,nn:()=>s,nu:()=>r,qF:()=>o,wy:()=>n});const s=4,n=4,r=20,o=100,h=50;var a;!function(t){t.MainContainer="cnx-scrollbar",t.Wrapper="cnx-scrollbar-wrapper",t.Content="cnx-scrollbar-content",t.Horizontal="cnx-scrollbar-horizontal",t.Handle="cnx-scrollbar-handle",t.PreventSelect="cnx-scrollbar-prevent-select",t.ShowOnHover="cnx-scrollbar-show-on-hover"}(a||(a={}))},3310:(t,i,e)=>{"use strict";e.d(i,{$:()=>r});var s=e(9098),n=e(3020);class r{constructor(t,i={}){if(this.cS=t,this.mo=i,this.dS=0,this.lS=t=>{t.preventDefault(),this.uS=t.pageY,this.pS=t.pageX,(0,n.cn)(this.fS,s._n.PreventSelect),(0,n.cn)(this.wh.document.body,s._n.PreventSelect),this.wh.document.addEventListener("mousemove",this.mS),this.wh.document.addEventListener("mouseup",this.vS)},this.mS=t=>{const i=this.mo.horizontal?t.pageX-this.pS:t.pageY-this.uS;this.uS=t.pageY,this.pS=t.pageX,(0,n.PM)(this.wh,(()=>{this.mo.horizontal?this.gS.scrollLeft+=i/this.yS:this.gS.scrollTop+=i/this.yS}))},this.vS=t=>{(0,n.IV)(this.fS,s._n.PreventSelect),(0,n.IV)(this.wh.document.body,s._n.PreventSelect),this.wh.document.removeEventListener("mousemove",this.mS),this.wh.document.removeEventListener("mouseup",this.vS)},this.wS=t=>{if(!this.mo.horizontal)return;const i=t.deltaMode?s.qF*(t.deltaY<0?-1:1):t.deltaY,e=s.nu*(Math.floor(i)/33),r=this.dS+e;r>=-1*this.fS.clientWidth&&r<=this.gS.scrollWidth-this.fS.clientWidth&&(this.dS=r),(0,n.PM)(this.wh,(()=>this.gS.scrollLeft=this.dS))},this.SS=()=>{clearTimeout(this.AS),this.AS=setTimeout((()=>{this.PS()}),s.M4)},this.PS=()=>{const t=this.mo.horizontal?this.gS.scrollWidth:this.gS.scrollHeight,i=this.mo.horizontal?this.cS.clientWidth:this.cS.clientHeight;this.yS=i/t;const e=-1*(this.cS.clientWidth-(this.fS.clientWidth||s.nn)-s.wy),r=this.cS.clientHeight-this.fS.clientHeight-s.wy;(0,n.PM)(this.wh,(()=>{if(this.yS>=1)(0,n.MV)(this.fS);else{if((0,n.Ho)(this.fS),this.mo.horizontal)return void(0,n.T7)(this.fS,{width:`${Math.max(100*this.yS,10)}%`,height:"",top:`${r}px`,right:"",left:this.gS.scrollLeft/t*100+"%"});(0,n.T7)(this.fS,{width:"",height:`${Math.max(100*this.yS,10)}%`,top:this.gS.scrollTop/t*100+"%",right:`${e}px`,left:""}),this.xS()}}))},this.wh=(0,n.LT)(t),!this.wh)throw new Error("window was not found");this.TS(),this.fS.addEventListener("mousedown",this.lS),this.mo.overrideNativeHorizontalScroll&&this.gS.addEventListener("wheel",this.wS,{passive:!0}),this.wh.addEventListener("resize",this.SS),this.gS.addEventListener("scroll",this.PS),this.gS.addEventListener("mouseenter",this.PS),(0,n.cn)(this.cS,s._n.MainContainer,this.mo.horizontal?s._n.Horizontal:void 0,this.mo.showOnHover?s._n.ShowOnHover:void 0),this.PS();const e=(0,n.Dx)(this.cS,this.wh);"0px"===e.height&&"0px"!==e.maxHeight&&(0,n.T7)(this.cS,{height:e.maxHeight})}TS(){for(this.fS=(0,n.G$)(`<cnx class="${s._n.Handle}">`,this.wh),this.kS=(0,n.G$)(`<cnx class="${s._n.Wrapper}">`,this.wh),this.gS=(0,n.G$)(`<cnx class="${s._n.Content}">`,this.wh),this.kS.appendChild(this.gS);this.cS.firstChild;)this.gS.appendChild(this.cS.firstChild);this.cS.appendChild(this.kS),this.cS.insertAdjacentElement("beforeend",this.fS)}xS(){const t=new Event("cnx-mod-scrollbar");this.cS.dispatchEvent(t)}destroy(){for(this.removeListeners(),(0,n.bX)(this.fS);this.gS.firstChild;)this.cS.appendChild(this.gS.firstChild);(0,n.bX)(this.kS),(0,n.IV)(this.cS,s._n.MainContainer,s._n.Horizontal,s._n.ShowOnHover)}removeListeners(){this.wh.document.removeEventListener("mousemove",this.mS),this.wh.document.removeEventListener("mouseup",this.vS),this.fS.removeEventListener("mousedown",this.lS),this.gS.removeEventListener("wheel",this.wS),this.wh.removeEventListener("resize",this.SS),this.gS.removeEventListener("scroll",this.PS),this.gS.removeEventListener("mouseenter",this.PS)}}},7994:(t,i,e)=>{"use strict";e.d(i,{C:()=>s});class s{constructor(){this.CS=!1,this.promise=new Promise(((t,i)=>{this.ES=t,this.MS=i}))}LS(){this.CS||(this.CS=!0)}resolve(t){this.LS(),this.ES(t)}reject(t){this.LS(),this.MS(t)}get isPending(){return!this.CS}}},6299:(t,i,e)=>{"use strict";e.d(i,{P:()=>a});var s,n=e(4798),r=e(289);!function(t){t[t.Desktop=2]="Desktop",t[t.SmartTV=3]="SmartTV",t[t.Smartphone=4]="Smartphone",t[t.Tablet=5]="Tablet",t[t.GameConsole=6]="GameConsole",t[t.Unrecognized=7]="Unrecognized"}(s||(s={}));const o={[r.ProtoDeviceType.Desktop]:s.Desktop,[r.ProtoDeviceType.Smartphone]:s.Smartphone,[r.ProtoDeviceType.Tablet]:s.Tablet,[r.ProtoDeviceType.GameConsole]:s.GameConsole,[r.ProtoDeviceType.SmartTV]:s.SmartTV,[r.ProtoDeviceType.WearableComputer]:s.Unrecognized,[r.ProtoDeviceType.PDA]:s.Unrecognized,[r.ProtoDeviceType.Unrecognized]:s.Unrecognized},h="cnx_fraud_sensor";class a{constructor(t,i,e,s){this.BS=t,this.RS=i,this.OS=e,this.DS(s)}addFraudSensorScript(){if(this.RS.getElementById(h))return;const t={id:h,src:this.BS.setupMacros("https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[FS_DEVICE_IDENT]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]")};this.RS.insertScript(t,null,"FraudSensor_script_error")}DS(t){t=(0,n.QM)(t)?t:"00000000-0000-0000-0000-000000000000";const{lookupId:i,lookupResponseCode:e,deviceIdentifier:s}=this.OS,r=o[this.OS.deviceType];this.BS.setUserId(t),this.BS.setFraudSensorMacros({lookupId:i,lookupResponseCode:e,deviceType:r,mediaType:2,deviceIdentifier:s})}}},8216:(t,i,e)=>{"use strict";e.d(i,{I:()=>c});var s,n=e(8211),r=e(1187),o=e(7994),h=e(8576),a=e(6716);!function(t){t.enter="enterFullscreen",t.exit="exitFullscreen"}(s||(s={}));class c{constructor(t,i,e){if(this.Tr=t,this.Rs=e,this.VS=!1,this.FS=1e3,this.jS=!0,this.$S=new a.x,this.qS=new a.x,this.HS=!1,this.zS=()=>{this.VS&&this.WS()},this.GS=t=>{this.VS?null!==this.fullscreenElement?this.WS():this.JS():this.$S.next(s.exit)},this.JS=()=>{this.HS=!1,this.QS.reject(),this.VS=!1,clearTimeout(this.YS)},this.KS=this.Tr.hasIosFullscreenBehaviour(e)?i.getElementsByTagName("video")[0]:i,!this.KS)throw new Error("element is missing");try{const t=this.ZS();if(null==t)return void(this.jS=!1);this.tA=t.keys,this.iA=t.name,this.sA()}catch(t){this.jS=!1,(0,r.n)({message:"Fullscreen init failed",exception:t.message,callStack:t.stack,level:r.D.CRITICAL})}}ZS(){let t;return t=this.Tr.hasIosFullscreenBehaviour(this.Rs)?this.Tr.getFullscreenKeys(this.KS):this.Tr.getFullscreenKeys(),t}get fullscreenElement(){return this.Tr.getDocumentProperty(this.tA.fullscreenElement)}get fullscreenEnabled(){return this.Tr.getDocumentProperty(this.tA.fullscreenEnabled)}enterFullScreen(){if(this.jS){this.QS=new o.C,this.VS=!0,clearTimeout(this.YS),this.YS=setTimeout(this.JS,this.FS);try{this.KS[this.tA.requestFullscreen]()}catch(t){this.JS()}return this.QS.promise}}exitFullScreen(){try{this.Tr.exitFullscreen(this.tA.exitFullscreen,this.Rs===n.M.Ios?this.KS:void 0)}catch(t){(0,r.n)({message:"fullscreen_exit",exception:t.message,callStack:t.stack,level:r.D.WARN})}this.HS=!1}sA(){this.iA===h.do.Moz||this.iA===h.do.Ms?(this.Tr.addEventListenerOnGlobal(this.tA.fullscreenchange,this.GS),this.Tr.addEventListenerOnGlobal(this.tA.fullscreenerror,this.JS)):(this.KS.addEventListener(this.tA.fullscreenchange,this.GS),this.KS.addEventListener(this.tA.fullscreenerror,this.JS)),this.Tr.hasIosFullscreenBehaviour(this.Rs)&&(this.KS.addEventListener("webkitbeginfullscreen",this.zS),this.KS.addEventListener("webkitendfullscreen",this.GS))}nA(){this.iA===h.do.Moz||this.iA===h.do.Ms?(this.Tr.removeEventListenerOnGlobal(this.tA.fullscreenchange,this.GS),this.Tr.removeEventListenerOnGlobal(this.tA.fullscreenerror,this.JS)):(this.KS.removeEventListener(this.tA.fullscreenchange,this.GS),this.KS.removeEventListener(this.tA.fullscreenerror,this.JS)),this.Rs===n.M.Ios&&(this.KS.removeEventListener("webkitbeginfullscreen",this.zS),this.KS.removeEventListener("webkitendfullscreen",this.GS))}WS(){this.HS=!0,this.qS.next(s.enter),this.QS.resolve(),this.VS=!1,clearTimeout(this.YS)}get isFullscreen(){return this.HS}get onFullScreenExit(){return this.$S.asObservable()}get onFullScreenEnter(){return this.qS.asObservable()}destroy(){this.isFullscreen&&this.exitFullScreen(),this.nA(),this.QS&&this.QS.isPending&&this.QS.reject()}}},1828:(t,i,e)=>{"use strict";e.d(i,{o:()=>m});var s=e(5204),n=e(3020);const r="cnxProxyTask",o=`\n    window.${r} = function(task) {\n        setTimeout(function(){\n            task();\n        }, 0);\n    }\n`;class h{static executeAsync(t,i){this.rA(t)(i)}static oA(t){return!!t[r]}static rA(t){return this.oA(t)||this.hA(t),t[r]}static hA(t){const i=t.document.head;(0,n.ML)(i,t,o)}}var a,c=e(9223),d=e(862),l=e(9906),u=e(9791),p=e(1187),f=e(4798);!function(t){t.errorIframe="Error creating iframe"}(a||(a={}));class m{constructor(t,i,e){this.Oi=t,this.Di=i,this.aA=e}cA(t,i,e){let s=!1;return n=>{n.contentWindow&&!s&&(s=!0,this.dA(n,this.lA(t,i),e))}}uA(t,i,e,s,n,r,o,h,a,c,d=!0,l=""){return this.pA(t,this.cA(i,e,s),n,r,o,h,a,c,d,l)}pA(t,i,e=c._.absolute,s=c.P.auto,r,o,h,a,d=!0,l=""){const u=this.Oi.createElement("iframe",h);let p="100%",m="100%";return(null==a?void 0:a.scalable)?(p=a.scalable.maxHeightPercent+"%",m=a.scalable.maxWidthPercent+"%"):(null==a?void 0:a.width)&&(null==a?void 0:a.height)&&(p=a.height+"px",m=a.width+"px"),(0,f.QM)(l)&&(0,n.cn)(u,l),r&&(u.title=r),u.allow="autoplay",u.src="javascript:false",u.srcdoc="",u.width=m,u.height=p,u.style.position=e,u.style.left="0",u.style.top="0",u.style.margin="0px",u.style.padding="0px",u.style.border="0px",u.style.width=m,u.style.height=p,u.style.pointerEvents=s,d||(u.style.display="none"),u.setAttribute("SCROLLING","NO"),null==o||o.forEach((t=>{u.setAttribute(t.key,t.value)})),u.onload=()=>{i(u)},t.appendChild(u),i(u),u}dA(t,i,e){const s=(0,n.LT)(t);h.executeAsync(s,(()=>{try{const e=t.contentWindow&&t.contentWindow.document;e.open(),e.write(i)}catch(i){this.fA(t,i),t=null}e(t)}))}lA(t,i){return Object.keys(i).forEach((function(e){const s="object"==typeof i[e]?JSON.stringify(i[e]):i[e];t=t.replace(new RegExp(`{{${e}}}`,"g"),s)})),t}loadIframe(t){const i='<!DOCTYPE html><html lang="en"><head>'+(t.customHead?t.customHead:"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(t.customHtml?t.customHtml:"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',e="cnx-iframe_"+(0,u.qs)();return new Promise(((n,r)=>{const o=i=>{if(null===i)return void r(a.errorIframe);const o=t=>{let s;try{s=JSON.parse(t.data)}catch(t){return}s.id===e&&(i.contentWindow?(i.contentWindow.document.close(),i.contentWindow.removeEventListener("message",o),n({iframe:i})):r("The Iframe is no longer in the DOM"))};try{if(i.contentWindow.addEventListener("message",o),!t.customReportingLog)return;const{advertiserLineItemId:e,heavyAdBlockTypeEnum:n}=t.customReportingLog,r=l.h.getSessionChildContainer(this.Di).resolve(s.k);this.mA=new d.Z(this.vA.contentWindow,{advertiserLineItemId:e,heavyAdBlockTypeEnum:n},r)}catch(t){this.fA(i,t),r("Iframe callback error")}};try{this.vA=this.uA(t.container,i,{iframeID:e},o,t.iframePosition,t.iframePointerEvents,t.title,t.customIframeAttributes,this.aA,t.iframeCustomDimensions,t.visible,t.iframeClass)}catch(t){(0,p.n)({message:"IframeLoader_error_creating_iframe",level:p.D.WARN,exception:t.message,callStack:t.stack})}}))}get iframe(){return this.vA}destroy(){var t;try{null===(t=this.mA)||void 0===t||t.destroy(),this.vA=null}catch(t){const{message:i,stack:e}=(0,u.W$)(t);(0,p.n)({level:p.D.WARN,message:"IframeLoader_destroy",exception:i,callStack:e})}}fA(t,i){this.Oi.isDetachedFromDOM(t)?(0,p.n)({message:"iframeLoader_(inDom_false)",exception:i.message,callStack:i.stack,level:p.D.WARN},{shouldSendMaxLog:!1,throttle:1}):(0,p.n)({message:"iframeLoader_(inDom_true)",exception:i.message,callStack:i.stack,level:p.D.WARN},{shouldSendMaxLog:!1,throttle:1}),(0,n.bX)(t)}}},3360:(t,i,e)=>{"use strict";e.d(i,{Q:()=>o});var s=e(4798),n=e(7332),r=e(6153);class o{static getScaledImageUrl(t,i,e,r,h){if(t&&!(0,n.ON)({width:i,height:e}))return(0,s.r)(h)&&(i=(0,n.Tc)(i,h),e=(0,n.Tc)(e,h)),r.appendParamsToUrl(`${t}${o.getScaledImageQueryParams(i,e)}`.trim())}static getScaledImageQueryParams(t,i){return(0,n.ON)({width:t,height:i})?"":`?width=${t}&height=${i}&fit=bounds`}static getSmartCroppedImageUrl(t,i,e,h){return(0,s.QM)(t)||(t=r.n.endPoints.base.image),(0,n.ON)({width:i,height:e})&&(i=140,e=80),h.appendParamsToUrl(`${t}${o.getSmartCroppedImageQueryParams(i,e)}`)}static getSmartCroppedImageQueryParams(t,i){return(0,n.ON)({width:t,height:i})?"":`?crop=${t}:${i},smart&width=${t}&height=${i}&format=jpeg&quality=60&fit=crop`}static getDefaultPoster(t){const i=`${r.n.endPoints.base.image}default_video_poster.svg`;return t.appendParamsToUrl(i)}}},8049:(t,i,e)=>{"use strict";e.d(i,{a:()=>nt});var s=e(9361),n=e(8532),r=e(8983),o=e(7945),h=e(5227),a=e(307),c=e(6027),d=e(9710),l=e(9741),u=e(5935),p=e(6299),f=e(970),m=e(5701),v=e(4701),g=e(289),y=e.n(g),b=e(3326),I=e(6153),w=e(5687),S=e(6666),A=e(1992),P=e(7187),_=e(1526),x=e(5292),T=e(5421),k=e(1553),C=e(3855),E=e(5650),M=e(3020),L=e(9791),B=e(51),R=e(1187),O=e(9600),D=e(3003),V=e(4798),F=e(4975),N=e(89),j=e(5672),$=e(9005),U=e(9906),q=e(252),H=e(6661),z=e(1712),W=e(8041),G=e(5530),X=e(5675),J=e(6628),Q=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const Y=[],K=[],Z="player_instance",tt=",",it="google_ads_iframe",et=["googlesyndication.com","googleads.g.doubleclick"],st=["partner.googleadservices","admanager.google"];class nt extends m._{constructor(t,i,e,s,n,r){super(),this.services=t,this.GLOBAL=i,this.gA=e,this.bA=s,this.IA=n,this.readyCallback=r,this.wA={},this.SA="<cnx-placeholder></cnx-placeholder>",this.PA=100,this._A=1e3,this.PLAYER_REQUEST_RETRIES_NUMBER=2,this.isServerlessMode=!1,this.xA=!1,this.kA=!1,this.CA=!1,this.EA=[],this.MA=[],d._.detectUsingCSS(this.GLOBAL),this.LA=(0,M.sw)(this.GLOBAL)}initUrlSuffixer(t){const i=new k.f;if(t.bandwidthLoggingState===g.ProtoBandwidthLoggingEnum.Disabled)return i;const e=this.BA(t);return i.setUrlParams({domain:I.n.bundleDomain,urlParams:[(0,D.IS)(e,t.playerId)]}),i}OA(){const t={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(t.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(t.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(t.customParam3=this.externalAttributes.customParam3),this.externalAttributes.customParam4&&(t.customParam4=this.externalAttributes.customParam4),this.externalAttributes.customParam5&&(t.customParam5=this.externalAttributes.customParam5),this.externalAttributes.settings.useExternalViewabilityService&&(t.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=t}DA(t){const i=this.GLOBAL.frameElement;if(!(0,M.GF)(i))return;let e=!0;i&&t&&(e=!1),e?(0,M.MV)(i):(0,M.Ho)(i)}VA(t,i){try{return this.FA(t,i)}catch(t){return null}}NA(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}jA(t,i){const e=this.VA(t,i);return null===e?new Promise((e=>{setTimeout((()=>{e(this.jA(t,i))}),this.PA)})):Promise.resolve(e)}$A(t,i){const e=this.NA(t);return Promise.resolve(this.jA(e,i))}FA(t,i){let e;return t.split(/(\.cnxEq\(\d+\))/).filter((t=>t)).forEach((t=>{e=t.includes("cnxEq")?this.UA(e,t):e?e.querySelectorAll(t):(0,M.Wb)(t,i)})),e?(e.hasOwnProperty("length")&&(e=e.length>0?e[0]:null),e):null}UA(t,i){const e=/\d+/g.exec(i),s=parseInt(e[0],10);return s>t.length?(0,E.Sz)(t)[t.length-1]:(0,E.Sz)(t)[s]}qA(){return this.bA?g.ProtoImplementationType.Amp:g.ProtoImplementationType.Web}HA(){return st.some((t=>{var i;return null===(i=this.pageUrl)||void 0===i?void 0:i.includes(t)}))}zA(){let t=window,i=!1;try{for(;t.parent.document!==t.document&&(i=this.WA(t),!i);)t=t.parent}catch(e){i=this.GA(t)}return i}JA(){return this.kA||this.zA()}GA(t){return et.some((i=>{var e;return null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.href.includes(i)}))}WA(t){var i;return!!(null===(i=null==t?void 0:t.frameElement)||void 0===i?void 0:i.id.includes(it))}QA(t,i){const e=(0,L.pE)(this.GLOBAL);let s;return this.kA=this.HA(),this.CA=this.JA(),s=(0,V.$K)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering.forceInsertPath:i.forceInsertPath,new Promise(((n,o)=>{let h=(0,M.G$)(this.SA,this.GLOBAL);if(s||t.tag.parentNode===this.GLOBAL.document.head&&(!e.topChildFrame||i.renderInFrame)){let t,s,o;e.topChildFrame&&(0,M.IV)(e.topChildFrame.frameElement,r.Gj.DisplayNone),t=(0,V.QM)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering.containerSelector:i.containerSelector,s=(0,V.$K)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering.insertPosition:i.insertPosition,o=(0,V.$K)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering.position:i.position,this.$A(t,e.topFrame).then((t=>{this.YA(t,h,s,o),n({insertContainer:h,insertWindow:e.topFrame})}))}else e.topChildFrame&&!i.renderInFrame?(h=(0,M.G$)(this.SA,e.topFrame),e.topChildFrame.frameElement.parentNode.insertBefore(h,e.topChildFrame.frameElement),(0,M.cn)(e.topChildFrame.frameElement,r.Gj.DisplayNone),n({insertContainer:h,insertWindow:e.topFrame})):(t.tag.parentNode.insertBefore(h,t.tag),n({insertContainer:h}))}))}KA(t,i,e){(0,M.IS)(i,t,e)}ZA(t,i,e){switch(e){case g.ProtoPlayerInsertMode.BeforeContainer:t.parentElement.insertBefore(i,t);break;case g.ProtoPlayerInsertMode.ReplaceContainer:t.parentElement.insertBefore(i,t),(0,M.bX)(t);break;case g.ProtoPlayerInsertMode.HideContainer:t.parentElement.insertBefore(i,t),(0,M.MV)(t);break;case g.ProtoPlayerInsertMode.AfterContainer:t.nextElementSibling?t.parentElement.insertBefore(i,t.nextElementSibling):t.parentElement.appendChild(i)}}YA(t,i,e,s){e===g.ProtoPlayerInsertMode.WithinContainer?this.KA(t,i,s):this.ZA(t,i,e)}tP(t,i=[]){t.lineItems=[...t.lineItems,...i];const e=t.lineItems.length;t.lineItems=(0,E.qy)("advertiserLineItemId",t.lineItems),e!==t.lineItems.length&&(0,R.n)({level:R.D.WARN,message:"Loader_duplicated_adsources",callStack:"_"})}iP(t,i){var e,r,o,a,c,p,f,m;const v=t.players[i],{sessionId:y}=v,{playerModel:b,globalDomUtilsService:I,urlSuffixerService:w}=this.wA[i];if(this.eP(t.cookieSyncUrls),this.services.UserManagerService.setGeoLocation(t.geoLocation),l.S.sessionId=y,this.sP.addPlayerSession(v.playerId,y),!b)return void this.registerApiError(n.n9.SetupError,"No playlist was provided!");const S=new u.X({iOSAppID:this.gA.isInApp&&!this.gA.isInAppSDK?t.iOSAppID:null,browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:b.playerId,explorationMode:t.explorationMode,isAmp:this.bA,bundleID:this.externalAttributes._appSettings.bundleID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,sdkVersion:this.externalAttributes._appSettings.sdkVersion,appPageURL:this.externalAttributes._appSettings.appPageURL,isOVPDomain:this.IA,sessionId:y}),A={browser:t.browser,geoLocation:t.geoLocation,playerId:b.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:t.players[i].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,customParam4:this.externalAttributes.customParam4,customParam5:this.externalAttributes.customParam5,abTestId:t.players[i].abTestId,isExplorationMode:t.explorationMode,bundleAbId:t.bundleAbId,bundlePart:t.bundlePart,lineItemAbTestInformation:t.lineItemAbTestInformation,implementationType:this.qA(),iasSegmentCodes:t.IASSegmentCodes,amazonTamPubId:t.AmazonTamPubId};this.nP({sessionId:S.sessionId,userId:null===(e=t.userInformation)||void 0===e?void 0:e.userId,userIdStored:null===(r=this.services.UserManagerService)||void 0===r?void 0:r.getUserIdFirstPartyCookie(),osCode:null===(o=t.browser)||void 0===o?void 0:o.osCode,browserType:null===(a=t.browser)||void 0===a?void 0:a.browserType,browserVersion:null===(c=t.browser)||void 0===c?void 0:c.browserVersion});const k={pageDomain:S.pageDomain},E={sessionId:y,omidWindow:(0,L.pE)(window).topFrame,isInAppSdk:this.gA.isInAppSDK,isInApp:this.gA.isInApp,isGam:this.CA,sdkVersion:this.externalAttributes._appSettings.sdkVersion?this.externalAttributes._appSettings.sdkVersion:void 0,pageUrl:this.pageUrl},{sessionEvents:M,generalRepository:B,wcagService:R,mediaEvents:O,trackingService:D,adEvents:F}=j.o.boostrapSessionContainer(v.sessionId,A,this.services.UserManagerService,k,b.disableTracking,this.services.EventsStorageService,E,I,null===(f=null===(p=this.externalAttributes.settings)||void 0===p?void 0:p.advertising)||void 0===f?void 0:f.prebidPermutiveParamsConfig),N=new x.v(I),$=this.getViewabilityService(b,N,B);d._.detectUsingCSS(b.global);const U=new _.c(b,t.geoLocation,S.pageUrl,S.pageDomain,S.pageDomainFullPath,this.externalAttributes._appSettings,this.LA,t.publisherNetworkCode),q=null===(m=t.userInformation)||void 0===m?void 0:m.publisherAdsTxt;(0,V.QM)(q)&&U.setPublisherId(q);const H={services:{GlobalDomUtilsService:I,ViewabilityService:$,ResizeObserver:new T.a(b.global),UserManagerService:this.services.UserManagerService,MacrosService:U,EventsStorageService:this.services.EventsStorageService,PageFocusService:N,InteractionService:new P.k(b.global,S.isMobile),UrlSuffixerService:w},config:S};d._.isBannerBlocked&&M.sessionAdBlocked.next({adBlockDetectionType:s.ev.Banner}),H.services.UserManagerService.setPageUrl(H.config.pageUrl),B.playerEnvironment=this.rP(),b.externalMacros&&H.services.MacrosService.addExtraMacros(b.externalMacros);const z=this.oP(I,y,t.geoLocation,t.browser);H.services.UserManagerService.onEvent([C.k.CCPA_INFO_RECEIVED]).then((()=>{H.services.MacrosService.setUsPrivacyString(H.services.UserManagerService.getUsPrivacyString()),z.init(H.services.UserManagerService.isPersonalisedAdsAllowed())})),H.services.UserManagerService.onEvent([C.k.CONSENT_DATA_UPDATE]).then((()=>{B.userId=H.services.UserManagerService.getTrackableUser();const t=H.services.UserManagerService.getConsentPayload();if(B.hasGdprConsentPayload=(0,V.QM)(t),this.services.UserManagerService.gdprConsentMode===g.ProtoGdprConsentModeEnum.NoConsent||this.gA.isInApp){const t=b.lineItemSettings.lineItems.filter((t=>(0,V.QM)(t.vendorId))).every((t=>this.services.UserManagerService.isConsent(t.vendorId)));this.services.UserManagerService.gdprConsentMode=t?g.ProtoGdprConsentModeEnum.AllGood:g.ProtoGdprConsentModeEnum.NotAllDemandConsent}}));const W={wasPlayerReloaded:this.sP.wasPlayerReloaded(v.playerId),wasPlayerInView:this.sP.getSessionInView(v.playerId)};this.renderer=this.getRendererInstance(b,H,W,this.externalAttributes._appSettings,M,F,O,B,R,D),this.subscribe(h.Xh.SessionView,this.renderer,(()=>{this.sP.addSessionInView(v.playerId)})),this.subscribe(h.Xh.SessionRendered,this.renderer,(()=>{this.hP(U,I,H.config)}));const G=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let X=v.customJsCode;try{X=X.trim(),X="try\n            {   var trackerData;\n                const api2 = \"{{player_instance}}\";\n                api2.on('adImpression',function(data){\n                    if(data.adSourceData.adId === '56445225-357b-4728-847b-5ff007dddc2d' || data.adSourceData.adId === 'eff225cb-dc0b-40d0-82aa-c6343d2f513d'){\n                        trackerData.impressionTrackers.forEach(function(el){\n                            const img = new Image();\n                            img.src = el.url;\n                        });\n                    }\n                });\n                api2.on('bid',function(data){\n                    if(data.advertiserLineItemId === 'e021c805-a361-483c-b11c-5142342d87ef'){\n                        trackerData = data;\n                        api2.updateJsQueryTargeting({audiance:'enable'})\n                    }\n                });\n            } catch(e){}; "+X}catch(t){}if(X){const t=`${Z}_${H.config.appId}`;this.GLOBAL[t]=G,X=X.cnx_replaceAll(`"{{${Z}}}"`,`window.${t}`)}this.renderer.init((()=>{this.aP(X)}))?this.registerApiSuccess(G):this.registerApiError(n.n9.RenderError,"Player size under supported value")}oP(t,i,e,s){U.h.getGlobalContainer().register(H.c.GlobalDomUtilsService,{useValue:t});const n={sessionId:i,isUS:z.F.country.US===(null==e?void 0:e.countryGeoId),isChrome:"Chrome"===(null==s?void 0:s.browserType),isInApp:this.gA.isInApp};return U.h.getGlobalContainer().register(H.c.IntentiqSettings,{useValue:Object.assign({},n)}),U.h.getGlobalContainer().resolve(q._)}aP(t,i={useSafeMode:!0}){if(!t)return;const{global:e,useSafeMode:s}=i,n=e||this.GLOBAL;let r;r=s?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,(0,M.ML)(n.document.head,n,r.trim())}cP(){const{playerId:t,parseDomain:i}=this.lP;return this.uP(t,i).catch((t=>{const i=new Error(t);throw(0,R.n)({callStack:i.stack,level:R.D.CRITICAL,exception:i.message,message:"Prerender_Loader_player_id_call_get_pls"},{throttle:1e3}),this.registerApiError(n.n9.SetupError,"player data call error"),this.fP(),i}))}mP(t){return Q(this,void 0,void 0,(function*(){const{browser:i,userInformation:e}=t;if(this.services.UserManagerService.setUserInformation(e),this.services.UserManagerService.setBrowserInfo(i),t.hashedPageUrl&&(yield S.k.loadPageInsights({insightsInputType:A.i.Page,id:t.hashedPageUrl})),e&&e.callFraudSensor){const{lookupId:t,lookupResponseCode:s}=e;this.OS={lookupId:t,lookupResponseCode:s,deviceType:i.device}}if(c.e.serverAb0=t.serverAb0,c.e.serverAb1=t.serverAb1,(0,E.BZ)(t.players)){if(t.players.length>1&&(this.OA(),this.xA=!0),W.q===G.b.Omid&&!this.gA.isInAppHybrid){const t=(0,J.W)(W.o);yield(0,L.Up)((()=>Q(this,void 0,void 0,(function*(){return yield(0,X.Z)(`${t}omid.verification.client.1.4.2.js`)}))))}Object.keys(t.players).forEach((i=>{this.vP(t,this.lP,i)}))}else this.registerApiError(n.n9.NoPlayer,`No player available for given player id:${this.lP.playerId}`);this.fP()}))}fP(){this.gP(),this.yP()}yP(){this.MA.push(this.renderer.onReady().pipe((0,F.h)((t=>!!t)),(0,N.q)(1)).subscribe((()=>{setTimeout((()=>{if(!this.xA){const t=this.EA[0];this.readyCallback&&this.readyCallback(t.apiErrorObj,t.apiConfigObj)}this.bP()}))})))}bP(){this.EA.filter((t=>t.apiErrorObj)).forEach((()=>{this.services.EventsStorageService.emitRenderError()}))}vP(t,i,e){const s=t.players[e],{playerModel:n}=this.wA[e];this.DA(s.renderInFrame),this.iP(t,e),this.IP(n,this.renderer.playerContainer)}uP(t,i=!1){let e={parseDomain:i,referrer:this.LA,pageUrl:this.pageUrl,tokens:[t]};e.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(e.forceLineItemIds=this.queryParams.cnxLineItemId.split(tt).filter((t=>(0,V.QM)(t)))),this.queryParams.cnxPlayerId?e.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(e.forcePlayerId=t),this.queryParams.cnxExplorationMode&&(e.forceExploration=!0);const{queryJsTargeting:s}=this.externalAttributes.settings;return(0,V.as)(s)&&Object.keys(s).length>0&&(e.queryJsTargeting=(0,L.rM)(s)),e.customParam1=this.externalAttributes.customParam1,e.customParam2=this.externalAttributes.customParam2,e.customParam3=this.externalAttributes.customParam3,e.customParam4=this.externalAttributes.customParam4,e.customParam5=this.externalAttributes.customParam5,e.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,e.version=o.g.version,e.es6=o.x,e.userId=this.services.UserManagerService.getForcedTrackableUser(),e.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),e.clientAb0=c.e.clientAb0,e.clientAb1=c.e.clientAb1,e.implementationType=this.qA(),e.reloadedPlayers=this.sP.getCookiePlayersSession(),e.servingRuleId=this.externalAttributes.servingRuleId,e=Object.assign(Object.assign({},e),this.getSpecificRequestData()),this.lP.playerId?this.getPlayerResponse(e):new Promise(((t,i)=>{this.isServerlessMode=!0,t(this.defaultInitFromProto())}))}wP(){const t=(0,B.Ph)("cnxVideoPosition",this.pageUrl),i=parseInt((0,B.Ph)("cnxStoryPosition",this.pageUrl),10),e=(0,B.Ph)("cnxEnableNewUi",this.pageUrl);return{cnxStoryId:(0,B.Ph)("cnxStoryId",this.pageUrl),cnxLineItemId:(0,B.Ph)("cnxLineItemId",this.pageUrl),cnxPlayerId:(0,B.Ph)("cnxPlayerId",this.pageUrl),cnxMediaId:(0,B.Ph)("cnxMediaId",this.pageUrl),cnxPlaylistId:(0,B.Ph)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:t?parseInt(t,10):null,cnxExplorationMode:"true"===(0,B.Ph)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:(0,V.r)(i)?i:null,cnxSkipAdsFlag:"true"===(0,B.Ph)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt((0,B.Ph)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===(0,B.Ph)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===(0,B.Ph)("cnxIsSeoTraffic",this.pageUrl),cnxDebug:"true"===(0,B.Ph)("cnxDebug",this.pageUrl),cnxEnableNewUi:(0,D.yd)(e),cnxDebugLogs:"true"===(0,B.Ph)("cnxDebugLogs",this.pageUrl)}}IP(t,i){const e=this.getDelegateHandler(),s=new v.N(this.GLOBAL,this.services.EventsStorageService,e,t,i);this.IA?d._.isBannerBlocked||this.MA.push(d._.onAdBlockerDetected().subscribe((t=>{t||s.start()}))):s.start()}hP(t,i,e){if(!this.OS)return;const s=this.services.UserManagerService.getTrackableUser();this.OS.deviceIdentifier=e.bundleID;const n=new p.P(t,i,this.OS,s);this.IA?this.MA.push(d._.onAdBlockerDetected().subscribe((t=>{t||n.addFraudSensorScript()}))):n.addFraudSensorScript()}eP(t){d._.isBannerBlocked||(this.IA?this.MA.push(d._.onAdBlockerDetected().subscribe((i=>{i||this.services.UserManagerService.setThirdPartySyncUrls(t)}))):this.services.UserManagerService.setThirdPartySyncUrls(t))}SP(t){const i=()=>new Promise(((i,e)=>{const s=this.AP();t.addCssStylesheetToHead(s,(()=>i()),(t=>e(t)))}));return(0,L.Up)((()=>i())).catch((t=>{throw(0,R.n)({message:"Loader_add_css_link",exception:t,level:R.D.INFO}),new Error(t)}))}BA(t){return t.bandwidthLoggingState===g.ProtoBandwidthLoggingEnum.Enabled?a.Kp:t.bandwidthLoggingState===g.ProtoBandwidthLoggingEnum.SaaS?a.a8:void 0}rP(){return this.gA.isInAppSDK?$.Q.InAppSdk:this.gA.isInAppHybrid?$.Q.InAppWebview:this.gA.isInApp?$.Q.InAppGam:this.bA?$.Q.WebAmp:$.Q.Web}nP(t){try{if(this.externalAttributes.settings._connatixInternals.disableTracking)return;(0,L.pE)(window).topFrame.chrome&&this.services.UserManagerService.doCookieLogging(t)}catch(t){(0,R.n)({message:"Loader_CookieLogging",exception:t.message,callStack:t.callStack,level:R.D.WARN},{throttle:1})}}setInappPageUrl(t){(0,V.QM)(t)&&(this.pageUrl=t)}updateQueryParams(){this.queryParams=this.wP()}loadScriptTag(t,i){if(this.externalAttributes=t,(0,V.QM)(t.playerId)&&!(0,L.er)(t.playerId))return(0,R.n)({level:R.D.WARN,message:"Invalid_Player_GUID",exception:t.playerId}),this.registerApiError(n.n9.InvalidGUID,"Invalid PlayerID was provided"),!1;let e;if(i&&(e=this.GLOBAL.document.getElementById(i)),!e)return(0,R.n)({message:"Loader_no_script_id",exception:`${t.playerId}`,level:R.D.INFO},{pacing:5}),this.registerApiError(n.n9.SetupError,"Could not locate any script tag ids in the page"),!1;const s=(0,V.as)(t.settings.plugins.adobeAnalyticsSettings);return this.lP={parseDomain:s,playerId:t.playerId,tag:e},!0}insertRenderer(){try{this.sP=new f.e(this.queryParams.cnxReloadTime),this.DA(),this.nP({sessionId:this.pageUrl||"",userId:"request_before_pls",userIdStored:this.services.UserManagerService.getUserIdFirstPartyCookie()||"",osCode:""+(this.JA()?"isGAM":""),browserType:"",browserVersion:""});const t=()=>{try{this.cP().then((t=>{const i=[];t.players.forEach(((e,s)=>{t.players[s].limitClientSideApiUse&&this.OA();const r=this.QA(this.lP,e).then((i=>{this.tP(e,t.lineItems);const n=this.initUrlSuffixer(e),r=this.getPlayerModel(i,t,n,s.toString()),o=new w.m(r.global);return(0,b.u)(r.lineItemSettings.lineItems),this.kA&&(r.disableAdvertising=!0,e.lineItems=[]),this.wA[s]={playerModel:r,globalDomUtilsService:o,urlSuffixerService:n},this.SP(o)})).catch((t=>{this.registerApiError(n.n9.SetupError,"rendering error"),(0,R.n)({message:"Loader_send_data_to_renderer",exception:t.message,callStack:t.stack,level:R.D.CRITICAL})}));i.push(r)})),Promise.all(i).then((()=>this.mP(t)))}))}catch(t){(0,R.n)({message:"Prerender_Loader_do_player_call",callStack:t.stack,exception:t.message,level:R.D.WARN},{throttle:1e3})}};this.gP=this.services.UserManagerService.registerPlsCall(t)}catch(t){(0,R.n)({message:"Prerender_Loader_insert_renderer",exception:t.message,callStack:t.stack,level:R.D.CRITICAL})}}findPageUrl(t,i,e=!1){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=i||(0,L.lU)((0,L.pE)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return e||(0,R.n)({message:"Prerender_Loader_find_page_url",level:R.D.INFO},{throttle:1e3}),new Promise((e=>{setTimeout((()=>{this.findPageUrl(t,i,!0).then((()=>e()))}),this._A)}));try{return this.pageUrl=(0,B.sH)(this.pageUrl),Promise.resolve()}catch(t){return(0,R.n)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:R.D.CRITICAL}),Promise.reject()}}registerApiError(t=n.n9.SetupError,i=""){this.EA.push({apiErrorObj:{type:t,message:i}})}registerApiSuccess(t){this.EA.push({apiConfigObj:t})}setClientAb1(){try{const t=(0,B.ge)(this.pageUrl);if(Y.includes(t))c.e.setClientAb1(2);else{K.includes(t)&&c.e.setClientAb1(1)}}catch(t){}}destroy(){this.renderer&&this.renderer.destroy(),(0,O.i)(this.MA)}}},970:(t,i,e)=>{"use strict";e.d(i,{e:()=>o});var s=e(9791),n=e(1187),r=e(9357);class o{constructor(t){this.RELOAD_TIME=r.ti,this.RELOAD_COOKIES="cnx_player_reload",this.SESSION_IN_VIEW_FLAG="_sessionWasViewed",this.PP={},this._P={},this.xP={},this.iS=(0,s.pE)(window).topFrame,this.TP(t);try{this.kP()}catch(t){(0,n.n)({message:"PlayerReloader_cookie_fetch_failed",level:n.D.WARN,exception:t})}}wasPlayerReloaded(t){return!!this.PP[t]}addPlayerSession(t,i){this._P[t]=i}getCookiePlayersSession(){return this.PP}addSessionInView(t){this._P[t]+=this.SESSION_IN_VIEW_FLAG}getSessionInView(t){return this.xP[t]}TP(t){setTimeout((()=>{this.CP(),this.iS.location.reload()}),t||this.RELOAD_TIME)}kP(){decodeURIComponent(this.iS.document.cookie).split(";").forEach((t=>{const i=t.split("=");i[0].includes(this.RELOAD_COOKIES)&&(this.PP=JSON.parse(i[1]))})),this.EP(),this.MP()}EP(){Object.keys(this.PP).forEach((t=>{const i=this.PP[t].indexOf(this.SESSION_IN_VIEW_FLAG);i>-1&&(this.PP[t]=this.PP[t].substr(0,i),this.xP[t]=!0)}))}MP(){this.iS.document.cookie=`${this.RELOAD_COOKIES}=; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/`}CP(){Object.keys(this.xP).forEach((t=>{this._P[t].includes(this.SESSION_IN_VIEW_FLAG)||this.addSessionInView(t)}));const t=new Date;let i=t.getTime();i+=r.Y0*r.s_,t.setTime(i),this.iS.document.cookie=`${this.RELOAD_COOKIES}=${JSON.stringify(this._P)}; expires=${t.toUTCString()}; path=/`}}},6224:(t,i,e)=>{"use strict";e.d(i,{t:()=>h});var s=e(9791),n=e(1187),r=e(4798),o=e(6578);class h{constructor(t,i){this.LP=t,this.BP=i,this.RP=(t,i)=>new Promise(((e,s)=>{o.n.sendProtoRequest({protoResponse:this.LP,endpoint:t,requestType:"GET",shouldLogErrors:!0,timeout:i}).then((t=>{e(t)})).catch((t=>{s(t)}))}))}fetchMetadata(t,i=5,e=!0,n){const o=t=>403===this.OP(t);return new Promise(((h,a)=>{(0,s.Up)((()=>this.RP(t,n)),i,o).then((i=>{if((0,r.as)(i))return h(i);const e=new Error("invalid metadata");return this.DP({url:t,metadata:i,e}),a(e)})).catch((i=>{e&&this.DP({url:t,e:i}),a(i)}))}))}DP(t){var i;const e=(0,r.QM)(null===(i=t.e)||void 0===i?void 0:i.message)?t.e.message:"";e.includes("XhrUtils_XMLHttpRequest_error")||(0,n.n)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.BP}_${e}:${JSON.stringify(t)}`,callStack:t.e&&t.e.stack,level:n.D.CRITICAL})}OP(t){if(t&&t.message){const i=t.message.split("status:")[1];return i?parseInt(i.slice(0,3),10):null}return null}}},5701:(t,i,e)=>{"use strict";e.d(i,{_:()=>n});var s=e(5650);class n{constructor(){this.VP={}}subscribe(t,i,e){this.VP[t]||(this.VP[t]=[]),this.VP[t].push({context:i,func:e})}unsubscribe(t,i,e){this.VP[t]&&(this.VP[t]=this.VP[t].filter((t=>!(t.context===i&&(t.func===e||!e)))))}unsubscribeAll(t){Object.keys(this.VP).forEach((i=>{this.VP[i]=this.VP[i].filter((i=>i.context!==t))}))}publish(t,i,e={payload:void 0}){Object.prototype.hasOwnProperty.call(this.VP,i)&&this.VP[i].forEach((i=>{i.context===t&&i.func(e)}))}relay(t,i,e,n){(0,s.qo)(t).forEach((t=>{this.subscribe(t,i,(i=>{n.publish(e,t,i)}))}))}relayBulk(t,i,e){t.forEach((t=>{this.relay(t.channel,t.source,i,e)}))}}},2859:(t,i,e)=>{"use strict";e.d(i,{Q:()=>n});var s=e(4798);class n{constructor(){this.be={}}on(t,i){if(this.be[t]=this.be[t]||[],!(0,s.mf)(i))throw new Error(`${t} event callback is not a function`);return this.be[t].push(i),()=>this.be[t]=this.be[t].filter((t=>t!==i))}once(t,i){const e=this.on(t,(t=>{try{i(t)}catch(t){}e()}))}remove(t,i){this.be[t]&&(this.be[t]=this.be[t].filter((t=>t!==i)))}removeAll(){this.be={}}trigger(t,i){this.be[t]&&this.be[t].forEach((t=>{try{t(i)}catch(t){}}))}}},4701:(t,i,e)=>{"use strict";e.d(i,{N:()=>p});var s,n=e(3020);class r{constructor(t){this.FP=[],this.NP=t=>{this.FP.push(t)},this.jP=t.subscribe(this.NP)}get cachedEvents(){return this.FP}destroy(){this.FP=null,this.jP()}}!function(t){t.AdobeAnalytics="AdobeAnalytics",t.MoatAnalytics="MoatAnalytics"}(s||(s={}));var o=e(4798),h=e(1187),a=e(5650),c=e(9791),d=e(51),l=e(7945),u=e(6153);class p{constructor(t,i,e,s,n){this.$P=i,this.UP=e,this.vl=s,this.qP=n,this.HP=[],this.zP=t=>{try{this.WP(t);const i=this.HP.find((i=>i.name===t.type));let e;if(i&&!i.started){i.started=!0;const t=i.eventsCacheHandler;e=t.cachedEvents,t.destroy()}const{adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r}=this.vl.apiConfig.settings.plugins,{secondLevelDomain:o,playerId:h}=this.vl,a={cachedEvents:e,adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r,secondLevelDomain:o,playerId:h,pageName:this.GP,pageUrl:this.Ga,version:l.g.version,delegateHandlers:this.UP,playerContainer:this.qP,playerWindow:window};t.getInstance().start(this.$P,a)}catch(t){(0,h.n)({callStack:t.stack,exception:t.message,level:h.D.CRITICAL,message:"PluginsHandler_initPlugin"})}};const r=(0,c.pE)(t);this.wh=r.topFrame,this.Ga=(0,c.lU)(r,this.wh),this.Ga=(0,d.sH)(this.Ga),this.GP=(0,d.ge)(this.Ga)}start(){this.XP(),this.JP(),this.wh.cnxPlugins.pluginsHandlers.push(this.zP)}XP(){let t=[];Array.isArray(this.wh.cnxPlugins)&&this.wh.cnxPlugins.length>0&&(t=this.wh.cnxPlugins,t.forEach((t=>this.zP(t)))),(0,o.as)(this.wh.cnxPlugins)||this.QP(t)}JP(){const t=this.YP();(0,a.BZ)(t)&&this.KP(t)}ZP(t){const i=this.wh.cnxPlugins.cachedPlugins;if((0,a.BZ)(i))return i.find((i=>i.type===t))}WP(t){this.ZP(t.type)||this.wh.cnxPlugins.cachedPlugins.push(t)}QP(t){this.wh.cnxPlugins={cachedPlugins:t,pluginsHandlers:[],push:function(t){this.pluginsHandlers.forEach((i=>{i(t)}))}}}KP(t){t.forEach((t=>{this.ZP(t)||this.HP.push({name:t,started:!1,eventsCacheHandler:new r(this.$P)})})),this.HP.forEach((({name:t})=>this.t_(t)))}i_(t){return Object.values(t).every((t=>(0,o.QM)(t)))}YP(){const t=[];return this.vl.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.i_(this.vl.apiConfig.settings.plugins.adobeAnalyticsSettings)&&t.push(s.AdobeAnalytics),this.vl.moatTrackingEnabled&&t.push(s.MoatAnalytics),t}t_(t){const i={id:`cnx-${t}`,src:""};switch(t){case s.AdobeAnalytics:i.src=u.n.endPoints.assets.plugins.adobeAnalytics;break;case s.MoatAnalytics:i.src=u.n.endPoints.assets.plugins.moatAnalytics}this.wh.document.getElementById(i.id)||(0,n.dZ)(i,this.wh.document.head,this.wh,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},862:(t,i,e)=>{"use strict";e.d(i,{Z:()=>h});var s,n=e(3802);!function(t){t.Deprecation="deprecation",t.Intervention="intervention",t.Crash="crash"}(s||(s={}));var r=e(9791),o=e(1187);class h{constructor(t,i,e){this.wh=t,this.e_=i,this.tf=e,this.n_=!1,this.r_=!1,this.o_=()=>{"hidden"===this.wh.document.visibilityState&&this.c_()},this.c_=()=>{if(this.n_||!this.d_)return;const t=this.d_.takeRecords();this.l_(t),this.n_=!0},this.l_=t=>{t.filter((({body:t})=>"HeavyAdIntervention"===(null==t?void 0:t.id))).forEach((()=>{const{heavyAdBlockTypeEnum:t,advertiserLineItemId:i}=this.e_;this.tf.heavyAd.next({type:n.EN.fromProtoHeavyAdType(t),advertiserLineItemId:i})}))},this.u_()}destroy(){var t,i,e,s;try{if(!this.r_)return;null===(i=null===(t=this.wh)||void 0===t?void 0:t.removeEventListener)||void 0===i||i.call(t,"pagehide",this.c_),null===(s=null===(e=this.wh)||void 0===e?void 0:e.removeEventListener)||void 0===s||s.call(e,"visibilitychange",this.o_)}catch(t){const{message:i,stack:e}=(0,r.W$)(t);(0,o.n)({level:o.D.WARN,message:"AdManager_VpaidIntegrator_destroyAd",exception:i,callStack:e})}}p_(){return!!this.wh.ReportingObserver}u_(){this.p_()&&(this.r_=!0,this.d_=new this.wh.ReportingObserver((t=>{this.l_(t)}),{buffered:!0,types:[s.Intervention]}),this.d_.observe(),this.wh.addEventListener("pagehide",this.c_),this.wh.addEventListener("visibilitychange",this.o_))}}},4065:(t,i,e)=>{"use strict";e.d(i,{B:()=>h});var s=e(1509),n=e(9357),r=e(7332),o=e(6716);class h{constructor(t,i=0,e=1e3){this.Ki=t,this.timerDuration=i,this.Ts=e,this.f_=0,this.m_=null,this.v_=!1,this.g_=!1,this.y_=new o.x,this.b_=new o.x,this.w_=new o.x,this.S_=[{event:s.n.FirstQuartile,quartile:1},{event:s.n.SecondQuartile,quartile:2},{event:s.n.ThirdQuartile,quartile:3},{event:s.n.FourthQuartile,quartile:4}],this.A_=null,this.P_=()=>{this.__(),this.y_.next(),this.x_(this.f_,this.timerDuration),this.k_(),this.C_=(new Date).getTime()},i||this.disable()}start(){this.g_=!0,null===this.m_&&this.Io()}stop(){this.g_=!1,null!==this.m_&&(this.__(),this.bo())}reset(t){t&&(this.timerDuration=t),this.f_=0,this.v_=!1,this.A_=null,(null!==this.m_||this.g_)&&(this.bo(),this.Io())}get timeElapsed(){return this.f_}get timeRemaining(){return this.timerDuration-this.f_}disable(){this.v_=!0,this.bo()}get onTimeUpdate(){return this.y_.asObservable()}get onTimeElapsed(){return this.b_.asObservable()}get onQuartile(){return this.w_.asObservable()}get startingTime(){return this.C_}__(){this.f_+=(new Date).getTime()-this.C_}Io(){this.v_||(this.k_(),this.C_=(new Date).getTime(),this.m_=this.Ki.setInterval(this.P_,this.Ts))}bo(){this.Ki.clearInterval(this.m_),this.m_=null}E_(){this.disable(),this.b_.next(),this.f_=0}k_(){this.f_/n.s_>=this.timerDuration/n.s_&&this.E_()}x_(t,i){const e=Math.floor((0,r.dQ)(0,i,1,4,t));this.A_<=e&&this.S_.forEach((({event:t,quartile:i})=>{i===e&&i!==this.A_&&(this.w_.next(t),this.A_=i)}))}}},2300:(t,i,e)=>{"use strict";var s;e.d(i,{r:()=>s}),function(t){t[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.UpNextButton=9]="UpNextButton",t[t.UpNextBox=10]="UpNextBox",t[t.PreviousButton=11]="PreviousButton",t[t.LogoComponent=12]="LogoComponent",t[t.LogoOutstream=13]="LogoOutstream",t[t.MoreButton=14]="MoreButton",t[t.ElapsedTimeLabel=15]="ElapsedTimeLabel",t[t.TotalDurationLabel=16]="TotalDurationLabel",t[t.RemainingDurationLabel=17]="RemainingDurationLabel",t[t.ProgressBar=18]="ProgressBar",t[t.QualityMenu=19]="QualityMenu",t[t.QueStateOverlay=20]="QueStateOverlay",t[t.Loader=21]="Loader",t[t.ContextMenu=22]="ContextMenu",t[t.ElementsSettingsMenu=23]="ElementsSettingsMenu",t[t.CloseButton=24]="CloseButton",t[t.PinnedCloseButton=25]="PinnedCloseButton",t[t.SkipAdButton=26]="SkipAdButton",t[t.AdLoadingScreen=27]="AdLoadingScreen",t[t.CtaButton=28]="CtaButton",t[t.PlayspaceProgressBar=29]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=30]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=31]="ClickToPlayButton",t[t.OverlayComponent=32]="OverlayComponent",t[t.SlideTitle=33]="SlideTitle",t[t.TopTitle=34]="TopTitle",t[t.TopLogo=35]="TopLogo",t[t.TopSlideTitle=36]="TopSlideTitle",t[t.TopStoryTitle=37]="TopStoryTitle",t[t.TextLabel=38]="TextLabel",t[t.LivePoster=39]="LivePoster",t[t.LiveIcon=40]="LiveIcon",t[t.ElementsCaptionMenu=41]="ElementsCaptionMenu",t[t.PinnedTitle=42]="PinnedTitle"}(s||(s={}))},9762:(t,i,e)=>{"use strict";var s;e.d(i,{C:()=>s}),function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Replay=2]="Replay",t[t.Volume=3]="Volume",t[t.Mute=4]="Mute",t[t.Unmute=5]="Unmute",t[t.DraggingStart=6]="DraggingStart",t[t.DraggingStopped=7]="DraggingStopped",t[t.Seek=8]="Seek",t[t.SeekingStart=9]="SeekingStart",t[t.SeekingStopped=10]="SeekingStopped",t[t.Expand=11]="Expand",t[t.Collapse=12]="Collapse",t[t.Quality=13]="Quality",t[t.Close=14]="Close",t[t.Next=15]="Next",t[t.Prev=16]="Prev",t[t.Settings=17]="Settings",t[t.SettingsMenu=18]="SettingsMenu",t[t.CaptionOn=19]="CaptionOn",t[t.CaptionOff=20]="CaptionOff",t[t.CaptionUpdate=21]="CaptionUpdate",t[t.CaptionMenu=22]="CaptionMenu",t[t.VolumeHoverStart=23]="VolumeHoverStart",t[t.VolumeHoverStopped=24]="VolumeHoverStopped",t[t.UIHideStart=25]="UIHideStart",t[t.UIShowStart=26]="UIShowStart",t[t.UIEndShowHide=27]="UIEndShowHide",t[t.ContextMenuOpen=28]="ContextMenuOpen",t[t.ContextMenuClose=29]="ContextMenuClose",t[t.ContextClick=30]="ContextClick",t[t.AboutClick=31]="AboutClick",t[t.OverlayClick=32]="OverlayClick",t[t.LogoClicked=33]="LogoClicked",t[t.HoverStart=34]="HoverStart",t[t.HoverEnd=35]="HoverEnd",t[t.StateChanged=36]="StateChanged",t[t.RebindComponent=37]="RebindComponent",t[t.SkipAd=38]="SkipAd",t[t.FocusStart=39]="FocusStart"}(s||(s={}))},6203:(t,i,e)=>{"use strict";var s;e.d(i,{Z:()=>n}),function(t){t[t.HoldStart=0]="HoldStart",t[t.HoldEnd=1]="HoldEnd",t[t.TapLeft=2]="TapLeft",t[t.TapRight=3]="TapRight",t[t.SwipeEnd=4]="SwipeEnd",t[t.SwipeMove=5]="SwipeMove",t[t.Scroll=6]="Scroll",t[t.Click=7]="Click"}(s||(s={}));const n=s},7263:(t,i,e)=>{"use strict";e.d(i,{P:()=>o});var s=e(5701),n=e(3020),r=e(7405);class o extends s._{constructor(t,i,e,s,n){super(),this.mediator=t,this.Oi=i,this.ra=e,this.eS=n,this.Oo=this.Oi.createElementByString(s)}getContainer(){return this.Oo}getCoordinates(t){const i=this.Oi.getElementCoordinates(this.Oo);return this.eS&&t?((t&r.C.Top)===r.C.Top&&(i.clientY-=this.Oo.clientHeight),(t&r.C.Right)===r.C.Right&&(i.clientX+=this.Oo.clientWidth)):i.clientX+=i.width/2,i}showComponent(t=!1){if(!this.Oo||!this.Oo.parentElement)return;const i=(0,n.pv)(this.Oo.parentElement,"cnx-ui-btn")?this.Oo.parentElement:this.Oo;t&&(0,n.GF)(i)?(0,n.Ji)(i):(0,n.Ho)(i)}hideComponent(t=!1){if(!this.Oo||!this.Oo.parentElement)return;const i=(0,n.pv)(this.Oo.parentElement,"cnx-ui-btn")?this.Oo.parentElement:this.Oo;t&&!(0,n.GF)(i)?(0,n.U6)(i,(()=>(0,n.MV)(i))):(0,n.MV)(i)}destroy(){this.Oo.innerHTML="",this.Oo.style.display="none",this.ra.unregisterAll(this)}}},6019:(t,i,e)=>{"use strict";e.d(i,{Y:()=>r});var s=e(6203),n=e(7263);class r extends n.P{constructor(){super(...arguments),this.eventList=[s.Z[s.Z.Scroll],s.Z[s.Z.Click]],this.r_=!1,this.M_=t=>{this.onInteractionHandler(t)},this.onBeforeClick=t=>{t.stopPropagation()},this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(t)}}onInteractionHandler(t){t.stopPropagation()}onClickHandler(t){}initComponent(){this.r_=!0;const t={interactionstart:this.onBeforeClick,interaction:this.M_,click:this.onClick};this.ra.register(this.Oo,this,this.ra,t),this.eS&&(this.subscribe(s.Z[s.Z.Click],this.ra,(()=>{this.onClickHandler()})),this.relay(s.Z[s.Z.Scroll],this.ra,this,this.mediator))}destroy(){this.unsubscribeAll(this.ra),super.destroy()}get isInitialized(){return this.r_}}},7309:(t,i,e)=>{"use strict";e.d(i,{h:()=>a});var s=e(8983),n=e(3020),r=e(9762),o=e(6019);class h extends o.Y{constructor(){super(...arguments),this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){(0,n.cn)(this.Oo,"cnx-boom"),(0,n.Tp)(this.Oo),(0,n.cn)(this.Oo,"cnx-boom-anim");const t=i=>{"transform"===i.propertyName&&((0,n.IV)(this.Oo,"cnx-boom"),(0,n.IV)(this.Oo,"cnx-boom-anim"),this.Oo.removeEventListener("transitionend",t))};this.Oo.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.Oo.appendChild(this.Oi.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class a extends h{constructor(){super(...arguments),this.eventList=[r.C[r.C.HoverStart],r.C[r.C.HoverEnd],r.C[r.C.FocusStart],...this.eventList],this.onStartHover=()=>{(0,n.cn)(this.Oo,s.Gj.HoverStart),(0,n.cn)(this.Oo,s.Gj.HoverEnd),this.eS&&this.Oo.addEventListener("transitionend",(()=>this.onEndHoverClick())),this.mediator.publish(this,r.C[r.C.HoverStart])},this.onEndHover=()=>{(0,n.IV)(this.Oo,s.Gj.HoverEnd),this.mediator.publish(this,r.C[r.C.HoverEnd])},this.B_=()=>{this.mediator.publish(this,r.C[r.C.FocusStart]),this.onStartHover()},this.R_=()=>{this.onEndHover()}}initComponent(){super.initComponent(),this.eS?(this.Oo.addEventListener("touchstart",this.onStartHover,{passive:!0}),this.Oo.addEventListener("touchend",this.onEndHover),this.Oo.addEventListener("touchcancel",this.onEndHover)):(this.Oo.addEventListener("mouseenter",this.onStartHover),(0,n.Iy)(this.Oo)&&(this.Oo.addEventListener("focusin",this.B_),this.Oo.addEventListener("focusout",this.R_)),this.Oo.addEventListener("mouseleave",this.onEndHover))}destroy(){this.eS?(this.Oo.removeEventListener("touchstart",this.onStartHover),this.Oo.removeEventListener("touchend",this.onEndHover),this.Oo.removeEventListener("touchcancel",this.onEndHover)):(this.Oo.removeEventListener("mouseenter",this.onStartHover),this.Oo.removeEventListener("mouseleave",this.onEndHover),(0,n.Iy)(this.Oo)&&(this.Oo.removeEventListener("focusin",this.B_),this.Oo.removeEventListener("focusout",this.R_))),super.destroy()}onInteractionHandler(t){this.onEndHoverClick()}onEndHoverClick(){(0,n.IV)(this.Oo,s.Gj.HoverEnd),(0,n.IV)(this.Oo,s.Gj.HoverStart),this.eS&&this.Oo.removeEventListener("transitionend",(()=>this.onEndHoverClick()))}}},7617:(t,i,e)=>{"use strict";e.d(i,{E:()=>r});var s=e(3020),n=e(6237);class r extends n.s{constructor(t,i,e,s){super(i,e,s),this.mediator=t,this.Oo=this.O_.getRenderedDom()}getContainer(){return this.Oo}initComponent(){this.O_.initComponents()}showComponent(){(0,s.Ho)(this.Oo)}hideComponent(){(0,s.MV)(this.Oo)}}},9901:(t,i,e)=>{"use strict";e.d(i,{N:()=>h});var s=e(7332),n=e(3020),r=e(8983),o=e(7263);class h extends o.P{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.D_=0,this.V_=null,this.F_=0,this.N_=0,this.j_=100,this.cacheDomElements()}cacheDomElements(){this.U_=this.Oo.getElementsByClassName("cnx-progress-fill")[0],this.q_=this.Oo.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.D_=this.fixedRailWidth?this.fixedRailWidth:this.q_.getBoundingClientRect().width,this.V_=this.q_.getBoundingClientRect().left}updateUi(t){const i=this.getComputedTranslation(t);this.F_=i,this.U_.style.transform=`translateX(${i}px)`}isValidTranslation(){return this.F_>=0&&this.F_<=this.D_}getComputedTranslation(t){return t<0?0:t>this.D_?this.D_:t}setProgress(t){this.cacheWidths();const i=this.getComputedTranslation((0,s.dQ)(0,100,0,this.D_,t));this.updateUi(i)}disableTransition(){(0,n.cn)(this.Oo,r.Gj.NoTransition)}enableTransition(){(0,n.IV)(this.Oo,r.Gj.NoTransition)}H_(t){this.disableTransition(),this.setProgress(t),(0,n.Tp)(this.U_),this.enableTransition()}forceStartState(){this.H_(this.N_)}forceEndState(){this.H_(this.j_)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}},1e3:(t,i,e)=>{"use strict";e.d(i,{V:()=>h,q:()=>s});var s,n=e(7309),r=e(8983),o=e(9762);!function(t){t[t.expand=0]="expand",t[t.collapse=1]="collapse"}(s||(s={}));class h extends n.h{constructor(){super(...arguments),this.eventList=[o.C[o.C.Expand],o.C[o.C.Collapse],...this.eventList],this.z_="Full Screen (f)",this.W_="Exit Full Screen (f)"}initComponent(){super.initComponent(),this.Oo&&this.Oo.setAttribute("aria-label",this.tooltip)}onClickHandler(){switch(this.vg){case s.collapse:this.mediator.publish(this,o.C[o.C.Expand]);break;case s.expand:this.mediator.publish(this,o.C[o.C.Collapse]);break;default:this.mediator.publish(this,o.C[o.C.Expand])}}X_(){this.Oo&&(this.Oo.setAttribute("aria-label",this.tooltip),this.vg===s.expand?this.Oo.classList.add(r.Gj.Active):this.Oo.classList.remove(r.Gj.Active))}setState(t){this.vg!==t&&(this.vg=t,this.X_())}get tooltip(){return this.vg===s.expand?this.W_:this.z_}}},4115:(t,i,e)=>{"use strict";e.d(i,{J:()=>o,L:()=>s});var s,n=e(7309),r=e(9762);!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(s||(s={}));class o extends n.h{constructor(t,i,e,n,o,h){super(t,i,e,n,o),this.isBig=h,this.J_=!1,this.eventList=[r.C[r.C.Play],r.C[r.C.Pause],r.C[r.C.Replay],r.C[r.C.StateChanged],...this.eventList],this.Q_="Play (SPACE)",this.Y_="Pause (SPACE)",this.setState(s.Pause)}onClickHandler(){this.vg===s.Pause?this.mediator.publish(this,r.C[r.C.Pause]):this.J_?this.mediator.publish(this,r.C[r.C.Replay]):this.mediator.publish(this,r.C[r.C.Play]),this.Oo.setAttribute("aria-label",this.tooltip)}X_(){this.vg===s.Play?this.Oo.setAttribute("aria-hidden","false"):this.isBig&&this.Oo.setAttribute("aria-hidden","true")}toggleReplay(t){this.J_=t}setState(t){this.vg!==t&&(this.vg=t,this.X_(),this.Oo.setAttribute("aria-label",this.tooltip),this.mediator.publish(this,r.C[r.C.StateChanged]))}get tooltip(){return this.vg===s.Play?this.Q_:this.Y_}}},1191:(t,i,e)=>{"use strict";e.d(i,{F:()=>h,u:()=>s});var s,n=e(3020),r=e(9762),o=e(7309);!function(t){t[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute"}(s||(s={}));class h extends o.h{constructor(t,i,e,s,n,o){super(t,i,e,s,o),this.eventList=[r.C[r.C.Mute],r.C[r.C.Unmute],r.C[r.C.StateChanged],...this.eventList],this.K_="Mute (m)",this.Z_="Unmute (m)",this.vg=n,this.Oo.setAttribute("aria-label",this.tooltip)}onClickHandler(){this.vg===s.Mute?(this.mediator.publish(this,r.C[r.C.Unmute]),this.setState(s.Unmute)):(this.mediator.publish(this,r.C[r.C.Mute]),this.setState(s.Mute))}X_(){this.vg===s.Mute?(0,n.L_)(this.Oo,"cnx-sound-on","cnx-sound-off"):(0,n.L_)(this.Oo,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.vg===s.Mute?this.Z_:this.K_}initComponent(){super.initComponent(),this.X_()}setState(t){this.vg!==t&&(this.vg=t,this.X_(),this.Oo.setAttribute("aria-label",this.tooltip),this.mediator.publish(this,r.C[r.C.StateChanged]))}setVolume(t){t>0?this.setState(s.Unmute):this.setState(s.Mute)}}},1277:(t,i,e)=>{"use strict";e.d(i,{N:()=>c});var s=e(1191),n=e(7617),r=e(3020),o=e(9762),h=e(2300),a=e(8983);class c extends n.E{constructor(t,i,e,s){super(t,i,e,s),this.tx=null,this.eventList=[o.C[o.C.Volume],o.C[o.C.VolumeHoverStart],o.C[o.C.VolumeHoverStopped],o.C[o.C.DraggingStopped],o.C[o.C.DraggingStart],o.C[o.C.HoverStart],o.C[o.C.HoverEnd],o.C[o.C.StateChanged],o.C[o.C.FocusStart]],this.sx=.2,this.nx=600,this.ox=!1,this.hx=t=>{clearTimeout(this.tx),(0,r.cn)(this.Oo,"cnx-mod-hover"),this.mediator.publish(this,o.C[o.C.VolumeHoverStart])},this.lx=()=>{this.ox||(null!==this.tx&&clearTimeout(this.tx),this.tx=setTimeout((()=>{(0,r.IV)(this.Oo,"cnx-mod-hover"),this.mediator.publish(this,o.C[o.C.VolumeHoverStopped])}),this.nx))},this.B_=()=>{(0,r.cn)(this.Oo,"cnx-mod-hover"),this.mediator.publish(this,o.C[o.C.FocusStart]),this.mediator.publish(this,o.C[o.C.VolumeHoverStart])},this.R_=()=>{(0,r.IV)(this.Oo,"cnx-mod-hover"),this.mediator.publish(this,o.C[o.C.VolumeHoverStopped])},this.ux=this.sx,this.mx=this.getComponent(h.r.VolumeButton),this.vx=this.getComponent(h.r.VolumeProgress),(0,r.IV)(this.mx.getContainer(),a.Gj.HovarableButton)}ba(t,i,e){let s;switch(t){case o.C[o.C.Volume]:s=i.payload/100,this.yx(s),this.Ix(i.payload);break;case o.C[o.C.Mute]:s=0,this.setVolumeProgress(0);break;case o.C[o.C.Unmute]:s=this.ux,this.setVolumeProgress(100*this.ux);break;case o.C[o.C.DraggingStopped]:this.ox=!1,this.mediator.publish(this,o.C[o.C.DraggingStopped]),this.lx();break;case o.C[o.C.DraggingStart]:this.ox=!0,this.mediator.publish(this,o.C[o.C.DraggingStart]);break;case o.C[o.C.HoverStart]:this.mediator.publish(this,o.C[o.C.HoverStart],{payload:{targetComponent:e}});break;case o.C[o.C.HoverEnd]:this.mediator.publish(this,o.C[o.C.HoverEnd],{payload:{targetComponent:e}});break;case o.C[o.C.StateChanged]:this.mediator.publish(this,o.C[o.C.StateChanged],{payload:{targetComponent:e}})}void 0!==s&&this.wx(s)}yx(t){t<this.sx?this.ux=this.sx:this.ux=t}wx(t){this.mediator.publish(this,o.C[o.C.Volume],{payload:t})}Ix(t){0===t?this.mx.setState(s.u.Mute):this.mx.setState(s.u.Unmute)}setVolumeProgress(t){this.vx.setProgress(t)}initComponent(){super.initComponent(),this.Oo.addEventListener("mouseenter",this.hx),this.Oo.addEventListener("mouseleave",this.lx),this.Oo.addEventListener("focusin",this.B_),this.Oo.addEventListener("focusout",this.R_)}setVolume(t){const i=100*t;this.Ix(i),this.setVolumeProgress(i)}destroy(){super.destroy(),this.Oo.removeEventListener("mouseenter",this.hx),this.Oo.removeEventListener("mouseleave",this.lx),this.Oo.removeEventListener("focusin",this.B_),this.Oo.removeEventListener("focusout",this.R_)}}},9391:(t,i,e)=>{"use strict";e.d(i,{Z:()=>n});var s=e(2300);const n=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${s.r.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${s.r.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim()},2823:(t,i,e)=>{"use strict";e.d(i,{$:()=>o});var s=e(8983),n=e(3020),r=e(6237);class o extends r.s{constructor(t,i,e,s,n){super(e,s,n),this.mediator=t,this.$container=i,this.$uiContainer=this.O_.getRenderedDom(),i.appendChild(this.$uiContainer),this.O_.initComponents()}changeState(t){const i=this.ca[t];i!==this.currentState&&this.currentState.canTransitionToState(i)&&(this.currentState.exitState(i),i.enterState())}hide(){(0,n.cn)(this.$uiContainer,s.Gj.DisplayNone)}show(){(0,n.IV)(this.$uiContainer,s.Gj.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}},3442:(t,i,e)=>{"use strict";e.d(i,{A:()=>F});var s=e(2300);const n='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg>\n',r='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"/></svg>\n';var o=e(4115),h=e(7332),a=e(3020),c=e(9762),d=e(9901);class l extends d.N{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.Sx=0,this.la=null,this.Ax=!1,this.eventList=[c.C[c.C.DraggingStart],c.C[c.C.DraggingStopped]],this._x=t=>{this.cacheWidths(),this.xx(this.Tx(t)),this.eS?this.Oo.addEventListener(this.kx,this.Cx):this.Oi.addEventListenerOnGlobal(this.kx,this.Cx),this.onDragStart()},this.Cx=t=>{null===this.la&&(this.Ax||(this.Ax=!0,this.disableTransition()),this.la=this.Oi.requestAnimationFrameHelper((()=>{const i=this.Ex+(this.Tx(t)-this.Mx);this.isValidTranslation()&&this.Lx(i),this.la=null})))},this.Bx=t=>{t.stopPropagation(),this.eS?this.Oo.removeEventListener(this.kx,this.Cx):this.Oi.removeEventListenerOnGlobal(this.kx,this.Cx),this.Ax=!1,this.enableTransition(),this.onDragEnd()},this.Rx=t=>{const i=100*t.target.value/this.Ox.max;this.onProgressChange(i),this.onDragStart(),this.onDragEnd()},this.kx=n?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this.Fx=this.Oo.getElementsByClassName("cnx-progress-handle")[0],this.Ox=this.Oo.querySelector('input[type="range"]')}cacheWidths(){super.cacheWidths(),this.Sx=this.Fx.getBoundingClientRect().width/2}updateUi(t){super.updateUi(t);const i=this.getComputedTranslation(t);this.Fx.style.transform=`translateX(${i-this.Sx}px)`}onDragEnd(){this.mediator.publish(this,c.C[c.C.DraggingStopped])}onDragStart(){this.mediator.publish(this,c.C[c.C.DraggingStart])}Tx(t){return this.eS?t.touches.item(0).clientX:t.clientX}xx(t){this.Ex=t-this.V_,this.Mx=t,this.Lx(this.Ex)}Lx(t){if(this.isValidTranslation()){const i=this.getComputedTranslation(t),e=0,s=this.D_,n=0,r=100;this.updateUi(i),this.onProgressChange((0,h.dQ)(e,s,n,r,i))}}setProgress(t){if(super.setProgress(t),!this.Ox)return;const i=Math.round(t/100*this.Ox.max);this.Ox.value=i}setMaxRange(t){this.Ox.setAttribute("max",t.toString())}hideRangeInput(){this.Ox&&(0,a.MV)(this.Ox)}initComponent(){super.initComponent();const t={interactionstart:this._x,interactionend:this.Bx};this.ra.register(this.Oo,this,this.ra,t),this.Ox&&(this.Ox.addEventListener("input",this.Rx),this.Ox.addEventListener("change",this.Rx))}destroy(){super.destroy(),this.Ox&&(this.Ox.removeEventListener("input",this.Rx),this.Ox.removeEventListener("change",this.Rx))}}class u extends l{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.Nx=80,this.fixedRailWidth=this.Nx,this.eventList.push(c.C[c.C.Volume])}onProgressChange(t){this.mediator.publish(this,c.C[c.C.Volume],{payload:t})}setProgress(t){this.Oo.setAttribute("aria-valuenow",t.toString()),super.setProgress(t)}initComponent(){this.Oo.setAttribute("role","slider"),super.initComponent()}}var p=e(1e3);var f=e(7263),m=e(8983);class v extends f.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){(0,a.Ho)(this.Oo),(0,a.Tp)(this.Oo),(0,a.cn)(this.Oo,m.Gj.Active)}hide(){(0,a.IV)(this.Oo,m.Gj.Active),(0,a.MV)(this.Oo)}}var g=e(852),y=e(7309);class b extends y.h{constructor(t,i,e,n,r,o,h){super(t,i,e,n,r),this.tooltip=h,this.jx=s.r[o],this.eventList.push(this.jx)}onClickHandler(){this.mediator.publish(this,this.jx)}}var I=e(6019);class w extends I.Y{constructor(t,i,e,n,r,o,h){super(t,i,e,n,r),this.tooltip=h,this.eventList=[],this.jx=s.r[o],this.eventList.push(this.jx)}onClickHandler(){this.mediator.publish(this,this.jx)}}class S{constructor(t,i,e,n){this.Oi=t,this.ra=i,this.eS=e,this.$x=new Map,Object.keys(n).forEach((t=>this.Ux(s.r[t],n[t])))}getButton(t,i){const{isHoverable:e,template:s,tooltip:n}=this.qx(t);return e?new b(i,this.Oi,this.ra,s,this.eS,t,n):new w(i,this.Oi,this.ra,s,this.eS,t,n)}isGeneralComponent(t){return this.$x.has(t)}qx(t){return this.$x.get(t)}Ux(t,i){this.$x.set(t,i)}}const A='<svg viewBox = "0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"/></svg>\n';function P(t,i,e,n=null,r=!0){if(r){const{expanded:r,hasPopup:o,label:h,controls:a}=n||{};return`\n        ${n?`<cnx aria-expanded=${r} aria-haspopup=${o} aria-controls=${a} aria-label="${h}" role="button" class="cnx-icon-button cnx-button-${s.r[t].toLowerCase()} cnx-ui-btn-hoverable" tabindex="0">`:`<cnx class="cnx-icon-button cnx-button-${s.r[t].toLowerCase()} cnx-ui-btn-hoverable" aria-label="${e}" role="button" tabindex="0">`}\n                <cnx class="cnx-btn-container">\n                    ${i}\n                </cnx>\n            </cnx>\n        `.trim()}return`<cnx class="cnx-button-${s.r[t].toLowerCase()}">${i}</cnx>`}const _='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"/></svg>';var x=e(3775);const T="More",k="Close Player",C="Next (Shift + N)",E="Previous (Shift + P)",M={[s.r[s.r.MoreButton]]:{template:P(s.r.MoreButton,'<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></svg>\n',"",{hasPopup:!0,expanded:!1,label:T,controls:x.b.ContextMenuSettings}),tooltip:T,isHoverable:!0},[s.r[s.r.CloseButton]]:{template:P(s.r.CloseButton,A,k),tooltip:k,isHoverable:!0},[s.r[s.r.PinnedCloseButton]]:{template:P(s.r.CloseButton,A,k),tooltip:k,isHoverable:!0},[s.r[s.r.UpNextButton]]:{template:P(s.r.UpNextButton,_,C),tooltip:C,isHoverable:!0},[s.r[s.r.PreviousButton]]:{template:P(s.r.PreviousButton,_,E),tooltip:E,isHoverable:!0}};var L=e(1310);class B extends f.P{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Hx=this.Oo.getElementsByTagName("cnx-span")[0]}setTime(t){isNaN(t)||"number"!=typeof t?(0,a.cn)(this.Oo,m.Gj.Invisible):(this.Hx.innerHTML=(0,L.to)(t),(0,a.IV)(this.Oo,m.Gj.Invisible))}}const R='<cnx class="cnx-ui-progress-label"><cnx-span role="timer"></cnx-span></cnx>';var O=e(4798);class D extends l{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.zx=!1,this.Wx=t=>{(0,a.cn)(this.Oo,m.Gj.HoverEnd),this.zx=!0},this.Gx=t=>{const i=this.getComputedTranslation(t.clientX-this.V_);this.Jx.style.transform=`translateX(${i}px)`},this.Qx=t=>{this.Jx.style.transform="translateX(0)",this.zx=!1,this.Yx()},this.eventList=this.eventList.concat([c.C[c.C.Seek],c.C[c.C.SeekingStart],c.C[c.C.SeekingStopped]])}onProgressChange(t){this.mediator.publish(this,c.C[c.C.Seek],{payload:t-.1})}updateWcagAttributes(t,i){if(!(0,O.hj)(t)||!(0,O.hj)(i))return;const e=(0,L.qt)(i),s=(0,L.qt)(t),n=this.Ox;n&&(n.setAttribute("aria-label","Seek"),n.setAttribute("aria-valuemin","0"),n.setAttribute("aria-valuemax",`${Math.round(i)}`),n.setAttribute("aria-valuenow",`${Math.round(t)}`),n.setAttribute("aria-valuetext",`${s} of ${e}`))}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,c.C[c.C.SeekingStopped]),this.Yx()}onDragStart(){super.onDragStart(),this.mediator.publish(this,c.C[c.C.SeekingStart])}Yx(){this.zx||this.Ax||(0,a.IV)(this.Oo,m.Gj.HoverEnd)}initComponent(){super.initComponent(),this.Oo.addEventListener("mousemove",this.Gx),this.Oo.addEventListener("mouseenter",this.Wx),this.Oo.addEventListener("mouseleave",this.Qx),this.Jx=this.Oo.getElementsByClassName("cnx-progress-follow")[0]}hide(){this.Oo.style.opacity="0"}show(){this.Oo.style.opacity="1"}destroy(){super.destroy(),this.Oo.removeEventListener("mousemove",this.Gx),this.Oo.removeEventListener("mouseenter",this.Wx),this.Oo.removeEventListener("mouseleave",this.Qx)}}var V=e(1191);class F{constructor(t,i,e,h={},a={}){this.Oi=t,this.ra=i,this.Oo=e,this.mo=h,this.Kx={[s.r.PlayButton]:t=>this.Zx(!1,t),[s.r.BigPlayButton]:t=>this.Zx(!0,t),[s.r.VolumeProgress]:t=>new u(t,this.Oi,this.ra,'<cnx class="cnx-progress-bar"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-icon"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-icon"></cnx></cnx>'),[s.r.ExpandButton]:t=>new p.V(t,this.Oi,this.ra,'<cnx class="cnx-icon-button cnx-ui-btn-hoverable" role="button" tabindex="0"><cnx class="cnx-btn-container"><cnx class="cnx-expand-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 014.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 013 19.4V14h2zM19.4 3A1.58 1.58 0 0121 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 01-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"/></svg></cnx><cnx class="cnx-collapse-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 00-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0016.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 019 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 017.4 9H2V7h5V2z"/></svg></cnx></cnx></cnx>',this.mo.isMobile),[s.r.Loader]:t=>new v(t,this.Oi,this.ra,g.Z),[s.r.ElapsedTimeLabel]:t=>new B(t,this.Oi,this.ra,R),[s.r.TotalDurationLabel]:t=>new B(t,this.Oi,this.ra,R),[s.r.RemainingDurationLabel]:t=>new B(t,this.Oi,this.ra,R),[s.r.ProgressBar]:t=>new D(t,this.Oi,this.ra,'<cnx class="cnx-progress-bar cnx-video-progress"><cnx class="cnx-progress-rail-container"><cnx class="cnx-progress-rail"></cnx><cnx class="cnx-progress-fill cnx-color-accent"></cnx><cnx class="cnx-progress-follow"></cnx></cnx><cnx class="cnx-progress-handle cnx-color-accent"></cnx><cnx class="cnx-progress-hitarea"></cnx><cnx class="cnx-progress-input"><input type="range" step="5" role="slider" class="cnx-progress-range"></cnx></cnx>',this.mo.isMobile),[s.r.VolumeButton]:t=>new V.F(t,this.Oi,this.ra,'<cnx class="cnx-icon-button cnx-ui-btn-hoverable" role="button" tabindex="0"><cnx class="cnx-btn-container"><cnx class="cnx-unmute-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957a5.476 5.476 0 00-2.967-4.946v9.9a5.475 5.475 0 002.967-4.945zM13.848 0v2.077a10.39 10.39 0 010 19.585v2.077a12.05 12.05 0 008.9-11.87A12.05 12.05 0 0013.848 0z"/></svg></cnx><cnx class="cnx-mute-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 00.2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 003.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0014 0v1.6A10.53 10.53 0 0120 16l1.45 1.45A11.99 11.99 0 0023 11.5z"/></svg></cnx></cnx></cnx>',V.u.Mute,this.mo.isMobile)},this.Zx=(t,i)=>new o.J(i,this.Oi,this.ra,function(t=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${t?"cnx-button-big-play":""}" role="button" tabindex="0">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${n}</cnx>\n            <cnx class="cnx-pause-icon">${r}</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(t),this.mo.isMobile,t),this.tT=t=>i=>{const e=this.Kx[t];if(e)return e(i)},this.iT=new S(this.Oi,this.ra,this.mo.isMobile,Object.assign(Object.assign({},M),a))}createComponent(t,i){const e=this.tT(t)(i);return e||(this.iT.isGeneralComponent(t)?this.iT.getButton(t,i):void 0)}}},6237:(t,i,e)=>{"use strict";e.d(i,{s:()=>o});var s=e(5701);class n{constructor(t,i){this.sT=t,this.Oi=i,this.nT=/\[\[([0-9]+)]]/g,this.rT=[],this.oT=[],this.hT=this.Oi.createElementByString(this.aT(this.sT))}cT(t){return`<cnx class="pl_${t}"></cnx>`}aT(t){return t.replace(this.nT,((t,i)=>(this.rT.push(parseInt(i,10)),this.cT(i))))}dT(t,i){return this.oT.some((i=>i.slotName===t))||this.oT.some((t=>t.component===i))?null:this.hT.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.rT}getRenderedDom(){return this.hT}registerSlot(t,i){const e=this.dT(t,i);if(null!==e){const s=i.getContainer();return e.parentNode.replaceChild(s,e),this.oT.push({component:i,slotName:t}),!0}return!1}initComponents(){this.oT.forEach((t=>t.component.initComponent()))}}var r=e(9762);class o extends s._{constructor(t,i,e){super(),this.globalDomUtilsService=t,this.templateString=i,this.componentFactory=e,this.lT={},this.O_=new n(i,t),this.addComponents()}addComponents(){this.O_.getComponentList().forEach((t=>{const i=this.componentFactory.createComponent(t,this);this.registerComponent(t,i)}))}registerComponent(t,i){this.O_.registerSlot(t,i),this.lT[t]=i,this.uT(i)}uT(t){t.eventList.forEach((i=>{this.subscribe(i,t,(e=>{i===r.C[r.C.RebindComponent]&&this.fT(t),this.ba(i,e,t)}))}))}fT(t){t&&(this.unsubscribeAll(t),this.uT(t))}getComponent(t){return this.lT[t]}destroy(){Object.keys(this.lT).forEach((t=>{this.lT[t].destroy()}))}}},1830:(t,i,e)=>{"use strict";e.d(i,{q:()=>p});var s=e(2823);var n=e(7405),r=e(3020),o=e(5356),h=e(8983);class a{constructor(t,i,e){this.mT=t,this.Oi=i,this.vT=[],this.gT={top:12,bottom:24,margin:4},this.yT=!1,e&&(this.yT=!0)}bT(){this.IT=this.Oi.getElementCoordinates(this.mT.parentElement)}wT(t,i){t.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=i}ST(t){if(!t||!t.tooltip||this.yT)return;if(this.vT.find((i=>i.component===t)))return;const i=this.Oi.createElementByString('<cnx class="cnx-tooltip-holder cnx-color-tt-bg"><cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx></cnx>');this.wT(i,t.tooltip),this.bT();const e=t.getCoordinates();let s=!1;const{clientY:a,height:c}=e,{clientY:d,height:l}=this.Oi.getElementCoordinates(this.mT);!(0,r.pv)(this.mT,h.s6.ShowControls)&&!(0,o.mb)(this.mT)||a<=d+l/2-c?e.clientY+=this.gT.top:(e.clientY-=this.gT.bottom,s=!0),this.mT.appendChild(i),(0,n.p)(i,e,this.IT,{alignMiddle:!0,alignTop:s,forceRight:!0,distanceFromMargin:this.gT.margin}),(0,r.Tp)(i),(0,r.cn)(i,h.hQ.OpacityInTransition),this.vT.push({component:t,domElement:i})}PT(t){if(!t.tooltip)return;const i=this.vT.find((i=>i.component===t));if(!i)return;const e=i.domElement;this.mT.removeChild(e),this.vT=this.vT.filter((i=>i.component!==t))}_T(t){if(!t.tooltip)return;const i=this.vT.find((t=>t.component===this.xT));i&&this.wT(i.domElement,t.tooltip)}TT(){this.xT=null,this.vT.forEach((t=>this.PT(t.component)))}removeActiveTooltip(){this.xT&&this.PT(this.xT)}setDistanceValues(t){this.gT=Object.assign(Object.assign({},this.gT),t)}hoverStart(t){this.removeActiveTooltip(),this.xT=t,this.ST(t)}hoverEnd(t){this.xT=null,this.PT(t)}stateChanged(t){this.xT===t&&this._T(t)}disableTooltips(){this.yT=!0,this.TT()}enableTooltips(){this.yT=!1,this.ST(this.xT)}}var c=e(9762),d=e(2300),l=e(7332),u=e(1e3);class p extends s.${constructor(t,i,e,s,n={},r){super(r,t,i,e,s),this.fa=new a(this.$uiContainer,i,n.isMobile)}ba(t,i,e){let s=e;switch(i.payload&&i.payload.targetComponent&&(s=i.payload.targetComponent),t){case c.C[c.C.HoverStart]:this.fa.hoverStart(s);break;case c.C[c.C.HoverEnd]:this.fa.hoverEnd(s);break;case c.C[c.C.StateChanged]:this.fa.stateChanged(s)}}updateDuration(t,i){const e=this.getComponent(d.r.ProgressBar);if(null==e||e.updateWcagAttributes(t,i),!(0,r.pv)(this.$uiContainer,h.s6.ShowControls))return;const s=this.getComponent(d.r.ElapsedTimeLabel),n=this.getComponent(d.r.TotalDurationLabel);if(s&&s.setTime(t),n&&n.setTime(i),e){const s=0,n=i,r=0,o=100;e.setMaxRange(Math.round(i)),e.setProgress((0,l.dQ)(s,n,r,o,t))}}updateVolume(t){}expand(){this.getComponent(d.r.ExpandButton).setState(u.q.expand)}collapse(){this.getComponent(d.r.ExpandButton).setState(u.q.collapse)}}},2925:(t,i,e)=>{"use strict";e.d(i,{w:()=>s});class s{constructor(t){this.$h=t}onClick(){}canTransitionToState(t){return!0}enterState(){this.initState(),this.$h.currentState=this}}},4291:(t,i,e)=>{"use strict";e.d(i,{d:()=>h});var s=e(2300),n=e(4115),r=e(8983),o=e(2925);class h extends o.w{initState(){var t;this.$h.$uiContainer.classList.add(r.s_.Paused);const i=this.$h.getComponent(s.r.PlayButton);i&&i.setState(n.L.Play);const e=this.$h.getComponent(s.r.BigPlayButton);e&&(null===(t=e.getContainer())||void 0===t||t.setAttribute("tabindex","0"),e.setState(n.L.Play))}exitState(){var t;const i=this.$h.getComponent(s.r.BigPlayButton);null===(t=null==i?void 0:i.getContainer())||void 0===t||t.removeAttribute("tabindex"),this.$h.$uiContainer.classList.remove(r.s_.Paused)}}},2246:(t,i,e)=>{"use strict";e.d(i,{_:()=>h});var s=e(2300),n=e(4115),r=e(8983),o=e(2925);class h extends o.w{initState(){this.$h.$uiContainer.classList.add(r.s_.Playing);const t=this.$h.getComponent(s.r.PlayButton);t&&t.setState(n.L.Pause);const i=this.$h.getComponent(s.r.BigPlayButton);i&&i.setState(n.L.Pause)}exitState(){this.$h.$uiContainer.classList.remove(r.s_.Playing)}}},7405:(t,i,e)=>{"use strict";var s;function n(t,i,e,s){t.style.top=`${function(t,i,e,s,n){let r=i-s.clientY;const o=s.clientY+s.height-i;n.alignTop&&r>t.offsetHeight?r-=t.offsetHeight:!n.alignTop&&o<t.offsetHeight?r-=t.offsetHeight-o:(r+=e,r+t.offsetHeight>s.height&&(r=s.height-t.offsetHeight));return r}(t,i.clientY,i.height,e,s)}px`,t.style.left=`${function(t,i,e,s){const n=s.distanceFromMargin?s.distanceFromMargin:0;let r=Math.ceil(i)-Math.ceil(e.clientX),o=i,h=o+t.offsetWidth;const a=e.clientX+e.width;if(s.alignMiddle){const i=t.offsetWidth/2;r-=Math.ceil(i),o-=i,h-=i}if(s.alignMiddle||s.forceRight)return e.clientX>o?r=0+n:a<h&&(r-=Math.ceil(h)-Math.ceil(a)+n),r;h>a&&(r-=t.offsetWidth);return r}(t,i.clientX,e,s)}px`}e.d(i,{C:()=>s,p:()=>n}),function(t){t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Right=4]="Right",t[t.Left=8]="Left",t[t.Middle=16]="Middle"}(s||(s={}))},2857:(t,i,e)=>{"use strict";e.d(i,{T_:()=>m,VK:()=>v,fh:()=>p,vY:()=>f,yt:()=>l,zJ:()=>u});var s=e(4798),n=e(9791),r=e(1187),o=e(5675),h=e(6628),a=e(8041),c=e(51),d=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const l={enableWorker:!0,capLevelToPlayerSize:!0,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:90,backBufferLength:1/0,lowLatencyMode:!0,ignoreDevicePixelRatio:!0,debug:"true"===(0,c.Ph)("cnxHlsDebug",(0,n.pE)(window).topFrame.location.href)};function u(t){return d(this,void 0,void 0,(function*(){try{const i=yield(0,n.Up)((()=>d(this,void 0,void 0,(function*(){return yield function(t){var i;return d(this,void 0,void 0,(function*(){const e=(0,h.W)(a.o);if(yield(0,o.Z)(`${e}hls.1.3.4.js`,window,t),!(null===(i=t.cnxAsyncChunks)||void 0===i?void 0:i.Hls))throw new Error("hls bundle not found");return t.cnxAsyncChunks.Hls}))}(t)}))));if(!i)throw new Error("no_hls_module");return i}catch(t){return(0,r.n)({callStack:t.stack,exception:t.message,level:r.D.WARN,message:"HLS_dynamicImport"}),null}}))}function p(){const t=self.MediaSource||self.WebKitMediaSource;if(!t)return!1;const i=self.SourceBuffer||self.WebKitSourceBuffer,e="function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove;return!!e&&!!s}const f=t=>(0,s.QM)(t.canPlayType("application/vnd.apple.mpegurl"));function m(t){const i=[];return t.forEach((t=>{i.some((i=>i.height===t.height))||i.push(t)})),i}function v(t,i){return t.reduce(((t,e)=>{if(!t)return e;const s=Math.abs(t.height-i);return Math.abs(e.height-i)<s?e:t}),void 0)}},1783:(t,i,e)=>{"use strict";e.d(i,{Ve:()=>a,_f:()=>l,cv:()=>s,fi:()=>o,jI:()=>r,li:()=>u,qZ:()=>d,rF:()=>n,sm:()=>c,yA:()=>h});const s="Connatix",n="1.4.2";var r,o,h,a,c,d,l,u;!function(t){t.Generic="generic",t.Video="video"}(r||(r={})),function(t){t.Click="click",t.InvitationAccept="invitationAccept"}(o||(o={})),function(t){t.PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone"}(h||(h={})),function(t){t.SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish"}(a||(a={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender"}(c||(c={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.Video="video"}(d||(d={})),function(t){t.sessionError="sessionError",t.geometryChange="geometryChange"}(l||(l={})),function(t){t.notFound="notFound",t.hidden="hidden",t.viewport="viewport",t.backgrounded="backgrounded",t.obstructed="obstructed",t.clipped="clipped"}(u||(u={}))},4646:(t,i,e)=>{"use strict";var s,n;e.d(i,{$:()=>n}),function(t){t.Full="full"}(s||(s={})),function(t){const i={sessionClient:["1.4.2-iab3703","1.3.25-iab3167","1.3.13-iab2343"],verificationClient:["1.4.2-iab3703","1.3.25-iab3167","1.3.13-iab2343"]};function e(t,i){if(!t)return;let e=null;for(let s=0;s<i.length&&(e=t[i[s]],!e);s++);return e}t.getSessionClient=function(t){if(t)return e(t.OmidSessionClient,i.sessionClient)},t.getVerificationClient=function(t){return e(t.OmidVerificationClient,i.verificationClient)},t.getVerificationScriptResources=function(t,i){return t.map((t=>{const{javaScriptResource:e,vendor:n,verificationParameters:r}=t;return new i.VerificationScriptResource(e,n,r,s.Full)}))}}(n||(n={}))},7175:()=>{String.prototype.cnx_replaceAll=function(t,i){return this.split(t).join(i)}},3326:(t,i,e)=>{"use strict";e.d(i,{A:()=>p,u:()=>u});var s=e(6224),n=e(289),r=e(6153),o=e(4798),h=e(1187);const a=new s.t(n.ProtoAdDomainBlockingResponse,"AdDomainBlockingService"),c=2;let d;const l=new Map;function u(t){d||(d=new Promise((i=>{const e=t.find((t=>t.blockedDomainsRevisionNumber));if(!e)return void i();const{publisherLineItemId:s,blockedDomainsRevisionNumber:n}=e,o=`${r.n.endPoints.base.lineItems}${s}/blockedDomains_${n}.bin`;a.fetchMetadata(o,c).then((t=>{l.set(s,t.domains),i()})).catch((()=>{(0,h.n)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:h.D.CRITICAL},{throttle:2,shouldSendMaxLog:!1}),i()}))})))}function p(t,i){return new Promise((e=>{(0,o.QM)(i)?d.then((()=>{l.has(t)&&l.get(t).some((t=>i.includes(t)))?e(!0):e(!1)})):e(!1)}))}},9906:(t,i,e)=>{"use strict";e.d(i,{h:()=>n});var s=e(8659);class n{static getInstance(){return this.kT||(this.kT=new n),this.kT}static getGlobalContainer(){return this.getInstance().globalContainer}static getSessionChildContainer(t){const i=n.CT.get(t);return i||n.ET(t)}constructor(t=s.nC){this.MT=t}get globalContainer(){return this.MT}static ET(t){const i=n.getGlobalContainer().createChildContainer();return n.CT.set(t,i),i}}n.CT=new Map},6661:(t,i,e)=>{"use strict";var s;e.d(i,{c:()=>s}),function(t){t.GeneralMetadata="GeneralMetadata",t.UserManagerService="UserManagerService",t.Temp="TempDataForSS",t.OmidSettings="OmidSettings",t.EventsStorageService="EventsStorageService",t.OmsdkImplementationType="OmsdkImplementationType",t.GlobalDomUtilsService="GlobalDomUtilsService",t.ExternalPrebidJSPermutiveConfig="ExternalPrebidJSPermutiveConfig",t.IntentiqSettings="IntentiqSettings"}(s||(s={}))},6153:(t,i,e)=>{"use strict";e.d(i,{n:()=>c});var s=e(51),n=e(7945),r=e(9791),o=e(4798);class h{constructor(t){this.base=t,this.api={pls:t.core+"core/pls",story:t.core+"core/story",rtb:t.core+"rtb/g",syncUrls:t.core+"core/us",fallbackstory:t.core+"core/fallbackstory",cookie:t.core+"core/ck",tam:t.core+"core/atam"},this.tracking={session_rendered:t.tracking+"sr",session_view:t.tracking+"sv",session_time:t.tracking+"st",session_client_error:t.tracking+"e",media_quartile:t.tracking+"mq",media_click:t.tracking+"mc",ad_impression:t.tracking+"ai",bids:t.tracking+"abt",ad_impression_viewable:t.tracking+"av",ad_quartile:t.tracking+"aq",ad_click:t.tracking+"ac",playerStart:t.tracking+"ps",adOpportunity:t.tracking+"ao",sessionAdBlocker:t.tracking+"sab",heavy_ad_intervention:t.tracking+"ha",auctionInformation:t.tracking+"aucinfo",userCookieInformation:t.tracking+"ucl"},this.assets={css:{elements:`${this.BT(t.assets)}player.css`,playspace:`${this.BT(t.assets)}connatix.playspace.css`},plugins:{adobeAnalytics:`${t.plugins}p/plugins/adobe.plugin.js`,moatAnalytics:`${t.plugins}p/plugins/moat.plugin.js`,prebidScript:`${t.plugins}p/plugins/prebid7.17.0-8.js`,apstagScript:`${t.plugins}p/plugins/apstag22.10.131733.js`,omsdkSessionClient:`${t.plugins}p/plugins/connatix.omsdk.session.client-1.4.2.js`,omsdkWebService:`${t.plugins}p/plugins/connatix.omsdk.service-web.js`,intentiq:`${t.plugins}p/plugins/connatix.intentiq.js`}}}BT(t){return`${t}p/${n.g.version}/`}}var a=e(1187);class c{static set bundleDomain(t){this.RT=t}static get bundleDomain(){if(!(0,o.QM)(this.RT))throw new Error("bundleDomain missing");return this.RT}static get defaultVideoPosterURL(){return this.OT}static set defaultVideoPosterURL(t){this.OT=t}static get tier(){return null===this.DT?((0,a.n)({message:"EndpointResolver_no_tier_specified",level:a.D.INFO},{throttle:10,shouldSendMaxLog:!1}),c.DEFAULT_TIER):this.DT}static setTier(t){this.DT=t,c.VT=c.FT()}static NT(t){const i=`capi{{env}}.${t}`;return{video:`//vid.${t}/`,image:`//img.${t}/`,core:`https://${i}/`,tracking:`https://${i}/tr/`,metadata:`//vid.${t}/`,insights:`//ins.${t}/`,assets:`//cds{{env}}.${t}/`,plugins:`//cds.${t}/`,lineItems:`//lit.${t}/`}}static FT(){const t=(0,s.Ph)("cnxEnv",(0,r.pE)(window).topFrame.location.href);t&&(n.g.domainPrefix=`-${t}`);const i=this.NT(this.bundleDomain);return Object.keys(i).forEach((t=>{i[t]=i[t].replace("{{env}}",n.g.domainPrefix)})),new h(i)}static get endPoints(){return null===c.VT&&(c.VT=c.FT()),c.VT}}c.DEFAULT_TIER=2,c.DT=null,c.OT="",c.VT=null},1703:(t,i,e)=>{"use strict";e.d(i,{I:()=>s,V:()=>r});var s,n=e(289);!function(t){t[t.PreRoll=0]="PreRoll",t[t.MidRoll=1]="MidRoll",t[t.PostRoll=2]="PostRoll",t[t.Standalone=3]="Standalone"}(s||(s={}));const r={[n.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[n.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[n.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},4772:(t,i,e)=>{"use strict";e.d(i,{Z:()=>n});const s=e(6888).fI,n=Object.assign(Object.assign({},s),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"})},9130:(t,i,e)=>{"use strict";e.d(i,{C:()=>o});var s=e(2859),n=e(4772),r=e(289);class o{constructor(t=!1){this._debugLogging=t,this.jT="eventEmitted",this.d_=new s.Q}subscribe(t){return this.d_.on(this.jT,t)}unsubscribe(t){this.d_.remove(this.jT,t)}emitSessionStart(t){const i={videoMetadata:t};this.$T({metadata:i,name:n.Z.SessionStart})}emitContentComplete(){this.$T({name:n.Z.ContentComplete})}emitSessionEnd(){this.$T({name:n.Z.SessionEnd})}emitPlay(){this.$T({name:n.Z.Play})}emitPause(){this.$T({name:n.Z.Pause})}emitAdPlay(){this.$T({name:n.Z.AdPlay})}emitAdPause(){this.$T({name:n.Z.AdPause})}emitAdPlaying(t){const i={adType:t};this.$T({name:n.Z.AdPlaying,metadata:i})}emitAdPaused(t){const i={adType:t};this.$T({name:n.Z.AdPaused,metadata:i})}emitAdImpression(t,i,e){const s={adMetadata:t,customAdMetadata:i,adType:e};this.$T({metadata:s,name:n.Z.AdImpression})}emitAdComplete(t){const i={adType:t};this.$T({name:n.Z.AdComplete,metadata:i})}emitAdStopped(t){const i={adType:t};this.$T({name:n.Z.AdStopped,metadata:i})}emitAdBreakStart(t){const i={adBreakMetadata:t};this.$T({metadata:i,name:n.Z.AdBreakStart})}emitAdBreakComplete(t){const i={adType:t};this.$T({name:n.Z.AdBreakComplete,metadata:i})}emitPlayerResized(t){const i={playerDimensionsMetadata:t};this.$T({metadata:i,name:n.Z.PlayerResized})}emitOnEnterFullscreen(){this.$T({name:n.Z.OnEnterFullscreen})}emitOnExitFullscreen(){this.$T({name:n.Z.OnExitFullscreen})}emitOnPlayerCollapsed(){this.$T({name:n.Z.PlayerCollapsed})}emitOnPlayerExpanded(t){const i={playerDimensionsMetadata:t};this.$T({name:n.Z.PlayerExpanded,metadata:i})}emitAdExpandedChange(t){const i={adType:t};this.$T({name:n.Z.AdExpandedChange,metadata:i})}emitAdError(t){const i={adType:t};this.$T({name:n.Z.AdError,metadata:i})}emitPlayError(){this.$T({name:n.Z.PlayError})}emitRenderError(){this.$T({name:n.Z.RenderError})}emitAdClickThru(t){const i={adType:t};this.$T({name:n.Z.AdClickThru,metadata:i})}emitAdInteraction(t){const i={adType:t};this.$T({name:n.Z.AdInteraction,metadata:i})}emitAdVideoStart(t,i){const e={adVideoStartMetadata:t,adType:i};this.$T({metadata:e,name:n.Z.AdVideoStart})}emitAdLoaded(t,i){const e={adLoadedMetadata:t,adType:i};this.UT=t,this.$T({metadata:e,name:n.Z.AdLoaded})}emitAdStateChange(t,i){const e={adStateChangedMetadata:t,adType:i};this.qT=t,this.$T({metadata:e,name:n.Z.AdStateChange})}emitAdVideoFirstQuartile(t){const i={adType:t};this.$T({name:n.Z.AdVideoFirstQuartile,metadata:i})}emitAdVideoMidpoint(t){const i={adType:t};this.$T({name:n.Z.AdVideoMidpoint,metadata:i})}emitAdVideoThirdQuartile(t){const i={adType:t};this.$T({name:n.Z.AdVideoThirdQuartile,metadata:i})}emitAdVideoComplete(t){const i={adType:t};this.$T({name:n.Z.AdVideoComplete,metadata:i})}emitVolumeChange(t){this.$T({name:n.Z.VolumeChange,metadata:{volume:t}})}emitAdVolumeChange(t){const i={adType:t};this.$T({name:n.Z.AdVolumeChange,metadata:i})}emitAdSkipped(t){const i={adType:t};this.$T({name:n.Z.AdSkipped,metadata:i})}$T(t){var i;(null===(i=null==t?void 0:t.metadata)||void 0===i?void 0:i.adType)!==r.ProtoAdType.Nonlinear&&(this._debugLogging&&console.log("Connatix Player Elements debugging: ",t),this.d_.trigger(this.jT,t))}get adLoadedMetadata(){return this.UT}get adStateMetadata(){return this.qT}destroy(){this.$T({name:n.Z.Destroy}),this.d_.removeAll()}}},5687:(t,i,e)=>{"use strict";e.d(i,{m:()=>d});var s=e(8211),n=e(6153),r=e(5650),o=e(3020),h=e(9791),a=e(1187),c=e(4798);class d{constructor(t){this.createElement=(t,i=this.wh)=>i.document.createElement(t),this.wh=t,this.addPreconnect()}get global(){return this.wh}addCssString(t,i=""){return(0,o.uc)(t,i,this.wh)}addPreconnect(){(0,o.tp)(n.n.endPoints.base.video,this.wh),(0,o.tp)(n.n.endPoints.base.core,this.wh),(0,o.tp)(n.n.endPoints.base.image,this.wh)}getLineHeightPropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("line-height")}getFontSizePropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("font-size")}getFontWeightPropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("font-weight")}getTransformPropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("transform")}getPaddingTopPropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("margin-top")}getMarginBottomPropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("margin-left")}getMarginRightPropertyValue(t){return(0,o.Dx)(t,this.wh).getPropertyValue("margin-right")}createElementByString(t,i=this.wh){return(0,o.G$)(t,i)}createDocumentFragment(t=this.wh){return t.document.createDocumentFragment()}isHttpsProtocolUsed(){return(0,o.eA)(this.wh)}isURLSameDomainToTop(t){return(0,o.uh)(t,this.wh)}isDetachedFromDOM(t){let i=t;for(;i.parentNode;)if(i=i.parentNode,i===this.wh.document.body)return!1;return!0}hasIosFullscreenBehaviour(t){return t&&t===s.M.Ios||!this.getFullscreenKeys()}querySelector(t,i=this.wh){let e;try{e=i.document.querySelector(t)}catch(t){}return e}addCssStylesheetToHead(t,i,e){const s=this.wh.document;s.getElementById(t.id)?(0,c.mf)(i)&&i():(0,o.NS)(t,s.head,this.wh,i,e)}getFullscreenKeys(t){return(0,o.S0)(t||this.wh.document)}exitFullscreen(t,i){(i||this.wh.document)[t]()}getDocumentProperty(t){return this.wh.document[t]}addEventListenerOnGlobal(t,i,e,s=!1){(e?this.wh.document:this.wh).addEventListener(t,i,s)}removeEventListenerOnGlobal(t,i,e,s=!1){(e?this.wh.document:this.wh).removeEventListener(t,i,s)}trackWithImages(t,i){(0,h.Hh)(t,this.wh,i)}getElementCoordinates(t){let{top:i,left:e}=t.getBoundingClientRect();const{width:s,height:n}=t.getBoundingClientRect();return i+=this.wh.pageYOffset,e+=this.wh.pageXOffset,{clientX:e,clientY:i,width:s,height:n}}getElementDistanceToViewport(t){const{top:i,left:e}=t.getBoundingClientRect();return{top:i,left:e}}requestAnimationFrameHelper(t){return(0,o.PM)(this.wh,t)}cancelRequestAnimationFrame(t){return(0,o.h_)(this.wh,t)}getGlobalLocationProperties(){const t=this.wh.location;return{hostname:t.hostname,pathname:t.pathname,href:t.href,protocol:t.protocol,host:t.host,port:t.port,search:t.search,hash:t.hash}}open(t,i){this.wh.open(t,i)}getComputedTranslateX(t){let i=0;const e=(0,o.Dx)(t,this.wh).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return(0,r.BZ)(e)&&(i=parseFloat(e[1].split(", ")[4])),i}getBodyDimensions(){try{const t=(0,h.pE)(this.wh).topFrame.document.body;let{offsetWidth:i,offsetHeight:e}=t;const s=(0,o.Dx)(t,this.wh);return i+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),e+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10),{width:i,height:e}}catch(t){return(0,a.n)({message:"DomUtils_error_getting_body_dimensions",exception:t.message,callStack:t.stack,level:a.D.CRITICAL}),{width:0,height:0}}}getViewportWidth(){return(0,h.pE)(this.wh).topFrame.document.documentElement.clientWidth}getViewportHeight(){return(0,h.pE)(this.wh).topFrame.innerHeight}getGlobalClosestTop(){return(0,h.pE)(this.wh)}stripHtmlTags(t){return(0,o.ju)(t,this.wh)}getComputedStyle(t,i){return(0,o.Dx)(t,this.wh,i)}getElementById(t){return(0,o.rI)(t,this.wh)}getElementsByClassName(t){return(0,o.Fs)(t,this.wh)}insertScript(t,i,e){this.wh.document.getElementById(t.id)?(0,c.mf)(i)&&i():(0,o.dZ)(t,this.wh.document.head,this.wh,i,null,!0,e)}destroy(){}}},6666:(t,i,e)=>{"use strict";e.d(i,{k:()=>u});var s=e(6224),n=e(289),r=e(6153),o=e(1187),h=e(1992),a=e(9791),c=e(4798),d=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const l={insights:[],sentimentAnalysis:void 0};class u{static loadInsights(t){const{id:i}=t;let e=u.insightsPromiseStore.get(i);return e||(e=new Promise((i=>{const e=u.requestUrlBuilder(t);u.mediaMetadataHandler.fetchMetadata(e,2,false,1e4).then((t=>{const e=t.insights.map((t=>t.key));i({insights:e,sentimentAnalysis:t.sentimentAnalysis})})).catch((t=>{(0,a.Vm)([95,5])&&(0,o.n)({message:"LoadInsightIndexesService_endpoint_unavailable",exception:e,callStack:`${t}`,level:o.D.WARN},{shouldSendMaxLog:!1}),i(l)}))})),u.insightsPromiseStore.set(i,e)),e}static loadPageInsights(t){return d(this,void 0,void 0,(function*(){const i=yield u.loadInsights(t);return u.pageInsights={insights:i.insights},u.pageInsights}))}static requestUrlBuilder({insightsInputType:t,id:i,versionId:e}){return t===h.i.Page||(0,c.$K)(e)||(0,o.n)({message:"LoadInsightIndexesService_requestUrlBuilder_noVersionIdProvided",exception:`Type: ${t}, id: ${i}`,level:o.D.CRITICAL}),t===h.i.Page?`${r.n.endPoints.base.insights}${i}/insights.bin`:`${r.n.endPoints.base.insights}${i}/${e}/insights.bin`}static markAsUnavailable(t){u.insightsPromiseStore.get(t)||u.insightsPromiseStore.set(t,Promise.resolve(l))}}u.mediaMetadataHandler=new s.t(n.ProtoInsightsResponse,"InsightsLoaderService"),u.insightsPromiseStore=new Map},1992:(t,i,e)=>{"use strict";var s;e.d(i,{i:()=>s}),function(t){t[t.Video=0]="Video",t[t.Story=1]="Story",t[t.Page=2]="Page"}(s||(s={}))},8230:(t,i,e)=>{"use strict";var s,n,r,o;e.d(i,{Av:()=>o,HT:()=>n,WR:()=>r,qs:()=>s}),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(s||(s={})),function(t){t.Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend"}(n||(n={})),function(t){t[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold"}(r||(r={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(o||(o={}))},7187:(t,i,e)=>{"use strict";e.d(i,{k:()=>u});var s=e(8983),n=e(6203),r=e(8230),o=e(5650),h=e(3020);const a={MAIN:0,AUXILIARY:1,SECONDARY:2,FOURTH:3,FIFTH:4};function c(t){return t.button===a.MAIN}var d=e(7332),l=e(4798);class u{constructor(t,i,e){this.aA=t,this.eS=i,this.mediator=null,this.zT=30,this.WT=250,this.GT=25,this.XT=[],this.JT={},this.QT=0,this.YT=0,this.KT=!0,this.tk=null,this.ik=!1,this.ek=!1,this.sk=!1,this.nk=!1,this.rk=0,this.hk=0,this.ak=null,this.la=null,this.ck=null,this.dk=!0,this.lk=!1,this.uk=t=>{this.eS?(t.element.addEventListener("touchstart",this.pk,{passive:!0}),t.element.addEventListener("touchmove",this.fk,{passive:!0}),t.element.addEventListener("touchend",this.mk),t.element.addEventListener("touchcancel",this.vk),t.element.addEventListener("mouseup",this.gk)):(t.element.addEventListener("mousedown",this.yk),t.element.addEventListener("mouseup",this.gk))},this.bk=t=>{this.eS?(t.element.removeEventListener("touchstart",this.pk),t.element.removeEventListener("touchmove",this.fk),t.element.removeEventListener("touchend",this.mk),t.element.removeEventListener("touchcancel",this.vk),t.element.removeEventListener("mouseup",this.gk)):(t.element.removeEventListener("mousedown",this.yk),t.element.removeEventListener("mouseup",this.gk))},this.pk=t=>{t.stopPropagation();const i=this.Ik(t);this.ck=i,this.ek=!1,this.wk(i,r.WR.Hold)&&this.Sk(t);const e=this.Ak(t);this.YT=e.eventX,this.QT=e.eventY,this.Pk(t,i,r.HT.InteractionStart),this.KT=!0},this.fk=t=>{t.stopPropagation();const i=this.Ik(t),e=this.Ak(t);if(this.KT&&(Math.abs(e.deltaXFromStart)>this.GT||Math.abs(e.deltaYFromStart)>this.GT)&&(this.KT=!1),this.ik||this.wk(i,r.WR.Swipe)){if(null===this.ak&&this._k(i,e),this.ak===r.qs.Y)return;null===this.la&&(this.la=(0,h.PM)(this.aA,(()=>{this.la=null,this.xk(e.deltaXFromStart),i.mediator.publish(i.context,n.Z[n.Z.SwipeMove],{payload:e.deltaXFromStart})})))}},this.mk=t=>{const i=this.Ik(t);if(this.lk=!1,this.ck===i){const e=this.Ak(t);t.cancelable&&this.wk(i,r.WR.Hold)&&Math.abs(e.deltaXFromStart)<this.GT&&Math.abs(e.deltaYFromStart)<this.GT&&t.preventDefault(),this.Tk(t,i,e);this.kk(e)===r.qs.Y&&Math.abs(e.deltaYFromStart)>=this.GT?this.dk&&i.mediator.publish(i.context,n.Z[n.Z.Scroll]):!this.KT||this.sk||this.ek||(this.lk=!0)}this.ck=null},this.vk=t=>{const i=this.Ik(t);this.Tk(t,i),this.ck=null},this.yk=t=>{if(!c(t))return void this.Ck(r.HT.InteractionStart,t);const i=this.Ik(t);this.ck=i,t.stopPropagation(),t.preventDefault(),this.wk(i,r.WR.Hold)&&this.Sk(t),this.Pk(t,i,r.HT.InteractionStart)},this.gk=t=>{const i=this.Ik(t);return this.lk?(i.mediator.publish(i.context,n.Z[n.Z.Click]),void(this.lk=!1)):c(t)&&this.ck?(t.stopPropagation(),t.preventDefault(),this.Pk(t,this.ck,r.HT.Interaction),this.Pk(t,this.ck,r.HT.InteractionEnd),(this.ik||this.wk(i,r.WR.Hold))&&this.Mk(t),this.ck===i&&(this.Pk(t,i,r.HT.Click),i.mediator.publish(i.context,n.Z[n.Z.Click])),void(this.ck=null)):(this.Ck(r.HT.Interaction,t),void this.Ck(r.HT.InteractionEnd,t))},this.Lk=t=>{if(!c(t))return this.Ck(r.HT.Interaction,t),void this.Ck(r.HT.InteractionEnd,t);this.ck=null},this.Bk=t=>{if(!c(t)||!this.ck)return this.Ck(r.HT.Interaction,t),void this.Ck(r.HT.InteractionEnd,t);this.Pk(t,this.ck,r.HT.Interaction),this.Pk(t,this.ck,r.HT.InteractionEnd),(this.ik||this.wk(this.ck,r.WR.Hold))&&this.Mk(t),this.ck=null};const{leftTapSizeThreshold:s,holdTriggerDuration:o,scrollThreshold:a}=Object.assign({},e);this.zT=s||this.zT,this.WT=o||this.WT,this.GT=a||this.GT,this.aA.document.addEventListener("mousedown",this.Lk),this.aA.document.addEventListener("mouseup",this.Bk)}register(t,i,e,s={},n=[]){const r={element:t,mediator:i,context:e,callbacks:s||{},allowedSpecialInteractions:n,disabledSpecialInteractions:[]};this.XT.push(r),this.uk(r)}unregister(t){const i=this.XT.find((i=>i.element===t));i&&(this.XT=this.XT.filter((i=>i.element!==t)),this.bk(i))}unregisterAll(t){const i=this.XT.filter((i=>i.mediator===t));i.forEach(this.bk),this.XT=(0,o.V7)(this.XT,i)}addGlobalActions(t,i){Object.keys(Object.assign({},i)).forEach((e=>{this.JT[e]=this.JT[e]||[],this.JT[e].push({initiator:t,action:i[e]})}))}removeGlobalActions(t){Object.keys(this.JT).forEach((i=>{this.JT[i].some((i=>i.initiator===t))&&(this.JT[i]=this.JT[i].filter((i=>i.initiator!==t)))}))}disableSpecialInteractions(t){const i=this.Rk(t);i&&(i.disabledSpecialInteractions=(0,o.gX)(i.allowedSpecialInteractions))}enableSpecialInteractions(t){const i=this.Rk(t);i&&(i.disabledSpecialInteractions=[])}getNonInterruptibleInteractions(){return[n.Z.HoldStart,n.Z.HoldEnd,n.Z.SwipeMove,n.Z.SwipeEnd,n.Z.Scroll]}disableScrollEvent(){this.dk=!1}enableScrollEvent(){this.dk=!0}destroy(){clearTimeout(this.tk),this.XT.forEach(this.bk),this.aA.document.removeEventListener("mousedown",this.Lk),this.aA.document.removeEventListener("mouseup",this.Bk)}Dk(t){const i=this.Ik(t),e=i.element.getBoundingClientRect(),s=this.Vk(t),n=e.width,r=(0,d.dQ)(0,n,0,100,s);this.Nk(i,this.zT,r)}Nk(t,i,e){e<i?t.mediator.publish(t.context,n.Z[n.Z.TapLeft]):t.mediator.publish(t.context,n.Z[n.Z.TapRight])}Sk(t){clearTimeout(this.tk),this.ik=!1,this.sk=!1;const i=this.Ik(t);(0,h.cn)(i.element,s.Gj.OnHold),this.tk=setTimeout((()=>{this.ik=!0,this.KT&&(this.sk=!0,i.mediator.publish(i.context,n.Z[n.Z.HoldStart]))}),this.WT)}Mk(t){clearTimeout(this.tk);const i=this.Ik(t);(0,h.IV)(i.element,s.Gj.OnHold),this.ik?(this.ik=!1,this.sk&&(this.sk=!1,i.mediator.publish(i.context,n.Z[n.Z.HoldEnd]))):(this.ek=!0,this.Dk(t))}Tk(t,i,e){e=e||this.Ak(t),t.stopPropagation(),this.Pk(t,i,r.HT.Interaction),this.Pk(t,i,r.HT.InteractionEnd),(this.ik||this.nk||this.KT&&this.wk(i,r.WR.Hold))&&this.Mk(t),(this.nk||this.wk(i,r.WR.Swipe))&&this.jk(i,e)}_k(t,i){this.ak=this.kk(i),this.ak===r.qs.X&&(this.nk=!0,this.ik||(clearTimeout(this.tk),this.tk=null,this.ik=!0,t.mediator.publish(t.context,n.Z[n.Z.HoldStart])))}jk(t,i){if(this.nk){const e=this.$k(i);t.mediator.publish(t.context,n.Z[n.Z.SwipeEnd],{payload:e})}(0,h.h_)(this.aA,this.la),this.la=null,this.nk=!1,this.YT=null,this.QT=null,this.ak=null,this.rk=0,this.hk=0}xk(t){this.hk<this.GT?this.hk++:(this.rk=t,this.hk=0)}kk(t){return Math.abs(t.deltaXFromStart)>=Math.abs(t.deltaYFromStart)?r.qs.X:r.qs.Y}$k(t){return t.deltaXFromStart-this.rk<0?r.Av.Left:r.Av.Right}Ak(t){const i=t.changedTouches[0];return{deltaXFromStart:i.clientX-this.YT,deltaYFromStart:i.clientY-this.QT,eventX:i.clientX,eventY:i.clientY}}Ik(t){return this.ck||this.Rk(t.currentTarget)}Rk(t){return this.XT.find((i=>i.element===t))}Vk(t){const i=this.Ik(t);if(this.eS){return t.changedTouches[0].clientX-i.element.getBoundingClientRect().left}return t.offsetX}wk(t,i){return t.allowedSpecialInteractions.includes(i)&&!t.disabledSpecialInteractions.includes(i)}Pk(t,i,e){const s=i.callbacks[e];(0,l.mf)(s)&&s(t),this.Ck(e,t)}Ck(t,i){var e;null===(e=this.JT[t])||void 0===e||e.forEach((t=>{t.action(i)}))}}},1526:(t,i,e)=>{"use strict";e.d(i,{c:()=>u});var s,n,r=e(289),o=e(9791),h=e(3020),a=e(9022),c=e(4798),d=e(5650),l=e(1187);!function(t){t.isStringWithMacros=function(t,i){if(!(0,c.QM)(t))return!1;const e=`\\${i[0]}.*?\\${i[1]}`,s=new RegExp(e,"g");return!!t.match(s)},t.splitByFirstEqual=function(t){if(!(0,c.QM)(t))return;const i=t.indexOf("=");return-1!==i?[t.slice(0,i),t.slice(i+1)]:void 0}}(s||(s={})),function(t){t.AppUrl="APP_URL",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.Uuid="UUID",t.PageUrl="PAGE_URL",t.AdPosition="AD_POSITION",t.VideoTitle="VIDEO_TITLE",t.MediaTitle="MEDIA_TITLE",t.VideoDuration="VIDEO_DURATION",t.ContentLength="CONTENT_LENGTH",t.VideoDescription="VIDEO_DESCRIPTION",t.VideoUrl="VIDEO_URL",t.VideoId="VIDEO_ID",t.VideoTime="VIDEO_TIME",t.DescriptionUrl="DESCRIPTION_URL",t.VideoKeywords="VIDEO_KEYWORDS",t.Autoplay="AUTOPLAY",t.UserAgent="UA",t.Ip="IP",t.CashBuster="CB",t.Width="WIDTH",t.Height="HEIGHT",t.Domain="DOMAIN",t.SourceReferrer="SOURCE_REFERRER",t.Gdpr="GDPR",t.GdprConsent="GDPR_CONSENT",t.Consent="CONSENT",t.Ctd="CTD",t.Publisher="PUBLISHER",t.Random="RAND",t.Site="SITE",t.SubId="SUB_ID",t.Url="URL",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.UsPrivacyString="US_PRIVACY",t.Npa="NPA",t.DoNotTrack="DNT",t.FraudSensorUserId="FS_USER_ID",t.PublisherId="PUBLISHER_ID",t.SessionId="SESSION_ID",t.FraudSensorDeviceType="FS_DEVICE_TYPE",t.FraudSensorLookupId="MGID",t.FraudSensorLookupResponseCode="MGTO",t.FraudSensorMediaType="FS_MEDIA_TYPE",t.FraudSensorDeviceIdentifier="FS_DEVICE_IDENT",t.CnxSupplierId="CNX_SUPPLIER_ID",t.AdxPublisherNetworkCode="ADX_CPNC",t.ErrorCode="ERRORCODE"}(n||(n={}));class u{constructor(t,i,e,s,o,h,d,l){this.Uk=new Map,this.qk="[",this.Hk="]",this.Uk.set(n.Autoplay,t.playbackMode===r.ProtoPlayerPlaybackModeEnum.Autoplay),this.Uk.set(n.UserAgent,navigator.userAgent),this.Uk.set(n.UserLong,i.lon),this.Uk.set(n.UserLat,i.lat),this.Uk.set(n.Ip,i.ip),this.zk(h),this.Wk(d),this.Gk(e,s,o),this.Xk(),this.Uk.set(n.Domain,s),this.Uk.set(n.CnxSupplierId,a.kd),this.Uk.set(n.SessionId,t.sessionId),(0,c.QM)(l)&&this.Uk.set(n.AdxPublisherNetworkCode,`,${l}`)}zk(t){this.Uk.set(n.AppBundle,t.bundleID),this.Uk.set(n.AppName,t.appName),this.Uk.set(n.AppUrl,t.storeURL)}Wk(t){this.Uk.set(n.SourceReferrer,t)}Xk(){const t=(0,h.w6)()?1:0;this.Uk.set(n.DoNotTrack,t)}Gk(t,i,e){this.Uk.set(n.Url,t),this.Uk.set(n.PageUrl,e),this.Uk.set(n.Site,i),this.Uk.set(n.Publisher,t),this.Uk.set(n.DescriptionUrl,t)}Jk(){const t=(0,o.qs)();this.Uk.set(n.CashBuster,t),this.Uk.set(n.Random,t),this.Uk.set(n.Ctd,t)}Qk(t){return t.split("?")[0]}Zk(t){return t.split("?").slice(1).join("?")}bm(t,i){const e=this.Qk(t),s=this.tC(this.Zk(t),i);return`${e}${s?`?${s}`:""}`}tC(t,i,e=!1){let n=t;const r=n.split("&"),h=[this.qk,this.Hk];try{r.forEach((r=>{const a=s.splitByFirstEqual(r);if((0,d.BZ)(a)&&a[1])if(s.isStringWithMacros(a[1],h))n=n.replace(a[1],this.iC(a[1],i,e));else try{if(!a[1].includes(encodeURIComponent("="))||0===decodeURIComponent(a[1]).split("=").length)return;const t=this.tC(decodeURIComponent(a[1]),i,!0);n=n.replace(a[1],encodeURIComponent(t))}catch(i){(0,o.Vm)([95,5])&&(0,l.n)({message:"ReplaceData_handleMacros",exception:`pair:${a}, ${i.message}`,callStack:t,level:l.D.WARN},{throttle:1})}}))}catch(i){throw(0,l.n)({message:"MacrosService_handleMacros",exception:i.message,callStack:t,level:l.D.CRITICAL},{throttle:1}),i}return n=this.eC(n,i),this.sC(n)}sC(t){return t.includes(this.qk)&&(t=t.cnx_replaceAll(this.qk,encodeURIComponent(this.qk))),t.includes(this.Hk)&&(t=t.cnx_replaceAll(this.Hk,encodeURIComponent(this.Hk))),t}iC(t,i,e){let s,n=t,r=t.toLowerCase();return i.forEach(((t,i)=>{const o=this.qk+i.toLowerCase()+this.Hk;for(;r.includes(o);){const i=r.indexOf(o),h=i+o.length;s=e?t:encodeURIComponent(t),n=n.slice(0,i)+s+n.slice(h),r=n.toLowerCase()}})),n}eC(t,i){const e=`${this.qk}${n.AdxPublisherNetworkCode}${this.Hk}`;return t.includes(e)?i.has(n.AdxPublisherNetworkCode)?t.cnx_replaceAll(e,i.get(n.AdxPublisherNetworkCode)):t.cnx_replaceAll(e,""):t}setAdWidth(t){this.Uk.set(n.Width,Math.floor(t))}setAdHeight(t){this.Uk.set(n.Height,Math.floor(t))}setSubId(t){this.Uk.set(n.SubId,t)}setGDPR(t){this.Uk.set(n.Gdpr,t)}setUUID(t){this.Uk.set(n.Uuid,t)}setGDPRConsent(t){this.Uk.set(n.GdprConsent,t)}setConsent(t){this.Uk.set(n.Consent,t)}setVideoId(t){this.Uk.set(n.VideoId,t)}setNPA(t){this.Uk.set(n.Npa,t)}setVideoTime(t){this.Uk.set(n.VideoTime,Math.floor(t))}setVideoUrl(t){this.Uk.set(n.VideoUrl,t)}setVideoDescription(t){this.Uk.set(n.VideoDescription,t)}setVideoDuration(t){this.Uk.set(n.VideoDuration,t),this.Uk.set(n.ContentLength,t)}setVideoTitle(t){let i;this.Uk.set(n.VideoTitle,t),this.Uk.set(n.MediaTitle,t),t&&(i=t.split(" ").join(",")),this.Uk.set(n.VideoKeywords,i)}setAdPosition(t="midRoll"){this.Uk.set(n.AdPosition,t)}setupMacros(t){return this.Jk(),this.bm(t,this.Uk)}addExtraMacros(t){const i=Object.values(n);Object.keys(t).filter((t=>!i.includes(t.toUpperCase()))).forEach((i=>{this.Uk.set(i,t[i])}))}getMacroValue(t){return this.Uk.get(t)}getExtraMacros(){const t=Object.values(n),i={};return this.Uk.forEach(((e,s)=>{t.includes(s)||null==e||(i[s]=(0,c.QM)(e)?e:JSON.stringify(e))})),i}setUsPrivacyString(t){const i=t||"";this.Uk.set(n.UsPrivacyString,i)}setUserId(t){this.Uk.set(n.FraudSensorUserId,t)}setPublisherId(t){this.Uk.set(n.PublisherId,t)}setFraudSensorMacros(t){this.Uk.set(n.FraudSensorDeviceType,t.deviceType),this.Uk.set(n.FraudSensorLookupId,t.lookupId),this.Uk.set(n.FraudSensorLookupResponseCode,t.lookupResponseCode),this.Uk.set(n.FraudSensorMediaType,t.mediaType),this.Uk.set(n.FraudSensorDeviceIdentifier,t.deviceIdentifier)}setErrorCode(t){this.Uk.set(n.ErrorCode,t)}destroy(){}}},5292:(t,i,e)=>{"use strict";var s,n;e.d(i,{v:()=>r}),function(t){t.hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden"}(s||(s={})),function(t){t.visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange"}(n||(n={}));class r{constructor(t){this.Oi=t,this.rC=[],this.hC(),this.aC()}on(t){this.rC.push(t),t(this.isDocumentVisible())}off(t){this.rC=this.rC.filter((i=>i!==t))}hC(){void 0!==this.Oi.getDocumentProperty(s.hidden)?(this.cC=s.hidden,this.dC=n.visibilitychange):void 0!==this.Oi.getDocumentProperty(s.msHidden)?(this.cC=s.msHidden,this.dC=n.msvisibilitychange):void 0!==this.Oi.getDocumentProperty(s.webkitHidden)&&(this.cC=s.webkitHidden,this.dC=n.webkitvisibilitychange)}aC(){this.Oi.addEventListenerOnGlobal(this.dC,(()=>{this.rC.forEach((t=>{t(this.isDocumentVisible())}))}),!0,!1)}isDocumentVisible(){return!this.Oi.getDocumentProperty(this.cC)}}},5421:(t,i,e)=>{"use strict";e.d(i,{a:()=>z});var s,n=e(1187),r=e(3020),o=[],h="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(s||(s={}));var a,c=function(t){return Object.freeze(t)},d=function(t,i){this.inlineSize=t,this.blockSize=i,c(this)},l=function(){function t(t,i,e,s){return this.x=t,this.y=i,this.width=e,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,c(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(i){return new t(i.x,i.y,i.width,i.height)},t}(),u=function(t){return t instanceof SVGElement&&"getBBox"in t},p=function(t){if(u(t)){var i=t.getBBox(),e=i.width,s=i.height;return!e&&!s}var n=t,r=n.offsetWidth,o=n.offsetHeight;return!(r||o||t.getClientRects().length)},f=function(t){var i;if(t instanceof Element)return!0;var e=null===(i=null==t?void 0:t.ownerDocument)||void 0===i?void 0:i.defaultView;return!!(e&&t instanceof e.Element)},m="undefined"!=typeof window?window:{},v=new WeakMap,g=/auto|scroll/,y=/^tb|vertical/,b=/msie|trident/i.test(m.navigator&&m.navigator.userAgent),I=function(t){return parseFloat(t||"0")},w=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=!1),new d((e?i:t)||0,(e?t:i)||0)},S=c({devicePixelContentBoxSize:w(),borderBoxSize:w(),contentBoxSize:w(),contentRect:new l(0,0,0,0)}),A=function(t,i){if(void 0===i&&(i=!1),v.has(t)&&!i)return v.get(t);if(p(t))return v.set(t,S),S;var e=getComputedStyle(t),s=u(t)&&t.ownerSVGElement&&t.getBBox(),n=!b&&"border-box"===e.boxSizing,r=y.test(e.writingMode||""),o=!s&&g.test(e.overflowY||""),h=!s&&g.test(e.overflowX||""),a=s?0:I(e.paddingTop),d=s?0:I(e.paddingRight),f=s?0:I(e.paddingBottom),m=s?0:I(e.paddingLeft),A=s?0:I(e.borderTopWidth),P=s?0:I(e.borderRightWidth),_=s?0:I(e.borderBottomWidth),x=m+d,T=a+f,k=(s?0:I(e.borderLeftWidth))+P,C=A+_,E=h?t.offsetHeight-C-t.clientHeight:0,M=o?t.offsetWidth-k-t.clientWidth:0,L=n?x+k:0,B=n?T+C:0,R=s?s.width:I(e.width)-L-M,O=s?s.height:I(e.height)-B-E,D=R+x+M+k,V=O+T+E+C,F=c({devicePixelContentBoxSize:w(Math.round(R*devicePixelRatio),Math.round(O*devicePixelRatio),r),borderBoxSize:w(D,V,r),contentBoxSize:w(R,O,r),contentRect:new l(m,a,R,O)});return v.set(t,F),F},P=function(t,i,e){var n=A(t,e),r=n.borderBoxSize,o=n.contentBoxSize,h=n.devicePixelContentBoxSize;switch(i){case s.DEVICE_PIXEL_CONTENT_BOX:return h;case s.BORDER_BOX:return r;default:return o}},_=function(t){var i=A(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=c([i.borderBoxSize]),this.contentBoxSize=c([i.contentBoxSize]),this.devicePixelContentBoxSize=c([i.devicePixelContentBoxSize])},x=function(t){if(p(t))return 1/0;for(var i=0,e=t.parentNode;e;)i+=1,e=e.parentNode;return i},T=function(){var t=1/0,i=[];o.forEach((function(e){if(0!==e.activeTargets.length){var s=[];e.activeTargets.forEach((function(i){var e=new _(i.target),n=x(i.target);s.push(e),i.lastReportedSize=P(i.target,i.observedBox),n<t&&(t=n)})),i.push((function(){e.callback.call(e.observer,s,e.observer)})),e.activeTargets.splice(0,e.activeTargets.length)}}));for(var e=0,s=i;e<s.length;e++){(0,s[e])()}return t},k=function(t){o.forEach((function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach((function(e){e.isActive()&&(x(e.target)>t?i.activeTargets.push(e):i.skippedTargets.push(e))}))}))},C=function(){var t,i=0;for(k(i);o.some((function(t){return t.activeTargets.length>0}));)i=T(),k(i);return o.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:h}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=h),window.dispatchEvent(t)),i>0},E=[],M=function(t){if(!a){var i=0,e=document.createTextNode("");new MutationObserver((function(){return E.splice(0).forEach((function(t){return t()}))})).observe(e,{characterData:!0}),a=function(){e.textContent="".concat(i?i--:i++)}}E.push(t),a()},L=0,B={attributes:!0,characterData:!0,childList:!0,subtree:!0},R=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],O=function(t){return void 0===t&&(t=0),Date.now()+t},D=!1,V=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var i=this;if(void 0===t&&(t=250),!D){D=!0;var e,s=O(t);e=function(){var e=!1;try{e=C()}finally{if(D=!1,t=s-O(),!L)return;e?i.run(1e3):t>0?i.run(t):i.start()}},M((function(){requestAnimationFrame(e)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,B)};document.body?i():m.addEventListener("DOMContentLoaded",i)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),R.forEach((function(i){return m.addEventListener(i,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),R.forEach((function(i){return m.removeEventListener(i,t.listener,!0)})),this.stopped=!0)},t}()),F=function(t){!L&&t>0&&V.start(),!(L+=t)&&V.stop()},N=function(){function t(t,i){this.target=t,this.observedBox=i||s.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,i=P(this.target,this.observedBox,!0);return t=this.target,u(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=i),this.lastReportedSize.inlineSize!==i.inlineSize||this.lastReportedSize.blockSize!==i.blockSize},t}(),j=function(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i},$=new WeakMap,U=function(t,i){for(var e=0;e<t.length;e+=1)if(t[e].target===i)return e;return-1},q=function(){function t(){}return t.connect=function(t,i){var e=new j(t,i);$.set(t,e)},t.observe=function(t,i,e){var s=$.get(t),n=0===s.observationTargets.length;U(s.observationTargets,i)<0&&(n&&o.push(s),s.observationTargets.push(new N(i,e&&e.box)),F(1),V.schedule())},t.unobserve=function(t,i){var e=$.get(t),s=U(e.observationTargets,i),n=1===e.observationTargets.length;s>=0&&(n&&o.splice(o.indexOf(e),1),e.observationTargets.splice(s,1),F(-1))},t.disconnect=function(t){var i=this,e=$.get(t);e.observationTargets.slice().forEach((function(e){return i.unobserve(t,e.target)})),e.activeTargets.splice(0,e.activeTargets.length)},t}(),H=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");q.connect(this,t)}return t.prototype.observe=function(t,i){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");q.observe(this,t,i)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");q.unobserve(this,t)},t.prototype.disconnect=function(){q.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();class z{constructor(t){this.lC=[],this.Sy=(t,i)=>{t.forEach((t=>{this.pC(t.target).forEach((t=>{t&&((0,r.Tp)(t.element),t.callback(t.element))}))}))};try{const i=t.ResizeObserver||H;this.fC=new i(this.Sy)}catch(t){(0,n.n)({message:"ResizeObserver_constructor",callStack:t.stack,exception:t.message,level:n.D.CRITICAL})}}on(t,i){this.mC(t,i)||(this.lC.push({element:t,callback:i}),this.fC.observe(t))}off(t,i){const e=this.mC(t,i);if(!e)return;this.fC.unobserve(e.element);const s=this.lC.indexOf(e);s>=0&&this.lC.splice(s,1)}destroy(){if(this.lC)for(;this.lC.length>0;)this.lC.pop();this.fC.disconnect()}pC(t){return this.lC.filter((i=>i.element===t))}mC(t,i){return this.lC.find((e=>e.element===t&&e.callback===i))}}},1553:(t,i,e)=>{"use strict";e.d(i,{f:()=>o});var s=e(5650),n=e(51),r=e(4798);class o{constructor(){this.vC={},this.gC={domain:"",urlParams:[]},this.ignoredDomains=[]}setQueryParams(t){this.vC=t}setUrlParams(t){this.gC=t}appendParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.yC(t)}appendQueryParamsToUrl(t){return this.isIgnoredDomain(t)?t:this.bC(t,Object.keys(this.vC).map((t=>({paramName:t,paramValue:this.vC[t]}))))}yC(t){if(!(0,s.BZ)(Object.keys(this.gC))||!(0,s.BZ)(this.gC.urlParams)||!t.includes(this.gC.domain))return t;const i=this.gC.urlParams.reduce(((t,i)=>`${t}${i}`),"");return t.replace(this.gC.domain,this.gC.domain+"/"+i)}bC(t,i){if(!(0,s.BZ)(i))return t;t+=(0,n.CK)(t);let e="";return i.forEach((t=>{(0,r.QM)(t.paramName)&&(0,r.QM)(t.paramValue)&&(e+=`${e.length>0?"&":""}${t.paramName}=${t.paramValue}`)})),t+e}isIgnoredDomain(t){return this.ignoredDomains.some((i=>t.indexOf(i)>-1))}}},3199:(t,i,e)=>{"use strict";var s;e.d(i,{Z:()=>n}),function(t){t[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"}(s||(s={}));const n=[s.P1,s.P2,s.P4,s.P7,s.P8]},3855:(t,i,e)=>{"use strict";e.d(i,{k:()=>kt,x:()=>Mt});var s=e(9791),n=e(5968),r=e(6578),o=e(289),h=e(6153),a=e(4798),c=e(307),d=e(7945);class l{constructor(t){this.IC=t,this.wC=!0,this.SC="",this.AC=!1,this.PC=[]}static getInstance(t){const i=n.K1,e=(0,s.pE)(t).topFrame;return e[i]||(e[i]=new l(e)),e[i]}get userId(){if((0,a.QM)(this._C))return this._C.split("_")[0]}set userId(t){this._C=t}get isCcpaApplicable(){return this.wC}set isCcpaApplicable(t){this.wC=t}get usPrivacyString(){return this.SC}set usPrivacyString(t){this.SC=t}get consentPayload(){return this.xC}set consentPayload(t){this.xC||(this.xC=t)}getScope(){return this.IC}syncDemandPartner(t){if(this.userId){const i={userId:this.userId,demandPartner:parseInt(t.demandPartner,10),demandPartnerUserId:t.demandPartnerUserId};r.n.sendProtoRequest({protoRequest:o.ProtoUserSyncRequest,endpoint:h.n.endPoints.api.syncUrls,requestData:i,queryParams:{[c.Fk]:d.g.version,[c.cc]:h.n.tier},shouldLogErrors:!0}).then((t=>{})).catch((t=>{}))}}registerPlsCall(t){return this.AC?(this.PC.push(t),()=>{}):this.userId?(t(),()=>{}):(this.AC=!0,t(),()=>{this.AC=!1,this.PC.forEach((t=>t())),this.PC=[]})}}var u,p,f=e(1310),m=e(1187),v=e(5650);!function(t){t.USER_ID="cnx_userId"}(u||(u={}));class g{constructor(t,i){this.TC=t,this.wh=i,this.kC={[u.USER_ID]:30},this.CC=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.EC=!1}MC({name:t,value:i}){t===u.USER_ID&&(this.TC.userId=this.LC(i))}BC(t){let i="";const e=this.kC[t.name];if(e){i=`; expires=${new Date((0,f.XF)(e)).toUTCString()}`}this.wh.document.cookie=`${t.name}=${t.value}${i}; path=/`}OC(t,i){if(!(0,v.BZ)(t))return;const e={cookieList:t,secureMode:i?o.ProtoCookieSecureModeEnum.Unsecure:o.ProtoCookieSecureModeEnum.Auto,browserInfo:this.DC};return r.n.sendProtoRequest({requestData:e,protoRequest:o.ProtoCookieSyncRequest,endpoint:h.n.endPoints.api.cookie,hasCredentials:!0,queryParams:{[c.Fk]:d.g.version,[c.cc]:h.n.tier},shouldLogErrors:!1}).catch((t=>(0,m.n)({message:"UserCookieManager_setThirdPartyCookie",exception:t.message,callStack:t.callStack,level:m.D.CRITICAL})))}cookieLogging(t){return r.n.sendProtoRequest({requestData:t,protoRequest:o.ProtoCookieLoggingRequest,endpoint:h.n.endPoints.tracking.userCookieInformation,hasCredentials:!0,queryParams:{[c.Fk]:d.g.version},shouldLogErrors:!1}).catch((t=>(0,m.n)({message:"UserCookieManager_CookieLogging",exception:t.message,callStack:t.callStack,level:m.D.WARN},{throttle:1})))}LC(t){return t.split("_")[0]}getFirstPartyCookie(t){try{const i=t+"=",e=decodeURIComponent(this.wh.document.cookie).split(";");for(let t of e){for(;" "===t.charAt(0);)t=t.substring(1);if(t.includes(i))return this.LC(t.substring(i.length,t.length))}}catch(t){}return""}getUserId(){return this.TC.userId}syncFirstPartyCookie(t){const i={name:t,value:"",timestamp:(0,f.XF)(this.kC[t])};t===u.USER_ID&&(i.value=this.TC.userId),(0,a.QM)(i.value)&&this.BC(i)}syncThirdPartyCookieList(t){const i=[u.USER_ID],e=[];i.forEach((t=>{t===u.USER_ID&&(0,a.QM)(this.TC.userId)&&e.push({name:u.USER_ID,value:this.TC.userId,timestamp:(0,f.XF)(this.kC[u.USER_ID])})})),this.OC(e,t)}setBrowserInfo(t,i){this.DC=t,this.EC=this.CC.includes(t.browserType),this.EC&&i&&this.syncThirdPartyCookieList(this.EC)}setUserInformation(t){t&&this.MC({name:u.USER_ID,value:t.userId})}fetchCookies(){[u.USER_ID].map((t=>({name:t,value:this.getFirstPartyCookie(t)}))).filter((({value:t})=>(0,a.QM)(t))).forEach((t=>this.MC(t)))}get unsecuredCookieSync(){return this.EC}}!function(t){t[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"}(p||(p={}));const y={[p.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[p.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};class b{constructor(t,i){this.VC=t,this.NC=i,this.apiType=p.CmpApi,this.jC={},this.xC=null,this.$C=t=>new Promise(((i,e)=>{try{const e="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof e&&e.UC)if(e.UC.callId===this.qC){const t=e.UC.returnValue&&e.UC.returnValue.vendorConsents;this.HC(t).then((()=>i(this.qC)))}else if(e.UC.callId===this.zC){const t=e.UC.returnValue&&e.UC.returnValue.consentData;this.WC(t).then((()=>i(this.zC)))}}catch(t){e()}}))}isApiOnPage(){return null!==this.VC||null!==this.NC}bindToApi(){return null!==this.VC?new Promise(((t,i)=>{this.GC(this.VC).then((()=>t())).catch((t=>i(t)))})):null!==this.NC?this.XC(this.NC):Promise.reject()}isConsentForVendor(t){return!!this.jC[t]}getConsentPayload(){return this.xC}setInAppConsentData(t){this.HC(t),this.WC(t.consentString)}hasIvtConsent(){return this.isConsentForVendor(n.$6.Connatix)}isConsentForPurposes(t){return!0}XC(t){this.zC=(0,s.qs)(),this.qC=(0,s.qs)();const i={};return new Promise((e=>{const s=t=>{this.$C(t).then((t=>{i[t]=!0,i[this.zC]&&i[this.qC]&&(window.removeEventListener("message",s,!1),e())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=y[p.CmpApi].getVendorConsentDataMethodName,r=y[p.CmpApi].getConsentDataMethodName;t.postMessage({JC:{command:n,parameter:null,callId:this.qC}},"*"),t.postMessage({JC:{command:r,parameter:null,callId:this.zC}},"*")}))}GC(t){const i=y[p.CmpApi].windowPropertyName,e=y[p.CmpApi].getVendorConsentDataMethodName,s=y[p.CmpApi].getConsentDataMethodName;if(t&&t[i]){const n=new Promise((s=>{t[i](e,null,((t,i)=>{if(i){const{vendorConsents:i}=t;this.HC(i).then((()=>s()))}}))})),r=new Promise((e=>{t[i](s,null,((t,i)=>{if(i){const{consentData:i}=t;this.WC(i).then((()=>e()))}}))}));return Promise.all([n,r])}return Promise.reject()}HC(t){return(0,a.as)(t)?(this.jC=t,Promise.resolve()):Promise.reject()}WC(t){return(0,a.HD)(t)?(this.xC=t,Promise.resolve()):Promise.reject()}}var I,w,S,A,P=e(3020),_=e(8462);class x extends Error{constructor(t){super(t),this.name="DecodingError"}}class T extends Error{constructor(t){super(t),this.name="EncodingError"}}class k extends Error{constructor(t){super(t),this.name="GVLError"}}class C extends Error{constructor(t,i,e=""){super(`invalid value ${i} passed for ${t} ${e}`),this.name="TCModelError"}}class E{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(t){if(!/^[0-1]+$/.test(t))throw new T("Invalid bitField");const i=t.length%this.LCM;t+=i?"0".repeat(this.LCM-i):"";let e="";for(let i=0;i<t.length;i+=this.BASIS)e+=this.DICT[parseInt(t.substr(i,this.BASIS),2)];return e}static decode(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new x("Invalidly encoded Base64URL string");let i="";for(let e=0;e<t.length;e++){const s=this.REVERSE_DICT.get(t[e]).toString(2);i+="0".repeat(this.BASIS-s.length)+s}return i}}class M{static langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]);has(t){return M.langSet.has(t)}forEach(t){M.langSet.forEach(t)}get size(){return M.langSet.size}}class L{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardStacks="useNonStandardStacks";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class B{clone(){const t=new this.constructor;return Object.keys(this).forEach((i=>{const e=this.deepClone(this[i]);void 0!==e&&(t[i]=e)})),t}deepClone(t){const i=typeof t;if("number"===i||"string"===i||"boolean"===i)return t;if(null!==t&&"object"===i){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){const i=[];for(const e of t)i.push(this.deepClone(e));return t instanceof Array?i:new t.constructor(i)}{const i={};for(const e in t)t.hasOwnProperty(e)&&(i[e]=this.deepClone(t[e]));return i}}}}!function(t){t[t.NOT_ALLOWED=0]="NOT_ALLOWED",t[t.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",t[t.REQUIRE_LI=2]="REQUIRE_LI"}(I||(I={}));class R extends B{static hashSeparator="-";purposeId_;restrictionType;constructor(t,i){super(),void 0!==t&&(this.purposeId=t),void 0!==i&&(this.restrictionType=i)}static unHash(t){const i=t.split(this.hashSeparator),e=new R;if(2!==i.length)throw new C("hash",t);return e.purposeId=parseInt(i[0],10),e.restrictionType=parseInt(i[1],10),e}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${R.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(t){this.purposeId_=t}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===I.NOT_ALLOWED||this.restrictionType===I.REQUIRE_CONSENT||this.restrictionType===I.REQUIRE_LI)}isSameAs(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType}}class O extends B{root=null;isEmpty(){return!this.root}add(t){const i={value:t,left:null,right:null};let e;if(this.isEmpty())this.root=i;else for(e=this.root;;)if(t<e.value){if(null===e.left){e.left=i;break}e=e.left}else{if(!(t>e.value))break;if(null===e.right){e.right=i;break}e=e.right}}get(){const t=[];let i=this.root;for(;i;)if(i.left){let e=i.left;for(;e.right&&e.right!=i;)e=e.right;e.right==i?(e.right=null,t.push(i.value),i=i.right):(e.right=i,i=i.left)}else t.push(i.value),i=i.right;return t}contains(t){let i=!1,e=this.root;for(;e;){if(e.value===t){i=!0;break}t>e.value?e=e.right:t<e.value&&(e=e.left)}return i}min(t=this.root){let i;for(;t;)t.left?t=t.left:(i=t.value,t=null);return i}max(t=this.root){let i;for(;t;)t.right?t=t.right:(i=t.value,t=null);return i}remove(t,i=this.root){let e=null,s="left";for(;i;)if(t<i.value)e=i,i=i.left,s="left";else if(t>i.value)e=i,i=i.right,s="right";else{if(i.left||i.right)if(i.left)if(i.right){const t=this.min(i.right);this.remove(t,i.right),i.value=t}else e?e[s]=i.left:this.root=i.left;else e?e[s]=i.right:this.root=i.right;else e?e[s]=null:this.root=null;i=null}}}class D extends B{bitLength=0;map=new Map;gvl_;has(t){return this.map.has(t)}isOkToHave(t,i,e){let s=!0;if(this.gvl?.vendors){const n=this.gvl.vendors[e];if(n)if(t===I.NOT_ALLOWED)s=n.legIntPurposes.includes(i)||n.purposes.includes(i);else if(n.flexiblePurposes.length)switch(t){case I.REQUIRE_CONSENT:s=n.flexiblePurposes.includes(i)&&n.legIntPurposes.includes(i);break;case I.REQUIRE_LI:s=n.flexiblePurposes.includes(i)&&n.purposes.includes(i)}else s=!1;else s=!1}return s}add(t,i){if(this.isOkToHave(i.restrictionType,i.purposeId,t)){const e=i.hash;this.has(e)||(this.map.set(e,new O),this.bitLength=0),this.map.get(e).add(t)}}restrictPurposeToLegalBasis(t){const i=this.gvl.vendorIds,e=t.hash,s=function(){let t;for(t of i);return t}();for(let t=1;t<=s;t++)this.has(e)||(this.map.set(e,new O),this.bitLength=0),this.map.get(e).add(t)}getVendors(t){let i=[];if(t){const e=t.hash;this.has(e)&&(i=this.map.get(e).get())}else{const t=new Set;this.map.forEach((i=>{i.get().forEach((i=>{t.add(i)}))})),i=Array.from(t)}return i}getRestrictionType(t,i){let e;return this.getRestrictions(t).forEach((t=>{t.purposeId===i&&(void 0===e||e>t.restrictionType)&&(e=t.restrictionType)})),e}vendorHasRestriction(t,i){let e=!1;const s=this.getRestrictions(t);for(let t=0;t<s.length&&!e;t++)e=i.isSameAs(s[t]);return e}getMaxVendorId(){let t=0;return this.map.forEach((i=>{t=Math.max(i.max(),t)})),t}getRestrictions(t){const i=[];return this.map.forEach(((e,s)=>{t?e.contains(t)&&i.push(R.unHash(s)):i.push(R.unHash(s))})),i}getPurposes(){const t=new Set;return this.map.forEach(((i,e)=>{t.add(R.unHash(e).purposeId)})),Array.from(t)}remove(t,i){const e=i.hash,s=this.map.get(e);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(e),this.bitLength=0))}set gvl(t){this.gvl_||(this.gvl_=t,this.map.forEach(((t,i)=>{const e=R.unHash(i);t.get().forEach((i=>{this.isOkToHave(e.restrictionType,e.purposeId,i)||t.remove(i)}))})))}get gvl(){return this.gvl_}isEmpty(){return 0===this.map.size}get numRestrictions(){return this.map.size}}!function(t){t.COOKIE="cookie",t.WEB="web",t.APP="app"}(w||(w={})),function(t){t.CORE="core",t.VENDORS_DISCLOSED="vendorsDisclosed",t.VENDORS_ALLOWED="vendorsAllowed",t.PUBLISHER_TC="publisherTC"}(S||(S={}));class V{static ID_TO_KEY=[S.CORE,S.VENDORS_DISCLOSED,S.VENDORS_ALLOWED,S.PUBLISHER_TC];static KEY_TO_ID={[S.CORE]:0,[S.VENDORS_DISCLOSED]:1,[S.VENDORS_ALLOWED]:2,[S.PUBLISHER_TC]:3}}class F extends B{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let t=1;t<=this.maxId;t++)yield[t,this.has(t)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(t){return this.set_.has(t)}unset(t){Array.isArray(t)?t.forEach((t=>this.unset(t))):"object"==typeof t?this.unset(Object.keys(t).map((t=>Number(t)))):(this.set_.delete(Number(t)),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach((t=>{this.maxId_=Math.max(this.maxId,t)}))))}isIntMap(t){let i="object"==typeof t;return i=i&&Object.keys(t).every((i=>{let e=Number.isInteger(parseInt(i,10));return e=e&&this.isValidNumber(t[i].id),e=e&&void 0!==t[i].name,e})),i}isValidNumber(t){return parseInt(t,10)>0}isSet(t){let i=!1;return t instanceof Set&&(i=Array.from(t).every(this.isValidNumber)),i}set(t){if(Array.isArray(t))t.forEach((t=>this.set(t)));else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map((t=>Number(t))));else{if(!this.isValidNumber(t))throw new C("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}}empty(){this.set_=new Set}forEach(t){for(let i=1;i<=this.maxId;i++)t(this.has(i),i)}get size(){return this.set_.size}setAll(t){this.set(t)}}class N{static[L.cmpId]=12;static[L.cmpVersion]=12;static[L.consentLanguage]=12;static[L.consentScreen]=6;static[L.created]=36;static[L.isServiceSpecific]=1;static[L.lastUpdated]=36;static[L.policyVersion]=6;static[L.publisherCountryCode]=12;static[L.publisherLegitimateInterests]=24;static[L.publisherConsents]=24;static[L.purposeConsents]=24;static[L.purposeLegitimateInterests]=24;static[L.purposeOneTreatment]=1;static[L.specialFeatureOptins]=12;static[L.useNonStandardStacks]=1;static[L.vendorListVersion]=12;static[L.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16}class j{static encode(t,i){let e;if("string"==typeof t&&(t=parseInt(t,10)),e=t.toString(2),e.length>i||t<0)throw new T(`${t} too large to encode into ${i}`);return e.length<i&&(e="0".repeat(i-e.length)+e),e}static decode(t,i){if(i!==t.length)throw new x("invalid bit length");return parseInt(t,2)}}class ${static encode(t,i){return j.encode(Math.round(t.getTime()/100),i)}static decode(t,i){if(i!==t.length)throw new x("invalid bit length");const e=new Date;return e.setTime(100*j.decode(t,i)),e}}class U{static encode(t){return String(Number(t))}static decode(t){return"1"===t}}class q{static encode(t,i){let e="";for(let s=1;s<=i;s++)e+=U.encode(t.has(s));return e}static decode(t,i){if(t.length!==i)throw new x("bitfield encoding length mismatch");const e=new F;for(let s=1;s<=i;s++)U.decode(t[s-1])&&e.set(s);return e.bitLength=t.length,e}}class H{static encode(t,i){const e=(t=t.toUpperCase()).charCodeAt(0)-65,s=t.charCodeAt(1)-65;if(e<0||e>25||s<0||s>25)throw new T(`invalid language code: ${t}`);if(i%2==1)throw new T(`numBits must be even, ${i} is not valid`);i/=2;return j.encode(e,i)+j.encode(s,i)}static decode(t,i){let e;if(i!==t.length||t.length%2)throw new x("invalid bit length for language");{const i=65,s=t.length/2,n=j.decode(t.slice(0,s),s)+i,r=j.decode(t.slice(s),s)+i;e=String.fromCharCode(n)+String.fromCharCode(r)}return e}}class z{static encode(t){let i=j.encode(t.numRestrictions,N.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach((e=>{i+=j.encode(e.purposeId,N.purposeId),i+=j.encode(e.restrictionType,N.restrictionType);const s=t.getVendors(e),n=s.length;let r=0,o=0,h="";for(let i=0;i<n;i++){const e=s[i];0===o&&(r++,o=e);const a=s[n-1],c=t.gvl.vendorIds,d=t=>{for(;++t<=a&&!c.has(t););return t};if(i===n-1||s[i+1]>d(e)){const t=!(e===o);h+=U.encode(t),h+=j.encode(o,N.vendorId),t&&(h+=j.encode(e,N.vendorId)),o=0}}i+=j.encode(r,N.numEntries),i+=h})),i}static decode(t){let i=0;const e=new D,s=j.decode(t.substr(i,N.numRestrictions),N.numRestrictions);i+=N.numRestrictions;for(let n=0;n<s;n++){const s=j.decode(t.substr(i,N.purposeId),N.purposeId);i+=N.purposeId;const n=j.decode(t.substr(i,N.restrictionType),N.restrictionType);i+=N.restrictionType;const r=new R(s,n),o=j.decode(t.substr(i,N.numEntries),N.numEntries);i+=N.numEntries;for(let s=0;s<o;s++){const s=U.decode(t.substr(i,N.anyBoolean));i+=N.anyBoolean;const n=j.decode(t.substr(i,N.vendorId),N.vendorId);if(i+=N.vendorId,s){const s=j.decode(t.substr(i,N.vendorId),N.vendorId);if(i+=N.vendorId,s<n)throw new x(`Invalid RangeEntry: endVendorId ${s} is less than ${n}`);for(let t=n;t<=s;t++)e.add(t,r)}else e.add(n,r)}}return e.bitLength=i,e}}!function(t){t[t.FIELD=0]="FIELD",t[t.RANGE=1]="RANGE"}(A||(A={}));class W{static encode(t){const i=[];let e,s=[],n=j.encode(t.maxId,N.maxId),r="";const o=N.maxId+N.encodingType,h=o+t.maxId,a=2*N.vendorId+N.singleOrRange+N.numEntries;let c=o+N.numEntries;return t.forEach(((n,o)=>{if(r+=U.encode(n),e=t.maxId>a&&c<h,e&&n){t.has(o+1)?0===s.length&&(s.push(o),c+=N.singleOrRange,c+=N.vendorId):(s.push(o),c+=N.vendorId,i.push(s),s=[])}})),e?(n+=String(A.RANGE),n+=this.buildRangeEncoding(i)):(n+=String(A.FIELD),n+=r),n}static decode(t,i){let e,s=0;const n=j.decode(t.substr(s,N.maxId),N.maxId);s+=N.maxId;const r=j.decode(t.charAt(s),N.encodingType);if(s+=N.encodingType,r===A.RANGE){if(e=new F,1===i){if("1"===t.substr(s,1))throw new x("Unable to decode default consent=1");s++}const n=j.decode(t.substr(s,N.numEntries),N.numEntries);s+=N.numEntries;for(let i=0;i<n;i++){const i=U.decode(t.charAt(s));s+=N.singleOrRange;const n=j.decode(t.substr(s,N.vendorId),N.vendorId);if(s+=N.vendorId,i){const i=j.decode(t.substr(s,N.vendorId),N.vendorId);s+=N.vendorId;for(let t=n;t<=i;t++)e.set(t)}else e.set(n)}}else{const i=t.substr(s,n);s+=n,e=q.decode(i,n)}return e.bitLength=s,e}static buildRangeEncoding(t){const i=t.length;let e=j.encode(i,N.numEntries);return t.forEach((t=>{const i=1===t.length;e+=U.encode(!i),e+=j.encode(t[0],N.vendorId),i||(e+=j.encode(t[1],N.vendorId))})),e}}function G(){return{[L.version]:j,[L.created]:$,[L.lastUpdated]:$,[L.cmpId]:j,[L.cmpVersion]:j,[L.consentScreen]:j,[L.consentLanguage]:H,[L.vendorListVersion]:j,[L.policyVersion]:j,[L.isServiceSpecific]:U,[L.useNonStandardStacks]:U,[L.specialFeatureOptins]:q,[L.purposeConsents]:q,[L.purposeLegitimateInterests]:q,[L.purposeOneTreatment]:U,[L.publisherCountryCode]:H,[L.vendorConsents]:W,[L.vendorLegitimateInterests]:W,[L.publisherRestrictions]:z,segmentType:j,[L.vendorsDisclosed]:W,[L.vendorsAllowed]:W,[L.publisherConsents]:q,[L.publisherLegitimateInterests]:q,[L.numCustomPurposes]:j,[L.publisherCustomConsents]:q,[L.publisherCustomLegitimateInterests]:q}}class X{1={[S.CORE]:[L.version,L.created,L.lastUpdated,L.cmpId,L.cmpVersion,L.consentScreen,L.consentLanguage,L.vendorListVersion,L.purposeConsents,L.vendorConsents]};2={[S.CORE]:[L.version,L.created,L.lastUpdated,L.cmpId,L.cmpVersion,L.consentScreen,L.consentLanguage,L.vendorListVersion,L.policyVersion,L.isServiceSpecific,L.useNonStandardStacks,L.specialFeatureOptins,L.purposeConsents,L.purposeLegitimateInterests,L.purposeOneTreatment,L.publisherCountryCode,L.vendorConsents,L.vendorLegitimateInterests,L.publisherRestrictions],[S.PUBLISHER_TC]:[L.publisherConsents,L.publisherLegitimateInterests,L.numCustomPurposes,L.publisherCustomConsents,L.publisherCustomLegitimateInterests],[S.VENDORS_ALLOWED]:[L.vendorsAllowed],[S.VENDORS_DISCLOSED]:[L.vendorsDisclosed]}}class J{1=[S.CORE];2=[S.CORE];constructor(t,i){if(2===t.version)if(t.isServiceSpecific)this[2].push(S.PUBLISHER_TC);else{const e=!(!i||!i.isForVendors);e&&!0!==t[L.supportOOB]||this[2].push(S.VENDORS_DISCLOSED),e&&(t[L.supportOOB]&&t[L.vendorsAllowed].size>0&&this[2].push(S.VENDORS_ALLOWED),this[2].push(S.PUBLISHER_TC))}}}class Q{static fieldSequence=new X;static encode(t,i){let e;try{e=this.fieldSequence[String(t.version)][i]}catch(e){throw new T(`Unable to encode version: ${t.version}, segment: ${i}`)}let s="";i!==S.CORE&&(s=j.encode(V.KEY_TO_ID[i],N.segmentType));const n=G();return e.forEach((e=>{const r=t[e],o=n[e];let h=N[e];void 0===h&&this.isPublisherCustom(e)&&(h=Number(t[L.numCustomPurposes]));try{s+=o.encode(r,h)}catch(t){throw new T(`Error encoding ${i}->${e}: ${t.message}`)}})),E.encode(s)}static decode(t,i,e){const s=E.decode(t);let n=0;e===S.CORE&&(i.version=j.decode(s.substr(n,N[L.version]),N[L.version])),e!==S.CORE&&(n+=N.segmentType);const r=this.fieldSequence[String(i.version)][e],o=G();return r.forEach((t=>{const e=o[t];let r=N[t];if(void 0===r&&this.isPublisherCustom(t)&&(r=Number(i[L.numCustomPurposes])),0!==r){const o=s.substr(n,r);if(i[t]=e===W?e.decode(o,i.version):e.decode(o,r),Number.isInteger(r))n+=r;else{if(!Number.isInteger(i[t].bitLength))throw new x(t);n+=i[t].bitLength}}})),i}static isPublisherCustom(t){return 0===t.indexOf("publisherCustom")}}class Y{static processor=[t=>t,(t,i)=>{t.publisherRestrictions.gvl=i,t.purposeLegitimateInterests.unset(1);const e=new Map;return e.set("legIntPurposes",t.vendorLegitimateInterests),e.set("purposes",t.vendorConsents),e.forEach(((e,s)=>{e.forEach(((n,r)=>{if(n){const n=i.vendors[r];if(!n||n.deletedDate)e.unset(r);else if(0===n[s].length)if("legIntPurposes"===s&&0===n.purposes.length&&0===n.legIntPurposes.length&&n.specialPurposes.length>0);else if(t.isServiceSpecific)if(0===n.flexiblePurposes.length)e.unset(r);else{const i=t.publisherRestrictions.getRestrictions(r);let n=!1;for(let t=0,e=i.length;t<e&&!n;t++)n=i[t].restrictionType===I.REQUIRE_CONSENT&&"purposes"===s||i[t].restrictionType===I.REQUIRE_LI&&"legIntPurposes"===s;n||e.unset(r)}else e.unset(r)}}))})),t.vendorsDisclosed.set(i.vendors),t}];static process(t,i){const e=t.gvl;if(!e)throw new T("Unable to encode TCModel without a GVL");if(!e.isReady)throw new T("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=e.language.toUpperCase(),i?.version>0&&i?.version<=this.processor.length?t.version=i.version:t.version=this.processor.length;const s=t.version-1;if(!this.processor[s])throw new T(`Invalid version: ${t.version}`);return this.processor[s](t,e)}}class K{static absCall(t,i,e,s){return new Promise(((n,r)=>{const o=new XMLHttpRequest;o.withCredentials=e,o.addEventListener("load",(()=>{if(o.readyState==XMLHttpRequest.DONE)if(o.status>=200&&o.status<300){let t=o.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error(`HTTP Status: ${o.status} response type: ${o.responseType}`))})),o.addEventListener("error",(()=>{r(new Error("error"))})),o.addEventListener("abort",(()=>{r(new Error("aborted"))})),null===i?o.open("GET",t,!0):o.open("POST",t,!0),o.responseType="json",o.timeout=s,o.ontimeout=()=>{r(new Error("Timeout "+s+"ms "+t))},o.send(i)}))}static post(t,i,e=!1,s=0){return this.absCall(t,JSON.stringify(i),e,s)}static fetch(t,i=!1,e=0){return this.absCall(t,null,i,e)}}class Z extends B{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new M;static baseUrl_;static set baseUrl(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new k("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;lang_;isLatest=!1;constructor(t){super();let i=Z.baseUrl;if(this.lang_=Z.DEFAULT_LANGUAGE,this.isVendorList(t))this.populate(t),this.readyPromise=Promise.resolve();else{if(!i)throw new k("must specify GVL.baseUrl before loading GVL json");if(t>0){const e=t;Z.CACHE.has(e)?(this.populate(Z.CACHE.get(e)),this.readyPromise=Promise.resolve()):(i+=Z.versionedFilename.replace("[VERSION]",String(e)),this.readyPromise=this.fetchJson(i))}else Z.CACHE.has(Z.LATEST_CACHE_KEY)?(this.populate(Z.CACHE.get(Z.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(i+Z.latestFilename))}}static emptyLanguageCache(t){let i=!1;return void 0===t&&Z.LANGUAGE_CACHE.size>0?(Z.LANGUAGE_CACHE=new Map,i=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(Z.LANGUAGE_CACHE.delete(t.toUpperCase()),i=!0),i}static emptyCache(t){let i=!1;return Number.isInteger(t)&&t>=0?(Z.CACHE.delete(t),i=!0):void 0===t&&(Z.CACHE=new Map,i=!0),i}cacheLanguage(){Z.LANGUAGE_CACHE.has(this.lang_)||Z.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})}async fetchJson(t){try{this.populate(await K.fetch(t))}catch(t){throw new k(t.message)}}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))}async changeLanguage(t){const i=t.toUpperCase();if(!Z.consentLanguages.has(i))throw new k(`unsupported language ${t}`);if(i!==this.lang_)if(this.lang_=i,Z.LANGUAGE_CACHE.has(i)){const t=Z.LANGUAGE_CACHE.get(i);for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}else{const i=Z.baseUrl+Z.languageFilename.replace("[LANG]",t);try{await this.fetchJson(i),this.cacheLanguage()}catch(t){throw new k("unable to load language: "+t.message)}}}get language(){return this.lang_}isVendorList(t){return void 0!==t&&void 0!==t.vendors}populate(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&Z.CACHE.set(Z.LATEST_CACHE_KEY,this.getJson()),Z.CACHE.has(this.vendorListVersion)||Z.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(t){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((t=>{this.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((t=>{this.bySpecialPurposeVendorMap[t]=new Set})),Object.keys(this.features).forEach((t=>{this.byFeatureVendorMap[t]=new Set})),Object.keys(this.specialFeatures).forEach((t=>{this.bySpecialFeatureVendorMap[t]=new Set})),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map((t=>+t))),this.vendorIds=new Set(t),this.vendors_=t.reduce(((t,i)=>{const e=this.vendors_[String(i)];return e&&void 0===e.deletedDate&&(e.purposes.forEach((t=>{this.byPurposeVendorMap[String(t)].consent.add(i)})),e.specialPurposes.forEach((t=>{this.bySpecialPurposeVendorMap[String(t)].add(i)})),e.legIntPurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].legInt.add(i)})),e.flexiblePurposes&&e.flexiblePurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].flexible.add(i)})),e.features.forEach((t=>{this.byFeatureVendorMap[String(t)].add(i)})),e.specialFeatures.forEach((t=>{this.bySpecialFeatureVendorMap[String(t)].add(i)})),t[i]=e),t}),{})}getFilteredVendors(t,i,e,s){const n=t.charAt(0).toUpperCase()+t.slice(1);let r;const o={};return r="purpose"===t&&e?this["by"+n+"VendorMap"][String(i)][e]:this["by"+(s?"Special":"")+n+"VendorMap"][String(i)],r.forEach((t=>{o[String(t)]=this.vendors[String(t)]})),o}getVendorsWithConsentPurpose(t){return this.getFilteredVendors("purpose",t,"consent")}getVendorsWithLegIntPurpose(t){return this.getFilteredVendors("purpose",t,"legInt")}getVendorsWithFlexiblePurpose(t){return this.getFilteredVendors("purpose",t,"flexible")}getVendorsWithSpecialPurpose(t){return this.getFilteredVendors("purpose",t,void 0,!0)}getVendorsWithFeature(t){return this.getFilteredVendors("feature",t)}getVendorsWithSpecialFeature(t){return this.getFilteredVendors("feature",t,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(t){this.mapVendors(t)}get isReady(){return this.isReady_}clone(){const t=new Z(this.getJson());return this.lang_!==Z.DEFAULT_LANGUAGE&&t.changeLanguage(this.lang_),t}static isInstanceOf(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo}}class tt extends B{static consentLanguages=Z.consentLanguages;isServiceSpecific_=!1;supportOOB_=!0;useNonStandardStacks_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=2;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new F;purposeConsents=new F;purposeLegitimateInterests=new F;publisherConsents=new F;publisherLegitimateInterests=new F;publisherCustomConsents=new F;publisherCustomLegitimateInterests=new F;customPurposes;vendorConsents=new F;vendorLegitimateInterests=new F;vendorsDisclosed=new F;vendorsAllowed=new F;publisherRestrictions=new D;constructor(t){super(),t&&(this.gvl=t),this.updated()}set gvl(t){Z.isInstanceOf(t)||(t=new Z(t)),this.gvl_=t,this.publisherRestrictions.gvl=t}get gvl(){return this.gvl_}set cmpId(t){if(t=Number(t),!(Number.isInteger(t)&&t>1))throw new C("cmpId",t);this.cmpId_=t}get cmpId(){return this.cmpId_}set cmpVersion(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new C("cmpVersion",t);this.cmpVersion_=t}get cmpVersion(){return this.cmpVersion_}set consentScreen(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new C("consentScreen",t);this.consentScreen_=t}get consentScreen(){return this.consentScreen_}set consentLanguage(t){this.consentLanguage_=t}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(t){if(!/^([A-z]){2}$/.test(t))throw new C("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(t){if((t=Number(t)>>0)<0)throw new C("vendorListVersion",t);this.vendorListVersion_=t}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new C("policyVersion",t)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(t){this.version_=parseInt(t,10)}get version(){return this.version_}set isServiceSpecific(t){this.isServiceSpecific_=t}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardStacks(t){this.useNonStandardStacks_=t}get useNonStandardStacks(){return this.useNonStandardStacks_}set supportOOB(t){this.supportOOB_=t}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(t){this.purposeOneTreatment_=t}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){const i=Object.keys(this.customPurposes).sort(((t,i)=>Number(t)-Number(i)));t=parseInt(i.pop(),10)}return t}set numCustomPurposes(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new C("numCustomPurposes",t)}updated(){const t=new Date,i=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()));this.created=i,this.lastUpdated=i}}class it{static encode(t,i){let e,s="";return t=Y.process(t,i),e=Array.isArray(i?.segments)?i.segments:new J(t,i)[""+t.version],e.forEach(((i,n)=>{let r="";n<e.length-1&&(r="."),s+=Q.encode(t,i)+r})),s}static decode(t,i){const e=t.split("."),s=e.length;i||(i=new tt);for(let t=0;t<s;t++){const s=e[t],n=E.decode(s.charAt(0)).substr(0,N.segmentType),r=V.ID_TO_KEY[j.decode(n,N.segmentType).toString()];Q.decode(s,i,r)}return i}}const et=(t,i)=>{const e=y[i].windowPropertyName;return(0,P.uq)(t,e)},st=(t,i)=>{const e=y[i].framePropertyName;return(0,P.wl)(t,e)},nt=(t,i)=>null!==et(t,i)||null!==st(t,i),rt=t=>{const i=it.decode(t),e={},s={};return i.vendorConsents.forEach(((t,i)=>e[i]=t)),i.purposeConsents.forEach(((t,i)=>s[i]=t)),{vendorConsents:e,purposeConsents:s,tcString:t}},ot=t=>{const i=_.decodeConsentString(t);let e="";const s=i.maxVendorId;for(let t=1;t<=s;t++)e+="0";const n=e.split("");i.allowedVendorIds.forEach((t=>{n[t-1]="1"}));return(t=>{const i={consentString:t};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i})(n.join(""))},ht=(t,i,e)=>{let s;try{s=i(t)}catch(t){}if((0,a.as)(s))return s;try{s=e(t)}catch(t){}return s},at=t=>(0,a.QM)(null==t?void 0:t.tcString),ct=t=>(0,a.QM)(null==t?void 0:t.consentString),dt=({cmpEncodedString:t,tcfEncodedString:i})=>{if(!(0,a.QM)(t)&&!(0,a.QM)(i))return null;let e=null;return(0,a.QM)(i)&&(e=ht(i,rt,ot)),(0,a.as)(e)?e:(0,a.QM)(t)?(e=ht(t,ot,rt),(0,a.as)(e)?e:((0,m.n)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:t,tcfEncodedString:i}),level:m.D.CRITICAL}),null)):((0,m.n)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:i}),level:m.D.CRITICAL}),null)};class lt{constructor(t,i){this.QC=t,this.YC=i,this.apiType=p.TcfApi,this.KC=t=>new Promise(((i,e)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.ZC&&s.ZC.callId===this.tE){const t=s.ZC.returnValue.tcString;this.HC(t).then((()=>i(this.tE))).catch((t=>e()))}}catch(t){e()}}))}isApiOnPage(){return null!==this.QC||null!==this.YC}bindToApi(){return null!==this.QC?new Promise(((t,i)=>{this.GC(this.QC).then((()=>t())).catch((t=>i(t)))})):null!==this.YC?this.XC(this.YC):Promise.reject()}isConsentForVendor(t){var i,e;return!!(null===(i=this.iE)||void 0===i?void 0:i.vendorConsents)&&!!(null===(e=this.iE)||void 0===e?void 0:e.vendorConsents[t])}getConsentPayload(){var t;return null===(t=this.iE)||void 0===t?void 0:t.tcString}setInAppConsentData(t){this.iE=Object.assign(Object.assign({},this.iE),t)}hasIvtConsent(){return!0}isConsentForPurposes(t){var i;return!!(null===(i=this.iE)||void 0===i?void 0:i.purposeConsents)&&t.every((t=>!!this.iE.purposeConsents[t]))}XC(t){this.tE=(0,s.qs)();const i={};return new Promise((e=>{const s=t=>{this.KC(t).then((t=>{i[t]=!0,i[this.tE]&&(window.removeEventListener("message",s,!1),e())})).catch((t=>{}))};window.addEventListener("message",s,!1);const n=y[p.TcfApi].getVendorConsentDataMethodName;t.postMessage({eE:{command:n,parameter:null,callId:this.tE}},"*")}))}GC(t){const i=y[p.TcfApi].windowPropertyName,e=y[p.TcfApi].consentUpdateMethodName,s=y[p.TcfApi].removeUpdateListenerMethodName;return t&&t[i]?new Promise((t=>{this.QC[i](e,2,((e,n)=>{if(n&&("useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus)){const n=e.tcString;this.HC(n).then((()=>t())),this.QC[i](s,2,(()=>{}),e.listenerId)}}))})):Promise.reject()}HC(t){const i=dt({tcfEncodedString:t});return at(i)?(this.iE=i,Promise.resolve()):Promise.reject()}}var ut=e(3199);class pt{constructor(t,i,e={}){var s,n;this.sE=t,this.wh=i;const r=dt({cmpEncodedString:null===(s=e.cmp)||void 0===s?void 0:s.consentString,tcfEncodedString:null===(n=e.tcf)||void 0===n?void 0:n.tcString}),o=this.nE(r);null!==o?(this.rE(o),(at(r)||ct(r))&&this.oE.setInAppConsentData(r)):(0,m.n)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:e}),level:m.D.CRITICAL})}setPageUrl(t){this.Ga=t}setAmpUserConsent(t){var i,e;if(!this.isConsentRequired())return;const s=t.consentStringTypeEnum.US_PRIVACY_STRING,n=null===(i=t.consentMetadata)||void 0===i?void 0:i.consentStringType,r=t.encodeConsentString||(null===(e=t.consentMetadata)||void 0===e?void 0:e.additionalConsent);let o;if(!(0,a.QM)(r))return void(0,m.n)({level:m.D.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.Ga});if(n===s)return void(0,m.n)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:m.D.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL_${this.Ga}`},{throttle:2,shouldSendMaxLog:!1});const h=dt({tcfEncodedString:r,cmpEncodedString:r});at(h)?o=new lt(null,null):ct(h)&&(o=new b(null,null)),o?o?(this.oE=o,this.oE.setInAppConsentData(h)):(0,m.n)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:m.D.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Ga}`},{shouldSendMaxLog:!1,throttle:2}):(0,m.n)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:m.D.WARN,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.Ga}`},{throttle:2,shouldSendMaxLog:!1})}isConsentRequired(){return this.sE}isConsent(t,i=[]){if(this.isConsentRequired()){return this.oE.isConsentForVendor(t)&&this.oE.isConsentForPurposes(i)}return!0}isConsentConnatix(){return this.isConsent(n.$6.Connatix,ut.Z)}isConsentForPersonalisedAds(){return this.getConsentApiType()!==p.CmpApi&&this.oE.isConsentForPurposes(ut.Z)}getConsentDataPayload(){return this.oE.getConsentPayload()}bindToConsentApi(){return this.oE.bindToApi()}isConsentApiOnPage(){return this.oE.isApiOnPage()}hasIVTConsent(){return this.oE.hasIvtConsent()}getConsentApiType(){return this.oE.apiType}rE(t){const i=et(this.wh,t),e=st(this.wh,t);t===p.TcfApi?this.oE=new lt(i,e):this.oE=new b(i,e)}nE(t){if(at(t))return p.TcfApi;if(ct(t))return p.CmpApi;if(nt(this.wh,p.TcfApi))return p.TcfApi;return nt(this.wh,p.CmpApi)?p.CmpApi:p.TcfApi}}var ft=e(51);const mt="PUBMATIC",vt="predirect",gt="UserThirdPartySyncManager_Pubmatic",yt="CookieSync_syncScript_not_properly_loaded",bt="CookieSync_param_not_parsed_properly",It=(t,i)=>{if(!window.PubMaticSync)return St(yt,mt),!1;const e=Number.parseInt(t,10);return(0,a.hj)(e)?!!(0,a.QM)(i)||(St(bt,mt,vt),!1):(St(bt,mt,"p"),!1)},wt=(t,i,e,s)=>{const n={pubId:Number.parseInt(t,10),url:i};e&&(n.delay=1e3,n.gdpr=1,n.gdprConsent=s),window.PubMaticSync.sync(n)},St=(t,i,e="")=>{(0,m.n)({message:t,callStack:i,exception:e,level:m.D.CRITICAL},{throttle:1,shouldSendMaxLog:!1})};class At{constructor(t,i){this.hE=t,this.sE=i,this.aE=[]}replaceuserIdMacros(t,i){let e=t;return e=e.replace("%5BuserId%5D",i),e=e.replace("[userId]",i),e=e.replace("%7bUSER_ID%7d",i),e}cE(t,i){try{if(this.dE(t)){const e=i.document.createElement("iframe");e.setAttribute("style","width:1px;height:1px;border:0px;margin:0px;padding:0px"),e.src=t.url,i.document.body.appendChild(e)}else(0,P.dZ)({src:t.url},i.document.head,i,null,null,1===(0,s.Vm)([99,1]),"UserManager_unable_to_insert_sync_url_script");return!0}catch(t){return!1}}dE(t){switch(t.vendorId){case n.$6.Rubicon:case n.$6.Pubmatic:return!0;default:return!!t.url.includes("yellowblue.io")}}syncUrls(t,i){this.aE.forEach((e=>{if(this.hE.isConsent(e.vendorId)&&!e.synced){if(e.vendorId===n.$6.Pubmatic)return void((t,i,e)=>new Promise(((s,n)=>{const r=(0,ft.Ph)("p",t),o=(0,ft.Ph)(vt,t);if(window.PubMaticSync){if(!It(r,o))return void n();wt(r,o,i,e),s(!0)}else(0,P.dZ)({src:"//ads.pubmatic.com/AdServer/js/userSync.js"},window.document.head,window,(()=>{It(r,o)?(wt(r,o,i,e),s(!0)):n()}),(()=>{n()}),!0,gt)})))(e.url,this.hE.isConsentRequired(),this.hE.getConsentDataPayload()).then((()=>{e.synced=!0}));if(e.url.includes("openx.net")||e.url.includes("sync.technoratimedia.com/services"))return r.n.trackPixel(e.url),void(e.synced=!0);if("755"===e.vendorId){const t=this.hE.getConsentDataPayload(),i=this.hE.isConsentRequired();return e.url=(0,ft.Bp)(e.url,"gdpr",""+(i?1:0)),i&&(e.url=(0,ft.Bp)(e.url,"gdpr_consent",t)),r.n.trackPixel(e.url),void(e.synced=!0)}if(e.url.includes("pixel.advertising.com")&&(e.url=e.url.replace("gdpr=","gdpr="+(this.hE.isConsentRequired()?1:0)),e.url=e.url.replace("gdpr_consent=","gdpr_consent=0")),e.url=this.replaceuserIdMacros(e.url,t),this.sE){e.url=(0,ft.Bp)(e.url,"gdpr","1");const t=this.hE.getConsentDataPayload();e.url=(0,ft.Bp)(e.url,"gdpr_consent",t)}this.cE(e,i)&&(e.synced=!0)}}))}setSyncUrls(t={}){return!(this.aE.length>0)&&(this.aE=[],Object.keys(t).forEach((i=>{this.aE.push({vendorId:i,url:t[i],synced:!1})})),!0)}}var Pt,_t=e(7994),xt=e(1712);!function(t){t.CCPA_Error="CCPA Error",t.CCPA_Pending="CCPA Pending",t.CCPA_Success="CCPA Success",t.CCPA_Delayed_Success="CCPA Delayed Success",t.CCPA_Delayed_Failure="CCPA Delayed Failure"}(Pt||(Pt={}));class Tt{constructor(t,i){this.TC=t,this.lE=1,this.uE="__uspapi",this.fE="getUSPData",this.mE={isPending:!0,isRejected:!1,isDelayed:!1,promise:new Promise((()=>{}))},this.vE(i)}getUsPrivacyString(){if(this.TC.usPrivacyString||this.TC.isCcpaApplicable)return this.TC.usPrivacyString}isCcpaApplicable(){return this.TC.isCcpaApplicable}isSellUserAllowed(){return!this.TC.isCcpaApplicable||this.gE()}setGeoLocation(t){this.yE=t,t.subdivisionId!==xt.F.subdivision.California&&t.subdivisionId!==xt.F.subdivision.Virginia&&(this.TC.isCcpaApplicable=!1)}fetchUsPrivacyString(){return this.bE()&&this.IE(),this.isCcpaApplicable()?new Promise((t=>{this.getUsPrivacyString()?t():t(this.SE())})):Promise.resolve()}SE(){return this.mE.promise=new Promise(((t,i)=>{const e=this.TC.getScope()[this.uE];e?(this.AE=!0,e(this.fE,this.lE,((e,s)=>{s?(this.vE(e.uspString),t()):i()}))):i()})),this.makeQuerablePromise(this.mE),this.mE.promise}gE(){return!this.TC.usPrivacyString||(0,v.d3)(this.TC.usPrivacyString,n.tb)}vE(t){this.TC.usPrivacyString=t}bE(){if(!(0,s.Vm)([95,5]))return!1;const t=new Date(2020,10,16,12,0,0).getTime(),i=new Date(2020,10,17,12,0,0).getTime();return(0,f.k$)(t,i)}IE(){const{countryGeoId:t,subdivisionId:i}=this.yE;t===xt.F.country.US&&(0,m.n)({message:"UserCcpaManager_logCCPA",level:m.D.INFO,callStack:JSON.stringify(i),exception:this.TC.usPrivacyString})}ccpaInfoLogging(t){this.isCcpaApplicable()&&this.AE&&(this.mE.isPending?((0,m.n)({message:Pt.CCPA_Pending,exception:"CCPA_Pending_At_Start_AdRequest",level:m.D.INFO,callStack:t}),this.mE.isDelayed=!0,this.PE=t):this.mE.isRejected&&(0,m.n)({message:Pt.CCPA_Error,exception:"CCPA_Error_At_Start_AdRequest",level:m.D.INFO,callStack:t}))}makeQuerablePromise(t){t.promise.then((()=>{t.isPending=!1,t.isDelayed&&(0,m.n)({message:Pt.CCPA_Delayed_Success,exception:"CCPA_Success_After_Delay",level:m.D.INFO,callStack:this.PE})})).catch((i=>{throw t.isRejected=!0,t.isPending=!1,t.isDelayed&&(0,m.n)({message:Pt.CCPA_Delayed_Failure,exception:"CCPA_Failed_After_Delay",level:m.D.INFO,callStack:this.PE}),i}))}}var kt,Ct,Et=e(2450);!function(t){t.CCPA_INFO_RECEIVED="ccpaInfoReceived",t.CONSENT_DATA_UPDATE="consentDataUpdate"}(kt||(kt={})),function(t){t.SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived",t.USER_INFO_RECEIVED="userInfoReceived"}(Ct||(Ct={}));class Mt{constructor(t,i,e,s={}){this._E=i,this.bA=e,this._appSettings=s,this.gdprConsentMode=o.ProtoGdprConsentModeEnum.Unknown,this.xE={},this.TE="",this.kE=!1,this.CE=()=>{!this.hE.isConsentRequired()||this._E?this.resolveEvent(kt.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.hE.isConsentApiOnPage()||this.bA?o.ProtoGdprConsentModeEnum.NoConsent:o.ProtoGdprConsentModeEnum.NoCmp,this.hE.bindToConsentApi().then((()=>{this.isConsentConnatix()||(this.gdprConsentMode=o.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(kt.CONSENT_DATA_UPDATE)})).catch((t=>{})))},this.EE=()=>{Et.$.getEnvelope(this.iS,this.hE)},this.ME=()=>{this.isConsentConnatix()&&(this.onEvent([Ct.USER_INFO_RECEIVED]).then((()=>{this.kE&&(this.LE.syncThirdPartyCookieList(),this.LE.unsecuredCookieSync&&this.LE.syncThirdPartyCookieList(this.LE.unsecuredCookieSync),this.LE.syncFirstPartyCookie(u.USER_ID))})),this.onEvent([Ct.SYNC_URLS_RECEIVED,kt.CONSENT_DATA_UPDATE,kt.CCPA_INFO_RECEIVED]).then((()=>{if(this.isConsentConnatix()&&this.BE.isSellUserAllowed())try{this.RE.syncUrls(this.TC.userId,this.TC.getScope())}catch(t){(0,m.n)({level:m.D.WARN,message:"UserManager_syncUrls",exception:t.message,callStack:t.stack})}})))};try{this.iS=t,this.TC=l.getInstance(t),this._E||(this.LE=new g(this.TC,t));const{cmp:i,tcf:e}=this._appSettings;this.hE=new pt(!!this.TE,t,{cmp:i,tcf:e}),this.RE=new At(this.hE,this.isGDPR()),this.BE=new Tt(this.TC,this._appSettings.usPrivacyString),this.u_()}catch(t){(0,m.n)({callStack:t.stack,exception:t.message,message:"UserManager_constructor",level:m.D.CRITICAL})}}get identityEnvelope(){return Et.$.getValidEnvelope()}doCookieLogging(t){var i;null===(i=this.LE)||void 0===i||i.cookieLogging(t)}getUserIdFirstPartyCookie(){var t;return null===(t=this.LE)||void 0===t?void 0:t.getFirstPartyCookie(u.USER_ID)}u_(){this.LE&&this.LE.fetchCookies(),this.CE(),this.onEvent([kt.CONSENT_DATA_UPDATE]).then((()=>{this.EE(),setTimeout((()=>{try{if(this._E)return;this.ME()}catch(t){(0,m.n)({callStack:t.stack,exception:t.message,message:"UserManager_consent_data_received",level:m.D.CRITICAL})}}),0)}))}OE(t){return void 0===this.xE[t]&&(this.xE[t]=new _t.C,this.xE[t].promise.catch((()=>this.xE[t].reject()))),this.xE[t]}resolveEvent(t,i){this.OE(t).resolve(i)}setAmpUserConsent(t){this.hE.setAmpUserConsent(t),this.resolveEvent(kt.CONSENT_DATA_UPDATE)}setPageUrl(t){this.hE&&this.hE.setPageUrl(t)}onEvent(t){const i=t.map((t=>this.OE(t).promise));return Promise.all(i)}isConsent(t,i){return this.hE.isConsent(t,i)}isConsentConnatix(){return this.hE.isConsentConnatix()}ccpaInfoLogging(t){this.BE.ccpaInfoLogging(t)}getConsentPayload(){return this.hE.getConsentDataPayload()}isConsentRequired(){return this.hE.isConsentRequired()}isPersonalisedAdsAllowed(){return this.isConsentRequired()?this.hE.isConsentForPersonalisedAds():!this.isCcpaApplicable()||this.BE.isSellUserAllowed()}setThirdPartySyncUrls(t){this._E||this.RE.setSyncUrls(t)&&this.resolveEvent(Ct.SYNC_URLS_RECEIVED)}setGeoLocation(t){this.BE.setGeoLocation(t),this.BE.fetchUsPrivacyString().then((()=>{this.resolveEvent(kt.CCPA_INFO_RECEIVED)})).catch((()=>{this.resolveEvent(kt.CCPA_INFO_RECEIVED)}))}getUserId(){if(this.isConsentConnatix()&&this.LE)return this.LE.getUserId()}FE(){return this.LE&&this.LE.getUserId()}setUserInformation(t){this.LE&&(this.LE.setUserInformation(t),this.resolveEvent(Ct.USER_INFO_RECEIVED),!this._E&&this.isConsentConnatix()&&this.LE.syncFirstPartyCookie(u.USER_ID))}isGDPR(){return!!this.TE}getUsPrivacyString(){return this.BE.getUsPrivacyString()}isCcpaApplicable(){return this.BE.isCcpaApplicable()}isSellUserAllowed(){return this._E||this.BE.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}NE(){return this._appSettings.deviceID}getTrackableUser(){return this._E?this.getDeviceId():this.getUserId()}getForcedTrackableUser(){return this._E?this.NE():this.FE()}registerPlsCall(t){return this.isConsentConnatix()||(this.kE=!0),this.TC.registerPlsCall(t)}setBrowserInfo(t){this.LE&&this.LE.setBrowserInfo(t,this.isConsentConnatix())}getGdprConsentApiType(){return this.hE.getConsentApiType()}}},9154:(t,i,e)=>{"use strict";e.d(i,{H:()=>n});var s=e(289);const n={[s.ProtoAdSlotsEnum.PreRoll]:s.ProtoAdBreakTypeEnum.PreRoll,[s.ProtoAdSlotsEnum.MidRoll]:s.ProtoAdBreakTypeEnum.MidRoll,[s.ProtoAdSlotsEnum.PostRoll]:s.ProtoAdBreakTypeEnum.PostRoll}},5650:(t,i,e)=>{"use strict";e.d(i,{BY:()=>f,BZ:()=>l,Gg:()=>p,Sz:()=>c,V7:()=>m,d3:()=>o,ee:()=>b,fn:()=>u,gX:()=>g,qo:()=>h,qy:()=>a,sj:()=>y,tN:()=>v,ti:()=>d});var s=e(4798),n=e(7531),r=e(9791);function o(t,i){return i.indexOf(t)>-1}function h(t){return Array.isArray(t)?t:[t]}function a(t,i){const e=[],s=new Map;return i.forEach((i=>{s.has(i[t])||(s.set(i[t],!0),e.push(i))})),e}function c(t){return[].slice.call(t)}function d(t){const i=[];for(const e in t)e&&parseInt(e,10)>=0&&i.push(t[e]);return i}function l(t){return t&&t.length>0}function u(t){return t.every((t=>(0,s.hj)(t)))}function p(t){let i="[";for(let e=0;e<t.length;e++)i+=(0,n.HD)(t[e])+(e===t.length-1?"":",");return i+="]",i}function f(t,i){return!(!t||!i)&&(t.length===i.length&&(t===i||0===t.length&&0===i.length||t.every(((t,e)=>(0,r.s9)(t,i[e])))))}function m(t,i){return t.filter((t=>!i.includes(t)))}function v(t,i){return t.filter((t=>i.includes(t)))}function g(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function y(t,i){const e=t.indexOf(i);-1!==e&&t.splice(e,1)}function b(t){const i=[];return t.forEach((t=>i.push(t))),i}},5356:(t,i,e)=>{"use strict";e.d(i,{AK:()=>l,Xj:()=>c,mU:()=>u,mb:()=>d,xm:()=>a});var s=e(289),n=e(3020),r=e(8983),o=e(7626),h=e(4798);function a(t,i){let e=!1;switch(t){case s.ProtoAdBreakTypeEnum.PreRoll:e=i===s.ProtoAdSlotsEnum.PreRoll;break;case s.ProtoAdBreakTypeEnum.MidRoll:e=i===s.ProtoAdSlotsEnum.MidRoll;break;case s.ProtoAdBreakTypeEnum.PostRoll:e=i===s.ProtoAdSlotsEnum.PostRoll}return e}function c(t,i){return!(i.skippability===s.ProtoPlayerSkippabilityType.AllowNonSkipAdsIfTheyAreShorterThan&&t<i.skipMin)}function d(t){return(0,n.pv)(t,r.s6.Ad)||(0,n.pv)(t,o.E.InAd)}function l(t,i){return(0,h.r)(i)&&[s.ProtoAdsourceTypeEnum.Vpaid,s.ProtoAdsourceTypeEnum.Ima].includes(t)}function u(t,i){if(isNaN(i)||!t)return null;const e={start:0,end:i};for(let s=0;s<t.length;s++){const n=t.start(s),r=t.end(s);if(i>=n&&i<=r){e.end=r;break}}return e}},5715:(t,i,e)=>{"use strict";e.d(i,{R:()=>o});var s=e(4798);function n(t){return(0,s.as)(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function r(t){return n(t)?o({},t):t}function o(t,i){return function(t,i){const e={};return n(t)&&Object.keys(t).forEach((i=>{e[i]=r(t[i])})),Object.keys(i).forEach((s=>{n(i[s])&&t[s]?e[s]=o(t[s],i[s]):e[s]=r(i[s])})),e}(t,i)}},3020:(t,i,e)=>{"use strict";e.d(i,{AX:()=>rt,Dx:()=>T,FM:()=>lt,Fs:()=>k,G$:()=>M,GF:()=>X,Ho:()=>p,IS:()=>q,IV:()=>S,Iy:()=>V,Ji:()=>G,Kk:()=>nt,LT:()=>$,L_:()=>_,ML:()=>I,MV:()=>u,NN:()=>ct,NS:()=>y,Nb:()=>it,PM:()=>O,Q1:()=>L,S0:()=>B,T7:()=>f,Tp:()=>R,U6:()=>W,UR:()=>ot,Wb:()=>Z,_w:()=>ht,aQ:()=>m,bX:()=>v,bZ:()=>at,cn:()=>w,dZ:()=>b,eA:()=>tt,fj:()=>j,h_:()=>D,jG:()=>U,ju:()=>J,nw:()=>N,oW:()=>dt,og:()=>P,pv:()=>A,rI:()=>x,sw:()=>et,tp:()=>E,uC:()=>g,uc:()=>C,uh:()=>st,uq:()=>Y,w6:()=>Q,wl:()=>K});var s=e(8576),n=e(4798),r=e(5650),o=e(8983),h=e(9791),a=e(51),c=e(307),d=e(1187);function l(t,i){t&&(t.style.display=i?"":"none")}function u(t){l(t,!1)}function p(t){l(t,!0)}function f(t,i){for(const e in i)i.hasOwnProperty(e)&&(t.style[e]=i[e])}function m(t,...i){i.forEach((i=>{t.style[i]=""}))}function v(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function g(t,i=document){v(i.getElementById(t))}function y(t,i,e,s,r){if(i)try{const o=e.document.createElement("link");return o.id=t.id,o.type="text/css",o.rel="stylesheet",o.href=t.src,(0,n.mf)(s)&&(o.onload=()=>{s()}),(0,n.mf)(r)&&(o.onerror=t=>{i.removeChild(o),(0,n.HD)(t)?r(`link_stylesheet_load_error_${t}`):r(`link_stylesheet_load_error_${function(t,i){const e=t.document.createElement("div");return e.appendChild(i),e.innerHTML}(e,o)}`)}),i.appendChild(o),o}catch(t){return null}}function b(t,i,e,s,r,o=!0,h){try{const a=e.document.createElement("script");if(a.src=t.src,a.async=!0,a.type="text/javascript",t.id&&(a.id=t.id),t.attributes)for(const i of t.attributes)a.setAttribute(i.name,i.value);return(0,n.mf)(s)&&(a.onload=()=>{s()}),a.onerror=e=>{i.removeChild(a),o&&(0,d.n)({message:h,exception:"script_load_error",callStack:t.src,level:d.D.INFO},{throttle:2,shouldSendMaxLog:!1}),(0,n.mf)(r)&&r()},i.appendChild(a),a}catch(i){return o&&(0,d.n)({message:h,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:d.D.CRITICAL},{throttle:2,shouldSendMaxLog:!1}),(0,n.mf)(r)&&r(),null}}function I(t,i,e){if(t)try{const s=i.document.createElement("script"),n=i.document.createTextNode(e);return s.appendChild(n),t.appendChild(s),s}catch(t){return null}}function w(t,...i){t&&t.classList.add(...i)}function S(t,...i){t&&t.classList.remove(...i)}function A(t,i){return t&&t.classList.contains(i)}function P(t,i,e){return!!t&&t.classList.toggle(i,e)}function _(t,i,e,s=!1){t&&(t.classList.remove(i),t.classList.add(e),s&&R(t))}const x=(t,i)=>i.document.getElementById(t),T=(t,i,e)=>i.getComputedStyle(t,e),k=(t,i)=>i.document.getElementsByClassName(t);function C(t,i="",e){const s=e.document.getElementsByTagName("head")[0],n=e.document.createElement("style");n.setAttribute("type","text/css"),n.id=i,n.appendChild(e.document.createTextNode(t)),s.appendChild(n)}function E(t,i){const e=i.document.getElementsByTagName("head")[0],s=i.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",t),e.appendChild(s)}function M(t,i){const e=i.document.createElement("div");return e.innerHTML=t,e.firstElementChild}function L(t,i){i>0?(t.removeAttribute("muted"),t.muted=!1):(t.setAttribute("muted",""),t.muted=!0)}function B(t){return s.Ht.find((i=>{if(i.keys.fullscreenEnabled in t)return!0}))}function R(t){t.getBoundingClientRect()}function O(t,i){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)})(i)}function D(t,i){return(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||function(t){return clearTimeout(t)})(i)}function V(t){return!!t.closest(".cnx-el")}function F(t,i,e){const s=function(t,i){const e=function(t,i){let e=i;for(;e;){const i=e.parentNode;if(i){const e=t.reduce(((t,e)=>t||i.querySelector(e)),null);if(e)return e}e=i}return null}(t,i);return e?T(e,$(e)):null}(t,i);return s?function(t,i){return t.getPropertyValue(i)}(s,e):null}function N(t){const i=F(["h1","h2"],t,"font-family");return i||"inherit"}function j(t){const i=F(["p"],t,"font-family");return i||"inherit"}function $(t){try{return t.ownerDocument.defaultView}catch(t){return null}}function U(t,i){t&&i&&(Array.isArray(t)?t.forEach((t=>i.appendChild(t))):i.appendChild(t))}function q(t,i,e){let s=!1;const n=(0,r.Sz)(i.children);for(let i=0;i<n.length;i++)if(e-1===i||0===e){s=!0,Array.isArray(t)?H(n[i],...t):H(n[i],t);break}s||U(t,i)}function H(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function z(t){const i=$(t);if(!i)return;const{display:e}=T(t,i);"none"===e&&(t.style.display="block")}function W(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(S(t,o.jG.FadeOutBase,o.jG.FadeOut),i(),t.removeEventListener("transitionend",e))};w(t,o.jG.FadeOutBase),z(t),R(t),t.addEventListener("transitionend",e),w(t,o.jG.FadeOut)}function G(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(S(t,o.jG.FadeInBase,o.jG.FadeIn),i(),t.removeEventListener("transitionend",e))};w(t,o.jG.FadeInBase),z(t),R(t),t.addEventListener("transitionend",e),w(t,o.jG.FadeIn)}function X(t){const i=$(t);if(!i)return!0;const{display:e,opacity:s}=T(t,i);return"none"===e||"0"===s}function J(t,i){const e=i.document.createElement("div");return e.innerHTML=t||"",e.innerText}function Q(){const t=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===t||"yes"===t}function Y(t,i){const e=(0,h.pE)(t).topFrame;return e[i]?e:null}function K(t,i){let e=t,s=null;try{for(;!s;){try{e.frames[i]&&(s=e)}catch(t){}if(!t.top||t.top===e)break;e=e.parent}}catch(t){}return s}function Z(t,i){let e=[];try{e=e.slice.call(i.document.querySelectorAll(t),0)}catch(t){}return e}function tt(t){return(0,h.pE)(t).topFrame.location.protocol.includes("https")}function it(t){if(!tt(t))return;[window,t].forEach((t=>{if(null===t.document.querySelector("meta[content=upgrade-insecure-requests]")){const i=t.document.createElement("meta");i.setAttribute("http-equiv","Content-Security-Policy"),i.content="upgrade-insecure-requests",t.document.head.appendChild(i)}}))}function et(t){return(0,h.pE)(t).topFrame.document.referrer}function st(t,i){const e=(0,h.pE)(i).topFrame.location.hostname,s=(0,h.bx)(t);return s&&s.hostname===e}function nt(t){t.removeAttribute("href"),t.removeAttribute("target"),t.removeAttribute("download"),t.removeAttribute("ping"),t.removeAttribute("rel"),t.removeAttribute("media"),t.removeAttribute("hreflang"),t.removeAttribute("type")}function rt(t,i){try{t.onclick=t=>{const{tagName:e,className:s}=t.target;(0,d.n)({message:`${i} - click on tag:${e} class:${s}`,level:d.D.INFO})}}catch(t){(0,d.n)({message:`${i}_Error - iframe click`,level:d.D.WARN,callStack:t.stack})}}function ot(t){setTimeout((()=>{let i=t.currentTime+.01;i>t.duration&&(i=.01),t.currentTime=i}),0)}function ht(t,i){!function(t,i,e){const s=t.document.createElement("link");s.rel="preload",s.href=i,s.as=e,t.document.head.appendChild(s)}(i,t,"script")}function at(t,i){if(!i||!ct(i))return(0,d.n)({message:"Prerender_Elements_getgetCustomerId_no_currentScript",level:d.D.CRITICAL}),null;const e=i.src;return(0,a.Ph)(c.ym,e)}function ct(t){return"SCRIPT"===t.tagName}function dt(t){const{top:i,left:e}=t.getBoundingClientRect();return{top:i,left:e}}function lt(t){return parseInt(t.replace("px",""),10)}},9791:(t,i,e)=>{"use strict";e.d(i,{Ae:()=>A,Hh:()=>p,Of:()=>y,Qq:()=>S,Up:()=>b,Vm:()=>f,W$:()=>P,bx:()=>l,dz:()=>a,er:()=>c,lU:()=>d,ld:()=>v,oC:()=>I,pE:()=>u,qs:()=>h,rM:()=>w,s9:()=>g,we:()=>m});var s=e(51),n=e(4798),r=e(7531),o=e(5650);function h(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){const e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===i?e:3&e|8).toString(16)}))}function a(){return h().replace(/-/g,"")}function c(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t.trim())}function d(t,i){let e="";if(!t.err)try{e=t.topFrame.location.href}catch(t){}if(!e||0===e.length)try{e=i.top.location.href}catch(t){}if(!e||0===e.length)try{e=t.topFrame.document.referrer}catch(t){}return e}function l(t){try{const i=t.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:t,protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7]}}catch(t){return null}}function u(t){let i=t,e=null,s=!1;try{for(;i.parent.document!==i.document;){if(!i.parent.document){s=!0;break}e=i,i=i.parent}}catch(t){s=!0}return{topFrame:i,topChildFrame:e,err:s}}function p(t=[],i,e={}){t.forEach((t=>{if((0,n.HD)(t)){let h=t;(0,n.Xz)(e)&&(h=`${t}${(0,s.CK)(t)}${function(t,i){const e=[];return Object.keys(t).forEach((s=>{const h=i?`${i}[${s}]`:s,a=t[s];if((0,n.as)(a))e.push(`${encodeURIComponent(h)}=${(0,r.HD)(a)}`);else if(Array.isArray(a))e.push(`${encodeURIComponent(h)}=${(0,o.Gg)(a)}`);else if(null!=a){const t=encodeURIComponent(a),i=encodeURIComponent(h);t&&i&&e.push(`${i}=${t}`)}})),e.join("&")}(e)}`),(new i.Image).src=h}}))}function f(t){const i=Math.floor(100*Math.random());let e=0,s=0;for(let n=0;n<t.length;n++)if(s+=t[n],i<s){e=n;break}return e}function m(){let t=!1;try{const i=document.createElement("audio");i.volume=1,i.muted=!1;const e=i.play();void 0!==e&&e.catch((()=>{})),t=!i.paused,i.pause()}catch(t){}return t}function v(t,i=0,...e){return setTimeout((()=>{t.apply(this,e)}),i)}function g(t,i){return(0,n.as)(t)?(0,r.Ib)(t,i):Array.isArray(t)?(0,o.BY)(t,i):t===i}function y(t,i,e){let s=0,n=t;for(;s<=e;){if(s++,n.classList.contains(i))return!0;if(n=n.parentElement,!n)return!1}return!1}function b(t,i=5,e){return new Promise(((s,r)=>{t().then(s).catch((o=>{1===i||(0,n.mf)(e)&&e(o)?r(o):b(t,i-1,e).then(s,r)}))}))}function I(){const t=!!window.MSInputMethodContext&&!!document.documentMode,i=navigator.userAgent.toLowerCase().includes("msie");return t||i}function w(t){return Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:`${t[e]}`})),{})}function S(t=navigator.userAgent){return t.includes("; wv")}function A(t){return Math.floor(Math.random()*Math.pow(10,t))}function P(t){return(0,n.VZ)(t)?t:(0,n.QM)(t)?new Error(t):new Error(String(t))}},51:(t,i,e)=>{"use strict";e.d(i,{Bp:()=>o,CK:()=>h,FM:()=>c,Ph:()=>r,ge:()=>a,jv:()=>p,sH:()=>u});var s=e(4798);const n=".cdn.ampproject.org";function r(t,i){i||(i=location.search),t=t.replace(/\[/,"\\[").replace(/]/,"\\]");const e=new RegExp(`[\\?&]${t}=([^&#]*)`,"i").exec(i);return null===e?null:decodeURIComponent(e[1])}function o(t,i,e){const s=new RegExp(`([?&])${i}=.*?(&|$)`,"i"),n=h(t);return t.match(s)?e?t.replace(s,`$1${i}=${e}$2`):t.replace(s,"$1"):`${t}${n}${i}=${e}`}function h(t){return t.includes("?")?"&":"?"}function a(t){if((0,s.QM)(t))return d(t).split("/")[0]}function c(t){if((0,s.QM)(t))return d(t)}function d(t){return t.includes("://")?t.split("://")[1]:t}function l(t,i){return`${"http"+(/(\/s\/)+/.test(t.replace(i,""))?"s":"")}://${i}`}function u(t,i=!0){return t=function(t){if(!t.includes(n))return t;const i="www.",e="amp.";if((t=(t=(t=(t=(t=(t=(t=t.replace(n,"")).replace("www-",i)).replace("amp-",e)).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace(i,e)).includes(e))return t;const s="http://",r="https://";return(t=t.replace(s,`${s}${e}`)).replace(r,`${r}${e}`)}(t=function(t){const i=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(t);if(null!==i){const e=t.replace(i[0],"");return l(t,e)}return t}(t=function(t){if(t.includes(n)){t=t.replace("https://","");const i=/^[^\/]+(\/[a-z]+\/)+s*\/*/,e=i.test(t)?t.replace(i.exec(t)[0],""):t;return l(t,e)}return t}(t))),i&&(t=function(t){if(!t.includes("#origin-")&&!t.includes("viewerUrl-"))return t;const i=t.split("#origin-")[1].split("viewerUrl-");return u(t=decodeURIComponent(i[1]),!1)}(t)),t}function p(t){try{return new URL(t),!0}catch(t){return!1}}},7124:(t,i,e)=>{"use strict";e.d(i,{$:()=>m});var s=e(4798);function n(t,i){const e=h(t),s=h(i),n=e.pop(),r=s.pop(),o=l(e,s);return 0!==o?o:n&&r?l(n.split("."),r.split(".")):n||r?n?-1:1:0}const r=(t,i,e)=>{f(e);const s=n(t,i);return u[e].includes(s)};n.validate=t=>"string"==typeof t&&/^[v\d]/.test(t)&&o.test(t),n.compare=r,n.satisfies=(t,i)=>{const e=i.match(/^([<>=~^]+)/),s=e?e[1]:"=";if("^"!==s&&"~"!==s)return r(t,i,s);const[n,o,a]=h(t),[c,u,p]=h(i);return 0===d(n,c)&&("^"===s?l([o,a],[u,p])>=0:0===d(o,u)&&d(a,p)>=0)};const o=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,h=t=>{if("string"!=typeof t)throw new TypeError("Invalid argument expected string");const i=t.match(o);if(!i)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return i.shift(),i},a=t=>"*"===t||"x"===t||"X"===t,c=t=>{const i=parseInt(t,10);return isNaN(i)?t:i},d=(t,i)=>{if(a(t)||a(i))return 0;const[e,s]=((t,i)=>typeof t!=typeof i?[String(t),String(i)]:[t,i])(c(t),c(i));return e>s?1:e<s?-1:0},l=(t,i)=>{for(let e=0;e<Math.max(t.length,i.length);e++){const s=d(t[e]||0,i[e]||0);if(0!==s)return s}return 0},u={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},p=Object.keys(u),f=t=>{if("string"!=typeof t)throw new TypeError("Invalid operator type, expected string but got "+typeof t);if(-1===p.indexOf(t))throw new Error(`Invalid operator, expected one of ${p.join("|")}`)};var m;!function(t){const i="3.0.0",e="3.2.0",n="4.3.0";t.shouldUseExternalViewabilityService=function(t){return r(t,i,"<")},t.showAndroidExpandButton=function(t){return r(t,e,">=")},t.shouldUseOmsdkForAds=function(t){return r(t,n,">=")},t.getEnvironment=function(t){return{isInApp:(0,s.QM)(t.bundleID),isInAppSDK:(0,s.QM)(t.sdkVersion),isInAppHybrid:t.webViewability}},t.isValidWebviewInApp=function(t){return t.isInApp&&t.isInAppHybrid}}(m||(m={}))},1187:(t,i,e)=>{"use strict";e.d(i,{D:()=>M,n:()=>B});var s=e(7945),n=e(9741);const r=!0;var o,h=e(9791),a=e(6578),c=e(6153),d=e(9906),l=e(5204),u=e(1781),p=e(2239),f=e(3432);!function(t){t[t.None=0]="None",t[t.Linear=1]="Linear",t[t.NonLinear=2]="NonLinear"}(o||(o={}));var m,v,g,y=e(9005),b=e(6568),I=e(8858),w=e(6565),S=e(9600),A=e(8659),P=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},_=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},x=function(t,i){return function(e,s){i(e,s,t)}};let T=class{constructor(t,i,e){this.rl=t,this.jE=i,this.be=[],this.$E=o.None,this.be.push(e.adBreakStart.asObservable().subscribe((({isLinear:t})=>{this.$E=t?o.Linear:o.NonLinear})),e.adBreakEnd.asObservable().subscribe((()=>{this.$E=o.None})))}getLoggingData(t=0){if(!this.UE(t))return;const i=this.qE();if(i.player.id=this.rl.playerId,i.environment.isTabFocus=this.rl.isPageInFocus,this.rl.playerEnvironment!==y.Q.Unknown&&(i.environment.renderEnvironment=this.rl.playerEnvironment),this.rl.currentMediaMetadata){const t=this.rl.currentMediaMetadata.mediaRevision;i.player.media={mediaId:this.rl.currentMediaMetadata.mediaId,mediaRevisionNumber:t?`${this.rl.currentMediaMetadata.mediaRevision}`:void 0,contentRevisionId:this.rl.currentMediaMetadata.contentRevisionId,isExternal:!!this.rl.currentMediaMetadata.isExternalMedia}}return this.rl.playerDimensions&&(i.player.size=this.rl.playerDimensions),i.player.isInView=this.jE.sessionViewabilityChanged.value.isInView,i.player.type=this.rl.playerType,this.rl.playerType!==b.e.Outstream&&(i.player.state=this.rl.playerState),i.player.advertising.adBreak=this.$E,i}dispose(){(0,S.i)(this.be)}UE(t){return!!this.rl.canTrackAllRequests||!!t}qE(){return{player:{media:{isExternal:!1},advertising:{adBreak:o.None},isInView:!1},environment:{}}}};T=P([(0,A.b2)(),(0,A.Yn)(A.Fw.ContainerScoped),x(0,(0,A.f3)(p.B)),x(1,(0,A.f3)(w.q)),x(2,(0,A.f3)(l.k)),_("design:paramtypes",["function"==typeof(m=void 0!==f.B&&f.B)?m:Object,"function"==typeof(v=void 0!==I.d&&I.d)?v:Object,"function"==typeof(g=void 0!==u.q&&u.q)?g:Object])],T);var k=e(51);const C=500;let E=window.location&&window.location.href;try{E=window.top.location.href}catch(t){}var M;!function(t){t.EMERGENCY="Emergency",t.ALERT="Alert",t.CRITICAL="Critical",t.ERROR="Error",t.WARN="Warn",t.INFO="Info"}(M||(M={}));const L={throttle:30,shouldSendMaxLog:!0,pacing:0,extraLogsPercentage:0};function B(t,i={}){i=Object.assign(Object.assign({},L),i);const e=function(t){return!("true"===(0,k.Ph)("cnxDebugLogs",t))}(t.pageUrl||E);if(!(e&&i.pacing>0)||function(t){const i=Math.min(Math.max(t,0),100);return!!(0,h.Vm)([100-i,i])}(i.pacing)){if(t.sessionId)try{const e=d.h.getSessionChildContainer(t.sessionId).resolve(T);t.extra=e.getLoggingData(i.extraLogsPercentage)}catch(t){}if(t.sessionId=t.sessionId?t.sessionId:n.S.sessionId,r&&e&&(n.S.incrementLogCount(t.message),n.S.isMaxLogOverflow(t.message)&&B({message:"Logging_max_log_overflow_1000",exception:t.message,callStack:t.callStack,level:M.ALERT,sessionId:t.sessionId},{shouldSendMaxLog:!1,throttle:100,extraLogsPercentage:100}),n.S.isMaxLog(t.message,i.throttle)))i.shouldSendMaxLog&&!n.S.isMaxLogSent(t.message)&&(n.S.setMaxLogSent(t.message),B({message:"Logging_max_log_sent",exception:t.message,callStack:t.callStack,level:M.CRITICAL,sessionId:n.S.sessionId}));else{if(void 0===t.callStack){const i=new Error(t.message);t.callStack=i.stack}if(t.callStack=t.callStack.substring(0,C),s.g.logToServer){t.pageUrl=t.pageUrl||E,t.version=s.g.version;let e="connatix.com";try{e=c.n.bundleDomain}catch(t){}const n="https://pl."+e;t.ddsource="browser",t.service="player",t.ua=navigator.userAgent,i.sendBeacon?a.n.sendJsonBeaconRequest(t,n):a.n.fetchXhttpRequest({requestUrl:n,requestType:"POST",withCredentials:!1},JSON.stringify(t)).catch((()=>{}))}!s.g.logToConsole&&e||function(t){let i;switch(t.level){case M.CRITICAL:i="#8B0000";break;case M.WARN:i="#FF8C00";break;case M.INFO:i="#000000"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${i}`)}(t)}}}},7332:(t,i,e)=>{"use strict";e.d(i,{DE:()=>r,ON:()=>a,Tc:()=>o,dO:()=>c,dQ:()=>n,mg:()=>d,oK:()=>h});var s=e(4798);function n(t,i,e,s,n){return e+(s-e)*function(t,i,e){return(e-t)/(i-t)}(t,i,n)}function r(t,i){return i.reduce(((i,e)=>Math.abs(e-t)<=Math.abs(i-t)?e:i))}function o(t,i){return i/100*t}function h(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e}function a(t){return!(0,s.r)(t.width)||!(0,s.r)(t.height)}function c(t,i){for(let e=i;e>1;e--)t%e==0&&i%e==0&&(t/=e,i/=e);return{widthRatio:t,heightRatio:i}}function d(t,i,e){const s=Math.min(i,e),n=Math.max(i,e);return t>=s&&t<=n}},7531:(t,i,e)=>{"use strict";e.d(i,{G_:()=>a,HD:()=>r,Ib:()=>o,S1:()=>h});var s=e(9791),n=e(4798);function r(t){for(const i in t)t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=`%22${encodeURIComponent(t[i])}%22`);return JSON.stringify(t).cnx_replaceAll('"',"")}function o(t,i){if(!(0,n.as)(t)||!(0,n.as)(i))return!1;const e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(i);return e.length===r.length&&e.every((e=>(0,s.s9)(t[e],i[e])))}function h(t,i){return Object.assign(Object.assign({},t),i)}function a(t,i){const e=Object.assign({},t);return i.forEach((t=>{delete e[t]})),e}},9600:(t,i,e)=>{"use strict";function s(t=[]){t.filter((t=>!!t)).forEach((t=>t.unsubscribe()))}e.d(i,{i:()=>s})},3003:(t,i,e)=>{"use strict";e.d(i,{EQ:()=>o,Ed:()=>a,IS:()=>h,VN:()=>c,f5:()=>r,yd:()=>d});var s=e(1187),n=e(4798);function r(t,i){return t.replace(/(?:\r\n|\r|\n)/g,i)}function o(t){try{return Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:(0,n.QM)(t[e])&&t[e].includes("%%")?void 0:t[e]})),{})}catch(i){return(0,s.n)({message:"sanitizeDfpMacros_error",exception:i.message,callStack:i.stack,level:s.D.WARN}),Object.keys(t).reduce(((i,e)=>Object.assign(Object.assign({},i),{[e]:(0,n.QM)(t[e])&&t[e].includes("%%")?void 0:t[e]})),{})}}function h(t,i){return`${t}-${i}`}function a(t,i){return t.match(i)||[]}function c(t,i,e){return(0,n.QM)(t)?t.substring(i,e):""}function d(t){return"true"===t||"false"!==t&&void 0}},1310:(t,i,e)=>{"use strict";e.d(i,{H8:()=>l,QI:()=>o,XF:()=>h,k$:()=>c,kw:()=>f,pP:()=>r,qe:()=>u,qt:()=>m,to:()=>a,w4:()=>p,x8:()=>d});var s=e(9357),n=e(4798);function r(t){let i,e;return(0,n.HD)(t)&&(i=t.match(s.T9),i&&(e=parseInt(i[1],10)*s.p7+parseInt(i[2],10)*s.uD+parseInt(i[3],10)*s.s_+parseInt(i[5]||0,10))),isNaN(e)?null:e}function o(t,i){return/^\d+(\.\d+)?%$/g.test(t)?i?i*parseFloat(t.replace("%",""))/100:null:r(t)}function h(t){return Date.now()+t*s.ti}function a(t,i=":"){const e=t=>t>=10?t:`0${t}`;return`${e(Math.floor(t/60))}${i}${e(Math.floor(t%60))}`}function c(t,i){const e=Date.now();return!(e<t||e>i)}function d(){const t=new Date;return t.getTime()-1e3*t.getTimezoneOffset()*60}function l(t){return Math.floor((Date.now()-t)/s.s_)}function u(t,i){return t>=i?t/s.s_:t}function p(t){return(0,n.hj)(t)?t*s.s_:null}function f(t){return Math.round(t/s.s_)}function m(t){var i=Math.floor(t/3600),e=Math.floor(t%3600/60),s=Math.floor(t%3600%60);let n="";return n=i>0?n+`${i}`.slice(-2)+" hours ":"",n+=e>0?`${e}`.slice(-2)+" minutes ":"",n+=s>0?`${s}`.slice(-2)+" seconds":"0 seconds",n}},4798:(t,i,e)=>{"use strict";function s(t){return"string"==typeof t}function n(t){return"number"==typeof t&&isFinite(t)}function r(t){return n(t)&&t>0}function o(t){return n(t)&&t>=0}function h(t){return s(t)&&t.length>0}function a(t){return void 0!==t}function c(t){return null===t}function d(t){return t&&t.stack&&t.message||t instanceof Error}function l(t){return"function"==typeof t}function u(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function p(t){return u(t)&&Object.keys(t).length>0}function f(t){try{if(t.contentWindow||t.contentDocument)return!0}catch(t){}return!1}function m(t,i){var e;return h(t)?!(!(null===(e=Object.values(i))||void 0===e?void 0:e.includes(t))||Object.keys(i).includes(t)):!!n(t)&&t in i}e.d(i,{$K:()=>a,Cz:()=>m,Ft:()=>c,HD:()=>s,QM:()=>h,VZ:()=>d,Xc:()=>o,Xz:()=>p,as:()=>u,cL:()=>f,hj:()=>n,mf:()=>l,r:()=>r})},6578:(t,i,e)=>{"use strict";e.d(i,{n:()=>d});var s,n=e(9791),r=e(4798),o=e(51),h=e(1187);!function(t){t.Brands="brands",t.Mobile="mobile",t.Architecture="architecture",t.Bitness="bitness",t.Model="model",t.Platform="platform",t.PlatformVersion="platformVersion",t.UaFullVersion="uaFullVersion",t.Wow64="wow64",t.FullVersionList="fullVersionList"}(s||(s={}));var a=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class c{constructor(){}static getInstance(){return this.INSTANCE||(this.INSTANCE=new c),this.INSTANCE}fetch(){var t,i;return a(this,void 0,void 0,(function*(){return(0,r.$K)(this.HE)?this.HE:(null===(i=null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgentData)||void 0===i?void 0:i.getHighEntropyValues)?(this.HE=yield this.zE(),this.HE):null}))}zE(){return a(this,void 0,void 0,(function*(){return(0,r.$K)(this.WE)||(this.WE=new Promise((t=>{window.navigator.userAgentData.getHighEntropyValues([s.FullVersionList,s.PlatformVersion,s.Architecture,s.Bitness,s.Model]).then((i=>t(i))).catch((()=>t(null)))}))),this.WE}))}}var d,l=e(5650),u=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};!function(t){let i;!function(t){t.DumpJson="Dump Json",t.ServerError="Server Error",t.ProtobufDecode="Protobuf_decode"}(i||(i={}));const e=3e4;function s(t,i){return(0,r.as)(i)?(Object.keys(i).forEach((e=>t=(0,o.Bp)(t,e,i[e]))),t):t}function a(t,i){return u(this,void 0,void 0,(function*(){let s=null;t.shouldSetClientHintsHeaders&&(s=yield c.getInstance().fetch());const n=function({requestUrl:t,requestType:i="POST",contentType:s="",responseType:n="",withCredentials:o=!1,timeout:h=e,shouldSetClientHintsHeaders:a},c=null){const d=new XMLHttpRequest;if(d.open(i,t,!0),a&&c){const{model:t,platformVersion:i,architecture:e,bitness:s,fullVersionList:n}=c;(0,r.QM)(i)&&d.setRequestHeader("X-Sec-CH-UA-Platform-Version",i),(0,r.QM)(e)&&d.setRequestHeader("X-Sec-CH-UA-Arch",e),(0,r.QM)(s)&&d.setRequestHeader("X-Sec-CH-UA-Bitness",s),(0,r.QM)(t)&&d.setRequestHeader("X-Sec-CH-UA-Model",t),(0,l.BZ)(n)&&d.setRequestHeader("X-Sec-CH-UA-Full-Version-List",n.map((t=>`"${t.brand}";v="${t.version}"`)).join(", "))}return s.length>0&&d.setRequestHeader("Content-Type",s),n.length>0&&(d.responseType=n),d.timeout=h,d.withCredentials=o,d}(t,s),o=new Date;return new Promise(((t,e)=>{n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE)if(200===n.status)t(n.response);else{let t="";try{t=n.responseText}catch(t){}const i=(new Date).getTime()-o.getTime();e(new Error(`Request fail. status:${n.status}, readyState:${n.readyState}, response:${t}, time:${i}`))}},n.ontimeout=()=>{const t=(new Date).getTime()-o.getTime();e(new Error(`Request timeout status:${n.status}. time:${t}`))},n.send(i)}))}))}function d(t,e,s,n){return new Promise(((r,o)=>{e.then((e=>{if(t){let a=null;try{const i=e?new Uint8Array(e):new Uint8Array;a=t.toObject(t.decode(i),{defaults:!0,arrays:!0,objects:!0})}catch(t){!function(t,e,s,n){let r;try{r=JSON.parse((new TextDecoder).decode(t))}catch(t){}r?(r.ErrorMessage===i.DumpJson&&(0,h.n)({message:i.DumpJson,exception:JSON.stringify(s),callStack:e,level:h.D.INFO}),r.ErrorMessage===i.ServerError&&(0,h.n)({message:i.ServerError,exception:e,level:h.D.WARN})):(0,h.n)({exception:`${e}__${n.message}`,message:i.ProtobufDecode,callStack:n.stack,level:h.D.WARN},{throttle:10})}(e,s,n,t),o(i.ProtobufDecode)}r(a)}})).catch((t=>{o(t)}))}))}function p(t,i,e){try{const s=(0,n.Vm)([95,5]);!s||i&&0!==Object.keys(i).length||(0,h.n)({message:"empty_proto_request",callStack:"empty_function_argument",exception:e,level:h.D.INFO},{shouldSendMaxLog:!1});const r=t.fromObject(i);!s||r&&0!==Object.keys(r).length||(0,h.n)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:e,level:h.D.INFO},{shouldSendMaxLog:!1});const o=t.encode(r).finish();return!s||o&&0!==Object.keys(o).length||(0,h.n)({message:"empty_proto_request",callStack:"empty_encode_result",exception:e,level:h.D.INFO},{shouldSendMaxLog:!1}),o}catch(t){throw(0,h.n)({exception:e,level:h.D.CRITICAL,callStack:JSON.stringify(i),message:"Protobuf_encode"},{throttle:10}),Error()}}t.fetchXhttpRequest=a,t.fetchXMLRequest=function(t,i=!0){const e=a({requestUrl:t,requestType:"GET",withCredentials:i,shouldSetClientHintsHeaders:!1});return new Promise(((t,i)=>{e.then((i=>{t(i)})).catch((t=>{i(t)}))}))},t.sendProtoRequest=function({protoResponse:t,protoRequest:i,requestData:e,endpoint:r,requestType:o,hasCredentials:c,queryParams:l,shouldLogErrors:u,shouldSetClientHintsHeaders:f,timeout:m}){const v=e?p(i,e,r):null;return function(t,i,e="POST",s,n,r,o,h=!1){return d(t,a({requestUrl:i,requestType:e,withCredentials:n,shouldSetClientHintsHeaders:h,contentType:"POST"===e?"multipart/form-data":"",responseType:"arraybuffer",timeout:r},s),i,o)}(t,r=s(r,l),o,v,c,m,e,f).catch((t=>{throw u&&(0,n.Vm)([95,5])&&(0,h.n)({message:"Xhr_error",exception:r,callStack:`${t}, requestData: ${JSON.stringify(e)}`,level:h.D.INFO}),new Error(t)}))},t.sendProtoBeaconRequest=function({protoRequest:t,requestData:i,endpoint:e,queryParams:n=null}){e=s(e,n);const r=i?p(t,i,e):null;return navigator.sendBeacon(e,r)},t.sendJsonBeaconRequest=function(t,i){const e=new Blob([JSON.stringify(t)],{type:"application/json"});return navigator.sendBeacon(i,e)},t.trackPixel=function(t){try{(new Image).src=t}catch(t){(0,h.n)({message:"Xhr_trackPixel",exception:t.message,callStack:t.stack,level:h.D.CRITICAL})}}}(d||(d={}))},8021:(t,i,e)=>{"use strict";e.d(i,{m$:()=>s});const s={VideoSizeSlot:"cnx-ad-video-size-slot"}},5204:(t,i,e)=>{"use strict";e.d(i,{k:()=>o});var s=e(6716),n=e(8659),r=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let o=class{constructor(){this.adClick=new s.x,this.adImpression=new s.x,this.adInView=new s.x,this.adQuartile=new s.x,this.auctionInformation=new s.x,this.heavyAd=new s.x,this.adPrebid=new s.x,this.adPostbid=new s.x,this.adBid=new s.x,this.startBidTracking=new s.x,this.missedImpressionOutOfView=new s.x,this.adBidTracking=new s.x,this.adBreakStart=new s.x,this.adBreakEnd=new s.x,this.onBidFetchStart=new s.x,this.onBidFetchEnd=new s.x}};o=r([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],o)},1781:()=>{},5675:(t,i,e)=>{"use strict";e.d(i,{Z:()=>o});var s=e(5650),n=e(3020),r=e(9791);function o(t,i=window,o=window){const h=`cnx-async-bundle-${(0,r.dz)()}`,a={id:h,src:t};return new Promise(((t,r)=>{(0,n.dZ)(a,o.document.head,o,(()=>{try{i.cnx_webpack_global&&(0,s.BZ)(o.cnx_webpack_global)&&o.cnx_webpack_global.forEach((t=>{i.cnx_webpack_global.push(t)}))}catch(t){r(t)}t(),(0,n.uC)(h,o.document)}),(()=>{(0,n.uC)(h,e.g.document),r(new Error("script load error"))}),!1)}))}},5672:(t,i,e)=>{"use strict";e.d(i,{o:()=>Ni});var s={};e.r(s);var n={};e.r(n);var r={};e.r(r);var o={};e.r(o);var h={};e.r(h);var a={};e.r(a);var c={};e.r(c);var d={};e.r(d);var l={};e.r(l);var u={};e.r(u);var p={};e.r(p);class f{}f.MAX_STRING_LENGTH=99,f.TIME_BIDS_INTERVAL_FREQUENCY=5e3;var m,v,g,y=e(5204),b=e(1781),I=e(8395),w=e(8659),S=e(3003),A=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},P=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},_=function(t,i){return function(e,s){i(e,s,t)}};let x=m=class{constructor(t,i){this.tf=t,this.Ki=i,this.be=[],this.GE=[],this.JE=[],this.QE=[],this.YE=null,this.KE()}static ZE(t){return t.map((t=>Object.assign(Object.assign({},t),{reason:(0,S.VN)(t.reason,0,f.MAX_STRING_LENGTH)})))}destroy(){this.YE&&(this.Ki.clearInterval(this.YE),this.YE=null)}KE(){this.be.push(this.tf.adBid.subscribe((t=>{this.tM(t)})),this.tf.adPostbid.subscribe((t=>{this.iM(t)})),this.tf.adPrebid.subscribe((t=>{this.eM(t)})),this.tf.startBidTracking.subscribe((()=>{this.sM()})))}sM(){this.YE||(this.YE=this.Ki.setInterval((()=>{this.nM()}),f.TIME_BIDS_INTERVAL_FREQUENCY))}eM(t){this.JE.push(t)}iM(t){this.QE.push(t)}tM(t){t.shouldTrackBid&&this.GE.push(t)}nM(){this.oM(),this.JE=[],this.GE=[],this.QE=[]}oM(){0===this.JE.length&&0===this.GE.length&&0===this.QE.length||(this.QE=m.ZE(this.QE),this.tf.adBidTracking.next({prebidList:this.JE,bidList:this.GE,postbidList:this.QE}))}};x=m=A([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped),_(0,(0,w.f3)(y.k)),_(1,(0,w.f3)(I.f)),P("design:paramtypes",["function"==typeof(v=void 0!==b.q&&b.q)?v:Object,"function"==typeof(g=void 0!==s.ITimerService&&s.ITimerService)?g:Object])],x);var T=e(2239),k=e(6716),C=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let E=class{constructor(){this.mediaQuartile=new k.x,this.mediaClick=new k.x}};E=C([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped)],E);var M=e(6565);class L{}L.TRACKING_POINTS=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800,timesRepeatDelay:Number.MAX_SAFE_INTEGER}];var B=e(9357),R=e(4065),O=e(6515),D=e(4975),V=e(4978),F=e(6196),N=e(6798),j=e(2566);function $(t){return i=function(){return t},(0,N.e)((function(t,s){var n=0;t.subscribe((0,j.x)(s,(function(t){s.next(i.call(e,t,n++))})))}));var i,e}var U,q,H,z=e(89),W=e(1310),G=e(4798),X=e(8858),J=e(9600),Q=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Y=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},K=function(t,i){return function(e,s){i(e,s,t)}};let Z=U=class{constructor(t,i){this.jE=t,this.Ki=i,this.hM=!1,this.aM=!1,this.be=[],this.cM=new O.X(L.TRACKING_POINTS[0]),this.dM=new R.B(this.Ki,Number.MAX_SAFE_INTEGER,U.TIMER_TICK),this.lM=new R.B(this.Ki,Number.MAX_SAFE_INTEGER,U.TIMER_TICK),this.uM()}destroy(){(0,J.i)(this.be)}uM(){const t=this.jE.sessionRendered.pipe((0,z.q)(1)).subscribe((()=>{this.pM()}));this.be.push(this.jE.sessionPlaybackChanged.subscribe((({isPlaying:t})=>{this.fM(t)})),this.jE.sessionViewabilityChanged.subscribe((({isInView:t})=>{this.mM(t)})),this.jE.sessionViewabilityChanged.subscribe((({isInView:t})=>{this.mM(t)})),t)}fM(t){this.hM!==t&&(this.hM=t,this.aM&&this.hM&&this.lM.start(),this.hM?this.dM.start():(this.dM.stop(),this.lM.stop()))}mM(t){this.aM!==t&&(this.aM=t,this.aM&&this.hM?this.lM.start():this.aM||this.lM.stop())}pM(){this.be.push(this.cM.pipe((0,D.h)((t=>!!t)),(0,V.w)((t=>(0,F.H)((null==t?void 0:t.delay)*B.s_).pipe($(t))))).subscribe((t=>{this.vM(t)})))}vM(t){const i=t;let e=L.TRACKING_POINTS.indexOf(i);i.timesRepeatDelay--,this.gM(i.delay),0===i.timesRepeatDelay&&e++,(0,G.$K)(L.TRACKING_POINTS[e])&&this.yM(L.TRACKING_POINTS[e])}yM(t){this.cM.next(t)}gM(t){const i=(0,W.kw)(this.dM.timeElapsed),e=(0,W.kw)(this.lM.timeElapsed),s={sessionTimeInSeconds:t,timePlayedInSeconds:i<0?0:i,timePlayedInViewInSeconds:e<0?0:e};this.dM.reset(),this.lM.reset(),this.jE.sessionTimeElapsed.next(s)}};Z.TIMER_TICK=200,Z=U=Q([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped),K(0,(0,w.f3)(M.q)),K(1,(0,w.f3)(I.f)),Y("design:paramtypes",["function"==typeof(q=void 0!==X.d&&X.d)?q:Object,"function"==typeof(H=void 0!==s.ITimerService&&s.ITimerService)?H:Object])],Z);var tt=e(1187),it=e(289),et=e(7945),st=e(6153),nt=e(6578),rt=e(307),ot=e(3802);class ht{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,isAdBlockerUsed:s,bundleName:n,playerWidth:r,playerHeight:o,pageInsightIndexes:h}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(e),hasAdBlocker:s,bundleName:n,playerHeight:o,playerWidth:r,pageInsightIndexes:h,dynamicElkFieldsValues:i}}}class at{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,pageInsightIndexes:s}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(e),pageInsightIndexes:s,dynamicElkFieldsValues:i}}}class ct{static getProtoPayload(t){const{trackingMetadata:i,adBlockerDetectionType:e,dynamicElkFields:s}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(i),adBlockDetectionType:ot.EN.getProtoAdBlockerDetectionType(e),dynamicElkFieldsValues:s}}}class dt{static getProtoPayload(t){const{trackingMetadata:i,sessionTimePassedSinceLastTracking:e,secondsPlayedInViewSinceLastTracking:s,secondsPlayedSinceLastTracking:n,pageInsightIndexes:r}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(i),sessionTime:e,timePlayed:n,timePlayedInView:s,pageInsightIndexes:r}}}class lt{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,pageInsightIndexes:s}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(e),pageInsightIndexes:s,dynamicElkFieldsValues:i}}}class ut{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,adBreakType:s,playerWidth:n,pageInsightIndexes:r}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(e),adBreak:ot.EN.getProtoAdBreakType(s),playerWidth:n,pageInsightIndexes:r,dynamicElkFieldsValues:i}}}class pt{static getProtoPayload(t){const{trackingMetadata:i,mediaId:e,quartile:s,insightIndexes:n,sentimentAnalysis:r}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(i),quartile:ot.EN.getProtoQuartile(s),mediaGuid:e,sentimentAnalysis:r?ot.XE.getProtoSentimentAnalysis(r):void 0,insightIndexes:n}}}class ft{static getProtoPayload(t){const{trackingMetadata:i,type:e,mediaId:s,clickUrl:n,insightIndexes:r,sentimentAnalysis:o,slideTitle:h,slideNumber:a,slideMediaType:c}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(i),type:ot.EN.getProtoMediaClickType(e),mediaGuid:s,slideMediaType:c?ot.EN.getProtoMediaType(c):void 0,sentimentAnalysis:o?ot.XE.getProtoSentimentAnalysis(o):void 0,clickUrl:n,slideTitle:h,slideNumber:a,insightIndexes:r}}}var mt=e(3816),vt=e(5650);class gt{static getProtoPayload(t){const{trackingMetadata:i,hasGdprConsent:e,gdprConsentMode:s,isExplorationMode:n,mediaId:r,shouldLogEverything:o,lineItemAbTest:h,prebidList:a,bidList:c,postbidList:d}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(i),mediaGuid:r,hasGdprConsentPayload:e,gdprConsentMode:s?ot.EN.getProtoGDPRConsentMode(s):void 0,lineItemAbTestInformation:h?ot.p.getProtoLineItemAbTest(h):void 0,prebids:a&&(0,vt.BZ)(a)?a.map((t=>gt.getProtoPrebid(t))):void 0,bids:c&&(0,vt.BZ)(c)?c.map((t=>gt.getProtoBid(t))):void 0,postBids:d&&(0,vt.BZ)(d)?d.map((t=>gt.getProtoPostbid(t))):void 0,shouldLogEverything:o,isExplorationMode:n}}static getProtoPrebid(t){const{advertiserLineItemId:i,publisherLineItemId:e,playerReason:s,partnerReason:n,requestsCount:r,isUserSynced:o,timeSpentMs:h,playerWidth:a,playerHeight:c,partnerCustomHeaders:d,prebidJsBidderName:l,requestedFloorPrice:u,floorPriceInformation:p,dynamicElkFields:f}=t;return{reason:ot.EN.getProtoPrebidReason(s),partnerReason:ot.EN.getProtoPrebidPartnerReason(n),requestNumber:r,timeSpent:h,floorPriceInformation:p?ot.wE.getProtoFloorPriceInformation(p):void 0,requestedFloorPrice:u,advertiserLineItemId:i,publisherLineItemId:e,isUserSynced:o,playerWidth:a,playerHeight:c,partnerCustomHeaders:d,prebidJsBidderName:l,dynamicElkFieldsValues:f}}static getProtoBid(t){const{advertiserLineItemId:i,publisherLineItemId:e,requestsCount:s,isUserSynced:n,timeSpentMs:r,playerWidth:o,playerHeight:h,rtbCreativeId:a,rtbSeatId:c,rtbADomain:d,rtbDspId:l,cnxBidId:u,encryptedPrice:p,customClientPrice:f,prebidJsBidderName:m,requestedFloorPrice:v,floorPriceInformation:g,dynamicElkFields:y}=t;return{requestNumber:s,timeSpent:r,creativeId:a,rtbAdomain:d,dspId:l,floorPriceInformation:g?ot.wE.getProtoFloorPriceInformation(g):void 0,rtbSeatId:c,cnxBidId:u,advertiserLineItemId:i,publisherLineItemId:e,isUserSynced:n,playerWidth:o,playerHeight:h,encryptedPrice:p,customClientPrice:f,prebidJsBidderName:m,requestedFloorPrice:v,dynamicElkFieldsValues:y}}static getProtoPostbid(t){const{advertiserLineItemId:i,publisherLineItemId:e,reason:s,isBidLoaded:n,requestsCount:r,adSourceType:o,vastMediaType:h,adBreakType:a,isUserSynced:c,timeSpentMs:d,winToAdLoadedTimeMs:l,bidElapsedTimeSeconds:u,playerWidth:p,playerHeight:f,adPodSlotPosition:m,auctionInformation:v,auctionReason:g,rtbCreativeId:y,rtbSeatId:b,rtbADomain:I,rtbDspId:w,cnxBidId:S,prebidJsBidderName:A,requestedFloorPrice:P,floorPriceInformation:_,liveRampType:x,discount:T,dynamicElkFields:k}=t;return{error:s,adBreakType:ot.EN.getProtoAdBreakType(a),adsourceType:ot.EN.getProtoAdSourceType(o),auctionInformation:v?ot.Ti.getProtoAuctionInformation(v):void 0,auctionPostbidReason:g?ot.EN.getProtoAuctionPostbidReason(g):void 0,floorPriceInformation:_?ot.wE.getProtoFloorPriceInformation(_):void 0,discount:T?mt.d.getProtoDiscount(T):void 0,floorPrice:P,liveRampType:x?ot.EN.getProtoLiveRamp(x):void 0,timeSpent:d,winToAdLoadedTime:l,requestNumber:r,creativeId:y,rtbAdomain:I,dspId:w,rtbSeatId:b,cnxBidId:S,advertiserLineItemId:i,publisherLineItemId:e,isBidLoaded:n,vastMediaType:h,isUserSynced:c,bidElapsedTimeSeconds:u,playerWidth:p,playerHeight:f,adPodSlotPosition:m,prebidJsBidderName:A,dynamicElkFieldsValues:k}}}class yt{static getProtoPayload(t){const{cnxBidId:i,auctionLossReason:e,auctionInformation:s}=t;return{cnxBidId:i,auctionInformation:s?ot.Ti.getProtoAuctionInformation(s):void 0,auctionLossReason:ot.EN.getProtoAuctionLossReason(e)}}static fromProtoAuctionInformation(t){const{cnxBidId:i,auctionLossReason:e,auctionInformation:s}=t;return{cnxBidId:i,auctionInformation:s?ot.Ti.fromProtoAuctionInformation(s):void 0,auctionLossReason:ot.EN.fromProtoAuctionLossReason(e)}}}class bt{static getProtoPayload(t){const{dynamicElkFields:i,trackingMetadata:e,advertiserLineItemId:s,type:n}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(e),heavyAdBlockTypeEnum:ot.EN.getProtoHeavyAdType(n),advertiserLineItemId:s,dynamicElkFieldsValues:i}}}class It{static getProtoPayload(t){const{trackingMetadata:i,advertiserLineItemId:e,publisherLineItemId:s,adBreakType:n,adSourceType:r,vastMediaType:o,adPodSlotPosition:h,isExplorationMode:a,mediaId:c,isUserSynced:d,timeSpentMs:l,winToAdLoadedTimeMs:u,startAdToImpressionTimeMs:p,declaredDurationSeconds:f,impressionDurationSeconds:m,encryptedPrice:v,rtbADomain:g,rtbSeatId:y,rtbCreativeId:b,rtbDspId:I,cnxBidId:w,customClientPrice:S,prebidJsBidderName:A,auctionInformation:P,playerWidth:_,playerHeight:x,hasAdSkip:T,requestsCount:k,requestedFloorPrice:C,floorPriceInformation:E,bidElapsedTimeSeconds:M,insightIndexes:L,pageInsightIndexes:B,sentimentAnalysis:R,liveRampType:O,lineItemAbTest:D,internalAuctionInformation:V,iasSegmentCodes:F,discount:N,dynamicElkFields:j,serverBillingNoticeUrls:$}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(i),adBreakType:ot.EN.getProtoAdBreakType(n),adsourceType:ot.EN.getProtoAdSourceType(r),auctionInformation:P?ot.Ti.getProtoAuctionInformation(P):void 0,internalAuction:V?ot.W1.getProtoInternalAuction(V):void 0,timeSpent:l,winToAdLoadedTime:u,startAdToImpressionTime:p,declaredDuration:f,impressionDuration:m,sentimentAnalysis:R?ot.XE.getProtoSentimentAnalysis(R):void 0,lineItemAbTestInformation:D?ot.p.getProtoLineItemAbTest(D):void 0,floorPriceInformation:E?ot.wE.getProtoFloorPriceInformation(E):void 0,discount:N?mt.d.getProtoDiscount(N):void 0,mediaGuid:c,floorPrice:C,creativeId:b,rtbAdomain:g,dspId:I,requestNumber:k,liveRampType:O?ot.EN.getProtoLiveRamp(O):void 0,dynamicElkFieldsValues:j,cnxBidId:w,rtbSeatId:y,vastMediaType:o,advertiserLineItemId:e,publisherLineItemId:s,isExplorationMode:a,isUserSynced:d,playerWidth:_,playerHeight:x,hasAdSkip:T,bidElapsedTimeSeconds:M,adPodSlotPosition:h,encryptedPrice:v,customClientPrice:S,prebidJsBidderName:A,insightIndexes:L,pageInsightIndexes:B,iasSegmentCodes:F,serverBillingNoticeUrls:$}}}class wt{static getProtoPayload(t){const{trackingMetadata:i,advertiserLineItemId:e,publisherLineItemId:s,adBreakType:n,mediaId:r,hasSkipAd:o,rtbSeatId:h,rtbADomain:a,rtbDspId:c,insightIndexes:d,sentimentAnalysis:l,pageInsightIndexes:u,lineItemAbTest:p,iasSegmentCodes:f,dynamicElkFields:m,discount:v}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(i),adBreakType:ot.EN.getProtoAdBreakType(n),sentimentAnalysis:l?ot.XE.getProtoSentimentAnalysis(l):void 0,lineItemAbTestInformation:p?ot.p.getProtoLineItemAbTest(p):void 0,discount:v?mt.d.getProtoDiscount(v):void 0,mediaGuid:r,hasAdSkip:o,dynamicElkFieldsValues:m,rtbAdomain:a,advertiserLineItemId:e,publisherLineItemId:s,rtbSeatId:h,dspId:c,insightIndexes:d,pageInsightIndexes:u,iasSegmentCodes:f}}}class St{static getProtoPayload(t){const{trackingMetadata:i,advertiserLineItemId:e,publisherLineItemId:s,mediaId:n,type:r,rtbSeatId:o,dspId:h,rtbADomain:a,insightIndexes:c,hasSkipAd:d,adBreakType:l,sentimentAnalysis:u,pageInsightIndexes:p,lineItemAbTest:f,iasSegmentCodes:m}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(i),quartile:ot.EN.getProtoQuartile(r),adBreakType:ot.EN.getProtoAdBreakType(l),lineItemAbTestInformation:f?ot.p.getProtoLineItemAbTest(f):void 0,sentimentAnalysis:u?ot.XE.getProtoSentimentAnalysis(u):void 0,mediaGuid:n,hasAdSkip:d,rtbAdomain:a,rtbSeatId:o,dspId:h,advertiserLineItemId:e,publisherLineItemId:s,insightIndexes:c,pageInsightIndexes:p,iasSegmentCodes:m}}}class At{static getProtoPayload(t){const{trackingMetadata:i,advertiserLineItemId:e,publisherLineItemId:s,mediaId:n,type:r,adBreakType:o,insightIndexes:h,sentimentAnalysis:a,pageInsightIndexes:c,lineItemAbTest:d,iasSegmentCodes:l}=t;return{trackingRequestMeta:ot.yz.getProtoTrackingMetadata(i),mediaGuid:n,type:ot.EN.getProtoAdClickType(r),adBreakType:ot.EN.getProtoAdBreakType(o),sentimentAnalysis:a?ot.XE.getProtoSentimentAnalysis(a):void 0,lineItemAbTestInformation:d?ot.p.getProtoLineItemAbTest(d):void 0,advertiserLineItemId:e,publisherLineItemId:s,insightIndexes:h,pageInsightIndexes:c,iasSegmentCodes:l}}}class Pt{static getTrackingResponseFromProto(t){const{errorMessage:i,adServerLineItemName:e,impressionRevenue:s,isViewabilityRestricted:n,platformCappedLineItemIdList:r}=t;return{errorMessage:i,adServerLineItemName:e,impressionRevenue:s,isViewabilityRestricted:n,platformCappedLineItemIdList:r}}}var _t,xt,Tt=e(6286),kt=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Ct=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},Et=function(t,i){return function(e,s){i(e,s,t)}},Mt=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};let Lt=_t=class{constructor(t){this.wb=t}static DP(t,i){(0,tt.n)({message:`ProtoTrackingCallerService_error_${i}`,level:tt.D.INFO,exception:t?JSON.stringify(t):void 0},{throttle:1,pacing:1,shouldSendMaxLog:!1})}sessionRenderEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.session_rendered,it.ProtoSessionRenderedRequest,ht.getProtoPayload(t))}))}playerStartEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.playerStart,it.ProtoPlayerStartRequest,at.getProtoPayload(t))}))}adOpportunityEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.adOpportunity,it.ProtoAdOpportunityRequest,ut.getProtoPayload(t))}))}sessionAdBlockerEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.sessionAdBlocker,it.ProtoSessionAdBlockerRequest,ct.getProtoPayload(t))}))}sessionTimeEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.session_time,it.ProtoSessionTimeTrackingRequest,dt.getProtoPayload(t))}))}sessionInViewEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.session_view,it.ProtoSessionViewRequest,lt.getProtoPayload(t))}))}mediaClickEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.media_click,it.ProtoMediaClickTrackingRequest,ft.getProtoPayload(t))}))}mediaQuartileEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.media_quartile,it.ProtoMediaQuartileRequest,pt.getProtoPayload(t))}))}adBidEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.bids,it.ProtoBidTrackingsRequest,gt.getProtoPayload(t))}))}auctionInformationEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.auctionInformation,it.ProtoAuctionInfoRequest,yt.getProtoPayload(t))}))}adImpressionEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.ad_impression,it.ProtoVideoAdImpressionRequest,It.getProtoPayload(t),t.advertiserLineItemId)}))}adInViewEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.ad_impression_viewable,it.ProtoVideoAdImpressionViewableRequest,wt.getProtoPayload(t),t.advertiserLineItemId)}))}adQuartileEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.ad_quartile,it.ProtoVideoAdQuartilesRequest,St.getProtoPayload(t),t.advertiserLineItemId)}))}adClickEvent(t){return Mt(this,void 0,void 0,(function*(){return this.bM(st.n.endPoints.tracking.ad_click,it.ProtoAdClickTrackingRequest,At.getProtoPayload(t),t.advertiserLineItemId)}))}heavyAdEvent(t){this.IM(st.n.endPoints.tracking.heavy_ad_intervention,it.ProtoHeavyAdTrackingRequest,bt.getProtoPayload(t))}bM(t,i,e,s){return Mt(this,void 0,void 0,(function*(){try{const n=yield nt.n.sendProtoRequest({endpoint:t,requestData:e,queryParams:{[rt.Fk]:et.g.version,[rt.cc]:st.n.tier},protoRequest:i,protoResponse:it.ProtoTrackingResponse,hasCredentials:!0,shouldLogErrors:!0}),r=Pt.getTrackingResponseFromProto(n);this.wb.onResponseReceived(r,s)}catch(i){_t.DP(i,t)}}))}IM(t,i,e){try{nt.n.sendProtoBeaconRequest({endpoint:t,requestData:e,queryParams:{[rt.Fk]:et.g.version,[rt.cc]:st.n.tier},protoRequest:i,shouldLogErrors:!1})}catch(i){_t.DP(i,t)}}};Lt=_t=kt([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped),Et(0,(0,w.f3)(Tt.j)),Ct("design:paramtypes",["function"==typeof(xt=void 0!==n.ITrackingResponseService&&n.ITrackingResponseService)?xt:Object])],Lt);var Bt=e(3432);class Rt{}Rt.CUSTOM_TEST_PLAYER_ID="e4984e88-9ff4-45a3-8b9d-33aabcad634e",Rt.CUSTOM_SESSION_ID="x1291569711993656821050542063616";var Ot=e(6666);class Dt{static fromPayloadToTracking(t,i){var e;const{type:s,adBreakType:n,publisherLineItemId:r,advertiserLineItemId:o}=t,{currentMediaMetadata:{mediaId:h,insights:a,sentimentAnalysis:c},iasSegmentCodes:d,trackingRequestMeta:l,lineItemAbTestInformation:u}=i;return{type:s,adBreakType:n,publisherLineItemId:r,advertiserLineItemId:o,mediaId:h,iasSegmentCodes:d,insightIndexes:a,trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(l),pageInsightIndexes:null===(e=Ot.k.pageInsights)||void 0===e?void 0:e.insights,sentimentAnalysis:c?ot.XE.fromProtoGetSentimentAnalysis(c):void 0,lineItemAbTest:u?ot.p.fromProtoLineItemAbTestFromProto(u):void 0}}}class Vt{static fromPayloadToTracking(t,i){var e;const{width:s,height:n}=i.playerDimensions,{currentMediaMetadata:{mediaId:r,insights:o,sentimentAnalysis:h},lineItemAbTestInformation:a}=i,{adSourceType:c,advertiserLineItemId:d,publisherLineItemId:l,customClientPrice:u,encryptedPrice:p,prebidJsBidderName:f,rtbADomain:m,rtbCreativeId:v,rtbSeatId:g,isUserSynced:y,timeSpentMs:b,vastMediaType:I,rtbDspId:w,cnxBidId:S,winToAdLoadedTimeMs:A,startAdToImpressionTimeMs:P,impressionDurationSeconds:_,declaredDurationSeconds:x,isExplorationMode:T,requestsCount:k,requestedFloorPrice:C,floorPriceInformation:E,bidElapsedTimeSeconds:M,adBreakType:L,internalAuctionInformation:B,auctionInformation:R,dynamicElkFields:O,hasAdSkip:D,discount:V,liveRampType:F,serverBillingNoticeUrls:N}=t;return{adSourceType:c,advertiserLineItemId:d,publisherLineItemId:l,customClientPrice:u,encryptedPrice:p,prebidJsBidderName:f,rtbADomain:m,rtbCreativeId:v,rtbSeatId:g,isUserSynced:y,timeSpentMs:b,vastMediaType:I,rtbDspId:w,cnxBidId:S,winToAdLoadedTimeMs:A,startAdToImpressionTimeMs:P,impressionDurationSeconds:_,declaredDurationSeconds:x,isExplorationMode:T,requestsCount:k,requestedFloorPrice:C,floorPriceInformation:E,bidElapsedTimeSeconds:M,adBreakType:L,internalAuctionInformation:B,auctionInformation:R,dynamicElkFields:O,hasAdSkip:D,mediaId:r,liveRampType:F,serverBillingNoticeUrls:N,trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(i.trackingRequestMeta),lineItemAbTest:a?ot.p.fromProtoLineItemAbTestFromProto(a):void 0,iasSegmentCodes:i.iasSegmentCodes,playerWidth:s,playerHeight:n,insightIndexes:o,sentimentAnalysis:h?ot.XE.fromProtoGetSentimentAnalysis(h):void 0,pageInsightIndexes:null===(e=Ot.k.pageInsights)||void 0===e?void 0:e.insights,discount:V?mt.d.fromProtoDiscount(V):void 0}}}class Ft{static fromPayloadToTracking(t,i){var e;const{currentMediaMetadata:{mediaId:s,insights:n,sentimentAnalysis:r},lineItemAbTestInformation:o,trackingRequestMeta:h,iasSegmentCodes:a}=i,{publisherLineItemId:c,advertiserLineItemId:d,rtbSeatId:l,rtbDspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m,discount:v}=t;return{mediaId:s,publisherLineItemId:c,advertiserLineItemId:d,rtbSeatId:l,rtbDspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m,iasSegmentCodes:a,discount:v,trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(h),lineItemAbTest:o?ot.p.fromProtoLineItemAbTestFromProto(o):void 0,insightIndexes:n,sentimentAnalysis:r?ot.XE.fromProtoGetSentimentAnalysis(r):void 0,pageInsightIndexes:null===(e=Ot.k.pageInsights)||void 0===e?void 0:e.insights}}}class Nt{static fromPayloadToTracking(t,i){var e;const{currentMediaMetadata:{sentimentAnalysis:s,mediaId:n,insights:r},lineItemAbTestInformation:o,iasSegmentCodes:h}=i,{advertiserLineItemId:a,publisherLineItemId:c,type:d,rtbSeatId:l,dspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m}=t;return{mediaId:n,advertiserLineItemId:a,publisherLineItemId:c,type:d,rtbSeatId:l,dspId:u,adBreakType:p,hasSkipAd:f,rtbADomain:m,iasSegmentCodes:h,insightIndexes:r,trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(i.trackingRequestMeta),sentimentAnalysis:s?ot.XE.fromProtoGetSentimentAnalysis(s):void 0,pageInsightIndexes:null===(e=Ot.k.pageInsights)||void 0===e?void 0:e.insights,lineItemAbTest:o?ot.p.fromProtoLineItemAbTestFromProto(o):void 0}}}var jt=e(9361);class $t{static fromPayloadToTracking(t,i){const{mediaId:e,clickUrl:s,sentimentAnalysis:n,slideTitle:r,slideNumber:o,slideMediaType:h,insights:a}=i.currentMediaMetadata,c=t.type||jt.$u.Click;return{trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(i.trackingRequestMeta),slideMediaType:h?ot.EN.fromProtoGetMediaType(h):void 0,sentimentAnalysis:n?ot.XE.fromProtoGetSentimentAnalysis(n):void 0,clickUrl:c===jt.$u.UrlClick?s:void 0,insightIndexes:a,mediaId:e,type:c,slideTitle:r,slideNumber:o}}}class Ut{static fromPayloadToTracking(t,i,e){const{currentMediaMetadata:s,isExplorationMode:n,lineItemAbTestInformation:r,canTrackAllRequests:o,hasGdprConsentPayload:h,playerDimensions:a}=i,c=t.prebidList.map((t=>zt.fromPayloadToTracking(t,a))),d=t.bidList.map((t=>qt.fromPayloadToTracking(t,a))),l=t.postbidList.map((t=>Ht.fromPayloadToTracking(t,a)));return{isExplorationMode:n,gdprConsentMode:e,trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(i.trackingRequestMeta),shouldLogEverything:o,prebidList:c,bidList:d,postbidList:l,mediaId:null==s?void 0:s.mediaId,hasGdprConsent:h,lineItemAbTest:r?ot.p.fromProtoLineItemAbTestFromProto(r):void 0}}}class qt{static fromPayloadToTracking(t,i){const{width:e,height:s}=i,{encryptedPrice:n,customClientPrice:r,floorPriceFactorBypassReason:o,rtbCreativeId:h,rtbSeatId:a,rtbADomain:c,rtbDspId:d,cnxBidId:l,publisherLineItemId:u,advertiserLineItemId:p,requestsCount:f,isUserSynced:m,timeSpentMs:v,requestedFloorPrice:g,floorPriceInformation:y,prebidJsBidderName:b,dynamicElkFields:I}=t;return{playerWidth:e,playerHeight:s,encryptedPrice:n,customClientPrice:r,floorPriceFactorBypassReason:o,rtbCreativeId:h,rtbSeatId:a,rtbADomain:c,rtbDspId:d,cnxBidId:l,publisherLineItemId:u,advertiserLineItemId:p,requestsCount:f,isUserSynced:m,timeSpentMs:v,requestedFloorPrice:g,floorPriceInformation:y,prebidJsBidderName:b,dynamicElkFields:I}}}class Ht{static fromPayloadToTracking(t,i){const{width:e,height:s}=i,{reason:n,adSourceType:r,vastMediaType:o,bidElapsedTimeSeconds:h,isBidLoaded:a,winToAdLoadedTimeMs:c,adBreakType:d,auctionInformation:l,auctionReason:u,adPodSlotPosition:p,prebidJsBidderName:f,dynamicElkFields:m,publisherLineItemId:v,advertiserLineItemId:g,isUserSynced:y,rtbCreativeId:b,rtbSeatId:I,rtbADomain:w,rtbDspId:S,cnxBidId:A,timeSpentMs:P,requestsCount:_,requestedFloorPrice:x,floorPriceInformation:T,discount:k,liveRampType:C}=t;return{playerWidth:e,playerHeight:s,reason:n,adSourceType:r,vastMediaType:o,bidElapsedTimeSeconds:h,isBidLoaded:a,winToAdLoadedTimeMs:c,adBreakType:d,auctionInformation:l,auctionReason:u,adPodSlotPosition:p,prebidJsBidderName:f,dynamicElkFields:m,publisherLineItemId:v,advertiserLineItemId:g,isUserSynced:y,rtbCreativeId:b,rtbSeatId:I,rtbADomain:w,rtbDspId:S,cnxBidId:A,timeSpentMs:P,requestsCount:_,requestedFloorPrice:x,floorPriceInformation:T,discount:k,liveRampType:C}}}class zt{static fromPayloadToTracking(t,i){const{width:e,height:s}=i,{playerReason:n,partnerReason:r,partnerCustomHeaders:o,publisherLineItemId:h,advertiserLineItemId:a,requestedFloorPrice:c,requestsCount:d,isUserSynced:l,prebidJsBidderName:u,timeSpentMs:p,floorPriceInformation:f,dynamicElkFields:m}=t;return{playerWidth:e,playerHeight:s,playerReason:n,partnerReason:r,partnerCustomHeaders:o,publisherLineItemId:h,advertiserLineItemId:a,requestedFloorPrice:c,requestsCount:d,isUserSynced:l,prebidJsBidderName:u,timeSpentMs:p,floorPriceInformation:f,dynamicElkFields:m}}}e(7129);var Wt,Gt,Xt,Jt,Qt,Yt,Kt,Zt,ti=e(6661),ii=e(5742),ei=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},si=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},ni=function(t,i){return function(e,s){i(e,s,t)}};let ri=class{constructor(t,i,e,s,n,r,o,h){this.rl=t,this.jE=i,this.wM=e,this._M=s,this.xM=n,this.tf=r,this.TM=o,this.Kd=h,this.be=[],this.uM(),this.KE(),this.kM()}destroy(){(0,J.i)(this.be),this._M.destroy(),this.xM.destroy()}KE(){this.be.push(this.tf.adClick.subscribe((t=>{this.CM(t)})),this.tf.adImpression.subscribe((t=>{this.MM(t)})),this.tf.adInView.subscribe((t=>{this.LM(t)})),this.tf.adQuartile.subscribe((t=>{this.BM(t)})),this.tf.heavyAd.subscribe((t=>{this.RM(t)})),this.tf.auctionInformation.subscribe((t=>{this.ob(t)})),this.tf.missedImpressionOutOfView.subscribe((t=>{this.OM(t)})),this.tf.adBidTracking.subscribe((t=>{this.DM(t)})))}uM(){this.be.push(this.jE.sessionTimeElapsed.subscribe((t=>{this.VM(t)})),this.jE.sessionRendered.pipe((0,z.q)(1)).subscribe((t=>{this.NM(t)})),this.jE.sessionView.subscribe((()=>{this.jM()})),this.jE.sessionAdBlocked.subscribe((t=>{this.$M(t)})),this.jE.adOpportunity.subscribe((t=>{this.UM(t)})),this.jE.contentStart.pipe((0,z.q)(1)).subscribe((()=>{this.qM()})),this.jE.adsEnabled.pipe((0,z.q)(1)).subscribe((()=>{this.qM()})))}kM(){this.be.push(this.wM.mediaQuartile.subscribe((t=>{this.HM(t)})),this.wM.mediaClick.subscribe((t=>{this.zM(t)})))}qM(){var t;this.rl.isPlayerStartTracked||(this.rl.isPlayerStartTracked=!0,this.TM.playerStartEvent({trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(this.rl.trackingRequestMeta),pageInsightIndexes:null===(t=Ot.k.pageInsights)||void 0===t?void 0:t.insights,dynamicElkFields:{1:ii.f.getCidForElkTracking()}}))}RM(t){const{type:i,advertiserLineItemId:e,dynamicElkFields:s}=t,n=Object.assign(Object.assign({},s),{1:ii.f.getCidForElkTracking()});this.TM.heavyAdEvent({trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(this.rl.trackingRequestMeta),type:i,advertiserLineItemId:e,dynamicElkFields:n})}DM(t){const i=ot.EN.fromProtoGDPRConsentMode(this.Kd.gdprConsentMode),e=Ut.fromPayloadToTracking(t,this.rl,i);this.TM.adBidEvent(e)}VM(t){var i;const{sessionTimeInSeconds:e,timePlayedInSeconds:s,timePlayedInViewInSeconds:n}=t,{trackingRequestMeta:r}=this.rl;this.TM.sessionTimeEvent({trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(r),sessionTimePassedSinceLastTracking:e,secondsPlayedSinceLastTracking:s,secondsPlayedInViewSinceLastTracking:n,pageInsightIndexes:null===(i=Ot.k.pageInsights)||void 0===i?void 0:i.insights})}NM(t){var i;if(this.rl.isSessionRenderTracked)return;this.rl.isSessionRenderTracked=!0;const{width:e,height:s}=this.rl.playerDimensions,{isBannerBlocked:n,sdkVersion:r}=t,o={7:ii.f.getCidForElkTracking()};(0,G.QM)(r)&&(o[3]=`${r}`),this.TM.sessionRenderEvent({playerHeight:s,playerWidth:e,isAdBlockerUsed:n,bundleName:"connatix.player.js",dynamicElkFields:o,trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(this.rl.trackingRequestMeta),pageInsightIndexes:null===(i=Ot.k.pageInsights)||void 0===i?void 0:i.insights})}jM(){var t;if(this.rl.isSessionViewTracked||!this.rl.isPlayerStartTracked)return;this.rl.isSessionViewTracked=!0;const i={9:ii.f.getCidForElkTracking()};this.TM.sessionInViewEvent({trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(this.rl.trackingRequestMeta),pageInsightIndexes:null===(t=Ot.k.pageInsights)||void 0===t?void 0:t.insights,dynamicElkFields:i})}OM(t){var i;const e=Object.assign(Object.assign({},this.rl.trackingRequestMeta),{playerId:Rt.CUSTOM_TEST_PLAYER_ID,sessionId:Rt.CUSTOM_SESSION_ID}),s={1:`${t.outOfViewAdPrice}`,2:`${t.outOfViewAdLineItemId}`,3:`${t.inViewAdPrice}`,4:`${t.outOfViewTimeRunning}`,5:`${t.distanceWhenOutOfViewStarted}`,6:`${t.timeUntilNextOpportunity}`,7:`${this.rl.sessionId}`,8:`${this.rl.playerId}`,9:ii.f.getCidForElkTracking()};this.TM.sessionInViewEvent({trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(e),pageInsightIndexes:null===(i=Ot.k.pageInsights)||void 0===i?void 0:i.insights,dynamicElkFields:s})}HM(t){const{mediaId:i,insights:e,sentimentAnalysis:s}=this.rl.currentMediaMetadata,{quartile:n}=t;this.TM.mediaQuartileEvent({trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(this.rl.trackingRequestMeta),sentimentAnalysis:s?ot.XE.fromProtoGetSentimentAnalysis(s):void 0,mediaId:i,quartile:n,insightIndexes:e})}zM(t){const i=$t.fromPayloadToTracking(t,this.rl);this.TM.mediaClickEvent(i)}ob(t){this.TM.auctionInformationEvent(t)}MM(t){const i=Vt.fromPayloadToTracking(t,this.rl);this.TM.adImpressionEvent(i)}LM(t){const i=Ft.fromPayloadToTracking(t,this.rl);this.TM.adInViewEvent(i)}BM(t){const i=Nt.fromPayloadToTracking(t,this.rl);this.TM.adQuartileEvent(i)}CM(t){const i=Dt.fromPayloadToTracking(t,this.rl);this.TM.adClickEvent(i)}UM(t){var i;const{trackingRequestMeta:e}=this.rl,{playerWidth:s,opportunityId:n,adBreak:r}=t,o={1:`${n}`,2:ii.f.getCidForElkTracking()};this.TM.adOpportunityEvent({adBreakType:r,playerWidth:s,dynamicElkFields:o,trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(e),pageInsightIndexes:null===(i=Ot.k.pageInsights)||void 0===i?void 0:i.insights})}$M(t){const{adBlockDetectionType:i}=t,e={1:ii.f.getCidForElkTracking()},s={trackingMetadata:ot.yz.fromProtoGetTrackingMetadata(this.rl.trackingRequestMeta),adBlockerDetectionType:i,dynamicElkFields:e};this.TM.sessionAdBlockerEvent(s)}};ri=ei([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped),ni(0,(0,w.f3)(T.B)),ni(1,(0,w.f3)(M.q)),ni(2,(0,w.f3)(E)),ni(3,(0,w.f3)(x)),ni(4,(0,w.f3)(Z)),ni(5,(0,w.f3)(y.k)),ni(6,(0,w.f3)(Lt)),ni(7,(0,w.f3)(ti.c.UserManagerService)),si("design:paramtypes",["function"==typeof(Wt=void 0!==Bt.B&&Bt.B)?Wt:Object,"function"==typeof(Gt=void 0!==X.d&&X.d)?Gt:Object,"function"==typeof(Xt=void 0!==o.IMediaEvents&&o.IMediaEvents)?Xt:Object,"function"==typeof(Jt=void 0!==r.IAbtTracker&&r.IAbtTracker)?Jt:Object,"function"==typeof(Qt=void 0!==h.ISessionTime&&h.ISessionTime)?Qt:Object,"function"==typeof(Yt=void 0!==b.q&&b.q)?Yt:Object,"function"==typeof(Kt=void 0!==a.ITrackingCaller&&a.ITrackingCaller)?Kt:Object,"function"==typeof(Zt=void 0!==c.IUserManagerService&&c.IUserManagerService)?Zt:Object])],ri);var oi=e(9906),hi=e(3020),ai=e(5356),ci=e(8983),di=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let li=class{constructor(){this.WM=t=>{const i=t.target.closest("[tabindex]");i&&(i.focus({preventScroll:!0}),(0,hi.IV)(i,ci.s6.TabFocus),this.GM&&(0,ai.mb)(this.GM)&&(0,hi.cn)(this.GM,ci.s6.AdUserInteraction))}}start(t){this.XM(t)}processAdUserInteraction(t=!1){(t||(0,hi.pv)(this.GM,ci.s6.AdUserInteraction))&&(this.JM(),this.GM&&((0,hi.IV)(this.GM,ci.s6.AdUserInteraction),(0,hi.IV)(this.GM,ci.s6.TabFocus)))}destroy(){var t;null===(t=this.GM)||void 0===t||t.removeEventListener("click",this.WM)}JM(){var t;null===(t=this.GM)||void 0===t||t.focus({preventScroll:!0})}XM(t){this.GM=t,null==t||t.addEventListener("click",this.WM)}};li=di([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped)],li);var ui=e(2404),pi=e(9209),fi=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let mi=class{constructor(){this.YM=new k.x,this.KM=[pi.Ys.Space,pi.Ys.ArrowDown,pi.Ys.ArrowUp],this.ZM=t=>{const i=t.code;let e=pi.Pl[pi.Ys[i]];this.KM.includes(pi.Ys[i])&&t.preventDefault(),t.shiftKey&&t.code===pi.Ys[pi.Ys.KeyN]&&(e=pi.Pl[pi.Ys.KeyN]),t.shiftKey&&t.code===pi.Ys[pi.Ys.KeyP]&&(e=pi.Pl[pi.Ys.KeyP]),void 0!==e&&this.YM.next({action:e})}}get shortcutsEventObservable(){return this.YM.asObservable()}start(t){this.ew(t)}destroy(){e.g.removeEventListener("keydown",this.ZM)}ew(t){t.addEventListener("keydown",this.ZM)}};var vi;mi=fi([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped)],mi),function(t){t.AdBreakStatus="cnx_ad_break_status"}(vi||(vi={}));var gi,yi=e(5687),bi=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Ii=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},wi=function(t,i){return function(e,s){i(e,s,t)}};let Si=class{constructor(t){this.Tr=t,this.VP=new Map}start(t){this.tL=this.iL(t)}destroy(){(0,hi.bX)(this.tL)}openChannels(t){t.forEach((t=>{this.VP.get(t)||this.VP.set(t,this.eL())}))}closeChannels(t){t.forEach((t=>{const i=this.VP.get(t);i&&(i.innerHTML="")}))}emitMessage(t,i){const e=this.VP.get(t);e&&(e.innerHTML=i)}mute(){var t;null===(t=this.tL)||void 0===t||t.classList.add(ci.Gj.Hide),this.VP.forEach((t=>{t.innerHTML=""}))}unMute(){var t;null===(t=this.tL)||void 0===t||t.classList.remove(ci.Gj.Hide)}iL(t){const i=this.Tr.createElementByString(`<cnx class="${ci.Rp.Wrapper}"></cnx>`);return t.appendChild(i),i}eL(){var t;const i=this.Tr.createElementByString('<cnx role="status"></cnx>');return null===(t=this.tL)||void 0===t||t.appendChild(i),i}};Si=bi([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped),wi(0,(0,w.f3)(ti.c.GlobalDomUtilsService)),Ii("design:paramtypes",["function"==typeof(gi=void 0!==yi.m&&yi.m)?gi:Object])],Si);var Ai,Pi,_i,xi=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Ti=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},ki=function(t,i){return function(e,s){i(e,s,t)}};let Ci=class{constructor(t,i,e){this.tf=t,this.jE=i,this.nL=e,this.be=[],this.oL=!1,this.hL=!1}start(t){this.KE(),this.nL.start(t)}destroy(){(0,J.i)(this.be),this.nL.destroy()}KE(){this.be.push(this.tf.adBreakStart.subscribe((({adSkippableInSeconds:t,isLinear:i})=>{i&&(this.hL=!0,this.oL&&this.aL(t))})),this.tf.adBreakEnd.subscribe((()=>{this.hL=!1,this.dL()})),this.jE.sessionViewabilityChanged.subscribe((({isInView:t})=>{t?(this.hL&&this.aL(0),this.nL.unMute()):this.hL||this.nL.mute(),this.oL=t})))}aL(t){this.nL.openChannels([vi.AdBreakStatus]);let i="The video player is currently playing an ad.";t>0&&(i+=` You can skip the ad in ${t} sec with a mouse or keyboard`),this.nL.emitMessage(vi.AdBreakStatus,i)}dL(){this.nL.closeChannels([vi.AdBreakStatus])}};Ci=xi([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped),ki(0,(0,w.f3)(y.k)),ki(1,(0,w.f3)(M.q)),ki(2,(0,w.f3)(Si)),Ti("design:paramtypes",["function"==typeof(Ai=void 0!==b.q&&b.q)?Ai:Object,"function"==typeof(Pi=void 0!==X.d&&X.d)?Pi:Object,"function"==typeof(_i=void 0!==p.IStatusMessenger&&p.IStatusMessenger)?_i:Object])],Ci);var Ei,Mi,Li,Bi,Ri=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},Oi=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},Di=function(t,i){return function(e,s){i(e,s,t)}};let Vi=class{constructor(t,i,e,s){this.lL=t,this.uL=i,this.pL=e,this.fL=s}start(t,i){this.lL.start(t),this.uL.start(t),this.pL.start(t),i&&this.fL.start(t)}getShortcutsObservable(){return this.pL.shortcutsEventObservable}processAdUserInteraction(t=!1){var i;null===(i=this.lL)||void 0===i||i.processAdUserInteraction(t)}destroy(){this.lL.destroy(),this.uL.destroy(),this.pL.destroy(),this.fL.destroy()}};Vi=Ri([(0,w.b2)(),(0,w.Yn)(w.Fw.ContainerScoped),Di(0,(0,w.f3)(li)),Di(1,(0,w.f3)(ui.m)),Di(2,(0,w.f3)(mi)),Di(3,(0,w.f3)(Ci)),Oi("design:paramtypes",["function"==typeof(Ei=void 0!==d.IFocusService&&d.IFocusService)?Ei:Object,"function"==typeof(Mi=void 0!==ui.m&&ui.m)?Mi:Object,"function"==typeof(Li=void 0!==l.IKeyboardShortcutsService&&l.IKeyboardShortcutsService)?Li:Object,"function"==typeof(Bi=void 0!==u.IStatusBroker&&u.IStatusBroker)?Bi:Object])],Vi);var Fi=e(5885);class Ni{static boostrapSessionContainer(t,i,e,s,n,r,o,h,a){const c=oi.h.getSessionChildContainer(t);Ni.mL(c,i,e,s,r,o,h,a);return Ni.vL(c,n)}static mL(t,i,e,s,n,r,o,h){t.register(ti.c.GeneralMetadata,{useValue:Object.assign({},i)}),t.register(ti.c.UserManagerService,{useValue:e}),t.register(ti.c.EventsStorageService,{useValue:n}),t.register(ti.c.GlobalDomUtilsService,{useValue:o}),t.register(ti.c.OmidSettings,{useValue:Object.assign({},r)}),t.register(ti.c.Temp,{useValue:Object.assign({},s)}),t.register(ti.c.ExternalPrebidJSPermutiveConfig,{useValue:(0,G.$K)(h)?h:{}}),t.register(ti.c.GlobalDomUtilsService,{useValue:o})}static vL(t,i){const e=t.resolve(Tt.j),s=t.resolve(Z),n=t.resolve(M.q),r=t.resolve(E);return{trackingResponseService:e,sessionEvents:n,wcagService:t.resolve(Vi),mediaEvents:r,generalRepository:t.resolve(T.B),abtTracker:t.resolve(x),adEvents:t.resolve(y.k),sessionTime:s,protoTrackingCallerService:t.resolve(Lt),trackingService:i?void 0:t.resolve(ri),tempServiceSS:t.resolve(Fi.P)}}}},6628:(t,i,e)=>{"use strict";e.d(i,{A:()=>a,W:()=>c});var s=e(7945),n=e(9791),r=e(51),o=e(4798);function h(t){const i=(0,r.Ph)("cnxEnv",(0,n.pE)(window).topFrame.location.href);return(0,o.QM)(i)?`//cd-${i}.${t}`:`//cds.${t}`}function a(t){return`${h(t)}/p/${s.g.version}/`}function c(t){return`${h(t)}/a/`}},8657:(t,i,e)=>{"use strict";var s;e.d(i,{o:()=>s}),function(t){t.connatix="connatix.com",t.elements="elements.video"}(s||(s={}))},8041:(t,i,e)=>{"use strict";e.d(i,{o:()=>c,q:()=>d});var s=e(3020),n=e(1187),r=e(8657);function o(t){return t&&(0,s.NN)(t)?t.src:((0,n.n)({message:"Prerender_Elements_getBundleDomain_no_currentScript",level:n.D.CRITICAL}),null)}var h=e(5530),a=e(4798);const c=function(t){const i=o(t);return(null==i?void 0:i.includes(r.o.elements))?r.o.elements:(null==i?void 0:i.includes(r.o.connatix))?r.o.connatix:((0,n.n)({message:"Prerender_Elements_getBundleDomain_unkown_src",level:n.D.CRITICAL}),null)}(window.document.currentScript),d=(l=o(window.document.currentScript),(0,a.QM)(l)?l.includes(h.b.Omid)?h.b.Omid:l.includes(h.b.Standalone)?h.b.Standalone:h.b.Web:null);var l},5530:(t,i,e)=>{"use strict";var s;e.d(i,{b:()=>s}),function(t){t.Web="",t.Omid="omid",t.Standalone="standalone"}(s||(s={}))},2239:(t,i,e)=>{"use strict";e.d(i,{B:()=>g});var s={};e.r(s);var n=e(9791),r=e(8659),o=e(6661),h=e(7945),a=e(6027);var c,d=e(4798),l=e(6568),u=e(9490),p=e(9005),f=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},m=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},v=function(t,i){return function(e,s){i(e,s,t)}};let g=class{constructor(t){this.gL=t,this.yL={},this.bL={height:0,width:0},this.IL=!1,this.wL=!1,this.SL=!1,this.AL=!1,this.PL=!1,this._L=l.e.Unknown,this.kI=u.Ez.StoppedState,this.xL=p.Q.Unknown,this.TL=1===(0,n.Vm)([99,1])}get trackingRequestMeta(){return{userId:this.userId,playerId:this.playerId,geo:this.geoLocation,browser:this.browser,version:h.g.version,sessionId:this.sessionId,clientAb0:a.e.clientAb0,clientAb1:a.e.clientAb1,serverAb0:a.e.serverAb0,serverAb1:a.e.serverAb1,pageUrl:this.pageUrl,bundleId:this.bundleId,customParam1:this.customParam1,customParam2:this.customParam2,customParam3:this.customParam3,customParam4:this.customParam4,customParam5:this.customParam5,bundleAbId:this.bundleAbId,bundlePart:this.bundlePart,abTestId:this.abTestId,shouldTrackAllRequests:this.TL,implementationType:this.implementationType,isPageInFocus:this.isPageInFocus}}get canTrackAllRequests(){return this.TL}get implementationType(){return this.gL.implementationType}get playerId(){return this.gL.playerId}get geoLocation(){return this.gL.geoLocation}get browser(){return this.gL.browser}get sessionId(){return this.gL.sessionId}get pageUrl(){return this.gL.pageUrl}get bundleId(){return this.gL.bundleId}get bundleAbId(){return this.gL.bundleAbId}get bundlePart(){return this.gL.bundlePart}get customParam1(){return this.gL.customParam1}get customParam2(){return this.gL.customParam2}get customParam3(){return this.gL.customParam3}get customParam4(){return this.gL.customParam4}get customParam5(){return this.gL.customParam5}get abTestId(){return this.gL.abTestId}get isExplorationMode(){return this.gL.isExplorationMode}get lineItemAbTestInformation(){return this.gL.lineItemAbTestInformation}get hasGdprConsentPayload(){return this.IL}set hasGdprConsentPayload(t){this.IL=t}get playerDimensions(){return this.bL}set playerDimensions(t){this.bL=t}get currentMediaMetadata(){return this.yL}set currentMediaMetadata(t){this.yL=t}get isSessionRenderTracked(){return this.SL}set isSessionRenderTracked(t){this.SL=t}get isPlayerStartTracked(){return this.wL}set isPlayerStartTracked(t){this.wL=t}get isSessionViewTracked(){return this.AL}set isSessionViewTracked(t){this.AL=t}get userId(){return this.gL.userId}set userId(t){this.gL.userId=t}get isPageInFocus(){return this.PL}set isPageInFocus(t){this.PL=t}get iasSegmentCodes(){return this.gL.iasSegmentCodes}get amazonTamPubId(){return this.gL.amazonTamPubId}get isInApp(){return(0,d.QM)(this.gL.bundleId)}get playerType(){return this._L}set playerType(t){this._L=t}get playerState(){return this.kI}set playerState(t){this.kI=t}get playerEnvironment(){return this.xL}set playerEnvironment(t){this.xL=t}};g=f([(0,r.b2)(),(0,r.Yn)(r.Fw.ContainerScoped),v(0,(0,r.f3)(o.c.GeneralMetadata)),m("design:paramtypes",["function"==typeof(c=void 0!==s.IGeneralMetadata&&s.IGeneralMetadata)?c:Object])],g)},3432:()=>{},252:(t,i,e)=>{"use strict";e.d(i,{_:()=>y});var s={};e.r(s);var n,r,o,h=e(1828),a=e(6661),c=e(5687),d=e(8659),l=e(1187),u=e(9791),p=e(6153),f=e(5968),m=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},v=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},g=function(t,i){return function(e,s){i(e,s,t)}};let y=n=class{constructor(t,i){this.Tr=t,this.kL=i,this.r_=!1}init(t){this.r_||!t||!this.kL.isUS||this.kL.isChrome||this.kL.isInApp||(this.r_=!0,this.CL())}reportExternalWin(t){var i;null===(i=this.EL)||void 0===i||i.reportExternalWin(t)}getEidsList(){var t,i;return null===(i=null===(t=this.LL)||void 0===t?void 0:t.eids)||void 0===i?void 0:i.map((({source:t,uids:i})=>({source:t,id:i.map((t=>t.id))})))}CL(){const t=`<script id='intent-iq-cnx-script' type='text/javascript' src='${p.n.endPoints.assets.plugins.intentiq}'><\/script>`,i=new h.o(this.Tr,this.kL.sessionId),e={container:window.document.body,customHtml:t,customIframeAttributes:[{key:"style",value:"display: none;"}]};i.loadIframe(e).then((t=>{this.BL(t.iframe.contentWindow)})).catch((t=>{(0,l.n)({message:"Intentiq_iframe_not_loaded",level:l.D.WARN,exception:(0,u.W$)(t).message})}))}BL(t){(null==t?void 0:t.IntentIqObject)&&(this.EL=new t.IntentIqObject({partner:n.PARTNER,ABTestingConfigurationSource:n.TESTING_CONFIGURATION,abPercentage:n.AB_PERCENTAGE,manualWinReportEnabled:n.MANUAL_WIN_REPORT,callback:t=>{this.LL=t}}))}};y.SUPPORTED_VENDORS=[f.$6.Rubicon,f.$6.Pubmatic],y.PARTNER=372401555,y.TESTING_CONFIGURATION="percentage",y.AB_PERCENTAGE=95,y.MANUAL_WIN_REPORT=!0,y=n=m([(0,d.ri)(),g(0,(0,d.f3)(a.c.GlobalDomUtilsService)),g(1,(0,d.f3)(a.c.IntentiqSettings)),v("design:paramtypes",["function"==typeof(r=void 0!==c.m&&c.m)?r:Object,"function"==typeof(o=void 0!==s.IIntentiqSettings&&s.IIntentiqSettings)?o:Object])],y)},2404:(t,i,e)=>{"use strict";e.d(i,{D:()=>d,m:()=>l});var s,n=e(8659),r=e(2370),o=e(3020),h=e(5356),a=e(8983),c=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};const d={enter:"Enter",escape:"Escape",tab:"Tab"};let l=s=class{constructor(){this.RL=void 0,this.OL=t=>{const i=t.target;if(!(0,r.ev)(i))switch(t.code){case d.enter:this.DL(i);break;case d.escape:this.VL(i);break;case d.tab:this.FL(i,t.shiftKey?"firstChild":"lastChild")}}}start(t){t.classList.contains("cnx-playspace-container")||(this.RL=t,this.NL(t))}destroy(){var t,i;null===(t=this.RL)||void 0===t||t.removeEventListener("keydown",this.OL),null===(i=this.RL)||void 0===i||i.removeEventListener("keyup",s.jL)}NL(t){t.addEventListener("keydown",this.OL),t.addEventListener("keyup",s.jL)}VL(t){const i=t.closest(".cnx-menu-popup"),e=this.$L(i);null==e||e.setAttribute("aria-expanded","false"),(0,r.P7)(e),null==e||e.focus()}DL(t){var i;if(!t)return;const e=t.getAttribute("aria-controls");null===(i=this.RL)||void 0===i||i.addEventListener("cnx-menu-opened",(()=>{var i;const s=null===(i=this.RL)||void 0===i?void 0:i.querySelector(`[data-id="${e}"]`),n=(0,r.Be)(t);(0,r.HO)(s,n)}),{once:!0}),(0,r.sZ)(t)?(0,r.ih)(t):(0,r.P7)(t)}FL(t,i){var e;const s=t.closest("[data-id]");if(s&&t===(null===(e=t.parentElement)||void 0===e?void 0:e[i])){const t=this.$L(s);(0,r.P7)(t),null==t||t.focus()}this.RL&&(0,h.mb)(this.RL)&&(0,o.cn)(this.RL,a.s6.AdUserInteraction)}$L(t){var i;return null===(i=this.RL)||void 0===i?void 0:i.querySelector(`[aria-controls="${null==t?void 0:t.getAttribute("data-id")}"]`)}};l.jL=t=>{const i=t.target;(0,r.ev)(i)||t.code===d.tab&&(0,o.cn)(i,a.s6.TabFocus)},l=s=c([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped)],l)},2370:(t,i,e)=>{"use strict";e.d(i,{Be:()=>p,HO:()=>a,P7:()=>c,ev:()=>u,ih:()=>d,sZ:()=>l,tR:()=>r});var s=e(8983),n=e(3020);const r="lit-keyboard-navigation-access";function o(t){var i;const e=function(t){return t?(0,n.GF)(t)||(0,n.pv)(t,"cnx-submenu-title-option")?e(t.nextElementSibling):t:null},r=null===(i=t.getElementsByClassName("cnx-cm-item--click"))||void 0===i?void 0:i[0],o=e(r);o&&((0,n.cn)(o,s.s6.TabFocus),null==o||o.focus({preventScroll:!0}))}const h=t=>o(t.target);function a(t,i=!1){if(!t)return;if(t.removeEventListener("cnx-mod-scrollbar",h),i)return t.addEventListener("cnx-mod-scrollbar",h,{once:!0}),void o(t);const e=t.querySelector(".cnx-cm-items:first-of-type");e&&o(e)}function c(t){t&&(t.dispatchEvent(new MouseEvent("mousedown")),t.dispatchEvent(new MouseEvent("mouseup")))}function d(t){t&&t.dispatchEvent(new MouseEvent("click"))}function l(t){return(0,n.pv)(t,s.p0.CloseButton)}function u(t){return(null==t?void 0:t.getAttribute("data-id"))===r}function p(t){return(0,n.pv)(t,s.Ng.SubmenuOption)}},9209:(t,i,e)=>{"use strict";var s,n;e.d(i,{Pl:()=>r,Ys:()=>s,d:()=>n}),function(t){t[t.Space=0]="Space",t[t.KeyM=1]="KeyM",t[t.KeyF=2]="KeyF",t[t.KeyC=3]="KeyC",t[t.KeyN=4]="KeyN",t[t.KeyP=5]="KeyP",t[t.ArrowUp=6]="ArrowUp",t[t.ArrowDown=7]="ArrowDown",t[t.ArrowRight=8]="ArrowRight",t[t.ArrowLeft=9]="ArrowLeft",t[t.Digit0=10]="Digit0",t[t.Digit1=11]="Digit1",t[t.Digit2=12]="Digit2",t[t.Digit3=13]="Digit3",t[t.Digit4=14]="Digit4",t[t.Digit5=15]="Digit5",t[t.Digit6=16]="Digit6",t[t.Digit7=17]="Digit7",t[t.Digit8=18]="Digit8",t[t.Digit9=19]="Digit9"}(s||(s={})),function(t){t[t.togglePlay=0]="togglePlay",t[t.toggleMute=1]="toggleMute",t[t.toggleFullscreen=2]="toggleFullscreen",t[t.toggleCaptions=3]="toggleCaptions",t[t.increaseVolume=4]="increaseVolume",t[t.decreaseVolume=5]="decreaseVolume",t[t.seekForward=6]="seekForward",t[t.seekBackward=7]="seekBackward",t[t.seek0Percent=8]="seek0Percent",t[t.seek10Percent=9]="seek10Percent",t[t.seek20Percent=10]="seek20Percent",t[t.seek30Percent=11]="seek30Percent",t[t.seek40Percent=12]="seek40Percent",t[t.seek50Percent=13]="seek50Percent",t[t.seek60Percent=14]="seek60Percent",t[t.seek70Percent=15]="seek70Percent",t[t.seek80Percent=16]="seek80Percent",t[t.seek90Percent=17]="seek90Percent",t[t.nextVideo=18]="nextVideo",t[t.previousVideo=19]="previousVideo"}(n||(n={}));const r={[s.Space]:n.togglePlay,[s.KeyM]:n.toggleMute,[s.KeyF]:n.toggleFullscreen,[s.KeyC]:n.toggleCaptions,[s.ArrowUp]:n.increaseVolume,[s.ArrowDown]:n.decreaseVolume,[s.ArrowRight]:n.seekForward,[s.ArrowLeft]:n.seekBackward,[s.Digit0]:n.seek0Percent,[s.Digit1]:n.seek10Percent,[s.Digit2]:n.seek20Percent,[s.Digit3]:n.seek30Percent,[s.Digit4]:n.seek40Percent,[s.Digit5]:n.seek50Percent,[s.Digit6]:n.seek60Percent,[s.Digit7]:n.seek70Percent,[s.Digit8]:n.seek80Percent,[s.Digit9]:n.seek90Percent,[s.KeyN]:n.nextVideo,[s.KeyP]:n.previousVideo}},9005:(t,i,e)=>{"use strict";var s;e.d(i,{Q:()=>s}),function(t){t[t.Unknown=0]="Unknown",t[t.InAppSdk=1]="InAppSdk",t[t.InAppReactNative=2]="InAppReactNative",t[t.InAppFlutter=3]="InAppFlutter",t[t.InAppGam=4]="InAppGam",t[t.InAppWebview=5]="InAppWebview",t[t.WebAmp=6]="WebAmp",t[t.Web=7]="Web"}(s||(s={}))},6568:(t,i,e)=>{"use strict";var s;e.d(i,{e:()=>s}),function(t){t[t.Unknown=0]="Unknown",t[t.Video=1]="Video",t[t.Outstream=2]="Outstream",t[t.Live=3]="Live",t[t.Story=4]="Story"}(s||(s={}))},5027:(t,i,e)=>{"use strict";e.d(i,{n:()=>o});var s=e(9361),n=e(8576),r=e(4798);class o{static getConnectionType(t){if((0,r.$K)(this.CONNECTION_TYPE))return this.CONNECTION_TYPE;const{connection:i}=window.navigator;if(!i)return n.FX.UNKNOWN;const{type:e,effectiveType:o}=i;return e===n._S.ETHERNET?n.FX.ETHERNET:e===n._S.WIFI?n.FX.WIFI:e===n._S.CELLULAR?this.UL(o):(0,r.$K)(e)||t!==s.VB.Desktop?n.FX.UNKNOWN:n.FX.WIFI}static UL(t){switch(t){case n.Oc.CELLULAR_2G:case n.Oc.CELLULAR_SLOW_2G:return n.FX.CELLULAR_2G;case n.Oc.CELLULAR_3G:return n.FX.CELLULAR_3G;case n.Oc.CELLULAR_4G:return n.FX.CELLULAR_4G;default:return n.FX.CELLULAR_UNKNOWN}}}},1545:(t,i,e)=>{"use strict";e.d(i,{G:()=>N});var s={};e.r(s);var n,r=e(9130);!function(t){t[t.OnAdLoaded=0]="OnAdLoaded",t[t.OnAdSessionStart=1]="OnAdSessionStart"}(n||(n={}));var o,h=e(1783);!function(t){t.Minimized="minimized",t.Collapsed="collapsed",t.Normal="normal",t.Expanded="expanded",t.Fullscreen="fullscreen"}(o||(o={}));var a=e(6716);class c{constructor(){this.qL=new a.x}computeState(t){const i=this.HL(t);this.zL&&this.zL!==i&&this.zL!==o.Fullscreen&&this.qL.next(i),this.zL=i,this.WL||i!==o.Normal||(this.WL={name:i,dimensions:t,area:t.height*t.width})}setPlayerState(t,i){this.zL&&this.zL!==t&&!i&&this.qL.next(t),this.zL=t}get playerStateChanged(){return this.qL.asObservable()}get currentState(){return this.zL}HL(t){if(!this.WL)return o.Normal;const{area:i}=this.WL,e=t.width*t.height;switch(!0){case e===i:return o.Normal;case 0===e:return o.Minimized;case i<e:return o.Expanded;case i>e:return o.Collapsed;default:return this.zL}}}var d=e(1703),l=e(4772),u=e(1187),p=e(9600),f=e(4798),m=e(3);class v{constructor(t,i,e,s,n,r){this.GL=t,this.$P=i,this.JL=e,this.tf=s,this.wM=n,this.QL=r,this.YL=new a.x,this.ZL=new m.t,this.be=[],this.tB=!0,this.iB={[l.Z.AdError]:()=>this.eB(),[l.Z.AdImpression]:()=>this.sB(),[l.Z.AdVideoStart]:t=>this.nB(null==t?void 0:t.adVideoStartMetadata),[l.Z.AdVideoFirstQuartile]:()=>this.rB(),[l.Z.AdVideoMidpoint]:()=>this.oB(),[l.Z.AdVideoThirdQuartile]:()=>this.hB(),[l.Z.AdVideoComplete]:()=>this.cB(),[l.Z.VolumeChange]:t=>this.dB(null==t?void 0:t.volume),[l.Z.AdPause]:()=>this.mu(),[l.Z.AdPlay]:()=>this.lB(),[l.Z.AdSkipped]:()=>this.uB(),[l.Z.AdClickThru]:()=>this.pB(),[l.Z.AdInteraction]:()=>this.fB(),[l.Z.AdExpandedChange]:()=>this.mB(),[l.Z.AdLoaded]:t=>this.Gs(null==t?void 0:t.adLoadedMetadata),[l.Z.PlayerResized]:t=>this.vB(null==t?void 0:t.playerDimensionsMetadata),[l.Z.OnEnterFullscreen]:()=>this.gB(),[l.Z.OnExitFullscreen]:()=>this.yB(),[l.Z.PlayerCollapsed]:()=>this.bB(),[l.Z.PlayerExpanded]:t=>this.vB(null==t?void 0:t.playerDimensionsMetadata),[l.Z.AdStopped]:()=>this.IB(),[l.Z.Destroy]:()=>this.destroy()},this.SB=t=>{try{const i=this.iB[t.name];if(!i)return;i(t.metadata)}catch(t){(0,u.n)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:t?JSON.stringify(t):void 0,level:u.D.WARN})}},this.AB=new c,this.PB(),this.$P.subscribe(this.SB),this.be.push(this.AB.playerStateChanged.subscribe((t=>{this._B(t)}))),this.Gs(this.$P.adLoadedMetadata)}get adSessionFinished(){return this.YL.asObservable()}get adSessionStart(){return this.ZL.asObservable()}destroy(){this.tf=null,this.wM=null,this.JL=null,this.$P.unsubscribe(this.SB),(0,p.i)(this.be)}_B(t){var i;t&&(null===(i=this.wM)||void 0===i||i.playerStateChange(t))}IB(){this.YL.next()}eB(){var t;null===(t=this.JL)||void 0===t||t.error(h.jI.Video,l.Z.AdError),this.YL.next()}sB(){var t;null===(t=this.tf)||void 0===t||t.impressionOccurred();const i=this.AB.currentState;i!==o.Normal&&this._B(i)}nB(t){var i;t&&(0,f.hj)(null==t?void 0:t.duration)&&(0,f.hj)(null==t?void 0:t.mediaPlayerVolume)?(this.xB(t.mediaPlayerDimensions),null===(i=this.wM)||void 0===i||i.start(t.duration,t.mediaPlayerVolume)):(0,u.n)({message:"OmidVideoHandler_mediaEvent_start",level:u.D.WARN})}rB(){var t;null===(t=this.wM)||void 0===t||t.firstQuartile()}oB(){var t;null===(t=this.wM)||void 0===t||t.midpoint()}hB(){var t;null===(t=this.wM)||void 0===t||t.thirdQuartile()}cB(){var t;null===(t=this.wM)||void 0===t||t.complete()}dB(t){var i;(0,f.hj)(t)?null===(i=this.wM)||void 0===i||i.volumeChange(t):(0,u.n)({message:"OmidVideoHandler_mediaEvent_volume",level:u.D.WARN})}mu(){var t;null===(t=this.wM)||void 0===t||t.pause()}lB(){var t;null===(t=this.wM)||void 0===t||t.resume()}uB(){var t;null===(t=this.wM)||void 0===t||t.skipped(),this.YL.next()}pB(){var t;null===(t=this.wM)||void 0===t||t.adUserInteraction(h.fi.Click)}fB(){var t;null===(t=this.wM)||void 0===t||t.adUserInteraction(h.fi.InvitationAccept)}mB(){var t;null===(t=this.wM)||void 0===t||t.adUserInteraction(h.fi.InvitationAccept)}Gs(t){var i;if(!this.$P.adStateMetadata)return void(0,u.n)({message:"OmidVideoHandler_adStateChangedMetadata.state",level:u.D.WARN});const e=new Map([[d.I.MidRoll,h.yA.MidRoll],[d.I.PostRoll,h.yA.PostRoll],[d.I.PreRoll,h.yA.PreRoll],[d.I.Standalone,h.yA.Standalone]]);this.TB=new this.GL.VastProperties(null==t?void 0:t.isSkippable,null==t?void 0:t.skipOffset,null==t?void 0:t.isAutoPlay,e.get(this.$P.adStateMetadata.state)),this.QL===n.OnAdLoaded&&(null===(i=this.tf)||void 0===i||i.loaded(this.TB))}vB(t){t?this.xB({height:t.height,width:t.width}):(0,u.n)({message:"OmidVideoHandler_playerDimensionsMetadata",level:u.D.WARN})}gB(){this.kB(o.Fullscreen)}yB(){this.kB(o.Fullscreen,this.tB)}bB(){this.kB(o.Minimized)}xB(t){(0,f.hj)(t.width)&&(0,f.hj)(t.height)&&t&&this.AB.computeState(t)}kB(t,i=!1){this.AB.setPlayerState(t,i)}PB(){var t;null===(t=this.JL)||void 0===t||t.registerSessionObserver((t=>{t.type===h.Ve.SessionStart?this.CB(t):t.type===h.Ve.SessionError&&(0,u.n)({message:"SessionClientWrapper_omsdk_session_error",exception:t.type,callStack:JSON.stringify(t),level:u.D.WARN},{throttle:1,shouldSendMaxLog:!1})}))}CB(t){var i,e,s;t.data.impressionType===h.sm.DefinedByJavascript&&(null===(i=this.JL)||void 0===i||i.setImpressionType(h.sm.BeginToRender)),t.data.creativeType===h.qZ.DefinedByJavascript&&(null===(e=this.JL)||void 0===e||e.setCreativeType(h.qZ.Video)),this.TB&&this.QL===n.OnAdSessionStart&&(null===(s=this.tf)||void 0===s||s.loaded(this.TB)),this.ZL.next()}}var g=e(4646),y=e(7124);class b{constructor(t){this.EB=t,this.MB=window,this.LB=!1,this.BB=new a.x,this.RB=new a.x,this.LB=y.$.shouldUseOmsdkForAds(this.EB)}get omidAdSessionStart(){return this.BB.asObservable()}get omidAdSessionFinish(){return this.RB.asObservable()}isSupported(){return this.LB}getOMSDKVersion(){return this.EB}getLoadingStrategy(){return n.OnAdSessionStart}getServiceWindow(){return this.MB}startSession(){this.BB.next()}finishSession(){this.RB.next()}resetSession(){this.BB.next()}finishPlayerSession(){return new Promise((t=>{this.RB.next(),setTimeout((()=>{t()}),1e3)}))}createPartner(t){this.OB=new t.Partner(h.cv,this.EB)}createNewContext(t,i){if(this.OB)return new t.Context(this.OB,i);(0,u.n)({message:"OmsdkInAppImplementation_no_partner",level:u.D.WARN})}}var I=e(8659),w=e(6661),S=e(6515),A=e(5196),P=e(1828),_=e(6153);class x{constructor(t,i,e,s,n){this.Ga=t,this.Di=i,this.DB=e,this.FB=s,this.Tr=n,this.isSupported()&&this.NB()}getOMSDKVersion(){return h.rF}isSupported(){return!this.DB&&!this.FB}getServiceWindow(){return this.MB}getLoadingStrategy(){return n.OnAdLoaded}startSession(t){null==t||t.setCreativeType(h.qZ.Video),null==t||t.setImpressionType(h.sm.BeginToRender),null==t||t.start()}finishSession(t){null==t||t.finish()}finishPlayerSession(){return Promise.resolve()}createPartner(t){this.OB=new t.Partner(h.cv,h.rF)}createNewContext(t,i){if(this.OB)return new t.Context(this.OB,i,this.Ga);(0,u.n)({message:"OmsdkWebImplementation_no_partner",level:u.D.WARN})}NB(){const t=`<script id='omsdk-connatix-webservice-script' type='text/javascript'\n            src='${_.n.endPoints.assets.plugins.omsdkWebService}'><\/script>`;this.jB=new P.o(this.Tr,this.Di);const i={container:window.document.body,customHtml:t,customIframeAttributes:[{key:"style",value:"display: none;"}]};this.jB.loadIframe(i).then((()=>{var t,i;this.MB=null===(i=null===(t=this.jB)||void 0===t?void 0:t.iframe.contentWindow)||void 0===i?void 0:i.window})).catch((()=>{(0,u.n)({message:"OMSDKService_error_loading_WebServiceIframe",level:u.D.WARN})}))}}e(7129);var T,k,C,E,M=e(5687),L=e(9357),B=e(5650),R=e(6578),O=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},D=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},V=function(t,i){return function(e,s){i(e,s,t)}},F=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};let N=T=class{constructor(t,i,e){var s,n;this.$P=t,this.Tr=i,this.$B=e,this.BB=new a.x,this.RB=new a.x,this.UB=new S.X(!1),this.qB=new S.X(!1),this.HB=new a.x,this.be=[],this.$B.isInAppSdk?(this.zB=new b(this.$B.sdkVersion),null===(s=this.zB.omidAdSessionStart)||void 0===s||s.subscribe((()=>{this.BB.next()})),null===(n=this.zB.omidAdSessionFinish)||void 0===n||n.subscribe((()=>{this.RB.next()}))):this.zB=new x(this.$B.pageUrl,this.$B.sessionId,this.$B.isInApp,this.$B.isGam,this.Tr),this.isOmsdkFullSupport&&this.WB()}get isOmsdkFullSupport(){return this.zB.isSupported()}get omsdkVersion(){return this.zB.getOMSDKVersion()}get omidAdSessionStart(){return this.BB.asObservable()}get omidAdSessionFinish(){return this.RB.asObservable()}get omidResourcesReady(){return this.UB.asObservable()}get verificationNotExecuted(){return this.HB.asObservable()}get MB(){return this.zB.getServiceWindow()}static Xo(t){const i=t.replace(/\[reason\]/i,"1");R.n.trackPixel(i)}clearPendingProcesses(){(0,p.i)(this.be),this.be=[],this.UB.next(!1)}addVerificationNode(t,i){this.clearPendingProcesses();const e=this.qB.asObservable().pipe((0,A.P)((t=>t))).subscribe((()=>{this.qB.next(!1),this.GB().then((()=>this.XB(t,i))).then((()=>{this.UB.next(!0)})).catch((()=>{this.JB(t)}))}));this.be.push(e)}JB(t){t.forEach((t=>{(0,f.$K)(t.trackingEvents)&&(0,B.BZ)(t.trackingEvents)&&t.trackingEvents.filter((t=>"verificationNotExecuted"===t.name)).forEach((t=>{T.Xo(t.uri),this.HB.next()}))})),(0,u.n)({message:"OMSDKService_verification_not_executed",level:u.D.INFO},{throttle:1,shouldSendMaxLog:!1}),this.UB.next(!0)}XB(t,i){return F(this,void 0,void 0,(function*(){if(!(0,f.$K)(this.GL))throw(0,u.n)({message:"OMSDKService_no_client",level:u.D.WARN}),new Error("noOmidClient");this.zB.createPartner(this.GL);const e=g.$.getVerificationScriptResources(t,this.GL);if(this.$h=this.zB.createNewContext(this.GL,e),!this.$h)throw(0,u.n)({message:"OMSDKService_no_context",level:u.D.WARN}),new Error("noOmidContext");if(this.$h.setVideoElement(i.videoSlot),this.$h.setSlotElement(i.slot),!this.MB)throw(0,u.n)({message:"OMSDKService_no_service_window",level:u.D.WARN}),new Error("noServiceWindow");this.$h.setServiceWindow(this.MB);const s=new this.GL.AdSession(this.$h),n=new this.GL.AdEvents(s),r=new this.GL.MediaEvents(s);if(!s||!n||!r)throw(0,u.n)({message:"OMSDKService_cant_start_omid_events",exception:`adSession:${!!s}_adEvents:${!!n}_mediaEvents:${!!r}`,level:u.D.WARN}),new Error("noOmidEvents");this.zB.startSession(s),this.QB=new v(this.GL,this.$P,s,n,r,this.zB.getLoadingStrategy()),this.QB.adSessionFinished.subscribe((()=>{var t;this.UB.next(!1),this.qB.next(!1),this.zB.finishSession(s),null===(t=this.QB)||void 0===t||t.destroy(),this.QB=null,this.YB()}));const o=new Promise((t=>{var i;null===(i=this.QB)||void 0===i||i.adSessionStart.subscribe((()=>{t()}))}));return o}))}GB(){return this.zB.finishPlayerSession()}YB(){setTimeout((()=>{var t,i;this.KB(),this.WB(),null===(i=(t=this.zB).resetSession)||void 0===i||i.call(t)}),L.s_)}ZB(){var t,i;this.GL=g.$.getSessionClient(null===(i=null===(t=this.iR)||void 0===t?void 0:t.iframe.contentWindow)||void 0===i?void 0:i.window),this.GL||(0,u.n)({message:"OMSDKService_no_session_client",level:u.D.INFO})}WB(){const t=`<script id='omsdk-connatix-client-script' type='text/javascript' src='${_.n.endPoints.assets.plugins.omsdkSessionClient}'><\/script>`;this.qB.next(!1),this.iR=new P.o(this.Tr,this.$B.sessionId);const i={container:window.document.body,customHtml:t,customIframeAttributes:[{key:"style",value:"display: none;"}]};this.iR.loadIframe(i).then((()=>{this.ZB(),this.qB.next(!0)})).catch((()=>{(0,u.n)({message:"OMSDKService_error_loading_SessionClientIframe",level:u.D.WARN})}))}KB(){var t,i,e,s;null===(i=null===(t=this.iR)||void 0===t?void 0:t.iframe.parentElement)||void 0===i||i.removeChild(null===(e=this.iR)||void 0===e?void 0:e.iframe),null===(s=this.iR)||void 0===s||s.destroy(),this.iR=null}};N=T=O([(0,I.b2)(),(0,I.Yn)(I.Fw.ContainerScoped),V(0,(0,I.f3)(w.c.EventsStorageService)),V(1,(0,I.f3)(w.c.GlobalDomUtilsService)),V(2,(0,I.f3)(w.c.OmidSettings)),D("design:paramtypes",["function"==typeof(k=void 0!==r.C&&r.C)?k:Object,"function"==typeof(C=void 0!==M.m&&M.m)?C:Object,"function"==typeof(E=void 0!==s.IOmsdkSettings&&s.IOmsdkSettings)?E:Object])],N)},8858:()=>{},6565:(t,i,e)=>{"use strict";e.d(i,{q:()=>h});var s=e(6515),n=e(6716),r=e(8659),o=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let h=class{constructor(){this.sessionPlaybackChanged=new s.X({isPlaying:!1}),this.sessionViewabilityChanged=new s.X({isInView:!1}),this.sessionTimeElapsed=new n.x,this.sessionRendered=new n.x,this.sessionView=new n.x,this.sessionAdBlocked=new n.x,this.adOpportunity=new n.x,this.adsEnabled=new n.x,this.contentStart=new n.x}};h=o([(0,r.b2)(),(0,r.Yn)(r.Fw.ContainerScoped)],h)},5885:(t,i,e)=>{"use strict";e.d(i,{P:()=>d});var s={};e.r(s);var n,r=e(6661),o=e(8659),h=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o},a=function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},c=function(t,i){return function(e,s){i(e,s,t)}};let d=class{constructor(t){this.eR=t,this.sR=["www.selection.ca"],this.nR=["www.dailykos.com","m.dailykos.com"],this.rR=["www.legacy.com","legacy.com","m.legacy.com"],this.oR=["www.rd.com"],this.aR=["www.marriage.com"],this.cR=["www.budgetyourtrip.com"],this.dR=0}set adManagerSound(t){this.dR=t}get adManagerSound(){return this.dR}isImaTestCaseForSS(){return this.sR.includes(this.eR.pageDomain)}isDailykosDotComDomain(){return this.nR.includes(this.eR.pageDomain)}isLegacyDotComDomain(){return this.rR.includes(this.eR.pageDomain)}isRDDotComDomain(){return this.oR.includes(this.eR.pageDomain)}isMarriageDotComDomain(){return this.aR.includes(this.eR.pageDomain)}isBudgetYourTripDotComDomain(){return this.cR.includes(this.eR.pageDomain)}};d=h([(0,o.b2)(),(0,o.Yn)(o.Fw.ContainerScoped),c(0,(0,o.f3)(r.c.Temp)),a("design:paramtypes",["function"==typeof(n=void 0!==s.ITempMetadata&&s.ITempMetadata)?n:Object])],d)},3816:(t,i,e)=>{"use strict";e.d(i,{d:()=>s});class s{static getProtoDiscount(t){return{id:t.id,rate:t.rate}}static fromProtoDiscount(t){return{id:t.id,rate:t.rate}}}},3802:(t,i,e)=>{"use strict";e.d(i,{Ti:()=>d,EN:()=>o,wE:()=>l,W1:()=>u,p:()=>c,yz:()=>h,XE:()=>a});var s=e(9361),n=e(202),r=e(289);class o{static getProtoImplementationType(t){return{[s.Vx.Amp]:r.ProtoImplementationType.Amp,[s.Vx.Web]:r.ProtoImplementationType.Web}[t]}static fromProtoGetImplementationType(t){return{[r.ProtoImplementationType.Amp]:s.Vx.Amp,[r.ProtoImplementationType.Web]:s.Vx.Web}[t]}static getProtoDeviceType(t){return{[s.VB.Desktop]:r.ProtoDeviceType.Desktop,[s.VB.Smartphone]:r.ProtoDeviceType.Smartphone,[s.VB.Tablet]:r.ProtoDeviceType.Tablet,[s.VB.GameConsole]:r.ProtoDeviceType.GameConsole,[s.VB.PDA]:r.ProtoDeviceType.PDA,[s.VB.SmartTV]:r.ProtoDeviceType.SmartTV,[s.VB.Unrecognized]:r.ProtoDeviceType.Unrecognized,[s.VB.WearableComputer]:r.ProtoDeviceType.WearableComputer}[t]}static fromProtoGetDeviceType(t){return{[r.ProtoDeviceType.Desktop]:s.VB.Desktop,[r.ProtoDeviceType.Smartphone]:s.VB.Smartphone,[r.ProtoDeviceType.Tablet]:s.VB.Tablet,[r.ProtoDeviceType.GameConsole]:s.VB.GameConsole,[r.ProtoDeviceType.PDA]:s.VB.PDA,[r.ProtoDeviceType.SmartTV]:s.VB.SmartTV,[r.ProtoDeviceType.Unrecognized]:s.VB.Unrecognized,[r.ProtoDeviceType.WearableComputer]:s.VB.WearableComputer}[t]}static getProtoAdBlockerDetectionType(t){return{[s.ev.Banner]:r.ProtoAdBlockDetectionTypeEnum.Banner,[s.ev.Network]:r.ProtoAdBlockDetectionTypeEnum.Network}[t]}static fromProtoAdBlockerDetectionType(t){return{[r.ProtoAdBlockDetectionTypeEnum.Banner]:s.ev.Banner,[r.ProtoAdBlockDetectionTypeEnum.Network]:s.ev.Network}[t]}static getProtoAdBreakType(t){return{[s.xX.None]:r.ProtoAdBreakTypeEnum.None,[s.xX.PreRoll]:r.ProtoAdBreakTypeEnum.PreRoll,[s.xX.MidRoll]:r.ProtoAdBreakTypeEnum.MidRoll,[s.xX.PostRoll]:r.ProtoAdBreakTypeEnum.PostRoll}[t]||r.ProtoAdBreakTypeEnum.None}static fromProtoAdBreakType(t){return{[r.ProtoAdBreakTypeEnum.None]:s.xX.None,[r.ProtoAdBreakTypeEnum.PreRoll]:s.xX.PreRoll,[r.ProtoAdBreakTypeEnum.MidRoll]:s.xX.MidRoll,[r.ProtoAdBreakTypeEnum.PostRoll]:s.xX.PostRoll}[t]||s.xX.None}static getProtoAdClickType(t){return{[s.VE.AdClick]:r.ProtoAdClickTypeEnum.AdClick,[s.VE.AdClickThrough]:r.ProtoAdClickTypeEnum.AdClickThrough,[s.VE.AdSkipClick]:r.ProtoAdClickTypeEnum.AdSkipClick,[s.VE.AdUserClose]:r.ProtoAdClickTypeEnum.AdUserClose,[s.VE.ExitFullScreenClick]:r.ProtoAdClickTypeEnum.ExitFullScreenClick,[s.VE.FullScreenClick]:r.ProtoAdClickTypeEnum.FullScreenClick,[s.VE.MuteClick]:r.ProtoAdClickTypeEnum.MuteClick,[s.VE.PauseClick]:r.ProtoAdClickTypeEnum.PauseClick,[s.VE.PlayClick]:r.ProtoAdClickTypeEnum.PlayClick,[s.VE.UnmuteClick]:r.ProtoAdClickTypeEnum.UnmuteClick,[s.VE.VolumeClick]:r.ProtoAdClickTypeEnum.VolumeClick}[t]}static fromProtoAdClickType(t){return{[r.ProtoAdClickTypeEnum.AdClick]:s.VE.AdClick,[r.ProtoAdClickTypeEnum.AdClickThrough]:s.VE.AdClickThrough,[r.ProtoAdClickTypeEnum.AdSkipClick]:s.VE.AdSkipClick,[r.ProtoAdClickTypeEnum.AdUserClose]:s.VE.AdUserClose,[r.ProtoAdClickTypeEnum.ExitFullScreenClick]:s.VE.ExitFullScreenClick,[r.ProtoAdClickTypeEnum.FullScreenClick]:s.VE.FullScreenClick,[r.ProtoAdClickTypeEnum.MuteClick]:s.VE.MuteClick,[r.ProtoAdClickTypeEnum.PauseClick]:s.VE.PauseClick,[r.ProtoAdClickTypeEnum.PlayClick]:s.VE.PlayClick,[r.ProtoAdClickTypeEnum.UnmuteClick]:s.VE.UnmuteClick,[r.ProtoAdClickTypeEnum.VolumeClick]:s.VE.VolumeClick}[t]}static getProtoAdSourceType(t){return{[s.Px.AOL]:r.ProtoAdsourceTypeEnum.AOL,[s.Px.CnxMedia]:r.ProtoAdsourceTypeEnum.CnxMedia,[s.Px.Ima]:r.ProtoAdsourceTypeEnum.Ima,[s.Px.Jw]:r.ProtoAdsourceTypeEnum.Jw,[s.Px.Unknown]:r.ProtoAdsourceTypeEnum.Unknown,[s.Px.VastMedia]:r.ProtoAdsourceTypeEnum.VastMedia,[s.Px.Vpaid]:r.ProtoAdsourceTypeEnum.Vpaid}[t]}static fromProtoAdSourceType(t){return{[r.ProtoAdsourceTypeEnum.AOL]:s.Px.AOL,[r.ProtoAdsourceTypeEnum.CnxMedia]:s.Px.CnxMedia,[r.ProtoAdsourceTypeEnum.Ima]:s.Px.Ima,[r.ProtoAdsourceTypeEnum.Jw]:s.Px.Jw,[r.ProtoAdsourceTypeEnum.Unknown]:s.Px.Unknown,[r.ProtoAdsourceTypeEnum.VastMedia]:s.Px.VastMedia,[r.ProtoAdsourceTypeEnum.Vpaid]:s.Px.Vpaid}[t]}static getProtoAuctionLossReason(t){return{[s.AT.AdOpportunityEnd]:r.ProtoAuctionLossReasonEnum.AdOpportunityEnd,[s.AT.TargetingMismatch]:r.ProtoAuctionLossReasonEnum.TargetingMismatch,[s.AT.CompetitorPriority]:r.ProtoAuctionLossReasonEnum.CompetitorPriority}[t]}static fromProtoAuctionLossReason(t){return{[r.ProtoAuctionLossReasonEnum.AdOpportunityEnd]:s.AT.AdOpportunityEnd,[r.ProtoAuctionLossReasonEnum.TargetingMismatch]:s.AT.TargetingMismatch,[r.ProtoAuctionLossReasonEnum.CompetitorPriority]:s.AT.CompetitorPriority}[t]}static getProtoAuctionPostbidReason(t){return{[s.MF.CreativeError]:r.ProtoAuctionPostbidReasonEnum.CreativeError,[s.MF.PlayerError]:r.ProtoAuctionPostbidReasonEnum.PlayerError,[s.MF.SDKFailure]:r.ProtoAuctionPostbidReasonEnum.SDKFailure,[s.MF.TargetingMismatch]:r.ProtoAuctionPostbidReasonEnum.TargetingMismatch,[s.MF.UnsupportedMedia]:r.ProtoAuctionPostbidReasonEnum.UnsupportedMedia}[t]}static fromProtoAuctionPostbidReason(t){return{[r.ProtoAuctionPostbidReasonEnum.CreativeError]:s.MF.CreativeError,[r.ProtoAuctionPostbidReasonEnum.PlayerError]:s.MF.PlayerError,[r.ProtoAuctionPostbidReasonEnum.SDKFailure]:s.MF.SDKFailure,[r.ProtoAuctionPostbidReasonEnum.TargetingMismatch]:s.MF.TargetingMismatch,[r.ProtoAuctionPostbidReasonEnum.UnsupportedMedia]:s.MF.UnsupportedMedia}[t]}static getProtoFloorPriceBypassReason(t){return{[s.N0.BidInHand]:s.N0.BidInHand,[s.N0.FixedCpm]:s.N0.FixedCpm,[s.N0.MaxBidPrice]:s.N0.MaxBidPrice,[s.N0.MinCpm]:s.N0.MinCpm,[s.N0.NoPredictionFound]:s.N0.NoPredictionFound,[s.N0.StaticFactorUsed]:s.N0.StaticFactorUsed,[s.N0.VideoOrBannerMin]:s.N0.VideoOrBannerMin}[t]}static fromProtoFloorPriceBypassReason(t){return{[s.N0.BidInHand]:s.N0.BidInHand,[s.N0.FixedCpm]:s.N0.FixedCpm,[s.N0.MaxBidPrice]:s.N0.MaxBidPrice,[s.N0.MinCpm]:s.N0.MinCpm,[s.N0.NoPredictionFound]:s.N0.NoPredictionFound,[s.N0.StaticFactorUsed]:s.N0.StaticFactorUsed,[s.N0.VideoOrBannerMin]:s.N0.VideoOrBannerMin}[t]}static getProtoGDPRConsentMode(t){return{[s.q1.Unknown]:r.ProtoGdprConsentModeEnum.Unknown,[s.q1.NoCmp]:r.ProtoGdprConsentModeEnum.NoCmp,[s.q1.NoConsent]:r.ProtoGdprConsentModeEnum.NoConsent,[s.q1.NotAllDemandConsent]:r.ProtoGdprConsentModeEnum.NotAllDemandConsent,[s.q1.NoConnatixConsent]:r.ProtoGdprConsentModeEnum.NoConnatixConsent,[s.q1.AllGood]:r.ProtoGdprConsentModeEnum.AllGood}[t]}static fromProtoGDPRConsentMode(t){return{[r.ProtoGdprConsentModeEnum.Unknown]:s.q1.Unknown,[r.ProtoGdprConsentModeEnum.NoCmp]:s.q1.NoCmp,[r.ProtoGdprConsentModeEnum.NoConsent]:s.q1.NoConsent,[r.ProtoGdprConsentModeEnum.NotAllDemandConsent]:s.q1.NotAllDemandConsent,[r.ProtoGdprConsentModeEnum.NoConnatixConsent]:s.q1.NoConnatixConsent,[r.ProtoGdprConsentModeEnum.AllGood]:s.q1.AllGood}[t]}static getProtoHeavyAdType(t){return{[s.Yc.Global]:r.ProtoHeavyAdBlockTypeEnum.Global,[s.Yc.OverlayIframe]:r.ProtoHeavyAdBlockTypeEnum.OverlayIframe,[s.Yc.Script]:r.ProtoHeavyAdBlockTypeEnum.Script,[s.Yc.VPAIDIframe]:r.ProtoHeavyAdBlockTypeEnum.VpaidIframe}[t]}static fromProtoHeavyAdType(t){return{[r.ProtoHeavyAdBlockTypeEnum.Global]:s.Yc.Global,[r.ProtoHeavyAdBlockTypeEnum.OverlayIframe]:s.Yc.OverlayIframe,[r.ProtoHeavyAdBlockTypeEnum.Script]:s.Yc.Script,[r.ProtoHeavyAdBlockTypeEnum.VpaidIframe]:s.Yc.VPAIDIframe}[t]}static getProtoInternalAuctionDemandType(t){return{[s.AM.None]:r.ProtoDemandTypeEnum.None,[s.AM.PMP]:r.ProtoDemandTypeEnum.PMP,[s.AM.OpenMarket]:r.ProtoDemandTypeEnum.OpenMarket,[s.AM.SelfServed]:r.ProtoDemandTypeEnum.SelfServed}[t]}static fromProtoInternalAuctionDemandType(t){return{[r.ProtoDemandTypeEnum.None]:s.AM.None,[r.ProtoDemandTypeEnum.PMP]:s.AM.PMP,[r.ProtoDemandTypeEnum.OpenMarket]:s.AM.OpenMarket,[r.ProtoDemandTypeEnum.SelfServed]:s.AM.SelfServed}[t]}static getProtoLineItemAbTest(t){return{[s.KY.CaseA]:r.ProtoLineItemAbTestCase.CaseA,[s.KY.CaseB]:r.ProtoLineItemAbTestCase.CaseB}[t]}static fromProtoLineItemAbTest(t){return{[r.ProtoLineItemAbTestCase.CaseA]:s.KY.CaseA,[r.ProtoLineItemAbTestCase.CaseB]:s.KY.CaseB}[t]}static getProtoMediaClickType(t){return{[s.$u.Click]:r.ProtoMediaClickTypeEnum.Click,[s.$u.CloseClick]:r.ProtoMediaClickTypeEnum.CloseClick,[s.$u.FullScreenClick]:r.ProtoMediaClickTypeEnum.FullScreenClick,[s.$u.ExitFullScreenClick]:r.ProtoMediaClickTypeEnum.ExitFullScreenClick,[s.$u.GalleryClick]:r.ProtoMediaClickTypeEnum.GalleryClick,[s.$u.MuteClick]:r.ProtoMediaClickTypeEnum.MuteClick,[s.$u.NextClick]:r.ProtoMediaClickTypeEnum.NextClick,[s.$u.PauseClick]:r.ProtoMediaClickTypeEnum.PauseClick,[s.$u.PlayClick]:r.ProtoMediaClickTypeEnum.PlayClick,[s.$u.PreviousClick]:r.ProtoMediaClickTypeEnum.PreviousClick,[s.$u.SubtitleClick]:r.ProtoMediaClickTypeEnum.SubtitleClick,[s.$u.UnmuteClick]:r.ProtoMediaClickTypeEnum.UnmuteClick,[s.$u.UrlClick]:r.ProtoMediaClickTypeEnum.UrlClick,[s.$u.VolumeClick]:r.ProtoMediaClickTypeEnum.VolumeClick}[t]}static fromProtoGetMediaClickType(t){return{[r.ProtoMediaClickTypeEnum.Click]:s.$u.Click,[r.ProtoMediaClickTypeEnum.CloseClick]:s.$u.CloseClick,[r.ProtoMediaClickTypeEnum.FullScreenClick]:s.$u.FullScreenClick,[r.ProtoMediaClickTypeEnum.ExitFullScreenClick]:s.$u.ExitFullScreenClick,[r.ProtoMediaClickTypeEnum.GalleryClick]:s.$u.GalleryClick,[r.ProtoMediaClickTypeEnum.MuteClick]:s.$u.MuteClick,[r.ProtoMediaClickTypeEnum.NextClick]:s.$u.NextClick,[r.ProtoMediaClickTypeEnum.PauseClick]:s.$u.PauseClick,[r.ProtoMediaClickTypeEnum.PlayClick]:s.$u.PlayClick,[r.ProtoMediaClickTypeEnum.PreviousClick]:s.$u.PreviousClick,[r.ProtoMediaClickTypeEnum.SubtitleClick]:s.$u.SubtitleClick,[r.ProtoMediaClickTypeEnum.UnmuteClick]:s.$u.UnmuteClick,[r.ProtoMediaClickTypeEnum.UrlClick]:s.$u.UrlClick,[r.ProtoMediaClickTypeEnum.VolumeClick]:s.$u.VolumeClick}[t]}static getProtoMediaType(t){return{[s.L5.Image]:r.ProtoMediaTypeEnum.Image,[s.L5.Video]:r.ProtoMediaTypeEnum.Video}[t]}static fromProtoGetMediaType(t){return{[r.ProtoMediaTypeEnum.Image]:s.L5.Image,[r.ProtoMediaTypeEnum.Video]:s.L5.Video}[t]}static getProtoPrebidReason(t){return{[s._Z.RequestException]:r.ConnatixNoBidReasonEnum.RequestException,[s._Z.Timeout]:r.ConnatixNoBidReasonEnum.Timeout,[s._Z.EmptyResponse]:r.ConnatixNoBidReasonEnum.EmptyResponse,[s._Z.InvalidResponse]:r.ConnatixNoBidReasonEnum.InvalidResponse,[s._Z.NoBid]:r.ConnatixNoBidReasonEnum.NoBid,[s._Z.BidBelowFloor]:r.ConnatixNoBidReasonEnum.BidBelowFloor,[s._Z.DealIdMismatch]:r.ConnatixNoBidReasonEnum.DealIdMismatch,[s._Z.CsInvalidResponse]:r.ConnatixNoBidReasonEnum.CsInvalidResponse,[s._Z.CsRequestException]:r.ConnatixNoBidReasonEnum.CsRequestException,[s._Z.CsEmptyResponse]:r.ConnatixNoBidReasonEnum.CsEmptyResponse,[s._Z.NoLibInPage]:r.ConnatixNoBidReasonEnum.NoLibInPage,[s._Z.BidIsNotTargetingAllowedEver]:r.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver,[s._Z.VastVersionNotSupported]:r.ConnatixNoBidReasonEnum.VastVersionNotSupported}[t]}static fromProtoPrebidReason(t){return{[r.ConnatixNoBidReasonEnum.RequestException]:s._Z.RequestException,[r.ConnatixNoBidReasonEnum.Timeout]:s._Z.Timeout,[r.ConnatixNoBidReasonEnum.EmptyResponse]:s._Z.EmptyResponse,[r.ConnatixNoBidReasonEnum.InvalidResponse]:s._Z.InvalidResponse,[r.ConnatixNoBidReasonEnum.NoBid]:s._Z.NoBid,[r.ConnatixNoBidReasonEnum.BidBelowFloor]:s._Z.BidBelowFloor,[r.ConnatixNoBidReasonEnum.DealIdMismatch]:s._Z.DealIdMismatch,[r.ConnatixNoBidReasonEnum.CsInvalidResponse]:s._Z.CsInvalidResponse,[r.ConnatixNoBidReasonEnum.CsRequestException]:s._Z.CsRequestException,[r.ConnatixNoBidReasonEnum.CsEmptyResponse]:s._Z.CsEmptyResponse,[r.ConnatixNoBidReasonEnum.NoLibInPage]:s._Z.NoLibInPage,[r.ConnatixNoBidReasonEnum.BidIsNotTargetingAllowedEver]:s._Z.BidIsNotTargetingAllowedEver,[r.ConnatixNoBidReasonEnum.VastVersionNotSupported]:s._Z.VastVersionNotSupported}[t]}static getProtoPrebidPartnerReason(t){return{[s.XD.Unknown]:r.PartnerNoBidReasonEnum.Unknown,[s.XD.TechnicalError]:r.PartnerNoBidReasonEnum.TechnicalError,[s.XD.InvalidRequest]:r.PartnerNoBidReasonEnum.InvalidRequest,[s.XD.KnownWebSpider]:r.PartnerNoBidReasonEnum.KnownWebSpider,[s.XD.SuspectedNonHumanTraffic]:r.PartnerNoBidReasonEnum.SuspectedNonHumanTraffic,[s.XD.CloudIP]:r.PartnerNoBidReasonEnum.CloudIP,[s.XD.UnsupportedDevice]:r.PartnerNoBidReasonEnum.UnsupportedDevice,[s.XD.BlockedPublisher]:r.PartnerNoBidReasonEnum.BlockedPublisher,[s.XD.UnmatchedUser]:r.PartnerNoBidReasonEnum.UnmatchedUser,[s.XD.DailyDomainCapMet]:r.PartnerNoBidReasonEnum.DailyDomainCapMet,[s.XD.DailyReaderCapMet]:r.PartnerNoBidReasonEnum.DailyReaderCapMet}[t]}static fromProtoPrebidPartnerReason(t){return{[r.PartnerNoBidReasonEnum.Unknown]:s.XD.Unknown,[r.PartnerNoBidReasonEnum.TechnicalError]:s.XD.TechnicalError,[r.PartnerNoBidReasonEnum.InvalidRequest]:s.XD.InvalidRequest,[r.PartnerNoBidReasonEnum.KnownWebSpider]:s.XD.KnownWebSpider,[r.PartnerNoBidReasonEnum.SuspectedNonHumanTraffic]:s.XD.SuspectedNonHumanTraffic,[r.PartnerNoBidReasonEnum.CloudIP]:s.XD.CloudIP,[r.PartnerNoBidReasonEnum.UnsupportedDevice]:s.XD.UnsupportedDevice,[r.PartnerNoBidReasonEnum.BlockedPublisher]:s.XD.BlockedPublisher,[r.PartnerNoBidReasonEnum.UnmatchedUser]:s.XD.UnmatchedUser,[r.PartnerNoBidReasonEnum.DailyDomainCapMet]:s.XD.DailyDomainCapMet,[r.PartnerNoBidReasonEnum.DailyReaderCapMet]:s.XD.DailyReaderCapMet}[t]}static getProtoQuartile(t){return{[s.yU.Start]:r.ProtoQuartilesEnum.Start,[s.yU.First]:r.ProtoQuartilesEnum.First,[s.yU.Second]:r.ProtoQuartilesEnum.Second,[s.yU.Third]:r.ProtoQuartilesEnum.Third,[s.yU.Fourth]:r.ProtoQuartilesEnum.Fourth}[t]}static fromProtoGetQuartile(t){return{[r.ProtoQuartilesEnum.Start]:s.yU.Start,[r.ProtoQuartilesEnum.First]:s.yU.First,[r.ProtoQuartilesEnum.Second]:s.yU.Second,[r.ProtoQuartilesEnum.Third]:s.yU.Third,[r.ProtoQuartilesEnum.Fourth]:s.yU.Fourth}[t]}static getProtoLiveRamp(t){return{[n.f.None]:r.ProtoLiveRampEnum.None,[n.f.ATS]:r.ProtoLiveRampEnum.ATS,[n.f.NonATS]:r.ProtoLiveRampEnum.NonATS}[t]}static fromProtoLiveRamp(t){return{[r.ProtoLiveRampEnum.None]:n.f.None,[r.ProtoLiveRampEnum.ATS]:n.f.ATS,[r.ProtoLiveRampEnum.NonATS]:n.f.NonATS}[t]}}class h{static getProtoTrackingMetadata(t){const{buildNumber:i,buildAbPart:e,buildAbId:s,customParam1:n,customParam2:r,customParam3:a,customParam4:c,customParam5:d,clientAb0:l,clientAb1:u,serverAb0:p,serverAb1:f,playerId:m,sessionId:v,pageUrl:g,userId:y,shouldTrackAllRequests:b,isPageInFocus:I,bundleId:w,abTestId:S,implementationType:A,browser:P,geo:_}=t;return{geo:_?h.lR(_):void 0,browser:P?h.uR(P):void 0,implementationType:A?o.getProtoImplementationType(A):void 0,customParam1:n,customParam2:r,customParam3:a,customParam4:c,customParam5:d,clientAb0:l,clientAb1:u,serverAb0:p,serverAb1:f,playerId:m,sessionId:v,pageUrl:g,userId:y,isPageInFocus:I,version:i,bundleId:w,bundleAbId:s,bundlePart:e,abTestId:S,shouldTrackAllRequests:b}}static fromProtoGetTrackingMetadata(t){const{bundleAbId:i,version:e,bundlePart:s,customParam1:n,customParam2:r,customParam3:a,customParam4:c,customParam5:d,clientAb0:l,clientAb1:u,serverAb0:p,serverAb1:f,playerId:m,sessionId:v,pageUrl:g,userId:y,shouldTrackAllRequests:b,isPageInFocus:I,bundleId:w,abTestId:S,implementationType:A,browser:P,geo:_}=t;return{geo:_?h.pR(_):void 0,browser:P?h.fR(P):void 0,implementationType:o.fromProtoGetImplementationType(A),customParam1:n,customParam2:r,customParam3:a,customParam4:c,customParam5:d,clientAb0:l,clientAb1:u,serverAb0:p,serverAb1:f,playerId:m,sessionId:v,pageUrl:g,userId:y,isPageInFocus:I,buildNumber:e,bundleId:w,buildAbId:i,buildAbPart:s,abTestId:S,shouldTrackAllRequests:b}}static uR(t){const{osCode:i,browserVersion:e,browserType:s,deviceType:n}=t;return{osCode:i,browserVersion:e,browserType:s,device:o.getProtoDeviceType(n)}}static fR(t){const{osCode:i,browserVersion:e,browserType:s,device:n}=t;return{osCode:i,browserVersion:e,browserType:s,deviceType:o.fromProtoGetDeviceType(n)}}static lR(t){const{latitude:i,longitude:e,zipCode:s,cityId:n,countryGeoId:r,ip:o,subdivisionId:h,dmaId:a}=t;return{cityId:n,countryGeoId:r,ip:o,lat:i,lon:e,subdivisionId:h,zipcode:s,dmaId:a}}static pR(t){const{lat:i,lon:e,zipcode:s,cityId:n,countryGeoId:r,ip:o,subdivisionId:h,dmaId:a}=t;return{cityId:n,countryGeoId:r,ip:o,latitude:i,longitude:e,subdivisionId:h,zipCode:s,dmaId:a}}}class a{static getProtoSentimentAnalysis(t){return{negative:t.negative,neutral:t.neutral,positive:t.positive}}static fromProtoGetSentimentAnalysis(t){return{negative:t.negative,neutral:t.neutral,positive:t.positive}}}class c{static getProtoLineItemAbTest(t){return{guid:t.id,lineItemAbTestCase:o.getProtoLineItemAbTest(t.lineItemAbTestCase)}}static fromProtoLineItemAbTestFromProto(t){return{id:t.guid,lineItemAbTestCase:o.fromProtoLineItemAbTest(t.lineItemAbTestCase)}}}class d{static getProtoAuctionInformation(t){const{bidDensity:i,highestObfuscatedBidPrice:e,secondHighestObfuscatedBidPrice:s}=t;return{bidDensity:i,highestObfuscatedBidPrice:e,secondHighestObfuscatedBidPrice:s}}static fromProtoAuctionInformation(t){const{bidDensity:i,highestObfuscatedBidPrice:e,secondHighestObfuscatedBidPrice:s}=t;return{bidDensity:i,highestObfuscatedBidPrice:e,secondHighestObfuscatedBidPrice:s}}}class l{static getProtoFloorPriceInformation(t){const{floorPrices:i,floorPriceIndexUsed:e,floorPriceFactorBypassReason:s,adxPredictedFloorPrice:n}=t;return{adxPredictedFloorPrice:n,floorPrices:i,floorPriceIndexUsed:e,floorPriceBypassReason:s?o.getProtoFloorPriceBypassReason(s):void 0}}static fromProtoFloorPriceInformation(t){const{floorPrices:i,floorPriceIndexUsed:e,floorPriceBypassReason:s,adxPredictedFloorPrice:n}=t;return{adxPredictedFloorPrice:n,floorPrices:i,floorPriceIndexUsed:e,floorPriceFactorBypassReason:s?o.fromProtoFloorPriceBypassReason(s):void 0}}}class u{static getProtoInternalAuction(t){const{winnerDemandType:i,firstLoser:e,firstOpenMarketLoser:s}=t;return{winnerDemandType:o.getProtoInternalAuctionDemandType(i),firstLoser:e?u.getProtoInternalAuctionBid(e):void 0,firstOpenMarketLoser:s?u.getProtoInternalAuctionBid(s):void 0}}static fromProtoInternalAuction(t){const{winnerDemandType:i,firstLoser:e,firstOpenMarketLoser:s}=t;return{winnerDemandType:o.fromProtoInternalAuctionDemandType(i),firstLoser:e?u.fromProtoInternalAuctionBid(e):void 0,firstOpenMarketLoser:s?u.fromProtoInternalAuctionBid(s):void 0}}static getProtoInternalAuctionBid(t){const{advertiserLineItemId:i,customClientPrice:e,encryptedPrice:s,demandType:n,adDuration:r}=t;return{demandType:o.getProtoInternalAuctionDemandType(n),advertiserLineItemId:i,customClientPrice:e,encryptedPrice:s,adDuration:r}}static fromProtoInternalAuctionBid(t){const{advertiserLineItemId:i,customClientPrice:e,encryptedPrice:s,demandType:n,adDuration:r}=t;return{demandType:o.fromProtoInternalAuctionDemandType(n),advertiserLineItemId:i,customClientPrice:e,encryptedPrice:s,adDuration:r}}}},6286:(t,i,e)=>{"use strict";e.d(i,{j:()=>a});var s=e(5650),n=e(4798),r=e(6716),o=e(8659),h=function(t,i,e,s){var n,r=arguments.length,o=r<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(o=(r<3?n(o):r>3?n(i,e,o):n(i,e))||o);return r>3&&o&&Object.defineProperty(i,e,o),o};let a=class{constructor(){this.xb=new r.x,this.kb=new r.x,this.mR=new r.x}get onLineItemPlatformCapped(){return this.xb.asObservable()}get onImpressionRevenue(){return this.kb.asObservable()}get onLineItemViewabilityChange(){return this.mR.asObservable()}onResponseReceived(t,i){const{platformCappedLineItemIdList:e,adServerLineItemName:s,impressionRevenue:n,isViewabilityRestricted:r}=t;this.vR(e),this.gR(n,s),this.yR(i,r)}vR(t){(0,n.$K)(t)&&(0,s.BZ)(t)&&this.xb.next(t)}gR(t,i){(0,n.r)(t)&&(0,n.QM)(i)&&this.kb.next({impressionRevenue:t,adServerLineItemName:i})}yR(t,i){(0,n.QM)(t)&&(0,n.$K)(i)&&this.mR.next([t,i])}};a=h([(0,o.b2)(),(0,o.Yn)(o.Fw.ContainerScoped)],a)},202:(t,i,e)=>{"use strict";var s;e.d(i,{f:()=>s}),function(t){t[t.None=0]="None",t[t.ATS=1]="ATS",t[t.NonATS=2]="NonATS"}(s||(s={}))},4967:(t,i,e)=>{"use strict";var s;e.d(i,{$:()=>s}),function(t){t[t.Click=0]="Click",t[t.UrlClick=1]="UrlClick",t[t.VolumeClick=2]="VolumeClick",t[t.PlayClick=3]="PlayClick",t[t.PauseClick=4]="PauseClick",t[t.NextClick=5]="NextClick",t[t.PreviousClick=6]="PreviousClick",t[t.MuteClick=7]="MuteClick",t[t.UnmuteClick=8]="UnmuteClick",t[t.CloseClick=9]="CloseClick",t[t.GalleryClick=11]="GalleryClick",t[t.SubtitleClick=12]="SubtitleClick",t[t.FullScreenClick=13]="FullScreenClick",t[t.ExitFullScreenClick=14]="ExitFullScreenClick"}(s||(s={}))},5692:(t,i,e)=>{"use strict";var s;e.d(i,{y:()=>s}),function(t){t[t.Start=0]="Start",t[t.First=1]="First",t[t.Second=2]="Second",t[t.Third=3]="Third",t[t.Fourth=4]="Fourth"}(s||(s={}))},9361:(t,i,e)=>{"use strict";var s,n,r,o;e.d(i,{ev:()=>r,xX:()=>c,VE:()=>y,Px:()=>a,AT:()=>v,MF:()=>m,VB:()=>s,N0:()=>f,q1:()=>d,Yc:()=>o,Vx:()=>n,AM:()=>g,KY:()=>l,$u:()=>I.$,L5:()=>h,XD:()=>p,_Z:()=>u,yU:()=>b.y}),function(t){t[t.Desktop=0]="Desktop",t[t.Smartphone=1]="Smartphone",t[t.Tablet=2]="Tablet",t[t.GameConsole=3]="GameConsole",t[t.SmartTV=4]="SmartTV",t[t.WearableComputer=5]="WearableComputer",t[t.PDA=6]="PDA",t[t.Unrecognized=7]="Unrecognized"}(s||(s={})),function(t){t[t.Web=0]="Web",t[t.Amp=1]="Amp"}(n||(n={})),function(t){t[t.Banner=0]="Banner",t[t.Network=1]="Network"}(r||(r={})),function(t){t[t.Global=0]="Global",t[t.Script=1]="Script",t[t.VPAIDIframe=2]="VPAIDIframe",t[t.OverlayIframe=3]="OverlayIframe"}(o||(o={}));var h,a,c,d,l,u,p,f,m,v,g,y,b=e(5692),I=e(4967);!function(t){t[t.Image=0]="Image",t[t.Video=1]="Video"}(h||(h={})),function(t){t[t.Unknown=0]="Unknown",t[t.Vpaid=1]="Vpaid",t[t.VastMedia=2]="VastMedia",t[t.CnxMedia=3]="CnxMedia",t[t.Jw=4]="Jw",t[t.Ima=5]="Ima",t[t.AOL=6]="AOL"}(a||(a={})),function(t){t[t.None=0]="None",t[t.PreRoll=1]="PreRoll",t[t.MidRoll=2]="MidRoll",t[t.PostRoll=3]="PostRoll"}(c||(c={})),function(t){t[t.Unknown=0]="Unknown",t[t.NoCmp=1]="NoCmp",t[t.NoConsent=2]="NoConsent",t[t.NoConnatixConsent=3]="NoConnatixConsent",t[t.NotAllDemandConsent=4]="NotAllDemandConsent",t[t.AllGood=5]="AllGood"}(d||(d={})),function(t){t[t.CaseA=0]="CaseA",t[t.CaseB=1]="CaseB"}(l||(l={})),function(t){t[t.RequestException=0]="RequestException",t[t.Timeout=1]="Timeout",t[t.EmptyResponse=2]="EmptyResponse",t[t.InvalidResponse=3]="InvalidResponse",t[t.NoBid=4]="NoBid",t[t.BidBelowFloor=5]="BidBelowFloor",t[t.DealIdMismatch=6]="DealIdMismatch",t[t.CsInvalidResponse=7]="CsInvalidResponse",t[t.CsRequestException=8]="CsRequestException",t[t.CsEmptyResponse=9]="CsEmptyResponse",t[t.NoLibInPage=11]="NoLibInPage",t[t.BidIsNotTargetingAllowedEver=12]="BidIsNotTargetingAllowedEver",t[t.VastVersionNotSupported=13]="VastVersionNotSupported"}(u||(u={})),function(t){t[t.Unknown=0]="Unknown",t[t.TechnicalError=1]="TechnicalError",t[t.InvalidRequest=2]="InvalidRequest",t[t.KnownWebSpider=3]="KnownWebSpider",t[t.SuspectedNonHumanTraffic=4]="SuspectedNonHumanTraffic",t[t.CloudIP=5]="CloudIP",t[t.UnsupportedDevice=6]="UnsupportedDevice",t[t.BlockedPublisher=7]="BlockedPublisher",t[t.UnmatchedUser=8]="UnmatchedUser",t[t.DailyReaderCapMet=9]="DailyReaderCapMet",t[t.DailyDomainCapMet=10]="DailyDomainCapMet"}(p||(p={})),function(t){t[t.MinCpm=0]="MinCpm",t[t.FixedCpm=1]="FixedCpm",t[t.MaxBidPrice=2]="MaxBidPrice",t[t.VideoOrBannerMin=3]="VideoOrBannerMin",t[t.BidInHand=6]="BidInHand",t[t.NoPredictionFound=7]="NoPredictionFound",t[t.StaticFactorUsed=8]="StaticFactorUsed"}(f||(f={})),function(t){t[t.CreativeError=0]="CreativeError",t[t.SDKFailure=1]="SDKFailure",t[t.UnsupportedMedia=2]="UnsupportedMedia",t[t.TargetingMismatch=3]="TargetingMismatch",t[t.PlayerError=4]="PlayerError"}(m||(m={})),function(t){t[t.TargetingMismatch=0]="TargetingMismatch",t[t.CompetitorPriority=1]="CompetitorPriority",t[t.AdOpportunityEnd=2]="AdOpportunityEnd"}(v||(v={})),function(t){t[t.None=0]="None",t[t.PMP=1]="PMP",t[t.OpenMarket=2]="OpenMarket",t[t.SelfServed=3]="SelfServed"}(g||(g={})),function(t){t[t.AdClick=1]="AdClick",t[t.AdClickThrough=2]="AdClickThrough",t[t.AdSkipClick=3]="AdSkipClick",t[t.VolumeClick=4]="VolumeClick",t[t.PauseClick=5]="PauseClick",t[t.PlayClick=6]="PlayClick",t[t.FullScreenClick=7]="FullScreenClick",t[t.MuteClick=8]="MuteClick",t[t.UnmuteClick=9]="UnmuteClick",t[t.ExitFullScreenClick=10]="ExitFullScreenClick",t[t.AdUserClose=11]="AdUserClose"}(y||(y={}));e(202)},1988:(t,i,e)=>{"use strict";var s;e.d(i,{Z:()=>n}),function(t){t.XL="cnx-bp-xl-lit",t.LG="cnx-bp-lg-lit",t.MD="cnx-bp-md-lit",t.SM="cnx-bp-sm-lit",t.XS="cnx-bp-xs-lit"}(s||(s={}));const n=s},4524:(t,i,e)=>{"use strict";var s;e.d(i,{t:()=>s}),function(t){t.Expand="expand",t.Collapse="collapse",t.Close="close",t.OverlayClick="overlayclick",t.GeneralUserInteraction="generaluserinteraction"}(s||(s={}))},6404:(t,i,e)=>{"use strict";var s;e.d(i,{N:()=>s}),function(t){t[t.Off=0]="Off",t[t.OnHover=1]="OnHover",t[t.AlwaysOn=2]="AlwaysOn"}(s||(s={}))},655:(t,i,e)=>{"use strict";e.d(i,{CR:()=>a,FC:()=>l,Jh:()=>o,KL:()=>u,XA:()=>h,ZT:()=>n,ev:()=>c,mG:()=>r,qq:()=>d});var s=function(t,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},s(t,i)};function n(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function r(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))}function o(t,i){var e,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(h){return function(a){return function(h){if(e)throw new TypeError("Generator is already executing.");for(;r&&(r=0,h[0]&&(o=0)),o;)try{if(e=1,s&&(n=2&h[0]?s.return:h[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,h[1])).done)return n;switch(s=0,n&&(h=[2&h[0],n.value]),h[0]){case 0:case 1:n=h;break;case 4:return o.label++,{value:h[1],done:!1};case 5:o.label++,s=h[1],h=[0];continue;case 7:h=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==h[0]&&2!==h[0])){o=0;continue}if(3===h[0]&&(!n||h[1]>n[0]&&h[1]<n[3])){o.label=h[1];break}if(6===h[0]&&o.label<n[1]){o.label=n[1],n=h;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(h);break}n[2]&&o.ops.pop(),o.trys.pop();continue}h=i.call(t,o)}catch(t){h=[6,t],s=0}finally{e=n=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,a])}}}Object.create;function h(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),o=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return o}function c(t,i,e){if(e||2===arguments.length)for(var s,n=0,r=i.length;n<r;n++)!s&&n in i||(s||(s=Array.prototype.slice.call(i,0,n)),s[n]=i[n]);return t.concat(s||Array.prototype.slice.call(i))}function d(t){return this instanceof d?(this.v=t,this):new d(t)}function l(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=e.apply(t,i||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(t){n[t]&&(s[t]=function(i){return new Promise((function(e,s){r.push([t,i,e,s])>1||h(t,i)}))})}function h(t,i){try{(e=n[t](i)).value instanceof d?Promise.resolve(e.value.v).then(a,c):l(r[0][2],e)}catch(t){l(r[0][3],t)}var e}function a(t){h("next",t)}function c(t){h("throw",t)}function l(t,i){t(i),r.shift(),r.length&&h(r[0][0],r[0][1])}}function u(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=h(t),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(e){i[e]=t[e]&&function(i){return new Promise((function(s,n){(function(t,i,e,s){Promise.resolve(s).then((function(i){t({value:i,done:e})}),i)})(s,n,(i=t[e](i)).done,i.value)}))}}}Object.create},8659:(t,i,e)=>{"use strict";var s;e.d(i,{Fw:()=>n,nC:()=>k,f3:()=>E,b2:()=>M,Yn:()=>B,ri:()=>L}),function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"}(s||(s={}));const n=s;var r=function(t,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])},r(t,i)};function o(t,i){function e(){this.constructor=t}r(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function h(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))}function a(t,i){var e,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(r){return function(h){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(6===r[0]&&o.label<n[1]){o.label=n[1],n=r;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(r);break}n[2]&&o.ops.pop(),o.trys.pop();continue}r=i.call(t,o)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,h])}}}function c(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),o=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return o}function l(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(d(arguments[i]));return t}function u(t){return!!t.useClass}function p(t){return!!t.useFactory}var f=function(){function t(t){this.wrap=t,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(t){var i,e=this,s=!1;return new Proxy({},this.createHandler((function(){return s||(i=t(e.wrap()),s=!0),i})))},t.prototype.createHandler=function(t){var i={};return this.reflectMethods.forEach((function(e){i[e]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return i[0]=t(),Reflect[e].apply(void 0,l(i))}})),i},t}();function m(t){return"string"==typeof t||"symbol"==typeof t}function v(t){return"object"==typeof t&&"token"in t&&"transform"in t}function g(t){return!!t.useToken}function y(t){return null!=t.useValue}const b=function(){function t(){this.bR=new Map}return t.prototype.entries=function(){return this.bR.entries()},t.prototype.getAll=function(t){return this.ensure(t),this.bR.get(t)},t.prototype.get=function(t){this.ensure(t);var i=this.bR.get(t);return i[i.length-1]||null},t.prototype.set=function(t,i){this.ensure(t),this.bR.get(t).push(i)},t.prototype.setAll=function(t,i){this.bR.set(t,i)},t.prototype.has=function(t){return this.ensure(t),this.bR.get(t).length>0},t.prototype.clear=function(){this.bR.clear()},t.prototype.ensure=function(t){this.bR.has(t)||this.bR.set(t,[])},t}();const I=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return o(i,t),i}(b);const w=function(){this.scopedResolutions=new Map};function S(t,i,e){var s,n,r=d(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1],o=function(t,i){return null===t?"at position #"+i:'"'+t.split(",")[i].trim()+'" at position #'+i}(void 0===r?null:r,i);return s="Cannot inject the dependency "+o+' of "'+t.name+'" constructor. Reason:',void 0===n&&(n="    "),l([s],e.message.split("\n").map((function(t){return n+t}))).join("\n")}var A=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return o(i,t),i}(b),P=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return o(i,t),i}(b);const _=function(){this.preResolution=new A,this.postResolution=new P};var x=new Map,T=function(){function t(t){this.parent=t,this.IR=new I,this.interceptors=new _,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(t,i,e){var s;if(void 0===e&&(e={lifecycle:n.Transient}),this.ensureNotDisposed(),s=function(t){return u(t)||y(t)||g(t)||p(t)}(i)?i:{useClass:i},g(s))for(var r=[t],o=s;null!=o;){var h=o.useToken;if(r.includes(h))throw new Error("Token registration cycle detected! "+l(r,[h]).join(" -> "));r.push(h);var a=this.IR.get(h);o=a&&g(a.provider)?a.provider:null}if((e.lifecycle===n.Singleton||e.lifecycle==n.ContainerScoped||e.lifecycle==n.ResolutionScoped)&&(y(s)||p(s)))throw new Error('Cannot use lifecycle "'+n[e.lifecycle]+'" with ValueProviders or FactoryProviders');return this.IR.set(t,{provider:s,options:e}),this},t.prototype.registerType=function(t,i){return this.ensureNotDisposed(),m(i)?this.register(t,{useToken:i}):this.register(t,{useClass:i})},t.prototype.registerInstance=function(t,i){return this.ensureNotDisposed(),this.register(t,{useValue:i})},t.prototype.registerSingleton=function(t,i){if(this.ensureNotDisposed(),m(t)){if(m(i))return this.register(t,{useToken:i},{lifecycle:n.Singleton});if(i)return this.register(t,{useClass:i},{lifecycle:n.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var e=t;return i&&!m(i)&&(e=i),this.register(t,{useClass:e},{lifecycle:n.Singleton})},t.prototype.resolve=function(t,i){void 0===i&&(i=new w),this.ensureNotDisposed();var e=this.getRegistration(t);if(!e&&m(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"Single"),e){var s=this.resolveRegistration(e,i);return this.executePostResolutionInterceptor(t,s,"Single"),s}if(function(t){return"function"==typeof t||t instanceof f}(t)){s=this.construct(t,i);return this.executePostResolutionInterceptor(t,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(t,i){var e,s;if(this.interceptors.preResolution.has(t)){var n=[];try{for(var r=c(this.interceptors.preResolution.getAll(t)),o=r.next();!o.done;o=r.next()){var h=o.value;"Once"!=h.options.frequency&&n.push(h),h.callback(t,i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(e)throw e.error}}this.interceptors.preResolution.setAll(t,n)}},t.prototype.executePostResolutionInterceptor=function(t,i,e){var s,n;if(this.interceptors.postResolution.has(t)){var r=[];try{for(var o=c(this.interceptors.postResolution.getAll(t)),h=o.next();!h.done;h=o.next()){var a=h.value;"Once"!=a.options.frequency&&r.push(a),a.callback(t,i,e)}}catch(t){s={error:t}}finally{try{h&&!h.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}this.interceptors.postResolution.setAll(t,r)}},t.prototype.resolveRegistration=function(t,i){if(this.ensureNotDisposed(),t.options.lifecycle===n.ResolutionScoped&&i.scopedResolutions.has(t))return i.scopedResolutions.get(t);var e,s=t.options.lifecycle===n.Singleton,r=t.options.lifecycle===n.ContainerScoped,o=s||r;return e=y(t.provider)?t.provider.useValue:g(t.provider)?o?t.instance||(t.instance=this.resolve(t.provider.useToken,i)):this.resolve(t.provider.useToken,i):u(t.provider)?o?t.instance||(t.instance=this.construct(t.provider.useClass,i)):this.construct(t.provider.useClass,i):p(t.provider)?t.provider.useFactory(this):this.construct(t.provider,i),t.options.lifecycle===n.ResolutionScoped&&i.scopedResolutions.set(t,e),e},t.prototype.resolveAll=function(t,i){var e=this;void 0===i&&(i=new w),this.ensureNotDisposed();var s=this.getAllRegistrations(t);if(!s&&m(t))throw new Error('Attempted to resolve unregistered dependency token: "'+t.toString()+'"');if(this.executePreResolutionInterceptor(t,"All"),s){var n=s.map((function(t){return e.resolveRegistration(t,i)}));return this.executePostResolutionInterceptor(t,n,"All"),n}var r=[this.construct(t,i)];return this.executePostResolutionInterceptor(t,r,"All"),r},t.prototype.isRegistered=function(t,i){return void 0===i&&(i=!1),this.ensureNotDisposed(),this.IR.has(t)||i&&(this.parent||!1)&&this.parent.isRegistered(t,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this.IR.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var t,i;this.ensureNotDisposed();try{for(var e=c(this.IR.entries()),s=e.next();!s.done;s=e.next()){var n=d(s.value,2),r=n[0],o=n[1];this.IR.setAll(r,o.filter((function(t){return!y(t.provider)})).map((function(t){return t.instance=void 0,t})))}}catch(i){t={error:i}}finally{try{s&&!s.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}},t.prototype.createChildContainer=function(){var i,e;this.ensureNotDisposed();var s=new t(this);try{for(var r=c(this.IR.entries()),o=r.next();!o.done;o=r.next()){var h=d(o.value,2),a=h[0],l=h[1];l.some((function(t){return t.options.lifecycle===n.ContainerScoped}))&&s.IR.setAll(a,l.map((function(t){return t.options.lifecycle===n.ContainerScoped?{provider:t.provider,options:t.options}:t})))}}catch(t){i={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(i)throw i.error}}return s},t.prototype.beforeResolution=function(t,i,e){void 0===e&&(e={frequency:"Always"}),this.interceptors.preResolution.set(t,{callback:i,options:e})},t.prototype.afterResolution=function(t,i,e){void 0===e&&(e={frequency:"Always"}),this.interceptors.postResolution.set(t,{callback:i,options:e})},t.prototype.dispose=function(){return h(this,void 0,void 0,(function(){var t;return a(this,(function(i){switch(i.label){case 0:return this.disposed=!0,t=[],this.disposables.forEach((function(i){var e=i.dispose();e&&t.push(e)})),[4,Promise.all(t)];case 1:return i.sent(),[2]}}))}))},t.prototype.getRegistration=function(t){return this.isRegistered(t)?this.IR.get(t):this.parent?this.parent.getRegistration(t):null},t.prototype.getAllRegistrations=function(t){return this.isRegistered(t)?this.IR.getAll(t):this.parent?this.parent.getAllRegistrations(t):null},t.prototype.construct=function(t,i){var e=this;if(t instanceof f)return t.createProxy((function(t){return e.resolve(t,i)}));var s,n=function(){var s=x.get(t);if(!s||0===s.length){if(0===t.length)return new t;throw new Error('TypeInfo not known for "'+t.name+'"')}var n=s.map(e.resolveParams(i,t));return new(t.bind.apply(t,l([void 0],n)))}();return"function"!=typeof(s=n).dispose||s.dispose.length>0||this.disposables.add(n),n},t.prototype.resolveParams=function(t,i){var e=this;return function(s,n){var r,o,h,a;try{return"object"==typeof(a=s)&&"token"in a&&"multiple"in a?v(s)?s.multiple?(r=e.resolve(s.transform)).transform.apply(r,l([e.resolveAll(s.token)],s.transformArgs)):(o=e.resolve(s.transform)).transform.apply(o,l([e.resolve(s.token,t)],s.transformArgs)):s.multiple?e.resolveAll(s.token):e.resolve(s.token,t):v(s)?(h=e.resolve(s.transform,t)).transform.apply(h,l([e.resolve(s.token,t)],s.transformArgs)):e.resolve(s,t)}catch(t){throw new Error(S(i,n,t))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t}(),k=new T;var C="injectionTokens";const E=function(t){return i=t,function(t,s,n){var r=Reflect.getOwnMetadata(C,t)||{};r[n]=e?{token:i,transform:e.transformToken,transformArgs:e.args||[]}:i,Reflect.defineMetadata(C,r,t)};var i,e};const M=function(){return function(t){x.set(t,function(t){var i=Reflect.getMetadata("design:paramtypes",t)||[],e=Reflect.getOwnMetadata(C,t)||{};return Object.keys(e).forEach((function(t){i[+t]=e[t]})),i}(t))}};const L=function(){return function(t){M()(t),k.registerSingleton(t)}};function B(t,i){return function(e){M()(e),k.register(i||e,e,{lifecycle:t})}}if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.")},289:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.common||(t.roots.common=new t.Root)).addJSON({ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoAdDomainBlockingResponse:{fields:{domains:{rule:"repeated",type:"string",id:1}}},ProtoCoreTamBidRequest:{fields:{lineItemId:{type:"string",id:1},code:{type:"string",id:2},metadata:{type:"MetadataModel",id:3},exploration:{type:"bool",id:4}}},MetadataModel:{fields:{version:{type:"int32",id:1},sessionId:{type:"string",id:2},playerId:{type:"string",id:3},userId:{type:"string",id:4},browser:{type:"Browser",id:5},geo:{type:"GeoLocation",id:6},clientAb0:{type:"int32",id:7},clientAb1:{type:"int32",id:8},serverAb0:{type:"int32",id:9},serverAb1:{type:"int32",id:10},pageUrl:{type:"string",id:15},bundleId:{type:"string",id:17},implementationType:{type:"ProtoImplementationType",id:18},shouldTrackAllRequests:{type:"bool",id:19},customParam1:{type:"string",id:20},customParam2:{type:"string",id:21},customParam3:{type:"string",id:22},abTestId:{type:"string",id:24},isPageInFocus:{type:"bool",id:25},customParam4:{type:"string",id:26},customParam5:{type:"string",id:27},bundleAbId:{type:"string",id:28},bundlePart:{type:"string",id:29}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoCoreTamBidResponse:{fields:{errorMessage:{type:"string",id:1},encryptedBidPrice:{type:"string",id:10},ofskp:{type:"double",id:12},impressionTimeSpent:{type:"int32",id:13},bidRate:{type:"double",id:14},successRate:{type:"double",id:15}}},ProtoCookieSettings:{fields:{name:{type:"string",id:1},value:{type:"string",id:2},timestamp:{type:"int64",id:3}}},ProtoCookieSyncRequest:{fields:{cookieList:{rule:"repeated",type:"ProtoCookieSettings",id:1},secureMode:{type:"ProtoCookieSecureModeEnum",id:2},browserInfo:{type:"Browser",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoDiscount:{oneofs:{wR:{oneof:["rate"]}},fields:{rate:{type:"double",id:2,options:{proto3_optional:!0}},id:{type:"string",id:1}}},Insights:{fields:{key:{type:"string",id:1}}},ProtoSentimentAnalysis:{fields:{positive:{type:"double",id:1},neutral:{type:"double",id:2},negative:{type:"double",id:3}}},ProtoInsightsResponse:{fields:{insights:{rule:"repeated",type:"Insights",id:1},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:2}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItemQueryStringTargeting:{fields:{rule:{type:"ProtoLineItemQueryTargetingRuleEnum",id:1},keyValue:{keyType:"string",type:"string",id:2}}},ProtoAdxFloorPricePrediction:{fields:{predictedPriceObfuscated:{type:"double",id:1},floorPriceObfuscated:{type:"double",id:2},uprQueryName:{type:"string",id:3},uprQueryValue:{type:"string",id:4}}},ProtoLineItem:{oneofs:{SR:{oneof:["floorPricesNew"]}},fields:{floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},removeOutOfFocus:{type:"bool",id:8},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},prebidJsBidParamsJSONString:{type:"string",id:58},isPMP:{type:"bool",id:59},queryTargeting:{rule:"repeated",type:"ProtoLineItemQueryStringTargeting",id:61},adxFloorPricePredictionList:{rule:"repeated",type:"ProtoAdxFloorPricePrediction",id:62},playerSize:{type:"string",id:101}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoLineItemContextualTargetingEnum",id:1},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPricesData:{oneofs:{AR:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2,options:{proto3_optional:!0}},price:{type:"double",id:1}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},ProtoLineItemAbTestInformation:{fields:{guid:{type:"string",id:1},lineItemAbTestCase:{type:"ProtoLineItemAbTestCase",id:2}}},ProtoLiveMediaMetadataResponse:{fields:{startDate:{type:"string",id:1},outputUrl:{type:"string",id:2},thumbnailUrl:{type:"string",id:3},altText:{type:"string",id:4},name:{type:"string",id:5}}},ProtoSpriteSheet:{fields:{file:{type:"string",id:1},height:{type:"int32",id:2},count:{type:"int32",id:3}}},ProtoTrack:{fields:{file:{type:"string",id:1},type:{type:"ProtoTrackType",id:2},code:{type:"string",id:3},title:{type:"string",id:4}}},ProtoCuePoint:{fields:{timeStamp:{type:"int32",id:1}}},ProtoMediaMetadataResponse:{fields:{title:{type:"string",id:1},description:{type:"string",id:2},duration:{type:"int32",id:3},clickUrl:{type:"string",id:4},keywordList:{rule:"repeated",type:"string",id:5},trackList:{rule:"repeated",type:"ProtoTrack",id:6},spriteSheet:{type:"ProtoSpriteSheet",id:7},thumbnail:{type:"string",id:8},renditionList:{rule:"repeated",type:"ProtoRendition",id:9},hlsFilePath:{type:"string",id:11},languageId:{type:"string",id:12},sourceItemId:{type:"string",id:13},altText:{type:"string",id:14},cuePoints:{rule:"repeated",type:"ProtoCuePoint",id:16},multimediaId:{type:"string",id:17},publishDate:{type:"uint32",id:18},endDate:{type:"uint32",id:19},contentStudio:{type:"string",id:20},customMetadata:{type:"string",id:21}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoRtbRequest:{oneofs:{Df:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:46,options:{proto3_optional:!0}},metadata:{type:"MetadataModel",id:1},coppa:{type:"bool",id:4},refererUrl:{type:"string",id:5},testMode:{type:"bool",id:6},videoWidth:{type:"int32",id:7},videoHeight:{type:"int32",id:8},gdprCompliant:{type:"bool",id:9},soundOn:{type:"bool",id:10},gdprConsentData:{type:"string",id:11},explorationMode:{type:"bool",id:12},viewability:{type:"bool",id:13},outstream:{type:"bool",id:14},domainURL:{type:"string",id:16},isClickToPlay:{type:"bool",id:18},appVersion:{type:"string",id:21},deviceID:{type:"string",id:24},lineItems:{keyType:"string",type:"ProtoRtbRequestLineItemEntry",id:25},isCcpaBlockingUserInfo:{type:"bool",id:26},usPrivacyString:{type:"string",id:27},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:36},maxAdDuration:{type:"int32",id:37,options:{default:180}},customMacros:{keyType:"string",type:"string",id:38},maxBidPrice:{type:"double",id:39},playerWidth:{type:"int32",id:43},playerHeight:{type:"int32",id:44},useNewSkippability:{type:"bool",id:42},liveRampAtsEnvelope:{type:"string",id:45},connectionType:{type:"int32",id:47},OMSDKSupport:{type:"bool",id:48},OMSDKVersion:{type:"string",id:51},intentIqEids:{rule:"repeated",type:"ProtoIntentiqEidsList",id:52}}},ProtoIntentiqEidsList:{fields:{source:{type:"string",id:1},id:{rule:"repeated",type:"string",id:2}}},ProtoRtbRequestLineItemEntry:{oneofs:{PR:{oneof:["cachedFloorPrice"]}},fields:{cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:16,options:{proto3_optional:!0}},availableRequests:{type:"int32",id:1},gdprConsent:{type:"bool",id:4},publisherLineItemId:{type:"string",id:5},slotWidth:{type:"int32",id:6},slotHeight:{type:"int32",id:7},requestNumber:{type:"int32",id:8},skip:{type:"ProtoSkipEnabledEnum",id:12},skipmin:{type:"int32",id:13},skipafter:{type:"int32",id:14},minDuration:{type:"int32",id:15}}},ProtoCacheFloorPrice:{fields:{floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}},recommended:{type:"int32",id:2}}},ProtoRtbResponse:{fields:{lineItemResponses:{rule:"repeated",type:"ProtoRtbLineItem",id:3},liveRampEnvelopeStatus:{type:"LiveRampEnvelopeStatusEnum",id:4}}},ProtoRtbBid:{oneofs:{_R:{oneof:["floorPriceInformation"]},xR:{oneof:["discount"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:30,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:31,options:{proto3_optional:!0}},winNoticeUrl:{type:"string",id:2},adQualityCheckUrl:{type:"string",id:3},vastTag:{type:"string",id:4},encryptedPrice:{type:"string",id:6},creativeId:{type:"string",id:7},seatId:{type:"string",id:8},adomain:{type:"string",id:9},syncedUser:{type:"bool",id:10},requestedFloorPrice:{type:"double",id:11},campaignId:{type:"string",id:13},width:{type:"int32",id:14},height:{type:"int32",id:15},billingNoticeUrlList:{rule:"repeated",type:"string",id:16},mime:{type:"string",id:17,options:{default:"text/html"}},gtkpbp:{type:"double",id:18},successRate:{type:"double",id:19},impressionTimeSpent:{type:"int32",id:20},bidRate:{type:"double",id:21},dspId:{type:"string",id:22},cnxBidId:{type:"string",id:23},logAuctionInformation:{type:"bool",id:24},auctionBidId:{type:"string",id:25},rtbRequestId:{type:"string",id:26},liveRampType:{type:"ProtoLiveRampEnum",id:32},serverBillingNoticeUrls:{rule:"repeated",type:"string",id:33}}},ProtoRtbLineItem:{oneofs:{PR:{oneof:["cachedFloorPrice"]}},fields:{cachedFloorPrice:{type:"ProtoCacheFloorPrice",id:6,options:{proto3_optional:!0}},id:{type:"string",id:1},bids:{rule:"repeated",type:"ProtoRtbBid",id:3},noBidsCount:{type:"int32",id:5}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoAdClickTrackingRequest:{oneofs:{Df:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:14,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},publisherLineItemId:{type:"string",id:3},advertiserLineItemId:{type:"string",id:4},type:{type:"ProtoAdClickTypeEnum",id:5},insightIndexes:{rule:"repeated",type:"string",id:10},adBreakType:{type:"ProtoAdBreakTypeEnum",id:11},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:12},pageInsightIndexes:{rule:"repeated",type:"string",id:13},iasSegmentCodes:{rule:"repeated",type:"string",id:15}}},ProtoAdOpportunityRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:2},adBreak:{type:"ProtoAdBreakTypeEnum",id:3},playerWidth:{type:"int32",id:4},pageInsightIndexes:{rule:"repeated",type:"string",id:5},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoAuctionInfoRequest:{fields:{cnxBidId:{type:"string",id:1},auctionInformation:{type:"ProtoAuctionInformation",id:2},auctionLossReason:{type:"ProtoAuctionLossReasonEnum",id:3}}},ProtoAuctionInformation:{fields:{highestObfuscatedBidPrice:{type:"double",id:1},secondHighestObfuscatedBidPrice:{type:"double",id:2},bidDensity:{type:"int32",id:3}}},ProtoFloorPriceInformation:{oneofs:{TR:{oneof:["floorPriceIndexUsed"]},AR:{oneof:["floorPriceBypassReason"]},kR:{oneof:["adxPredictedFloorPrice"]}},fields:{floorPriceIndexUsed:{type:"int32",id:2,options:{proto3_optional:!0}},floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:3,options:{proto3_optional:!0}},adxPredictedFloorPrice:{type:"double",id:4,options:{proto3_optional:!0}},floorPrices:{rule:"repeated",type:"double",id:1,options:{packed:!1}}}},ProtoPrebid:{oneofs:{_R:{oneof:["floorPriceInformation"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:16,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},isUserSynced:{type:"bool",id:3},timeSpent:{type:"int32",id:4},reason:{type:"ConnatixNoBidReasonEnum",id:5},requestNumber:{type:"int32",id:6},partnerReason:{type:"PartnerNoBidReasonEnum",id:7},requestedFloorPrice:{type:"double",id:8},partnerCustomHeaders:{type:"string",id:9},prebidJsBidderName:{type:"string",id:12},playerWidth:{type:"int32",id:14},playerHeight:{type:"int32",id:15},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoBid:{oneofs:{_R:{oneof:["floorPriceInformation"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:22,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},isUserSynced:{type:"bool",id:3},timeSpent:{type:"int32",id:4},requestNumber:{type:"int32",id:5},creativeId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},rtbAdomain:{type:"string",id:8},encryptedPrice:{type:"string",id:9},requestedFloorPrice:{type:"double",id:10},prebidJsBidderName:{type:"string",id:13},customClientPrice:{type:"double",id:14},dspId:{type:"string",id:15},cnxBidId:{type:"string",id:16},playerWidth:{type:"int32",id:18},playerHeight:{type:"int32",id:19},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoPostBid:{oneofs:{_R:{oneof:["floorPriceInformation"]},xR:{oneof:["discount"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:28,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:30,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},isUserSynced:{type:"bool",id:3},timeSpent:{type:"int32",id:4},error:{type:"string",id:5},isBidLoaded:{type:"bool",id:6},creativeId:{type:"string",id:7},rtbSeatId:{type:"string",id:8},rtbAdomain:{type:"string",id:9},adsourceType:{type:"ProtoAdsourceTypeEnum",id:10},vastMediaType:{type:"string",id:11},adPodSlotPosition:{type:"int32",id:12},prebidJsBidderName:{type:"string",id:13},dspId:{type:"string",id:14},cnxBidId:{type:"string",id:15},winToAdLoadedTime:{type:"int32",id:16},auctionInformation:{type:"ProtoAuctionInformation",id:18},auctionPostbidReason:{type:"ProtoAuctionPostbidReasonEnum",id:19},requestNumber:{type:"int32",id:20},floorPrice:{type:"double",id:22},playerWidth:{type:"int32",id:23},playerHeight:{type:"int32",id:24},bidElapsedTimeSeconds:{type:"int32",id:25},adBreakType:{type:"ProtoAdBreakTypeEnum",id:26},liveRampType:{type:"ProtoLiveRampEnum",id:32},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoBidTrackingsRequest:{oneofs:{Df:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:13,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},prebids:{rule:"repeated",type:"ProtoPrebid",id:4},bids:{rule:"repeated",type:"ProtoBid",id:5},postBids:{rule:"repeated",type:"ProtoPostBid",id:6},shouldLogEverything:{type:"bool",id:7},hasGdprConsentPayload:{type:"bool",id:10},gdprConsentMode:{type:"ProtoGdprConsentModeEnum",id:11},isExplorationMode:{type:"bool",id:12}}},ProtoCookieLoggingRequest:{fields:{sessionId:{type:"string",id:1},userId:{type:"string",id:2},userIdStored:{type:"string",id:3},osCode:{type:"string",id:4},browserType:{type:"string",id:5},browserVersion:{type:"string",id:6}}},ProtoHeavyAdTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},advertiserLineItemId:{type:"string",id:2},heavyAdBlockTypeEnum:{type:"ProtoHeavyAdBlockTypeEnum",id:3},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoInternalAuction:{oneofs:{ER:{oneof:["firstLoser"]},MR:{oneof:["firstOpenMarketLoser"]}},fields:{firstLoser:{type:"ProtoInternalAuctionBid",id:2,options:{proto3_optional:!0}},firstOpenMarketLoser:{type:"ProtoInternalAuctionBid",id:3,options:{proto3_optional:!0}},winnerDemandType:{type:"ProtoDemandTypeEnum",id:1}}},ProtoInternalAuctionBid:{oneofs:{LR:{oneof:["customClientPrice"]},BR:{oneof:["encryptedPrice"]},bu:{oneof:["adDuration"]}},fields:{customClientPrice:{type:"double",id:2,options:{proto3_optional:!0}},encryptedPrice:{type:"string",id:3,options:{proto3_optional:!0}},adDuration:{type:"double",id:5,options:{proto3_optional:!0}},demandType:{type:"ProtoDemandTypeEnum",id:1},advertiserLineItemId:{type:"string",id:4}}},ProtoMediaClickTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},type:{type:"ProtoMediaClickTypeEnum",id:3},clickUrl:{type:"string",id:4},slideTitle:{type:"string",id:5},slideNumber:{type:"int32",id:6},slideMediaType:{type:"ProtoMediaTypeEnum",id:7},insightIndexes:{rule:"repeated",type:"string",id:12},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:13}}},ProtoMediaQuartileRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:2},quartile:{type:"ProtoQuartilesEnum",id:4},insightIndexes:{rule:"repeated",type:"string",id:9},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:10}}},ProtoPlayerStartRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionAdBlockerRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},adBlockDetectionType:{type:"ProtoAdBlockDetectionTypeEnum",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionRenderedRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},hasAdBlocker:{type:"bool",id:4},bundleName:{type:"string",id:5},playerWidth:{type:"int32",id:6},playerHeight:{type:"int32",id:7},pageInsightIndexes:{rule:"repeated",type:"string",id:8},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoSessionTimeTrackingRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},timePlayed:{type:"int32",id:2},timePlayedInView:{type:"int32",id:3},sessionTime:{type:"int32",id:4},pageInsightIndexes:{rule:"repeated",type:"string",id:5}}},ProtoSessionViewRequest:{fields:{trackingRequestMeta:{type:"MetadataModel",id:1},pageInsightIndexes:{rule:"repeated",type:"string",id:2},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoTrackingResponse:{oneofs:{RR:{oneof:["isViewabilityRestricted"]}},fields:{isViewabilityRestricted:{type:"bool",id:5,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},platformCappedLineItemIdList:{rule:"repeated",type:"string",id:2},impressionRevenue:{type:"double",id:3},adServerLineItemName:{type:"string",id:4}}},ProtoVideoAdImpressionRequest:{oneofs:{_R:{oneof:["floorPriceInformation"]},Df:{oneof:["lineItemAbTestInformation"]},OR:{oneof:["internalAuction"]},xR:{oneof:["discount"]}},fields:{floorPriceInformation:{type:"ProtoFloorPriceInformation",id:46,options:{proto3_optional:!0}},lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:47,options:{proto3_optional:!0}},internalAuction:{type:"ProtoInternalAuction",id:48,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:50,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},isUserSynced:{type:"bool",id:7},timeSpent:{type:"int32",id:8},encryptedPrice:{type:"string",id:9},creativeId:{type:"string",id:10},rtbSeatId:{type:"string",id:11},rtbAdomain:{type:"string",id:12},customClientPrice:{type:"double",id:13},adsourceType:{type:"ProtoAdsourceTypeEnum",id:14},vastMediaType:{type:"string",id:15},adPodSlotPosition:{type:"int32",id:18},prebidJsBidderName:{type:"string",id:19},dspId:{type:"string",id:20},cnxBidId:{type:"string",id:21},winToAdLoadedTime:{type:"int32",id:22},startAdToImpressionTime:{type:"int32",id:23},declaredDuration:{type:"double",id:24},impressionDuration:{type:"double",id:25},isExplorationMode:{type:"bool",id:26},auctionInformation:{type:"ProtoAuctionInformation",id:27},playerWidth:{type:"int32",id:28},requestNumber:{type:"int32",id:29},floorPrice:{type:"double",id:31},playerHeight:{type:"int32",id:36},bidElapsedTimeSeconds:{type:"int32",id:37},insightIndexes:{rule:"repeated",type:"string",id:38},adBreakType:{type:"ProtoAdBreakTypeEnum",id:40},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:41},hasAdSkip:{type:"bool",id:39},pageInsightIndexes:{rule:"repeated",type:"string",id:42},iasSegmentCodes:{rule:"repeated",type:"string",id:49},liveRampType:{type:"ProtoLiveRampEnum",id:51},serverBillingNoticeUrls:{rule:"repeated",type:"string",id:53},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoVideoAdImpressionViewableRequest:{oneofs:{Df:{oneof:["lineItemAbTestInformation"]},xR:{oneof:["discount"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:19,options:{proto3_optional:!0}},discount:{type:"ProtoDiscount",id:21,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},rtbSeatId:{type:"string",id:7},dspId:{type:"string",id:8},insightIndexes:{rule:"repeated",type:"string",id:13},hasAdSkip:{type:"bool",id:14},adBreakType:{type:"ProtoAdBreakTypeEnum",id:15},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:16},pageInsightIndexes:{rule:"repeated",type:"string",id:17},rtbAdomain:{type:"string",id:18},iasSegmentCodes:{rule:"repeated",type:"string",id:20},dynamicElkFieldsValues:{keyType:"string",type:"string",id:100}}},ProtoVideoAdQuartilesRequest:{oneofs:{Df:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:20,options:{proto3_optional:!0}},trackingRequestMeta:{type:"MetadataModel",id:1},mediaGuid:{type:"string",id:3},publisherLineItemId:{type:"string",id:5},advertiserLineItemId:{type:"string",id:6},quartile:{type:"ProtoQuartilesEnum",id:7},rtbSeatId:{type:"string",id:8},dspId:{type:"string",id:9},insightIndexes:{rule:"repeated",type:"string",id:14},hasAdSkip:{type:"bool",id:15},adBreakType:{type:"ProtoAdBreakTypeEnum",id:16},sentimentAnalysis:{type:"ProtoSentimentAnalysis",id:17},pageInsightIndexes:{rule:"repeated",type:"string",id:18},rtbAdomain:{type:"string",id:19},iasSegmentCodes:{rule:"repeated",type:"string",id:21}}},ProtoUserSyncRequest:{fields:{userId:{type:"string",id:1},demandPartner:{type:"int32",id:2},demandPartnerUserId:{type:"string",id:3}}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3,PinnedTop:4,PinnedBottom:5}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoCookieSecureModeEnum:{values:{Secure:0,Unsecure:1,Auto:2}},ProtoTrackerType:{values:{Image:0,Javascript:1,IAS:2}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoLineItemContextualTargetingEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,BidInHand:6,NoPredictionFound:7,StaticFactorUsed:8}},ProtoLineItemQueryTargetingRuleEnum:{values:{Only:0,Except:1}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoLineItemAbTestCase:{values:{CaseA:0,CaseB:1}},ProtoTrackType:{values:{ManualSubtitle:0,AutoGeneratedSubtitle:1,ClosedCaptions:2}},ProtoMediaTypeEnum:{values:{Image:0,Video:1}},ProtoSkipEnabledEnum:{values:{No:0,Yes:1}},LiveRampEnvelopeStatusEnum:{values:{Ok:0,EnvelopeExpired:1,Unauthorized:2}},ConnatixNoBidReasonEnum:{values:{RequestException:0,Timeout:1,EmptyResponse:2,InvalidResponse:3,NoBid:4,BidBelowFloor:5,DealIdMismatch:6,CsInvalidResponse:7,CsRequestException:8,CsEmptyResponse:9,NoLibInPage:11,BidIsNotTargetingAllowedEver:12,VastVersionNotSupported:13}},PartnerNoBidReasonEnum:{values:{Unknown:0,TechnicalError:1,InvalidRequest:2,KnownWebSpider:3,SuspectedNonHumanTraffic:4,CloudIP:5,UnsupportedDevice:6,BlockedPublisher:7,UnmatchedUser:8,DailyReaderCapMet:9,DailyDomainCapMet:10}},ProtoAdBlockDetectionTypeEnum:{values:{Banner:0,Network:1}},ProtoAdClickTypeEnum:{values:{AdClick:1,AdClickThrough:2,AdSkipClick:3,VolumeClick:4,PauseClick:5,PlayClick:6,FullScreenClick:7,MuteClick:8,UnmuteClick:9,ExitFullScreenClick:10,AdUserClose:11}},ProtoAdsourceTypeEnum:{values:{Unknown:0,Vpaid:1,VastMedia:2,CnxMedia:3,Jw:4,Ima:5,AOL:6}},ProtoAuctionLossReasonEnum:{values:{TargetingMismatch:0,CompetitorPriority:1,AdOpportunityEnd:2}},ProtoGdprConsentModeEnum:{values:{Unknown:0,NoCmp:1,NoConsent:2,NoConnatixConsent:3,NotAllDemandConsent:4,AllGood:5}},ProtoAuctionPostbidReasonEnum:{values:{CreativeError:0,SDKFailure:1,UnsupportedMedia:2,TargetingMismatch:3,PlayerError:4}},ProtoHeavyAdBlockTypeEnum:{values:{Global:0,Script:1,VpaidIframe:2,OverlayIframe:3}},ProtoDemandTypeEnum:{values:{None:0,PMP:1,OpenMarket:2,SelfServed:3}},ProtoLiveRampEnum:{values:{None:0,ATS:1,NonATS:2}},ProtoMediaClickTypeEnum:{values:{Click:0,UrlClick:1,VolumeClick:2,PlayClick:3,PauseClick:4,NextClick:5,PreviousClick:6,MuteClick:7,UnmuteClick:8,CloseClick:9,GalleryClick:11,SubtitleClick:12,FullScreenClick:13,ExitFullScreenClick:14}},ProtoQuartilesEnum:{values:{Start:0,First:1,Second:2,Third:3,Fourth:4}}})})?s.apply(i,n):s)||(t.exports=r)},7953:function(t,i,e){var s,n,r;n=[e(4492)],void 0===(r="function"==typeof(s=function(t){"use strict";return(t.roots.elements||(t.roots.elements=new t.Root)).addJSON({ProtoElementsRequest:{fields:{tokens:{rule:"repeated",type:"string",id:1},pageUrl:{type:"string",id:3},userId:{type:"string",id:5},forcePlayerId:{type:"string",id:7},forcePlaylistId:{type:"string",id:9},version:{type:"int32",id:10},forceLineItemIds:{rule:"repeated",type:"string",id:11},clientAb0:{type:"int32",id:12},clientAb1:{type:"int32",id:13},customParam1:{type:"string",id:16},customParam2:{type:"string",id:17},customParam3:{type:"string",id:18},forceExploration:{type:"bool",id:20},es6:{type:"bool",id:21},bundleId:{type:"string",id:22},forceSourceItemId:{type:"string",id:23},parseDomain:{type:"bool",id:24},implementationType:{type:"ProtoImplementationType",id:25},queryJsTargeting:{keyType:"string",type:"string",id:26},isConsentConnatix:{type:"bool",id:27,options:{default:!0}},reloadedPlayers:{keyType:"string",type:"string",id:29},disableTracking:{type:"bool",id:31},referrer:{type:"string",id:32},localTimestamp:{type:"int64",id:33},customParam4:{type:"string",id:34},customParam5:{type:"string",id:35},forceMediaIdList:{rule:"repeated",type:"string",id:36},servingRuleId:{type:"string",id:37},cnxDebug:{type:"bool",id:38},useMediaIdListAsPlaylist:{type:"bool",id:39}}},ProtoPlaylistItem:{oneofs:{DR:{oneof:["mediaContentVersionId"]},VR:{oneof:["insightsRevisionNumber"]},FR:{oneof:["disableAdvertising"]}},fields:{mediaContentVersionId:{type:"string",id:3,options:{proto3_optional:!0}},insightsRevisionNumber:{type:"int32",id:4,options:{proto3_optional:!0}},disableAdvertising:{type:"bool",id:5,options:{proto3_optional:!0}},mediaId:{type:"string",id:1},revisionNumber:{type:"int32",id:2}}},ProtoElements:{fields:{playerId:{type:"string",id:1},playbackMode:{type:"ProtoPlayerPlaybackModeEnum",id:2},soundMode:{type:"ProtoPlayerSoundMode",id:3},upNextMode:{type:"ProtoPlayerUpNextMode",id:4,options:{default:1}},containerSelector:{type:"string",id:5},position:{type:"int32",id:6},insertPosition:{type:"ProtoPlayerInsertMode",id:7},forceInsertPath:{type:"bool",id:8},renderInFrame:{type:"bool",id:9},scrollHijackingProtection:{type:"bool",id:10},preRollBreak:{type:"int32",id:11},postRollBreak:{type:"int32",id:12},midRollNumber:{type:"int32",id:13,options:{default:-1}},timeBetweenAds:{type:"int32",id:14},minTimeBeforeFirstAd:{type:"int32",id:15},adViewabilityPolicy:{type:"ProtoAdViewabilityPolicy",id:16},responsive:{type:"bool",id:18},ratioWidth:{type:"int32",id:19},ratioHeight:{type:"int32",id:20},fixedWidth:{type:"int32",id:21},fixedHeight:{type:"int32",id:22},casting:{type:"bool",id:23},sharingDestinations:{rule:"repeated",type:"ProtoSharingDestination",id:24,options:{packed:!1}},closedCaption:{type:"bool",id:25},muteWatermark:{type:"bool",id:26},expandButton:{type:"bool",id:27},closeButtonMode:{type:"ProtoPlayerCloseButtonMode",id:28},floatingMode:{type:"ProtoPlayerFloatingMode",id:29},floatingDeviceMode:{rule:"repeated",type:"ProtoDeviceType",id:30,options:{packed:!1}},floatingCloseButtonMode:{type:"ProtoPlayerCloseButtonMode",id:31},floatingFixedPosition:{type:"ProtoFloatingFixedPositionMode",id:32},floatingPageElement:{type:"string",id:33},floatingUseElementWidth:{type:"bool",id:34},floatingScrollPosition:{type:"ProtoPositionMode",id:35},floatingGutterX:{type:"int32",id:36},floatingGutterY:{type:"int32",id:37},floatingWidth:{type:"int32",id:38},iconsColor:{type:"string",id:39},accentColor:{type:"string",id:40},tooltipTextColor:{type:"string",id:41},tooltipBackgroundColor:{type:"string",id:42},html:{type:"string",id:43},galleryStyle:{type:"ProtoGalleryStyleMode",id:45},logoPosition:{type:"ProtoLogoPositionMode",id:46},lineItems:{rule:"repeated",type:"ProtoLineItem",id:49},adPlaybackMode:{type:"ProtoAdPlaybackMode",id:50},css:{type:"string",id:51},sessionId:{type:"string",id:52},playlistId:{type:"string",id:53},playerType:{type:"ProtoElementsTypeEnum",id:54},outstreamInitialRendering:{type:"ProtoOutstreamInitialRenderingEnum",id:55},outstreamHouseBackgroundColor:{type:"string",id:56},outstreamTotalAdBreakLength:{type:"int32",id:57},outstreamEndAdBreakPolicy:{type:"ProtoOutstreamEndAdBreakPolicyEnum",id:58},galleryOrientation:{type:"ProtoGalleryOrientationEnum",id:59},playlist:{rule:"repeated",type:"ProtoPlaylistItem",id:60},floatingAppendLocation:{type:"ProtoFloatingAppendLocationEnum",id:61},floatingYAxisPadding:{type:"int32",id:62},customJsCode:{type:"string",id:63},videoQuality:{type:"ProtoVideoQuality",id:64},initializationSettingsJson:{type:"string",id:65},skipAdAfter:{type:"int32",id:67,options:{default:5}},adBreaks:{rule:"repeated",type:"ProtoAdBreak",id:68},amazonTamSlotId:{type:"string",id:69},midRollOnlyOnLongContent:{type:"bool",id:70,options:{default:!0}},limitClientSideApiUse:{type:"bool",id:71},abTestId:{type:"string",id:72},skipMin:{type:"int32",id:73,options:{default:31}},skippability:{type:"ProtoPlayerSkippabilityType",id:74},logoResource:{type:"string",id:76},nonlinearPlayerSettings:{type:"ProtoNonlinearPlayerSettings",id:77},displayAdCountdown:{type:"bool",id:78},bandwidthLoggingState:{type:"ProtoBandwidthLoggingEnum",id:79},prefetchOnPreroll:{type:"bool",id:80,options:{default:!0}},playlistThumbnail:{type:"string",id:81},playlistName:{type:"string",id:82},playlistDescription:{type:"string",id:83},hasFloatingTransition:{type:"bool",id:84,options:{default:!0}},symbolResource:{type:"string",id:85},hasNewDesign:{type:"bool",id:86}}},ProtoElementsResponse:{oneofs:{Df:{oneof:["lineItemAbTestInformation"]}},fields:{lineItemAbTestInformation:{type:"ProtoLineItemAbTestInformation",id:31,options:{proto3_optional:!0}},errorMessage:{type:"string",id:1},players:{rule:"repeated",type:"ProtoElements",id:10},browser:{type:"Browser",id:11},geoLocation:{type:"GeoLocation",id:12},lineItems:{rule:"repeated",type:"ProtoLineItem",id:13},cookieSyncUrls:{keyType:"int32",type:"string",id:14},explorationMode:{type:"bool",id:15},supplyChain:{type:"ProtoSupplyChain",id:17},secondLevelDomain:{type:"string",id:18},userInformation:{type:"ProtoUserInformation",id:20},serverAb0:{type:"int32",id:21},serverAb1:{type:"int32",id:22},isSeoTraffic:{type:"bool",id:23},publisherNetworkCode:{type:"string",id:26},iOSAppID:{type:"string",id:27},hashedPageUrl:{type:"string",id:28},bundleAbId:{type:"string",id:29},bundlePart:{type:"string",id:30},IASSegmentCodes:{rule:"repeated",type:"string",id:32},AmazonTamPubId:{type:"string",id:33},tier:{type:"int32",id:34,options:{default:2}}}},ProtoLineItemAdBreakTargeting:{fields:{adRollType:{type:"ProtoAdBreakTypeEnum",id:1},adBreakTypeEnum:{type:"ProtoLineItemAdBreakTypeEnum",id:2}}},ProtoLineItemAdPodTargeting:{fields:{targetingType:{type:"ProtoLineItemTargetingTypeEnum",id:1},adSlotTargetingType:{type:"ProtoLineItemAdSlotTargetingTypeEnum",id:2},adSlotPositions:{rule:"repeated",type:"int32",id:3,options:{packed:!1}}}},ProtoLineItemAdBreakSettings:{fields:{adBreakTargeting:{rule:"repeated",type:"ProtoLineItemAdBreakTargeting",id:1},adPodTargeting:{type:"ProtoLineItemAdPodTargeting",id:2}}},ProtoLineItemQueryStringTargeting:{fields:{rule:{type:"ProtoLineItemQueryTargetingRuleEnum",id:1},keyValue:{keyType:"string",type:"string",id:2}}},ProtoAdxFloorPricePrediction:{fields:{predictedPriceObfuscated:{type:"double",id:1},floorPriceObfuscated:{type:"double",id:2},uprQueryName:{type:"string",id:3},uprQueryValue:{type:"string",id:4}}},ProtoLineItem:{oneofs:{SR:{oneof:["floorPricesNew"]}},fields:{floorPricesNew:{type:"ProtoFloorPricesNewModel",id:57,options:{proto3_optional:!0}},publisherLineItemId:{type:"string",id:1},advertiserLineItemId:{type:"string",id:2},adTag:{type:"string",id:3},creativeType:{type:"ProtoCreativeTypeEnum",id:4},sound:{type:"bool",id:6},viewability:{type:"bool",id:7},removeOutOfFocus:{type:"bool",id:8},impressionTimeSpent:{type:"int32",id:9},vendorId:{type:"string",id:10},trackers:{rule:"repeated",type:"CreativeTrackerViewModel",id:12},duration:{type:"int32",id:13},renditions:{rule:"repeated",type:"ProtoRendition",id:14},mediaCreativeId:{type:"string",id:15},ignoreFilledRequests:{type:"bool",id:16},requestCap:{type:"int32",id:17,options:{default:3}},impressionCap:{type:"int32",id:18},successRate:{type:"double",id:19},lineItemPriority:{type:"ProtoLineItemPriority",id:20},headerBidderTimeout:{type:"int32",id:22},mediaCreativeClickUrl:{type:"string",id:23},resetRequestsCapTime:{type:"int32",id:24,options:{default:60}},resetImpressionsCapTime:{type:"int32",id:25,options:{default:60}},resetCapType:{type:"ProtoResetCapTypeEnum",id:26},creativeHlsFileName:{type:"string",id:27},timeBetweenRequests:{type:"int32",id:28},skipMode:{type:"ProtoAdSkipMode",id:29},mediaIdTargeting:{type:"ProtoTargetingChoiceModel",id:30},mediaKeywordsTargeting:{type:"ProtoTargetingChoiceModel",id:31},mediaLanguageTargeting:{type:"ProtoTargetingChoiceModel",id:32},adType:{type:"ProtoAdType",id:33},overlayTime:{type:"int32",id:34,options:{default:30}},floorPrice:{type:"double",id:35},adBreakSettings:{type:"ProtoLineItemAdBreakSettings",id:36},bidRate:{type:"double",id:39},pauseAdOutOfView:{type:"ProtoLineItemPauseAdOutOfViewEnum",id:40},moatTrackingEnabled:{type:"bool",id:41},cnxCreativeId:{type:"string",id:42},blockedDomainsRevisionNumber:{type:"int32",id:44},advertiserContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:45},publisherContextualTargeting:{rule:"repeated",type:"ProtoContextualTargetingCaseModel",id:46},playerSizeTargetings:{type:"ProtoPlayerSizeTargetings",id:47},amazonDealId:{type:"string",id:48},playerOrientationTargeting:{type:"ProtoPlayerOrientationTargetingEnum",id:50},skipMin:{type:"int32",id:51,options:{default:6}},skippability:{type:"ProtoLineItemSkippabilityType",id:52},forceCallingInEveryAO:{type:"bool",id:53},networkExpiryTimeSeconds:{type:"int32",id:54,options:{default:21600}},nonlinearLineItemSettings:{type:"ProtoNonlinearLineItemSettings",id:55},prebidJsBidParamsJSONString:{type:"string",id:58},isPMP:{type:"bool",id:59},queryTargeting:{rule:"repeated",type:"ProtoLineItemQueryStringTargeting",id:61},adxFloorPricePredictionList:{rule:"repeated",type:"ProtoAdxFloorPricePrediction",id:62},playerSize:{type:"string",id:101}}},ProtoTargetingChoiceModel:{fields:{choiceCriteria:{type:"ProtoChoiceCriteriaEnum",id:1},items:{rule:"repeated",type:"string",id:2}}},ProtoContextualTargetingCaseModel:{fields:{filters:{rule:"repeated",type:"ProtoContextualTargetingFilterModel",id:1}}},ProtoContextualTargetingFilterModel:{fields:{type:{type:"ProtoLineItemContextualTargetingEnum",id:1},level:{type:"ProtoContextualTargetingLevelEnum",id:3},hashedItemsIds:{rule:"repeated",type:"string",id:4}}},ProtoPlayerSizeTargetings:{fields:{sizeChoiceCriteria:{type:"ProtoSizeChoiceCriteriaEnum",id:1},minWidth:{type:"int32",id:2},maxWidth:{type:"int32",id:3}}},ProtoFloorPricesData:{oneofs:{AR:{oneof:["floorPriceBypassReason"]}},fields:{floorPriceBypassReason:{type:"FloorPriceBypassReasonEnum",id:2,options:{proto3_optional:!0}},price:{type:"double",id:1}}},ProtoFloorPricesNewModel:{fields:{floorPrices:{rule:"repeated",type:"ProtoFloorPricesData",id:1},recommended:{type:"int32",id:2}}},CreativeTrackerViewModel:{fields:{type:{type:"ProtoTrackerType",id:1},trigger:{type:"ProtoTrackerTriggerType",id:2},url:{type:"string",id:3}}},ProtoRendition:{fields:{height:{type:"int32",id:1},codec:{type:"string",id:2},file:{type:"string",id:3}}},ProtoNonlinearLineItemSettings:{fields:{nonLinearRequestType:{type:"ProtoNonlinearRequestType",id:1},nonLinearAdTimeSeconds:{type:"int32",id:2,options:{default:15}}}},Browser:{fields:{browserVersion:{type:"string",id:1},browserType:{type:"string",id:2},osCode:{type:"string",id:3},device:{type:"ProtoDeviceType",id:4}}},GeoLocation:{fields:{countryGeoId:{type:"int32",id:1},cityId:{type:"int32",id:2},subdivisionId:{type:"int32",id:3},dmaId:{type:"int32",id:4},ip:{type:"string",id:5},lat:{type:"double",id:6},lon:{type:"double",id:7},zipcode:{type:"string",id:8}}},ProtoSupplyChain:{fields:{businessDomain:{type:"string",id:1},supplyChainId:{type:"string",id:3}}},ProtoUserInformation:{fields:{userId:{type:"string",id:1},lookupId:{type:"string",id:3},lookupResponseCode:{type:"int32",id:4},callFraudSensor:{type:"bool",id:5},publisherAdsTxt:{type:"string",id:6}}},ProtoAdBreak:{fields:{types:{rule:"repeated",type:"ProtoAdBreakTypeEnum",id:1,options:{packed:!1}},maxAdPodDuration:{type:"int32",id:2},maxAdSlotDuration:{type:"int32",id:3,options:{default:180}},numberOfAdSlots:{type:"int32",id:4,options:{default:1}}}},ProtoNonlinearPlayerSettings:{fields:{numberOfNonlinearAds:{type:"int32",id:1},timeSecondsBetweenNonlinear:{type:"int32",id:2,options:{default:5}},timeSecondsBetweenLinearAndNonlinear:{type:"int32",id:3}}},ProtoLineItemAbTestInformation:{fields:{guid:{type:"string",id:1},lineItemAbTestCase:{type:"ProtoLineItemAbTestCase",id:2}}},ProtoOutstreamInitialRenderingEnum:{values:{ExpandWithAd:0,FullyRendered:1}},ProtoOutstreamEndAdBreakPolicyEnum:{values:{Hide:0,HouseScreen:1,Loop:2}},ProtoGalleryStyleMode:{values:{None:0,Detailed:1,Visual:2}},ProtoLogoPositionMode:{values:{None:0,ControlBar:1,BottomRight:2,BottomLeft:3,TopRight:4,TopLeft:5,Center:6}},ProtoGalleryOrientationEnum:{values:{Landscape:0,Portrait:1}},ProtoElementsTypeEnum:{values:{InStream:0,OutStream:1,InStreamInApp:2,Live:3}},ProtoPlayerUpNextMode:{values:{Loop:0,Next:1,Stop:2}},ProtoCreativeTypeEnum:{values:{ThirdParty:0,MediaFile:1,Rtb:2,External:3,HeaderBidder:4,Tam:7,TamDeal:8,TamPrivateAuction:9}},ProtoResetCapTypeEnum:{values:{TimeCapping:0,ContentCapping:1,OpportunityCapping:2}},ProtoAdSlotsEnum:{values:{PreRoll:0,MidRoll:1,PostRoll:2}},ProtoLineItemPriority:{values:{House:0,Default:1,Preferred:2,Top:3}},ProtoAdSkipMode:{values:{IfLongerThan31Sec:0,Always:1,Never:2,NotAplicable:3}},ProtoAdType:{values:{Video:0,Overlay:1,Nonlinear:2}},ProtoChoiceCriteriaEnum:{values:{Only:0,Except:1}},ProtoLineItemAdBreakTypeEnum:{values:{All:1,SingleAd:2,AdPod:3}},ProtoLineItemTargetingTypeEnum:{values:{Only:0,Except:1}},ProtoLineItemAdSlotTargetingTypeEnum:{values:{SpecificSlots:1,Interval:2}},ProtoLineItemPauseAdOutOfViewEnum:{values:{Default:0,Strict:1}},ProtoLineItemContextualTargetingEnum:{values:{IncludeAny:0,IncludeAll:1,ExcludeAny:2,ExcludeAll:3}},ProtoSizeChoiceCriteriaEnum:{values:{GreaterThan:0,SmallerThan:1,Between:2}},ProtoPlayerOrientationTargetingEnum:{values:{Both:0,Portrait:1,Landscape:2}},ProtoLineItemSkippabilityType:{values:{AllowPublisherToDetermineSkippability:0,RequirePublisherToAllowNonSkipAdsShorterThan:1,NotApplicable:2}},ProtoContextualTargetingLevelEnum:{values:{Media:0,Page:1,Both:2}},FloorPriceBypassReasonEnum:{values:{MinCpm:0,FixedCpm:1,MaxBidPrice:2,VideoOrBannerMin:3,BidInHand:6,NoPredictionFound:7,StaticFactorUsed:8}},ProtoLineItemQueryTargetingRuleEnum:{values:{Only:0,Except:1}},ProtoTrackerType:{values:{Image:0,Javascript:1,IAS:2}},ProtoTrackerTriggerType:{values:{Impression:0,Complete25Pc:1,Complete50Pc:2,Complete75Pc:3,ViewCompletion:4,VideoClick:5,Pause:6,Resume:7,Mute:8,Unmute:9}},ProtoPlayerPlaybackModeEnum:{values:{Autoplay:0,ScrollToPlay:1,ClickToPlay:2}},ProtoPlayerCloseButtonMode:{values:{Off:0,OnHover:1,OnHoverAfterFirstAd:2,AlwaysOn:3}},ProtoPlayerFloatingMode:{values:{Off:0,OnPageLoad:1,AfterInView:2,Always:3}},ProtoPlayerSoundMode:{values:{Mute:0,On:1,Hover:2}},ProtoPlayerInsertMode:{values:{WithinContainer:0,BeforeContainer:1,AfterContainer:2,ReplaceContainer:3,HideContainer:4}},ProtoAdViewabilityPolicy:{values:{Default:0,Strict:1}},ProtoSharingDestination:{values:{Facebook:0,Twitter:1,LinkedIn:2}},ProtoFloatingFixedPositionMode:{values:{Page:0,Element:1}},ProtoPositionMode:{values:{BottomRight:0,BottomLeft:1,TopRight:2,TopLeft:3,PinnedTop:4,PinnedBottom:5}},ProtoAdPlaybackMode:{values:{Autoplay:0,ScrollToPlay:1}},ProtoFloatingAppendLocationEnum:{values:{Above:0,Below:1,Within:2}},ProtoPlayerAdSkippability:{values:{IfLongerThan:0,Always:1,NoRestrictions:2}},ProtoVideoQuality:{values:{Auto:0,High1080p:1,High720p:2,Medium360p:3}},ProtoImplementationType:{values:{Web:0,Amp:1}},ProtoAdBreakTypeEnum:{values:{None:0,PreRoll:1,MidRoll:2,PostRoll:3}},ProtoAdSlotAdTypeEnum:{values:{SingleAd:0,AdPod:1}},ProtoPlayerSkippabilityType:{values:{AllowNonSkipAdsIfTheyAreShorterThan:0,RequireAdsToBeSkippable:1}},ProtoBandwidthLoggingEnum:{values:{Disabled:0,Enabled:1,SaaS:2}},ProtoNonlinearRequestType:{values:{Banner:0,Video:1}},ProtoDeviceType:{values:{Desktop:0,Smartphone:1,Tablet:2,GameConsole:3,SmartTV:4,WearableComputer:5,PDA:6,Unrecognized:7}},ProtoLineItemAbTestCase:{values:{CaseA:0,CaseB:1}}})})?s.apply(i,n):s)||(t.exports=r)},1418:(t,i,e)=>{const{Parser:s}=e(1682);t.exports=s}},i={},e,s,n;function r(e){var s=i[e];if(void 0!==s)return s.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=t,e=[],r.O=(t,i,s,n)=>{if(!i){var o=1/0;for(d=0;d<e.length;d++){for(var[i,s,n]=e[d],h=!0,a=0;a<i.length;a++)(!1&n||o>=n)&&Object.keys(r.O).every((t=>r.O[t](i[a])))?i.splice(a--,1):(h=!1,n<o&&(o=n));if(h){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,s,n]},r.n=t=>{var i=t&&t.NR?()=>t.default:()=>t;return r.d(i,{a:i}),i},r.d=(t,i)=>{for(var e in i)r.o(i,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((i,e)=>(r.f[e](t,i),i)),[])),r.u=t=>{if("elements.ui"===t)return t+".ad48c51379ab98b9f024.js"},r.miniCssF=t=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),s={},n="Connatix.Player:",r.l=(t,i,e,o)=>{if(s[t])s[t].push(i);else{var h,a;if(void 0!==e)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var l=c[d];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==n+e){h=l;break}}h||(a=!0,(h=document.createElement("script")).charset="utf-8",h.timeout=120,r.nc&&h.setAttribute("nonce",r.nc),h.setAttribute("data-webpack",n+e),h.src=t),s[t]=[i];var u=(i,e)=>{h.onerror=h.onload=null,clearTimeout(p);var n=s[t];if(delete s[t],h.parentNode&&h.parentNode.removeChild(h),n&&n.forEach((t=>t(e))),i)return i(e)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:h}),12e4);h.onerror=u.bind(null,h.onerror),h.onload=u.bind(null,h.onload),a&&document.head.appendChild(h)}},r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"NR",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var i=r.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var e=i.getElementsByTagName("script");e.length&&(t=e[e.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={"connatix.player":0};r.f.j=(i,e)=>{var s=r.o(t,i)?t[i]:void 0;if(0!==s)if(s)e.push(s[2]);else{var n=new Promise(((e,n)=>s=t[i]=[e,n]));e.push(s[2]=n);var o=r.p+r.u(i),h=new Error;r.l(o,(e=>{if(r.o(t,i)&&(0!==(s=t[i])&&(t[i]=void 0),s)){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;h.message="Loading chunk "+i+" failed.\n("+n+": "+o+")",h.name="ChunkLoadError",h.type=n,h.request=o,s[1](h)}}),"chunk-"+i,i)}},r.O.j=i=>0===t[i];var i=(i,e)=>{var s,n,[o,h,a]=e,c=0;if(o.some((i=>0!==t[i]))){for(s in h)r.o(h,s)&&(r.m[s]=h[s]);if(a)var d=a(r)}for(i&&i(e);c<o.length;c++)n=o[c],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(d)},e=self.cnx_webpack_global=self.cnx_webpack_global||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var o={};(()=>{"use strict";var t=r(5027),i=(r(8660),r(6628)),e=r(8041);r.p=(0,i.A)(e.o);var s=r(1187),n=r(3855),o=(r(7175),r(289)),h=r(8049),a=r(6568),c=r(5701),d=r(5227),l=r(5650),u=r(8983),p=r(862),f=r(9710),m=r(9741),v=r(8532),g=r(9906),y=r(1545),b=r(9600);class I extends c._{constructor(t,i,e,s,n,r,h,a,c,d,l){super(),this.mediator=t,this.playerModel=i,this.app=e,this.jR=s,this._appSettings=n,this.jE=r,this.tf=h,this.wM=a,this.rl=c,this.$R=d,this.qR=l,this.macroElements={player:[]},this.HR=!1,this.zR={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.GR=null,this.XR=500,this.be=[],this.createExperience(i,n),this.JR=new p.Z(i.global,{heavyAdBlockTypeEnum:o.ProtoHeavyAdBlockTypeEnum.Global},this.tf),this.QR=new p.Z(window,{heavyAdBlockTypeEnum:o.ProtoHeavyAdBlockTypeEnum.Script},this.tf)}subscribeToEvents(){this.subscribe(d.Uh.Destroy,this.experience,(()=>{this.destroy()})),this.subscribe(d.Uh.CanStart,this.experience,(()=>{this.experience.start()})),this.subscribe(d.Xh.SessionRendered,this.experience,(()=>{this.jR.wasPlayerReloaded||this.jE.sessionRendered.next({isBannerBlocked:f._.isBannerBlocked,sdkVersion:this._appSettings.sdkVersion}),this.mediator.publish(this,d.Xh.SessionRendered)})),this.subscribe(d.Xh.SessionView,this.experience,(()=>{this.jR.wasPlayerInView||(this.jE.sessionView.next(),this.mediator.publish(this,d.Xh.SessionView))}));const t=g.h.getSessionChildContainer(this.rl.sessionId).resolve(y.G);this.be.push(t.omidAdSessionStart.subscribe((()=>{this.experienceApi.trigger(v.jJ.OmidAdSessionStart)})),t.omidAdSessionFinish.subscribe((()=>{this.experienceApi.trigger(v.jJ.OmidAdSessionFinish)}))),Object.values(this.experience.events).forEach((t=>{this.subscribe(t,this.experience,(i=>{this.experienceApi.trigger(t,i.payload)}))}))}updateMacroContent(t,i){t&&t.forEach((t=>{t.textContent=i}))}SP(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}YR(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}KR(){if(this.experienceContainer=this.ZR(),this.playerModel.html){const t=this.app.services.GlobalDomUtilsService.createElementByString(this.YR(this.playerModel.html));this.tO(t);const i=this.macroElements.player[0];if(!i)throw Error("player macro was not found");i.innerHTML="",i.parentNode.insertBefore(this.experienceContainer,i),i.parentNode.removeChild(i);(0,l.Sz)(t.children).forEach((t=>{this.playerModel.targetContainer.parentNode.insertBefore(t,this.playerModel.targetContainer)}))}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}ZR(){const t=this.app.config.isMobile?u.s6.Mobile:u.s6.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${u.sN.MainContainer} ${t} ${this.iO}" id="${this.app.config.appId}"></cnx>`)}tO(t){(0,l.Sz)(t.children).forEach((t=>{t.children.length>0&&this.tO(t),Object.keys(this.zR).forEach((i=>{const e=this.zR[i];t.textContent.includes(e)&&this.eO(i,t)}))}))}eO(t,i){this.macroElements[t]||(this.macroElements[t]=[]),this.macroElements[t].push(i),i.textContent=""}sO(){null!==this.GR&&(clearInterval(this.GR),this.GR=null)}init(t){this.SP(),this.KR();const i=this.app.config.device;return this.isSupportedBreakpoint(i)?(this.subscribeToEvents(),this.experience.renderExperience(this.playerModel,this.app,this.experienceContainer,(()=>{t()})),this.GR=setInterval((()=>{this.HR?this.sO():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.destroy(),(0,s.n)({message:"player_removed_from_DOM",level:s.D.INFO}))}),this.XR),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}onReady(){return this.experience.onReady()}destroy(){var t;try{m.S.playerDestroyed=!0,this.HR=!0,this.sO(),null===(t=this.qR)||void 0===t||t.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),(0,b.i)(this.be),this.be=[],this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.JR.destroy(),this.QR.destroy()}catch(t){(0,s.n)({callStack:t.stack,level:s.D.WARN,message:"Renderer_destroy",exception:t.message})}}}var w=r(9490),S=r(8696);class A{constructor(t,i,e,s,n=1200){this.nO=t,this.hO=i,this.aO=e,this.cO=s,this.lO=n,this.uO=null,this.pO=!1,this.fO=()=>{if(this.Pp(),!this.pO&&this.hO&&this.hO.linearAdInWin)return this.pO=!0,void this.mO(this.lO);this.nO.startContent()}}destroy(){this.Pp()}changeState(t){switch(t){case w.Ez.PrerollState:this.pO=!1,this.mO(this.aO);break;case w.Ez.PostrollState:this.pO=!1,this.mO(this.cO);break;default:this.uO&&this.Pp()}}setPreRollBreak(t){this.aO=t}setPostRollBreak(t){this.cO=t}Pp(){clearTimeout(this.uO),this.uO=null}mO(t){this.Pp(),this.uO=setTimeout(this.fO,t)}}var P,_=r(8216);!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(P||(P={}));class x{constructor(t,i){switch(this.mediator=t,this.inView=!1,this.vO=!1,this.gO=!1,this.yO=!1,this.bO=()=>{},i){case o.ProtoPlayerPlaybackModeEnum.Autoplay:this.IO(this.wO);break;case o.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.IO(this.SO);break;case o.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.IO(this.AO)}}IO(t){this.bO=()=>{this.vO||t.call(this)}}wO(){this.yO&&!this.gO&&this.inView&&(this.gO=!0,this.mediator.publish(this,P[P.Play]))}AO(){this.yO&&(this.PO&&(this.GI=this.volume),this.inView||this.HS&&!this.inView?(this.mediator.publish(this,P[P.Play],{payload:{volume:this.GI}}),this.GI=null):(this.GI=this.volume,this.mediator.publish(this,P[P.Pause],{payload:{volume:0}})))}SO(){}setViewability(t){this.inView=t,this.bO()}setIsAppBackgrounded(t){this.PO=t}setSoundVolume(t){this.volume=t}setUserPlayback(t){!this.gO&&t&&(this.gO=t),this.vO=!t}setCanPlay(t){this.yO=t,this.vO||!this.inView&&!this.gO||this.bO()}setIsFullscreen(t){this.HS=t}}var T,k=r(9762),C=r(4967);!function(t){t.PreRoll="pre-roll",t.MidRoll="mid-roll",t.PostRoll="post-roll"}(T||(T={}));const E=T;var M=r(3020),L=r(4798),B=r(9209),R=r(3802),O=r(9361),D=r(5788),V=r(8211),F=r(9357),N=r(6888),j=r(6115),$=r(7916),U=r(5356),q=r(5139);class H{constructor(t){this._O=t,this.xO={breakType:o.ProtoAdBreakTypeEnum.None,currentPodNumber:0,maxAdSlotDuration:0,maxAdPodDuration:0,totalNumberOfAdSlots:0},this.TO=null,this.kO=!1}get adBreaks(){return this._O}setNewBreak(t){this._O.forEach((i=>{i.types.forEach((e=>{(0,U.xm)(e,t)&&(this.kO=!(i.numberOfAdSlots<=1),this.xO.currentPodNumber=i.numberOfAdSlots,this.xO.maxAdSlotDuration=i.maxAdSlotDuration,this.xO.maxAdPodDuration=i.maxAdPodDuration,this.xO.totalNumberOfAdSlots=i.numberOfAdSlots)}))}))}adStarted(){this.CO(),0===this.xO.currentPodNumber&&(this.xO.currentPodNumber=this.xO.totalNumberOfAdSlots),this.xO.currentPodNumber--,this.xO.currentPodNumber<=0&&(this.kO=!1)}endPod(){this.CO(),this.xO.currentPodNumber=0,this.kO=!1}enterPodTimeout(t){this.CO(),this.TO=setTimeout((()=>{this.CO(),t()}),w.Qg)}isInAdPod(){return this.kO}isCurrentBreakInPod(){return this.xO.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.xO.maxAdSlotDuration}getMaxAdPodDuration(){return this.xO.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let i=0;i<this._O.length;i++){if(0===this._O[i].maxAdSlotDuration)return 0;t=Math.max(t,this._O[i].maxAdSlotDuration)}return t}getCurrentSlotIndex(){return this.xO.totalNumberOfAdSlots-this.xO.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.xO.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.xO.totalNumberOfAdSlots}isInPodTimeout(){return!!this.TO}getAdBreakState(t){if(!(0,L.$K)(t))return this.EO();const{adSlotDuration:i,adBreakType:e}=t;return{isAdPodBreak:this.isCurrentBreakInPod(),adPodSlotIndex:this.isCurrentBreakInPod()?this.getNextSlotIndex():0,maxAdDuration:Math.round(this.getMaxAdSlotDuration()/F.s_||q.O.DEFAULT_MAX_AD_DURATION),remainingAdDuration:Math.round(i/F.s_),sessionMaxAdDuration:Math.round(this.getMaxAdSlotPossibleDuration()/F.s_),adBreakType:e}}EO(){let t=o.ProtoAdBreakTypeEnum.MidRoll;this.adBreaks.forEach((i=>{i.types.some((t=>t===o.ProtoAdBreakTypeEnum.PreRoll))&&(t=o.ProtoAdBreakTypeEnum.PreRoll)}));const i=this.getMaxAdSlotDuration();return this.getAdBreakState({adSlotDuration:i,adBreakType:t})}CO(){clearTimeout(this.TO),this.TO=null}}const z="midRollCapped",W="totalAdBreakDurationExpired",G="enableLinearAds",X="disableLinearAds",J="ForceStopAdSlot",Q="ForceStopAdPod",Y="linearAdOpportunity",K="AdPodRemainingTime",Z="disableNonLinearAds",tt="enableNonLinearAds",it="disableAdvertising",et="enableAdvertising",st="enterCuePoint",nt="exitCuePoint",rt="canPrefetchAds";class ot{constructor(t,i,e,s){this.MO=t,this.LO=e,this.BO=this.RO(i,s)}RO(t,i){return(0,L.$K)(i)?Object.assign({},t[i]||t[o.ProtoDeviceType.Smartphone]):t}updateWidth(t){const i=this.OO(t);i!==this.currentBreakpointClass&&((0,M.IV)(this.MO,this.currentBreakpointClass),(0,M.cn)(this.MO,i),this.currentBreakpointClass=i)}OO(t){switch(!0){case t>=this.BO.xxl:return this.LO.Xxl;case t>=this.BO.xl:return this.LO.Xl;case t>=this.BO.lg:return this.LO.Lg;case t>=this.BO.md:return this.LO.Md;case t>=this.BO.sm:return this.LO.Sm;case t>=this.BO.xs:return this.LO.Xs;default:return this.LO.Xxs}}}class ht{constructor(t,i,e,s,n,r=0){this.DO=t,this.mo=i,this.MO=e,this.VO=s,this.Oi=n,this.FO=r,this.NO=void 0,this.jO=null,this.ae=!1,this.$O=()=>{if(!this.NO||!this.UO)return;const t=this.qO(),i=!!this.UO;this.zO(t,i)},this.WO=()=>{var t;if(this.GO()&&(this.mo.width=null===(t=this.UO)||void 0===t?void 0:t.clientWidth),this.XO(),this.NO){const t=!1,i=this.qO();this.zO(i,t)}},this.XO=()=>{this.YO()?!this.KO||this.NO||this.ae?this.ZO():this.tD():this.NO&&this.iD()},this.eD=t=>{if(this.sD(t.propertyName))switch(this.transitionState){case D.vh.DirectionIn:this.transitionState=void 0,this.nD();break;case D.vh.DirectionOut:this.transitionState=void 0,this.rD();break;case D.vh.FadeIn:this.transitionState=void 0,this.oD()}},this.hD=i.floatingScrollPosition}get transitionState(){return this.aD}set transitionState(t){this.aD===D.vh.FadeIn&&this.cD(u.jG.FadeInBase,u.jG.FadeIn),this.aD=t}dD(...t){(0,M.cn)(this.MO,...t)}cD(...t){(0,M.IV)(this.MO,...t)}ZO(){this.VO!==o.ProtoDeviceType.Smartphone&&(this.MO.style.width=`${this.mo.width}px`);let t=this.MO.getBoundingClientRect().width;if(this.mo.isPinnedFloating){const i=.65*t;t=Math.min(i,435)}this.MO.style.height=this.mo.getHeight(t)}lD(){return(0,l.d3)(this.VO,this.mo.floatingDeviceMode)}pD(){this.Oi.addEventListenerOnGlobal("scroll",this.$O)}fD(){this.Oi.removeEventListenerOnGlobal("scroll",this.$O)}mD(){this.UO=this.Oi.querySelector(this.mo.pageElement),this.UO&&(clearInterval(this.jO),this.mo.width=this.UO.clientWidth,this.XO(),this.DO.on(this.UO,this.WO))}vD(){var t,i;const e=null===(t=this.UO)||void 0===t?void 0:t.getBoundingClientRect().top;return this.mo.appendLocation===o.ProtoFloatingAppendLocationEnum.Above?e-this.MO.offsetHeight-this.mo.floatingYAxisPadding:this.mo.appendLocation===o.ProtoFloatingAppendLocationEnum.Below?e+(null===(i=this.UO)||void 0===i?void 0:i.offsetHeight)+this.mo.floatingYAxisPadding:e}gD(){this.jO=setInterval((()=>{this.mD()}),D.lm),this.mD()}GO(){return this.mo.floatingPosition===o.ProtoFloatingFixedPositionMode.Element}sD(t){switch(this.transitionState){case D.vh.DirectionIn:case D.vh.DirectionOut:if("transform"===t)return!0;break;case D.vh.FadeIn:if("opacity"===t)return!0}return!1}yD(){this.MO.style.top="",this.MO.style.bottom="",this.MO.style.left="",this.MO.style.right="",this.MO.style.width="",this.MO.style.height="",this.MO.style.transform="",this.Oi.cancelRequestAnimationFrame(this.bD)}rD(){this.NO=!1,this.cD(u._7.MainClass,u._7.TransitionClass),this.yD(),this.ID()}zO({x:t,y:i},e){this.wD(e);const s=()=>this.MO.style.transform=`translate(${t}px, ${i}px)`;e?(this.Oi.cancelRequestAnimationFrame(this.bD),this.bD=null,this.bD=this.Oi.requestAnimationFrameHelper((()=>{s()}))):s()}wD(t){this.mo.hasFloatingTransition&&(t?this.dD(u._7.TransitionClass):this.cD(u._7.TransitionClass))}qO(){let t,i;if(this.GO()&&this.UO){this.SD();const e=this.mo.isPositionedLeft?this.mo.floatingGutterX:-this.mo.floatingGutterX;t=this.Oi.getElementCoordinates(this.UO).clientX+e;const s=this.vD();return i=s<this.mo.floatingGutterY?this.mo.floatingGutterY:s,{x:t,y:i}}if(this.mo.isPinnedFloating)t=0,i=this.mo.isPositionedPinnedTop?this.mo.floatingGutterY:-this.mo.floatingGutterY;else{if(this.mo.isPositionedLeft)t=this.mo.floatingGutterX;else{t=this.Oi.getViewportWidth()-this.MO.offsetWidth-this.mo.floatingGutterX}if(this.mo.isPositionedTop)i=this.mo.floatingGutterY;else{i=this.Oi.getViewportHeight()-this.MO.offsetHeight-this.mo.floatingGutterY}}return{x:t,y:i}}AD(){const t=(this.mo.floatingWidth||D.I_)+D.oC,i=this.Oi.getViewportWidth();return this.mo.isPositionedLeft?-t:i+t}YO(){return(0,M.LT)(this.MO).document.body.getBoundingClientRect().width>=this.FO}tD(){if(!this.PD())return;this.GO()&&this.pD(),this.NO=!0,this.transitionState=D.vh.DirectionIn,this.dD(u._7.MainClass),this.ZO(),this.addPinnedCssClasses();const t=this.qO(),i=this.AD();this._D(),this.zO({x:i,y:t.y},!1),(0,M.Tp)(this.MO);this.zO(t,!0)}addPinnedCssClasses(){this.cD(u._7.PinnedFloating),this.cD(u._7.PinnedTopFloating),this.cD(u._7.PinnedBottomFloating),this.mo.isPinnedFloating&&(this.dD(u._7.PinnedFloating),this.dD(this.hD===o.ProtoPositionMode.PinnedTop?u._7.PinnedTopFloating:u._7.PinnedBottomFloating))}PD(){return!!this.YO()&&!(this.GO()&&(!this.UO||this.UO&&0===this.UO.clientWidth))}SD(){this.UO&&(this.Oi.getElementCoordinates(this.UO).clientX<this.Oi.getBodyDimensions().width/2?(this.mo.isPositionedLeft=!0,this.mo.isPositionedRight=!1):(this.mo.isPositionedLeft=!1,this.mo.isPositionedRight=!0))}iD(t=!0){t&&(this.transitionState=D.vh.DirectionOut),this.GO()&&this.fD(),this.xD();const{y:i}=this.qO(),e=this.AD();this.zO({y:i,x:e},t),t||this.rD()}TD(){this.MO.addEventListener("transitionend",this.eD),this.mo.hasFloatingTransition||this.dD(u._7.InstantTransitionClass);const t=this.Oi.getGlobalClosestTop().topFrame;this.DO.on(this.MO,this.XO),this.DO.on(t.document.body,this.WO),t.addEventListener("resize",this.WO),this.GO()&&this.gD()}hs(){this.DO.off(this.MO,this.XO),this.MO.removeEventListener("transitionend",this.eD);const t=this.Oi.getGlobalClosestTop().topFrame;this.DO.off(t.document.body,this.WO),t.removeEventListener("resize",this.WO),this.UO&&(this.DO.off(this.UO,this.WO),this.fD(),clearInterval(this.jO))}kD(t){this.hD=t.scrollPosition,this.addPinnedCssClasses(),void 0!==t.scrollPosition&&(this.mo.setScrollPosition(t.scrollPosition),this.mo.isPositionedPinnedBottom||this.mo.isPositionedPinnedTop?this.mo.setExtraHeight(0):this.mo.setExtraHeight(this.mo.cachedExtraHeight)),(null==t?void 0:t.floatingWidth)&&(this.mo.width=t.floatingWidth),(null==t?void 0:t.floatingGutterX)&&(this.mo.gutterX=t.floatingGutterX),(null==t?void 0:t.floatingGutterY)&&(this.mo.gutterY=t.floatingGutterY)}getFloatingSettings(){return this.mo.getFloatingSettings()}get isInFloating(){return this.NO}get scrollPosition(){return this.hD}}var at,ct,dt=r(6716);class lt extends ht{constructor(t,i,e,s,n,r=0){super(t,e,i,s,n,r),this.KO=!0,this.CD=new dt.x}get onFloatingEnterStop(){return this.CD.asObservable()}_D(){}nD(){this.CD.next()}xD(){}ID(){}oD(){}start(){this.lD()&&(this.dD(u._7.AlwaysFloating),super.TD(),super.tD())}setFloatingSettings(t){this.kD(t),this.start()}getFloatingSettings(){return super.getFloatingSettings()}}class ut extends ht{constructor(t,i,e,s,n,r,h,a=0){super(e,n,s,r,h,a),this.ha=t,this.rl=i,this.ED=!0,this.Qy=!0,this.LD=!0,this.BD=!1,this.RD=!1,this.KO=!1,this.OD=new dt.x,this.CD=new dt.x,this.DD=new dt.x,this.VD=new dt.x,this.FD=t=>{const i=this.rl.isPageInFocus;t&&this.isInFloating&&(this.KO=!1,this.iD()),this.ED&&this.mo.floatingMode===o.ProtoPlayerFloatingMode.AfterInView&&t&&(this.ED=!1),!t&&!this.ED&&this.Qy&&i&&(this.KO=!0,super.tD())},this.ZO=()=>{this.isInFloating&&super.ZO()}}get onFloatingEnterStart(){return this.OD.asObservable()}get onFloatingEnterStop(){return this.CD.asObservable()}get onFloatingExitStart(){return this.DD.asObservable()}get onFloatingExitStop(){return this.VD.asObservable()}isFloatingModeEnabled(){return this.ED&&(this.enabled=!1),this.enabled}enableFloatingMode(){this.LD=!0,this.RD=!1,this.forceEnableFloatingMode()}disableFloatingMode(){this.LD=!1,this.forceDisableFloatingMode()}forceEnableFloatingMode(){this.RD||(this.ED=!1,this.Qy=!0,this.start())}forceDisableFloatingMode(){this.Qy=!1,this.destroy()}setFloatingSettings(t){this.kD(t),this.start()}getFloatingSettings(){return super.getFloatingSettings()}iD(){const t=!this.BD;super.iD(t)}xD(){this.DD.next()}ID(){this.ND()}_D(){this.OD.next()}ND(){this.transitionState=D.vh.FadeIn,this.cD(u.jG.FadeIn),this.dD(u.jG.FadeInBase),(0,M.Tp)(this.MO),this.dD(u.jG.FadeIn)}nD(){this.CD.next()}oD(){this.cD(u.jG.FadeInBase,u.jG.FadeIn),this.VD.next(),this.ae&&super.hs()}jD(){this.ha.on(this.MO.parentElement,this.FD,{threshold:D.fJ})}$D(){this.ha.off(this.MO.parentElement,this.FD)}start(){this.lD()&&(super.TD(),this.mo.floatingMode===o.ProtoPlayerFloatingMode.OnPageLoad&&(this.ED=!1),this.jD(),this.FD(this.ha.check({element:this.MO.parentElement,threshold:D.fJ})))}canFloat(){return this.lD()&&this.mo.floatingMode!==o.ProtoPlayerFloatingMode.Off}destroy(t=!1){t&&(this.RD=t),this.isInFloating?(this.rD(),this.ae=!0):super.hs(),this.$D()}get enabled(){return this.Qy}set enabled(t){this.Qy=t}get forceEnabled(){return this.LD}set forceEnabled(t){this.LD=t}fullscreenStateChange(t){this.BD=t,t?this.$D():this.jD(),this.FD(t)}}!function(t){t[t.EmbededState=0]="EmbededState",t[t.FloatingState=1]="FloatingState"}(at||(at={}));class pt{constructor(t,i){this.UD=t,this.zD=i,this.WD=!1,this.GD(),this.JD()}GD(){this.zD!==o.ProtoPlayerFloatingMode.Off&&this.zD!==o.ProtoPlayerFloatingMode.AfterInView||(this.QD=at.EmbededState),this.zD===o.ProtoPlayerFloatingMode.OnPageLoad&&this.UD.isInFloating&&(this.QD=at.FloatingState),this.zD!==o.ProtoPlayerFloatingMode.OnPageLoad||this.UD.isInFloating||(this.QD=at.EmbededState),(this.YD&&!this.KD||this.ZD)&&this.zD!==o.ProtoPlayerFloatingMode.Off&&(this.QD=at.EmbededState),this.tV=this.QD}iV(){(this.eV||this.sV)&&this.UD.isInFloating&&this.zD!==o.ProtoPlayerFloatingMode.Off&&(this.QD=at.FloatingState),(this.YD&&!this.KD||this.ZD)&&this.zD!==o.ProtoPlayerFloatingMode.Off&&(this.UD.isInFloating&&(this.QD=at.FloatingState),(!this.UD.forceEnabled||!this.UD.isInFloating&&this.nV)&&(this.QD=at.EmbededState)),(this.rV||this.hV||this.KD||this.aV)&&this.zD!==o.ProtoPlayerFloatingMode.Off&&(this.QD=at.FloatingState),this.cV()&&(this.QD=at.EmbededState),this.cV()&&this.UD.isInFloating&&(this.QD=at.FloatingState),this.QD!==this.tV&&(this.tV=this.QD,this.JD())}JD(){this.UD.forceEnabled||this.UD.forceDisableFloatingMode(),this.UD.forceEnabled&&(this.QD===at.EmbededState&&this.UD.forceDisableFloatingMode(),this.QD===at.FloatingState&&this.UD.forceEnableFloatingMode())}cV(){return this.zD===o.ProtoPlayerFloatingMode.AfterInView&&!this.WD}setViewabilityFlag(t){t&&(this.WD=t),this.nV!==t&&this.UD.forceEnabled&&(this.nV=t,this.iV())}setAdPlay(t){this.KD!==t&&this.UD.forceEnabled&&(this.KD=t,this.ZD=!1,this.aV=!1,this.rV=!1,this.YD=!0,this.hV=!1,this.iV())}setAdResumed(t){this.aV!==t&&this.UD.forceEnabled&&(this.aV=t,this.KD=!1,this.ZD=!1,this.rV=!1,this.YD=!0,this.hV=!1,this.iV())}setAdPaused(t){this.ZD!==t&&this.UD.forceEnabled&&(this.ZD=t,this.KD=!1,this.aV=!1,this.YD=!1,this.rV=!1,this.hV=!1,this.iV())}setPlayerPlay(t){this.rV!==t&&this.UD.forceEnabled&&(this.rV=t,this.YD=!1,this.hV=!1,this.ZD=!1,this.KD=!1,this.aV=!1,this.iV())}setPlayerPause(t){this.YD!==t&&this.UD.forceEnabled&&(this.YD=t,this.rV=!1,this.hV=!1,this.ZD=!1,this.KD=!1,this.aV=!1,this.iV())}setPlayerLoading(t){this.hV!==t&&this.UD.forceEnabled&&(this.hV=t,this.YD=!1,this.rV=!1,this.ZD=!1,this.KD=!1,this.aV=!1,this.iV())}setNonlinearEnable(t){this.eV!==t&&this.UD.forceEnabled&&(this.eV=t,this.sV=!1,this.iV())}setNonlinearDisable(t){this.sV!==t&&this.UD.forceEnabled&&(this.sV=t,this.eV=!1,this.iV())}}!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(ct||(ct={}));const ft=ct;class mt{constructor(t){this.urlSuffixerService=t,this.dV={},this.lV=[]}getImage(t,i,e,s,n="",r=!1){return this.uV=t,this.pV=(0,L.QM)(i)?i:"",this.Cs=e,this.Es=s,this.fV=n,this.mV=r,this.vV()}vV(){const t=this.gV();if(t)return t;const i=this.uV+this.fV,e=new Image;return e.src=this.urlSuffixerService.appendParamsToUrl(i),e.alt=this.pV,this.dV[this.uV]=this.dV[this.uV]||{},this.dV[this.uV][this.Cs]=this.dV[this.uV][this.Cs]||{},this.dV[this.uV][this.Cs][this.Es]=this.dV[this.uV][this.Cs][this.Es]||{},this.dV[this.uV][this.Cs][this.Es][this.fV]=e,e}gV(){const t=this.yV();if(t)return t;if(!this.mV)return;this.bV();const i=this.wV();if(i)return i;const e=this.SV();return e||void 0}bV(){const t=[];if(!this.dV[this.uV])return void(this.lV=[]);const i=this.dV[this.uV],e=this.Cs>this.Es?ft.Landscape:ft.Portrait;Object.keys(i).forEach((s=>{const n=parseInt(s,10);Object.keys(i[s]).filter((t=>!!i[s][t])).forEach((i=>{const s=parseInt(i,10);if((n>s?ft.Landscape:ft.Portrait)!==e)return;const r={area:n*s,img:this.AV(this.uV,n,s)};t.push(r)}))})),this.lV=[...t]}AV(t,i,e){if(this.dV[t]&&this.dV[t][i]&&this.dV[t][i][e])return this.dV[t][i][e][Object.keys(this.dV[t][i][e])[0]]}yV(){return this.dV[this.uV]&&this.dV[this.uV][this.Cs]&&this.dV[this.uV][this.Cs][this.Es]&&this.dV[this.uV][this.Cs][this.Es][this.fV]}wV(){if(0===this.lV.length)return;const t=this.Cs*this.Es,i=this.lV.filter((({area:i})=>i>t)).sort(((t,i)=>t.area-i.area));return 0!==i.length?i[0].img:void 0}SV(){if(0===this.lV.length)return;const t=this.Cs*this.Es,i=this.lV.filter((({area:i})=>i<t&&t/i<=1.3)).sort(((t,i)=>i.area-t.area));return 0!==i.length?i[0].img:void 0}}var vt=r(7423),gt=r(4656),yt=r(1703),bt=r(9791),It=r(7332),wt=r(4975),St=r(8474),At=r(6798),Pt=r(2566),_t=r(278);function xt(t,i,e){var s=(0,St.m)(t)||i||e?{next:t,error:i,complete:e}:t;return s?(0,At.e)((function(t,i){var e;null===(e=s.subscribe)||void 0===e||e.call(s);var n=!0;t.subscribe((0,Pt.x)(i,(function(t){var e;null===(e=s.next)||void 0===e||e.call(s,t),i.next(t)}),(function(){var t;n=!1,null===(t=s.complete)||void 0===t||t.call(s),i.complete()}),(function(t){var e;n=!1,null===(e=s.error)||void 0===e||e.call(s,t),i.error(t)}),(function(){var t,i;n&&(null===(t=s.unsubscribe)||void 0===t||t.call(s)),null===(i=s.finalize)||void 0===i||i.call(s)})))})):_t.y}var Tt=r(4978),kt=r(4865);function Ct(t){return t[t.length-1]}function Et(t){return(0,kt.K)(Ct(t))?t.pop():void 0}var Mt=r(7878);function Lt(t,i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=!1);var r=i.schedule((function(){e(),n?t.add(this.schedule(null,s)):this.unsubscribe()}),s);if(t.add(r),!n)return r}function Bt(t,i){return void 0===i&&(i=0),(0,At.e)((function(e,s){e.subscribe((0,Pt.x)(s,(function(e){return Lt(s,t,(function(){return s.next(e)}),i)}),(function(){return Lt(s,t,(function(){return s.complete()}),i)}),(function(e){return Lt(s,t,(function(){return s.error(e)}),i)})))}))}function Rt(t,i){return void 0===i&&(i=0),(0,At.e)((function(e,s){s.add(t.schedule((function(){return e.subscribe(s)}),i))}))}var Ot=r(1480);var Dt=r(9768);function Vt(t,i){if(!t)throw new Error("Iterable cannot be null");return new Ot.y((function(e){Lt(e,i,(function(){var s=t[Symbol.asyncIterator]();Lt(e,i,(function(){s.next().then((function(t){t.done?e.complete():e.next(t.value)}))}),0,!0)}))}))}var Ft=r(1764),Nt=r(3841),jt=r(5685),$t=r(1837),Ut=r(8430),qt=r(8729),Ht=r(8671);function zt(t,i){if(null!=t){if((0,Ft.c)(t))return function(t,i){return(0,Mt.Xf)(t).pipe(Rt(i),Bt(i))}(t,i);if((0,jt.z)(t))return function(t,i){return new Ot.y((function(e){var s=0;return i.schedule((function(){s===t.length?e.complete():(e.next(t[s++]),e.closed||this.schedule())}))}))}(t,i);if((0,Nt.t)(t))return function(t,i){return(0,Mt.Xf)(t).pipe(Rt(i),Bt(i))}(t,i);if((0,Ut.D)(t))return Vt(t,i);if((0,$t.T)(t))return function(t,i){return new Ot.y((function(e){var s;return Lt(e,i,(function(){s=t[Dt.h](),Lt(e,i,(function(){var t,i,n;try{i=(t=s.next()).value,n=t.done}catch(t){return void e.error(t)}n?e.complete():e.next(i)}),0,!0)})),function(){return(0,St.m)(null==s?void 0:s.return)&&s.return()}}))}(t,i);if((0,Ht.L)(t))return function(t,i){return Vt((0,Ht.Q)(t),i)}(t,i)}throw(0,qt.z)(t)}function Wt(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return function(t,i){return i?zt(t,i):(0,Mt.Xf)(t)}(t,Et(t))}var Gt=r(1307);const Xt=Object.assign({},v.Km);var Jt=r(7531),Qt=r(4793),Yt=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const Kt=["com.accuweather.android"],Zt=.05*F.s_;class ti extends c._{constructor(t,i,e,s,n,r,h,a){super(),this.mediator=t,this._appSettings=i,this.Ue=e,this.jE=s,this.tf=n,this.wM=r,this.rl=h,this.$R=a,this.PV=.01,this._V=.5,this.xV=.5,this.TV=2e3,this.kV=0,this.CV=!1,this.EV=!1,this.LV=!1,this.BV=!1,this.RV=!1,this.OV=!1,this.nV=!1,this.DV=o.ProtoAdSlotsEnum.PreRoll,this.HS=!1,this.VV=!1,this.FV=!1,this.NV=!1,this.jV=!0,this.$V=[],this.UV=[],this.qV=[],this.HV=[],this.zV=[],this.WV=0,this.GV={[B.d.togglePlay]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.togglePlay(this.jV)},[B.d.toggleMute]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.toggleMute(this.jV)},[B.d.increaseVolume]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.increaseVolume(.1,this.jV)},[B.d.decreaseVolume]:()=>{var t;return null===(t=this.adHandler)||void 0===t?void 0:t.decreaseVolume(.1,this.jV)}},this.XV=t=>{this.VV=t,t&&(this.app.services.ViewabilityService.off(this.$playerContainer,this.XV),this.JV())},this.QV=t=>{t&&this.adHandler&&!this.NV&&setTimeout((()=>{this.adHandler.resumeWithoutUserInteraction(this.DV)}),Zt)},this.YV=()=>{this.isBelowSmBreakpoint(this.$experienceContainer.clientWidth)?(0,M.cn)(this.$experienceContainer,u.Gj.NoHeight):(0,M.IV)(this.$experienceContainer,u.Gj.NoHeight),!this.EV&&this.KV()&&(this.mediator.publish(this,d.Uh.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.YV))},this.ZV=t=>{const{playback:i,isFullscreenClose:e}=t;this.floatingModule&&(0,L.$K)(i)&&!e&&(this.floatingModule.enabled=i)},this.tF=()=>{this.iF(1)},this.eF=()=>{this.iF(0)},this.sF=t=>{this.ZV(t);const{playback:i}=t;(0,L.$K)(i)&&(i?(this.app.services.EventsStorageService.emitAdPlay(),this.NV=!1):(this.app.services.EventsStorageService.emitAdPause(),this.NV=!0))},this.nF=new mt(e)}oF(){}hF(t,i,e){this.app.services.EventsStorageService.emitAdImpression(t,i,e)}aF(t){this.app.services.EventsStorageService.emitAdComplete(t)}cF(){}dF(){}lF(){}uF(){}pF(){}fF(){}mF(){}vF(t){const i={state:t};this.app.services.EventsStorageService.emitAdStateChange(i)}gF(){const{clientWidth:t,clientHeight:i}=this.$playerContainer,e={width:t,height:i};this.app.services.EventsStorageService.emitPlayerResized(e)}yF(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}bF(){this.app.services.EventsStorageService.emitOnExitFullscreen()}IF(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}wF(t){this.app.services.EventsStorageService.emitOnPlayerExpanded(t)}SF(t){this.AF(t),this.PF(t),this._F(t),this.DV=t,this.xF(t)}PF(t){this.adHandler&&this.adHandler.adStateChange(t,this.kF.getMaxAdSlotDuration())}_F(t){this.CF.onAdStateChange(t,{maxAdPodDuration:this.kF.getMaxAdPodDuration(),maxAdSlotDuration:this.kF.getMaxAdSlotDuration()})}AF(t){this.kF.setNewBreak(t)}xF(t){this.vF(yt.V[t])}EF(){var t;null===(t=this.adHandler)||void 0===t||t.contentChanged(),this.CF.contentChanged()}LF(){var t;null===(t=this.adHandler)||void 0===t||t.contentEnded()}BF(){var t,i,e,s,n,r;return Yt(this,void 0,void 0,(function*(){this.adHandler=yield this.RF(),this.OF(),null===(t=this.adHandler)||void 0===t||t.onLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,v.Km.ImpressionPrice,{payload:t})})),null===(i=this.adHandler)||void 0===i||i.onNonLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,v.Km.ImpressionPrice,{payload:t})})),null===(e=this.adHandler)||void 0===e||e.onLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,v.Km.ImpressionRevenue,{payload:t})})),null===(s=this.adHandler)||void 0===s||s.onNonLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,v.Km.ImpressionRevenue,{payload:t})})),null===(n=this.adHandler)||void 0===n||n.onLinearExperienceEvent.subscribe((t=>{d.Uh.UserInteraction===t.type&&this.sF(t.payload)}));const o=()=>{this.jE.adsEnabled.next(),this.FV=!0,this.NV=!1,this.JV(),this.DF.unsubscribe()};this.DF=null===(r=this.adHandler)||void 0===r?void 0:r.onAdsEnable.subscribe((()=>{o()})),this.CF.setAdHandler(this.adHandler),this.Vp()}))}sB(t){this.mediator.publish(this,v.Km.AdImpression,t.payload);const{adSourceData:i,customAdData:e,adType:s}=t.payload.payload;this.hF(i,e,s)}Vp(){this.UV.push(this.tf.adBid.subscribe((t=>{const{publisherLineItemId:i,advertiserLineItemId:e,impressionTrackers:s}=t;setTimeout((()=>{this.mediator.publish(this,v.Km.Bid,{payload:{publisherLineItemId:i,advertiserLineItemId:e,impressionTrackers:s}})}),0)})))}OF(){this.VF(),this.FF(),this.NF()}VF(){this.zV.push(this.adHandler.onVpaidEvent.subscribe((t=>{switch(t.type){case N.fI.AdStarted:this.mediator.publish(this,v.Km.AdStarted,t.payload);break;case N.fI.AdImpression:this.sB(t);break;case N.fI.AdStopped:{if(this.mediator.publish(this,v.Km.AdStopped,t.payload),this.nV&&this.dF(),!t.payload)return;const{adType:i}=t.payload.payload;this.aF(i),this.app.services.EventsStorageService.emitAdStopped(i);break}case N.fI.AdError:{const{adType:i}=t.payload;this.mediator.publish(this,v.Km.AdError,t),this.app.services.EventsStorageService.emitAdError(i);break}case N.fI.AdSkipped:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdSkipped,t.payload),this.app.services.EventsStorageService.emitAdSkipped(i),this.aF(i),this.nV&&this.dF();break}case N.fI.AdPaused:{const{adType:i}=t.payload.payload;this.jE.sessionPlaybackChanged.next({isPlaying:!1}),this.app.services.EventsStorageService.emitAdPaused(i),this.mediator.publish(this,v.Km.AdPause,t.payload);break}case N.fI.AdPlaying:{const{adType:i}=t.payload.payload;this.jE.sessionPlaybackChanged.next({isPlaying:!0}),this.app.services.EventsStorageService.emitAdPlaying(i),this.mediator.publish(this,v.Km.AdPlay,t.payload);break}case N.fI.AdVideoFirstQuartile:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdCompleted25,t.payload),this.app.services.EventsStorageService.emitAdVideoFirstQuartile(i);break}case N.fI.AdVideoMidpoint:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdCompleted50,t.payload),this.app.services.EventsStorageService.emitAdVideoMidpoint(i);break}case N.fI.AdVideoThirdQuartile:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdCompleted75,t.payload),this.app.services.EventsStorageService.emitAdVideoThirdQuartile(i);break}case N.fI.AdVideoComplete:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdCompleted100,t.payload),this.app.services.EventsStorageService.emitAdVideoComplete(i);break}case N.fI.AdClickThru:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdClick,t.payload),this.app.services.EventsStorageService.emitAdClickThru(i);break}case N.fI.AdInteraction:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case N.fI.AdUserAcceptInvitation:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case N.fI.AdExpandedChange:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdExpandedChange(i);break}case N.fI.AdUserClose:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case N.fI.AdUserMinimize:{const{adType:i}=t.payload.payload;this.app.services.EventsStorageService.emitAdInteraction(i);break}case N.fI.AdVideoStart:{const{adSourceData:i,adType:e}=t.payload,{clientWidth:s,clientHeight:n}=this.$playerContainer,r={duration:i&&i.length,mediaPlayerVolume:this.getVolume(),mediaPlayerDimensions:{width:s,height:n}};this.app.services.EventsStorageService.emitAdVideoStart(r,e);break}case N.fI.AdLoaded:{const{payload:i}=t.payload,{adType:e,adLoadedData:s}=i;this.mediator.publish(this,v.Km.AdLoaded,t.payload),(null==s?void 0:s.skipOffset)<0&&(s.skipOffset=void 0);const n=this.jF(s);this.app.services.EventsStorageService.emitAdLoaded(n,e);break}case N.fI.AdVolumeChange:{const{adType:i}=t.payload.payload;this.mediator.publish(this,v.Km.AdVolumeChange,t.payload),this.app.services.EventsStorageService.emitAdVolumeChange(i);break}case N.fI.AdLog:}})),this.adHandler.onPrefetchStart.subscribe((()=>{this.mediator.publish(this,v.Km.PrefetchStart)})))}FF(){this.zV.push(this.adHandler.onMissedImpression.subscribe((t=>{const i=Math.round(this.CF.getTheoreticalDurationUntilNextOpportuinity()*F.s_);t.setTimeUntilNextOpportunity(i),this.tf.missedImpressionOutOfView.next(t.missedImpressionsLogs)})),this.adHandler.onLinearEvent.subscribe((t=>{var i,e,s;switch(t.type){case Qt.lc.ShowLinearEvent:this.CF.onAdImpression(t.payload,vt.k.LINEAR),this.$F(),null===(i=this.floatingStateMachine)||void 0===i||i.setAdPlay(!0);break;case Qt.lc.HideLinearEvent:this.UF(t.forced);break;case Qt.lc.PauseLinearEvent:this.CF.onLinearAdPause(),null===(e=this.floatingStateMachine)||void 0===e||e.setAdPaused(!0);break;case Qt.lc.ResumeLinearEvent:this.CF.onLinearAdPlay(),null===(s=this.floatingStateMachine)||void 0===s||s.setAdResumed(!0);break;case Qt.lc.SkipLinearEvent:const n=!0;this.floatingModule&&(this.floatingModule.enabled=!0),this.UF(n)}})))}NF(){this.zV.push(this.adHandler.onNonLinearEvent.subscribe((t=>{switch(t.type){case Qt.gx.ShowNonLinearEvent:this.CF.onAdImpression(t.payload,vt.k.NONLINEAR);break;case Qt.gx.HideNonLinearEvent:const i=!1;this.CF.onAdFinished(this.adHandler.nonLinearInImpression,vt.k.NONLINEAR,i)}})))}$F(){this.kF.adStarted(),this.adHandler.showLinear(),(0,M.cn)(this.$playerWrapper,u._7.HidePinnedTitle)}HF(){this.adHandler.hideLinear(),(0,M.IV)(this.$playerWrapper,u._7.HidePinnedTitle)}UF(t=!1,i=this.$playerContainer){var e,s,n,r;this.$R.processAdUserInteraction(t);let h=this.kF.isInAdPod();t&&(h=!1,this.kF.endPod()),this.CF.onAdFinished(this.adHandler.linearInImpression,vt.k.LINEAR,h),this.HF(),this.zF.isCloseButton&&this.adHandler&&this.adHandler.firstLinearAdShown&&(this.zF.closeButtonMode!==o.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,M.pv)(i,u.s6.CloseHover)||((0,M.cn)(i,u.s6.CloseHover),null===(s=null===(e=this.nO)||void 0===e?void 0:e.updateCloseButtonMode)||void 0===s||s.call(e,!1,o.ProtoPlayerCloseButtonMode.OnHover)),this.zF.floatingSettings.floatingCloseButtonMode!==o.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||(0,M.pv)(i,u.s6.CloseFloatHover)||((0,M.cn)(i,u.s6.CloseFloatHover),null===(r=null===(n=this.nO)||void 0===n?void 0:n.updateCloseButtonMode)||void 0===r||r.call(n,!0,o.ProtoPlayerCloseButtonMode.OnHover)))}WF(t){this.adHandler.enterAdPodLoadingState(),this.kF.enterPodTimeout((()=>{this.kF.endPod(),t()}))}JF(){(0,l.BZ)((0,gt.mn)(this.zF.lineItemSettings.lineItems,vt.k.LINEAR))||this.CF.onLinearNoDemand(),this.subscribe(tt,this.CF,(()=>{var t,i;null===(t=this.adHandler)||void 0===t||t.enableAds(vt.k.NONLINEAR),null===(i=this.floatingStateMachine)||void 0===i||i.setNonlinearEnable(!0)})),this.subscribe(Z,this.CF,(t=>{var i,e;const s=t.payload;null===(i=this.adHandler)||void 0===i||i.disableAds(vt.k.NONLINEAR,s),null===(e=this.floatingStateMachine)||void 0===e||e.setNonlinearDisable(!0)})),this.subscribe(G,this.CF,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAds(vt.k.LINEAR)})),this.subscribe(X,this.CF,(t=>{var i;const e=t.payload;null===(i=this.adHandler)||void 0===i||i.disableAds(vt.k.LINEAR,e)})),this.subscribe(J,this.CF,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.stopAd(Qt.aB.ForceStopAdSlot)})),this.subscribe(Q,this.CF,(()=>{if(this.adHandler)if(this.adHandler.linearInImpression)this.kF.endPod(),this.adHandler.stopAd(Qt.aB.ForceStopAdPod);else{const t=!0;this.UF(t)}})),this.subscribe(it,this.CF,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.disableAdvertising()})),this.subscribe(et,this.CF,(()=>{var t;null===(t=this.adHandler)||void 0===t||t.enableAdvertising()})),this.subscribe(K,this.CF,(t=>{var i;null===(i=this.adHandler)||void 0===i||i.updateLinearPodRemainingTime(t.payload.remainingTime)})),this.subscribe(rt,this.CF,(t=>{var i;const e=t.payload.linearity;null===(i=this.adHandler)||void 0===i||i.canPrefetchAds(e)})),this.subscribe(Y,this.CF,(t=>{var i,e;const s=t.payload.adBreakType,n=null===(i=this.adHandler)||void 0===i?void 0:i.getLinearAdContainerWidth(),r=this.QF(),o=(0,L.$K)(n)?n:this.$playerContainer.clientWidth;this.jE.adOpportunity.next({adBreak:R.EN.fromProtoAdBreakType(s),playerWidth:o,opportunityId:r.id}),null===(e=this.adHandler)||void 0===e||e.newLinearAdOpportunity(r)}))}QF(){return(0,L.$K)(this.adHandler)?this.adHandler.getNewLinearAdOpportunity():new Gt.qW}YF(){this.app.services.ViewabilityService.on(this.$playerContainer,this.XV,{threshold:this._V,callbackDelay:this.TV}),this.app.services.ViewabilityService.on(this.$playerContainer,((t,i)=>this.FD(t,i)),{threshold:this.PV}),this.app.services.ViewabilityService.on(this.$playerContainer,(t=>{var i;null===(i=this.floatingStateMachine)||void 0===i||i.setViewabilityFlag(t)}),{threshold:this.xV}),this.app.services.ViewabilityService.subscribe(v.jJ.OmidViewabilityThreshold,(t=>{this.mediator.publish(this,v.jJ.OmidViewabilityThreshold,{payload:{threshold:t}})})),this.app.config.os.os===V.M.Ios&&this.app.services.PageFocusService.on(this.QV)}JV(){this.VV&&this.FV&&this.mediator.publish(this,d.Xh.SessionView)}FD(t,i=!1){this.CF.setToggleAdsReason({isAppBackgrounded:i}),this.app.config.isInApp&&(this.rl.isPageInFocus=!i,i?(this.GI=this.getVolume(),this.setVolume(0)):this.GI&&(this.setVolume(this.GI),this.GI=null)),this.nV=t,this.mediator.publish(this,v.Km.IsViewable,{payload:t}),this.CF.viewabilityStateChanged(this.checkFloatingViewability(t),this.kF.isInAdPod(),this.kF.isInPodTimeout()),this.jE.sessionViewabilityChanged.next({isInView:t})}checkFloatingViewability(t){const i=this.rl.isPageInFocus;return!(t||!this.floatingModule||!this.floatingModule.isInFloating||!i)||t}vB(){var t,i,e;const n=this.$playerContainer.clientWidth,r=this.$playerContainer.clientHeight;this.rl.playerDimensions={height:r,width:n};const o=this.HS?N.zc.Fullscreen:N.zc.Normal;null===(t=this.adHandler)||void 0===t||t.resizeAd(n,r,o,this.DV);try{null===(i=this.CF)||void 0===i||i.onResize(n,r)}catch(t){(0,s.n)({message:"BaseExperience_onResize_player",callStack:t.stack,exception:t.message,level:s.D.WARN})}null===(e=this.adHandler)||void 0===e||e.setPlayerOrientation(this.KF(n,r)),this.ZF(),setTimeout((()=>{this.mediator.publish(this,v.Km.SizeChanged,{payload:{width:n,height:r}}),this.iN()}))}isBelowSmBreakpoint(t){return t<this.WV}KF(t,i){return t<i?$.g.Portrait:t>i?$.g.Landscape:$.g.None}iN(){this.HS||this.gF()}eN(){this.app.services.ResizeObserver.on(this.$playerContainer,(()=>{this.vB()}))}Vw(){var t;this.HS=!0,this.app.services.InteractionService.disableScrollEvent(),this.yF(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(N.zc.Fullscreen)}Dw(){var t;this.HS=!1,this.app.services.InteractionService.enableScrollEvent(),this.bF(),null===(t=this.adHandler)||void 0===t||t.setVastViewMode(N.zc.Normal)}nN(){const t=`<cnx class='${u.oV}'></cnx>`,i=this.app.services.GlobalDomUtilsService.createElementByString(t);return this.rN(i),i}rN(t){(0,M.T7)(t,{"padding-bottom":`${this.oN()}%`})}oN(){return this.zF.playerSize.ratioHeight/this.zF.playerSize.ratioWidth*100}hN(t){var i;(null===(i=this.adHandler)||void 0===i?void 0:i.linearInImpression)?this.aN(t.action):this.cN(t.action)}cN(t){}aN(t){const i=this.GV[t];i&&i()}dN(){this.qV.push(this.floatingModule.onFloatingEnterStart.subscribe((()=>{var t,i,e;this.mediator.publish(this,v.Zr.PlayerFloatChanged,{payload:D.Xx.Float}),this.mediator.publish(this,v.Zr.FloatingEnterStart,{payload:!0}),null===(t=this.adHandler)||void 0===t||t.inFloatingChanged(!0),null===(e=null===(i=this.nO)||void 0===i?void 0:i.updateFloatingState)||void 0===e||e.call(i,!0)})),this.floatingModule.onFloatingExitStart.subscribe((()=>{this.mediator.publish(this,v.Zr.FloatingExitStart,{payload:!0})})),this.floatingModule.onFloatingExitStop.subscribe((()=>{var t,i,e;this.mediator.publish(this,v.Zr.PlayerFloatChanged,{payload:D.Xx.Embed}),this.mediator.publish(this,v.Zr.FloatingExitStop,{payload:!0}),null===(t=this.adHandler)||void 0===t||t.inFloatingChanged(!1),null===(e=null===(i=this.nO)||void 0===i?void 0:i.updateFloatingState)||void 0===e||e.call(i,!1)})),this.floatingModule.onFloatingEnterStop.subscribe((()=>{this.mediator.publish(this,v.Zr.FloatingEnterStop,{payload:!0}),this.FD(!0)})))}lN(){this.floatingModule=new ut(this.app.services.ViewabilityService,this.rl,this.app.services.ResizeObserver,this.$playerContainer,this.zF.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService,this.uN),this.dN(),this.floatingModule.start(),this.floatingStateMachine=new pt(this.floatingModule,this.zF.floatingSettings.floatingMode)}pN(){this.alwaysFloatingModule=new lt(this.app.services.ResizeObserver,this.$experienceContainer,this.zF.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService),this.qV.push(this.alwaysFloatingModule.onFloatingEnterStop.subscribe((()=>{var t;null===(t=this.adHandler)||void 0===t||t.inFloatingChanged(!0),this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)}))),this.alwaysFloatingModule.start()}setNewVolume(t){var i;null===(i=this.adHandler)||void 0===i||i.setLinearVolume(t)}fN(){var t;this.mN(),null===(t=this.adHandler)||void 0===t||t.onLinearExperienceEvent.subscribe((t=>{var i;t.type===d.Uh.UserInteraction&&(null===(i=t.payload)||void 0===i?void 0:i.volume)&&this.vN()}))}gN(t){this.subscribe(d.Uh.UserInteraction,t,(({payload:{volume:t}})=>{t&&this.vN()}))}dB(t){this.mediator.publish(this,v.Km.VolumeChanged,{payload:t}),this.app.services.EventsStorageService.emitVolumeChange(t)}iF(t){this.getVolume()!==t&&this.setNewVolume(t)}mN(){this.CV=!0,this.$playerContainer.addEventListener("mouseover",this.tF),this.$playerContainer.addEventListener("mouseout",this.eF)}vN(){this.CV&&(this.CV=!1,this.$playerContainer.removeEventListener("mouseover",this.tF),this.$playerContainer.removeEventListener("mouseout",this.eF))}yN(){this.breakPointsHandler=new ot(this.$playerContainer,this.bN,this.IN,this.app.config.device),this.ZF()}wN(t=this.$playerContainer){if(this.zF.isCloseButton){switch(this.adHandler&&this.HV.push(this.adHandler.onLinearUiComponentEvent.subscribe((t=>{t.type===k.C.Close&&(this.mediator.publish(this,Xt.CloseButtonClicked),this.handleClose())}))),this.zF.closeButtonMode){case o.ProtoPlayerCloseButtonMode.AlwaysOn:(0,M.cn)(t,u.s6.CloseOn);break;case o.ProtoPlayerCloseButtonMode.Off:(0,M.cn)(t,u.s6.CloseOff);break;case o.ProtoPlayerCloseButtonMode.OnHover:(0,M.cn)(t,u.s6.CloseHover)}switch(this.zF.floatingSettings.floatingCloseButtonMode){case o.ProtoPlayerCloseButtonMode.AlwaysOn:(0,M.cn)(t,u.s6.CloseFloatOn);break;case o.ProtoPlayerCloseButtonMode.Off:(0,M.cn)(t,u.s6.CloseFloatOff);break;case o.ProtoPlayerCloseButtonMode.OnHover:(0,M.cn)(t,u.s6.CloseFloatHover)}}}jF(t){const{skipOffset:i}=t;return{isAutoPlay:this.zF.playbackMode===o.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:i,isSkippable:(0,L.hj)(i)}}SN(){this.FV=!0,this.jE.contentStart.next(),this.JV()}ZF(){this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}KV(){const{clientWidth:t,clientHeight:i}=this.$experienceContainer;return!(0,It.ON)({width:t,height:i})&&!this.isBelowSmBreakpoint(t)||((0,M.cn)(this.$experienceContainer,u.Gj.NoHeight),this.AN())}AN(){return Kt.includes(this.app.config.bundleID)}PN(t){try{const{display:i,width:e,height:s,flex:n,maxWidth:r,minWidth:o}=this.app.services.GlobalDomUtilsService.getComputedStyle(t),{width:h,height:a}=t.getBoundingClientRect(),c={display:i,compWidth:e,boundWidth:h,compHeight:s,boundHeight:a,flex:n,maxWidth:r,minWidth:o};return{type:t.nodeName,styles:JSON.stringify(c)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}_N(){if(!(0,bt.Vm)([95,5]))return;const t={parent:this.PN(this.$experienceContainer.parentElement),main:this.PN(this.$experienceContainer)};(0,s.n)({message:"BaseExperience_invalid_dimensions",level:s.D.INFO,exception:JSON.stringify(t)})}xN(){this.kF=new H(this.zF.adBreaks)}TN(){(0,M.cn)(this.$experienceContainer,u.s6.ClickToPlayThumbnail)}kN(){}renderExperience(t,i,e,s){this.zF=t,this.app=i,this.$experienceContainer=e,s&&s(),this.oF(),this.app.services.ViewabilityService.setViewableThreshold(this.kV),this.generateHTML(),this.xN(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.YV),this.KV()?this.mediator.publish(this,d.Uh.CanStart):this._N()}start(){return Yt(this,void 0,void 0,(function*(){if(this.EV=!0,this.rl.playerDimensions={height:this.$playerContainer.clientHeight,width:this.$playerContainer.clientWidth},(0,M.cn)(this.$experienceContainer,u.sN.MainContainerFlex),this.mediator.publish(this,d.Xh.SessionRendered),this.yN(),this.eN(),this.zF.floatingSettings.floatingMode===o.ProtoPlayerFloatingMode.Always?this.pN():(this.gF(),this.lN()),(0,M.Tp)(this.$playerContainer),this.CF=this.CN(),(0,l.BZ)(this.zF.lineItemSettings.lineItems))try{yield this.BF()}catch(t){(0,s.n)({message:"BaseExperience__initAdHandler",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}this.zF.disableAdvertising||f._.isBannerBlocked?this.CF.adBlockerStatusChange(f._.isBannerBlocked):this.app.config.isOVPDomain?this.HV.push(f._.onAdBlockerDetected().subscribe((t=>{this.CF.adBlockerStatusChange(t)}))):this.CF.adBlockerStatusChange(f._.isBannerBlocked),this.app.config.isMobile||this.zF.soundMode!==o.ProtoPlayerSoundMode.Hover||this.fN(),this.zF.isCloseButton&&this.wN(),this.zF.displayAdCountdown&&(0,M.cn)(this.$playerContainer,u.s6.AdShowCountdown),this.zF.playbackMode===o.ProtoPlayerPlaybackModeEnum.ClickToPlay&&this.TN();try{this.JF()}catch(t){(0,s.n)({message:"BaseExperience_initAdsController",exception:t.message,callStack:t.stack,level:s.D.INFO})}f._.isBannerBlocked||f._.detectUsingScript().then((t=>{t&&(this.jE.sessionAdBlocked.next({adBlockDetectionType:O.ev.Network}),this.CF.disableAdvertising())})),this.app.config.isMobile||this.$V.push(this.onReady().pipe((0,wt.h)((t=>!!t)),xt((()=>{this.kN()})),(0,Tt.w)((()=>{var t;return null===(t=this.$R)||void 0===t?void 0:t.getShortcutsObservable()}))).subscribe((t=>this.hN(t))))}))}play(){var t;null===(t=this.adHandler)||void 0===t||t.play()}pause(){var t;null===(t=this.adHandler)||void 0===t||t.pause()}setVolume(t){this.setNewVolume(t),this.vN()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(t,i){(0,It.ON)({width:t,height:i})||(0,M.T7)(this.$experienceContainer,{width:`${t}px`,height:`${i}px`})}setCustomMacros(t){var i;this.app.services.MacrosService.addExtraMacros(t),null===(i=this.adHandler)||void 0===i||i.setCustomMacros(t)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.PV})}setViewableThreshold(t){(0,s.n)({message:"setViewableThreshold_usage",level:s.D.INFO,exception:this.app.config.sdkVersion},{throttle:1,shouldSendMaxLog:!1}),this.app?this.app.services.ViewabilityService.setViewableThreshold(t):this.kV=t}setAmpUserConsent(t){this.app.services.UserManagerService.setAmpUserConsent(t)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,d.Uh.Destroy)}updateJsQueryTargeting(t){(0,L.$K)(this.adHandler)?this.adHandler.updateJsQueryTargeting(t):this.zF.queryJsTargeting=(0,Jt.S1)(this.zF.queryJsTargeting,t)}removeJsQueryTargeting(t){(0,L.$K)(this.adHandler)?this.adHandler.removeJsQueryTargeting(t):this.zF.queryJsTargeting=(0,Jt.G_)(this.zF.queryJsTargeting,t)}disableAdvertising(){this.CF.disableAdvertising()}enableAdvertising(){this.CF.enableAdvertising()}enableFloatingMode(){var t;null===(t=this.floatingModule)||void 0===t||t.enableFloatingMode()}disableFloatingMode(){var t;null===(t=this.floatingModule)||void 0===t||t.disableFloatingMode()}isFloatingModeEnabled(){return this.floatingModule?this.floatingModule.isFloatingModeEnabled():!!this.alwaysFloatingModule}setFloatingSettings(t){this.floatingModule?this.floatingModule.setFloatingSettings(t):this.alwaysFloatingModule.setFloatingSettings(t)}getFloatingSettings(){var t;return this.floatingModule?this.floatingModule.getFloatingSettings():null===(t=this.alwaysFloatingModule)||void 0===t?void 0:t.getFloatingSettings()}setLineItemMetadata(t,i){(0,L.$K)(this.adHandler)?this.adHandler.setLineItemMetadata(t,i):i({success:!1,errorReason:j.q.AdManagerNotInitialized})}onReady(){return this.nO?this.nO.onReady():Wt(!0)}getApiConfig(){const t=JSON.parse(JSON.stringify(this.zF.apiConfig));return delete t.settings._connatixInternals,t}getSessionDataConfig(){return{playerInstanceID:this.app.config.appId}}destroy(){var t;(0,b.i)(this.$V),(0,b.i)(this.HV),(0,b.i)(this.UV),this.adHandler&&((0,b.i)(this.zV),this.DF.unsubscribe(),this.adHandler.destroy()),this.CF&&this.CF.destroy(),this.floatingModule&&(this.floatingModule.destroy(!0),this.floatingModule=null,(0,b.i)(this.qV)),null===(t=this.$R)||void 0===t||t.destroy()}}var ii=r(8395),ei=r(5106),si=r(4065),ni=r(9154);class ri{constructor(t,i){this.MN=t,this.LN=i,this.BN=null,this.RN=null,this.DN=0,this.FN=0,this.jN=!1,this.$N=!1,this.UN=!1,this.vo=new Map,this.qN=new dt.x,this.HN=new dt.x,this.zN=new dt.x,this.WN=new dt.x,this.GN=new dt.x,this.XN=new dt.x,this.JN=new dt.x,this.QN=new dt.x,this.YN=new dt.x,this.KN=new dt.x,this.be=[],this.tj={inImpression:!1};const{adBreaks:e}=this.MN.linearAdsControllerData;this.ij=e.some((t=>t.types.includes(o.ProtoAdBreakTypeEnum.PostRoll)))}start(){this.ej();const{totalAdBreakLength:t}=this.MN.linearAdsControllerData;if(t){const i=g.h.getGlobalContainer().resolve(ii.f);this.nj=new si.B(i,t),this.vo.set(this.nj,[this.nj.onTimeElapsed.subscribe((()=>{this.HN.next()}))])}}get currentPlayerAdSlot(){return this.BN}get onExperienceControllerStateChange(){return this.KN.asObservable()}get onCanPrefetchAds(){return this.YN.asObservable()}get onAdSlotDurationElapsed(){return this.qN.asObservable()}get onAdPodDurationElapsed(){return this.zN.asObservable()}get onAdPodTimeUpdate(){return this.WN.asObservable()}get onAdOpportunity(){return this.GN.asObservable()}get onAdsDisabled(){return this.XN.asObservable()}get onAdsEnabled(){return this.JN.asObservable()}get onTotalAdBreakDurationExpired(){return this.HN.asObservable()}get onMidRollCapped(){return this.QN.asObservable()}contentPlaybackStateChanged(t){var i,e;null===(e=(i=this.LN).contentPlaybackStateChanged)||void 0===e||e.call(i,t)}contentTimeUpdate(t){var i,e;null===(e=(i=this.LN).contentTimeUpdate)||void 0===e||e.call(i,t)}slideChanged(t){var i,e;null===(e=(i=this.LN).slideChanged)||void 0===e||e.call(i,t)}updateStoryTimeline(t){var i,e;null===(e=(i=this.LN).updateStoryTimeline)||void 0===e||e.call(i,t)}onAdImpression(t,i){this.LN.onAdImpression(this.BN,i),this.BN===o.ProtoAdSlotsEnum.MidRoll&&(this.UN=!0),this.tj.inImpression=!0,this.rj(),this.oj()}contentChanged(t){this.LN.contentChanged(this.BN,t),this.FN=0}onAdFinished(t,i,e){this.LN.onAdFinished(this.BN,i,e),this.aj=this.cj(this.aj),this.UN=!1,i||(this.dj=this.cj(this.dj),this.BN===o.ProtoAdSlotsEnum.MidRoll?this.jN||this.FN++:this.DN++),this.lj()&&!i&&this.QN.next(),t&&(this.$N=!0),this.tj.inImpression=!1}viewabilityStateChanged(t,i){var e,s;null===(s=(e=this.LN).viewabilityStateChanged)||void 0===s||s.call(e,this.BN,t,i)}onStop(){this.BN=null}onAdStateChange(t,i,e,s){this.LN.onAdStateChange(t,e,s),this.MN.linearAdsControllerData.maxAdSlotDuration=i.maxAdSlotDuration,this.MN.linearAdsControllerData.maxAdPodDuration=i.maxAdPodDuration,s||(t!==o.ProtoAdSlotsEnum.MidRoll&&(this.DN=0),null===t&&this.RN===o.ProtoAdSlotsEnum.MidRoll||(this.$N=!0),this.RN=t,this.BN=t)}canEnableAds(t){const i=this.LN.canEnableAds(this.BN,t);return i.enableAds?this.tj.inImpression?{enableAds:!1,disableReason:ei.m.InImpression}:this.BN===o.ProtoAdSlotsEnum.MidRoll&&this.lj()||null===this.BN||this.BN!==o.ProtoAdSlotsEnum.MidRoll&&this.DN>0?{enableAds:!1,disableReason:ei.m.Unknown}:{enableAds:!0,disableReason:ei.m.Unknown}:i}enableAds(){this.JN.next(),this.nj&&this.nj.start()}disableAds(t,i){const e={disableReason:t,adBreakLength:this.uj(i)};this.XN.next({payload:e}),this.nj&&!this.tj.inImpression&&this.nj.stop()}getTheoreticalDurationUntilNextOpportuinity(t){return this.BN===o.ProtoAdSlotsEnum.MidRoll&&this.lj()?-1:this.LN.getDurationUntilNextOpportunity(t)}onAdPlay(){this.dj&&this.dj.start(),this.aj&&this.aj.start(),this.nj&&this.nj.start()}onAdPause(){this.dj&&this.dj.stop(),this.aj&&this.aj.stop(),this.nj&&this.nj.stop()}triggerAdOpportunity(){this.$N&&(this.$N=!1,this.GN.next({payload:{adBreakType:ni.H[this.BN]}}))}startAds(t){var i,e;null===(e=(i=this.LN).startAds)||void 0===e||e.call(i,this.BN,t)}onNewMediaVideo(t){var i,e;this.jN=(0,l.BZ)(t),this.BN=null,null===(e=(i=this.LN).onNewMediaVideo)||void 0===e||e.call(i,t)}setAdHandler(t){this.LN&&this.LN.setAdHandler&&this.LN.setAdHandler(t)}destroy(){(0,b.i)(this.be),this.nj&&this.nj.disable(),this.aj=this.cj(this.aj),this.dj=this.cj(this.dj),this.LN.destroy()}ej(){var t;this.be.push(this.LN.onExperienceControllerStateChange.subscribe((t=>{this.KN.next(t)})),null===(t=this.LN.onCanPrefetchAds)||void 0===t?void 0:t.subscribe((()=>{this.YN.next()}))),this.LN.start()}pj(){const t=this.UN?1:0,{numberOfMidRolls:i}=this.MN.linearAdsControllerData;return this.FN===i-t}uj(t){return this.pj()&&!this.ij?Number.POSITIVE_INFINITY:this.LN.getAdBreakDuration(t)}lj(){if(this.jN)return!1;const{numberOfMidRolls:t}=this.MN.linearAdsControllerData;return this.FN>=t&&-1!==t}cj(t){if(t)return t.stop(),(0,b.i)(this.vo.get(t)),this.vo.delete(t),null}rj(){const{maxAdSlotDuration:t}=this.MN.linearAdsControllerData;if(!t||this.aj)return;const i=g.h.getGlobalContainer().resolve(ii.f);this.aj=new si.B(i,t),this.aj.start(),this.vo.set(this.aj,[this.aj.onTimeElapsed.subscribe((()=>{this.qN.next()}))])}oj(){const{maxAdPodDuration:t}=this.MN.linearAdsControllerData;if(!t||this.dj)return;const i=g.h.getGlobalContainer().resolve(ii.f);this.dj=new si.B(i,t),this.dj.start(),this.vo.set(this.dj,[this.dj.onTimeElapsed.subscribe((()=>{this.zN.next()})),this.dj.onTimeUpdate.subscribe((()=>{const t=this.dj.timeRemaining;this.WN.next(t)}))])}}class oi{constructor(t,i){this.MN=t,this.mj=i,this.XN=new dt.x,this.JN=new dt.x,this.vj=0,this.KN=new dt.x,this.vo=new Map,this.be=[],this.tj={inImpression:!1,linearInImpression:!1,inPrePostRoll:!1,contentPaused:!0,linearInOpportunity:!1},this.gj=!1,this.yj=!0}start(){this.ej(),this.initTimer()}get onExperienceControllerStateChange(){return this.KN.asObservable()}initTimer(){const t=g.h.getGlobalContainer().resolve(ii.f);this.bj=new si.B(t,this.MN.resetNumberOfNonLinearAdsAfter),this.vo.set(this.bj,[this.bj.onTimeElapsed.subscribe((()=>{this.vj=0,this.KN.next()}))])}ej(){this.be.push(this.mj.onExperienceControllerStateChange.subscribe((()=>{this.KN.next()}))),this.mj.start()}get onAdsDisabled(){return this.XN.asObservable()}get onAdsEnabled(){return this.JN.asObservable()}onLinearImpressionStateChange(t){this.tj.linearInImpression=t,t?(this.bj.stop(),this.vj=0):(this.bj.reset(),this.bj.start(),this.mj.onLinearAdFinished())}onLinearOpportunityChange(t){this.tj.linearInOpportunity=t}onAdStateChange(t){this.tj.inPrePostRoll=!(t===o.ProtoAdSlotsEnum.MidRoll)}onAdFinished(){this.mj.onAdFinished(),this.tj.inImpression=!1,this.vj++}onAdImpression(){this.tj.inImpression=!0,0===this.vj&&(this.bj.reset(),this.bj.start())}canEnableAds(){return!!this.mj.canEnableAds()&&(!(this.tj.inImpression||this.tj.inPrePostRoll||this.tj.linearInImpression||this.tj.linearInOpportunity&&this.yj||this.tj.contentPaused&&this.gj)&&!(this.vj>=this.MN.numberOfNonlinearAds&&this.MN.numberOfNonlinearAds>0))}viewabilityStateChanged(t){this.gj=t}onLinearNoDemand(){this.yj=!1}enableAds(){this.JN.next()}disableAds(){this.XN.next()}contentPlaybackStateChanged(t){this.tj.contentPaused=!t,this.KN.next()}destroy(){var t;(0,b.i)(this.be),null===(t=this.mj)||void 0===t||t.destroy()}}class hi{constructor(t,i,e,s,n,r){var o;this.mediator=t,this.MN=s,this.be=[],this.tj={stopped:!1,viewability:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1,restrictedOnCurrentMedia:!1,adBlockerActive:!0},this.Ij=new ri(s,n),this.wj(n),this.viewabilityStateChanged(i),this.onResize(this.MN.playerDimensions.width,this.MN.playerDimensions.height),this.Ij.start(),(0,L.hj)(null===(o=s.nonLinearAdsControllerData)||void 0===o?void 0:o.numberOfNonlinearAds)&&r&&this.Sj(s.nonLinearAdsControllerData,r),e&&this.disableAdvertising(),this.onContentStop()}wj(t){this.be.push(this.Ij.onAdSlotDurationElapsed.subscribe((()=>{this.mediator.publish(this,J)})),this.Ij.onAdPodDurationElapsed.subscribe((()=>{this.mediator.publish(this,Q)})),this.Ij.onAdPodTimeUpdate.subscribe((t=>{this.mediator.publish(this,K,{payload:{remainingTime:t}})})),this.Ij.onAdOpportunity.subscribe((t=>{var i;null===(i=this.Aj)||void 0===i||i.onLinearOpportunityChange(!0),this.mediator.publish(this,Y,t)})),this.Ij.onAdsDisabled.subscribe((t=>{this.mediator.publish(this,X,t)})),this.Ij.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,G)})),this.Ij.onTotalAdBreakDurationExpired.subscribe((()=>{this.mediator.publish(this,W)})),this.Ij.onMidRollCapped.subscribe((()=>{this.mediator.publish(this,z)})),this.Ij.onExperienceControllerStateChange.subscribe((t=>{(0,L.$K)(t)&&(t.inCuePoint?this.mediator.publish(this,st):(t.cuePointTimedOut&&this.mediator.publish(this,J),this.mediator.publish(this,nt))),this.Pj()})),this.Ij.onCanPrefetchAds.subscribe((()=>{this.mediator.publish(this,rt,{payload:{linearity:vt.k.LINEAR}})})))}Sj(t,i){this.Aj=new oi(t,i),this.be.push(this.Aj.onAdsDisabled.subscribe((()=>{this.mediator.publish(this,Z)})),this.Aj.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,tt)})),this.Aj.onExperienceControllerStateChange.subscribe((()=>{this.Pj()}))),this.Aj.start()}slideChanged(t){this.Ij.slideChanged(t)}updateStoryTimeline(t){this.Ij.updateStoryTimeline(t)}contentPlaybackStateChanged(t){var i;this.Ij.contentPlaybackStateChanged(t),null===(i=this.Aj)||void 0===i||i.contentPlaybackStateChanged(t)}contentTimeUpdate(t){this.Ij.contentTimeUpdate(t)}forceRecheck(){this.Pj()}onAdImpression(t,i){var e;switch(i){case vt.k.LINEAR:this.Ij.onAdImpression(t,this.nV);const i=!0;null===(e=this.Aj)||void 0===e||e.onLinearImpressionStateChange(i);break;case vt.k.NONLINEAR:this.Aj.onAdImpression()}this.Pj()}getTheoreticalDurationUntilNextOpportuinity(){return this.Ij.canEnableAds(this.nV).enableAds?0:this.Ij.getTheoreticalDurationUntilNextOpportuinity(this.nV)}onAdFinished(t,i,e=!1){var s,n;switch(i){case vt.k.LINEAR:if(this.Ij.onAdFinished(t,e,this.nV),e)this._j();else{const t=!1;null===(s=this.Aj)||void 0===s||s.onLinearImpressionStateChange(t)}break;case vt.k.NONLINEAR:null===(n=this.Aj)||void 0===n||n.onAdFinished()}e||this.Pj()}onLinearAdPause(){this.Ij.onAdPause()}onLinearAdPlay(){this.Ij.onAdPlay()}onContentStop(){this.Ij.onStop(),this.tj.stopped=!0,this.Pj()}onAdStateChange(t,i,e){var s;null===(s=this.Aj)||void 0===s||s.onAdStateChange(t);const n=t===this.Ij.currentPlayerAdSlot&&t===o.ProtoAdSlotsEnum.MidRoll;n?this.Ij.onAdStateChange(t,i,e,n):(this.Ij.onAdStateChange(t,i,e,n),this.xj())}adBlockerStatusChange(t){this.tj.adBlockerActive=t,this.Pj()}xj(){this.Ij.startAds(this.nV),this.tj.stopped=!1,this.Pj()}contentChanged(){this.Ij.contentChanged(this.nV),this.Pj()}viewabilityStateChanged(t,i=!1,e=!1){var s;this.Ij.viewabilityStateChanged(t,i),null===(s=this.Aj)||void 0===s||s.viewabilityStateChanged(t),this.nV=t,this.MN.viewabilityPolicy===o.ProtoAdViewabilityPolicy.Strict&&(this.tj.viewability=!t),e||this.Pj()}setToggleAdsReason({isAppBackgrounded:t}){this.tj.isAppBackgrounded=t,this.Pj()}onLinearNoFill(){var t;null===(t=this.Aj)||void 0===t||t.onLinearOpportunityChange(!1),this.Tj()}onLinearNoDemand(){var t;null===(t=this.Aj)||void 0===t||t.onLinearNoDemand(),this.Tj()}disableAdvertising(){this.mediator.publish(this,it),this.tj.forceDisable=!0,this.Pj()}enableAdvertising(){this.mediator.publish(this,et),this.tj.forceDisable=!1,this.Pj()}get isAdvertisingDisabled(){return this.tj.forceDisable}get inView(){return this.nV}onResize(t,i){this.tj.zeroDimension=0===t||0===i,this.Pj()}onNewMediaVideo(t,i=!1){this.Ij.onNewMediaVideo(t),this.tj.restrictedOnCurrentMedia=i,this.Pj()}destroy(){(0,b.i)(this.be),this.Ij.destroy()}Pj(){const t=this.kj();t.enableAds?(this.Cj(),this.Tj()):(this.Ej(t.disableReason),this.Mj())}Cj(){const t=this.Ij.canEnableAds(this.nV);t.enableAds?this._j():this.Ej(t.disableReason)}Tj(){var t;(null===(t=this.Aj)||void 0===t?void 0:t.canEnableAds())?this.Lj():this.Mj()}Mj(){var t;null===(t=this.Aj)||void 0===t||t.disableAds()}Lj(){var t;null===(t=this.Aj)||void 0===t||t.enableAds()}Ej(t){this.Ij.disableAds(t,this.nV)}kj(){return this.tj.forceDisable?{enableAds:!1,disableReason:ei.m.ForceDisable}:Object.keys(this.tj).some((t=>this.tj[t]))?{enableAds:!1,disableReason:ei.m.Unknown}:{enableAds:!0,disableReason:ei.m.Unknown}}setAdHandler(t){this.Ij.setAdHandler(t)}_j(){this.Ij.triggerAdOpportunity(),this.Ij.enableAds()}}var ai,ci=r(7953);!function(t){t[t.None=0]="None",t[t.MinTimeBeforeFirstAd=1]="MinTimeBeforeFirstAd",t[t.TimeBetweenAds=2]="TimeBetweenAds"}(ai||(ai={}));class di{constructor(t,i){this.Bj=t,this.Rj=i,this.Oj=!1,this.tj={inTimeout:!1},this.Dj=!1,this.Vj=new dt.x,this.be=[]}get onExperienceTimeoutControllerStateChange(){return this.Vj.asObservable()}init(){const t=g.h.getGlobalContainer().resolve(ii.f);this.Fj=new si.B(t,this.Bj),this.be.push(this.Fj.onTimeElapsed.subscribe((()=>{this.Oj||(this.Oj=!0),this.tj.inTimeout=!1,this.Dj=!0,this.Vj.next()})))}canEnableAds(t,i){return t===o.ProtoAdSlotsEnum.MidRoll&&this.tj.inTimeout&&i?{enableAds:!1,disableReason:ei.m.TimeoutBetweenAds}:{enableAds:!0,disableReason:ei.m.Unknown}}startAds(t,i){this.Nj(t,i)}getAdBreakDuration(t){const i=this.jj(t);return i===ai.MinTimeBeforeFirstAd?this.Bj:i===ai.TimeBetweenAds?this.Rj:0}getDurationUntilNextOpportunity(){return this.Fj.timeRemaining/F.s_}onAdImpression(t,i){t===o.ProtoAdSlotsEnum.MidRoll&&(this.Oj||(this.Oj=!0)),this.$j=!i}onAdFinished(t,i,e){this.Dj=!1,this.Oj&&!this.$j&&e&&!i&&this.Nj(t,e)}viewabilityStateChanged(t,i,e){e||this.Nj(t,i)}onAdStateChange(t){t!==o.ProtoAdSlotsEnum.MidRoll&&(this.Oj=!1),this.Dj=!1}contentPlaybackStateChanged(t){t?this.Fj.start():this.Fj.stop()}contentChanged(t,i){this.tj.inTimeout=!1,this.Fj.stop(),this.Oj=!1,this.Dj=!1,this.Nj(t,i)}disable(){this.Fj.reset(),this.Fj.disable()}destroy(){(0,b.i)(this.be),this.Fj.disable()}Nj(t,i){if(t===o.ProtoAdSlotsEnum.MidRoll&&!this.tj.inTimeout&&!this.Dj){const t=this.jj(i);t===ai.MinTimeBeforeFirstAd?this.Uj():t===ai.TimeBetweenAds&&this.qj(),this.Vj.next()}}qj(){this.tj.inTimeout=!0,this.Fj.reset(this.Rj)}Uj(){this.tj.inTimeout=!0,this.Fj.reset(this.Bj)}jj(t){return!this.Oj&&this.Bj?ai.MinTimeBeforeFirstAd:this.Oj&&this.Rj&&t?ai.TimeBetweenAds:ai.None}}class li{constructor(){this.Hj=!1,this.zj=[],this.Wj=0,this.Jj=new dt.x,this.YN=new dt.x,this.vo=new Map;const t=g.h.getGlobalContainer().resolve(ii.f);this.Qj=new si.B(t,2*F.s_),this.vo.set(this.Qj,[this.Qj.onTimeElapsed.subscribe((()=>{this.Yj()}))])}get onExperienceCuePointsControllerStateChange(){return this.Jj.asObservable()}get onCanPrefetchAds(){return this.YN.asObservable()}canEnableAds(t){return this.Hj||t!==o.ProtoAdSlotsEnum.MidRoll?{enableAds:!0,disableReason:ei.m.Unknown}:{enableAds:!1,disableReason:ei.m.Unknown}}getDurationUntilNextOpportunity(){let t;return this.zj.some((i=>{if(this.Wj<=i)return t=i,!0})),t?t-this.Wj:0}contentTimeUpdate(t){t&&(this.Wj=t,this.Kj(),this.Zj())}onAdImpression(){this.Hj=!1,this.t$()}onAdFinished(t,i){i||(this.i$=void 0,this.Jj.next({inCuePoint:!1}))}onNewMediaVideo(t){this.i$=void 0,this.e$=void 0,this.Hj=!1,(0,l.BZ)(t)&&(this.zj=t.map((t=>t.timeStamp)).sort(((t,i)=>t-i)))}setAdHandler(t){this.hO=t}Zj(){this.zj.forEach(((t,i)=>{let e=t-10;i-1>=0&&this.zj[i]-this.zj[i-1]<=10&&(e=this.zj[i-1]),(0,It.mg)(this.Wj,e,t)&&this.i$!==i&&(this.i$=i,this.YN.next())}))}Yj(){this.i$=void 0,this.Hj=!1,this.Jj.next({inCuePoint:!1,cuePointTimedOut:!0}),this.t$()}t$(){this.Qj.reset(),this.Qj.stop()}Kj(){var t;let i,e=!1;if(!(this.zj.length<=0)&&(this.zj.forEach(((t,s)=>{if((0,It.mg)(this.Wj,t,t+2))return e=!0,void(i=s)})),e&&void 0!==i&&this.e$!==i)){if(this.e$=i,!(null===(t=this.hO)||void 0===t?void 0:t.hasAdsEligibleForFill()))return void(0,s.n)({message:"ElementsCuePointsController_cuepoint_not_filled",level:s.D.INFO},{pacing:100});this.Hj=!0,this.Jj.next({inCuePoint:!0}),this.Qj.start()}}}class ui{constructor(t){this.MN=t,this.tj={limitAdsOnMidRoll:!1},this.KN=new dt.x,this.YN=new dt.x,this.be=[],this.s$(),this.n$(),this.r$=this.o$}start(){this.tj.limitAdsOnMidRoll=!0,this.o$.init()}get onExperienceControllerStateChange(){return this.KN.asObservable()}get onCanPrefetchAds(){return this.YN.asObservable()}canEnableAds(t,i){const e=this.r$.canEnableAds(t,i);return e.enableAds?t===ci.ProtoAdSlotsEnum.MidRoll&&this.tj.limitAdsOnMidRoll?{enableAds:!1,disableReason:ei.m.Unknown}:{enableAds:!0,disableReason:ei.m.Unknown}:e}startAds(t,i){var e,s;null===(s=(e=this.r$).startAds)||void 0===s||s.call(e,t,i)}getAdBreakDuration(t){var i,e;return null===(e=(i=this.r$).getAdBreakDuration)||void 0===e?void 0:e.call(i,t)}getDurationUntilNextOpportunity(){return this.r$.getDurationUntilNextOpportunity()}onAdImpression(t,i){this.r$.onAdImpression(t,i)}onAdFinished(t,i,e){var s,n;null===(n=(s=this.r$).onAdFinished)||void 0===n||n.call(s,t,i,e)}viewabilityStateChanged(t,i,e){var s,n;null===(n=(s=this.r$).viewabilityStateChanged)||void 0===n||n.call(s,t,i,e)}onAdStateChange(t,i,e){var s,n;const r=this.tj.limitAdsOnMidRoll;this.h$(t,i),r!==this.tj.limitAdsOnMidRoll&&this.KN.next(),e||null===(n=(s=this.r$).onAdStateChange)||void 0===n||n.call(s,t)}contentPlaybackStateChanged(t){var i,e;null===(e=(i=this.r$).contentPlaybackStateChanged)||void 0===e||e.call(i,t)}contentChanged(t,i){var e,s;this.tj.limitAdsOnMidRoll=!0,null===(s=(e=this.r$).contentChanged)||void 0===s||s.call(e,t,i)}onNewMediaVideo(t){var i,e;(0,l.BZ)(t)?(this.r$=this.a$,null===(e=(i=this.r$).onNewMediaVideo)||void 0===e||e.call(i,t),this.o$.disable()):this.r$=this.o$}contentTimeUpdate(t){var i,e;null===(e=(i=this.r$).contentTimeUpdate)||void 0===e||e.call(i,t)}destroy(){var t,i;(0,b.i)(this.be),null===(i=(t=this.r$).destroy)||void 0===i||i.call(t)}setAdHandler(t){this.a$.setAdHandler(t)}s$(){this.o$=new di(this.MN.minTimeBeforeAdBreak,this.MN.timeBetweenAds),this.be.push(this.o$.onExperienceTimeoutControllerStateChange.subscribe((()=>{this.KN.next()})))}n$(){this.a$=new li,this.be.push(this.a$.onExperienceCuePointsControllerStateChange.subscribe((t=>{this.KN.next(t)})),this.a$.onCanPrefetchAds.subscribe((()=>{this.YN.next()})))}h$(t,i){this.tj.limitAdsOnMidRoll=this.MN.midRollOnlyOnLongContent&&t===ci.ProtoAdSlotsEnum.MidRoll&&(!i||i<480)}}class pi{constructor(t){this.c$=t,this.tj={inTimeoutBetweenNonLinears:!1,inTimeoutBetweenLinearAndNonLinear:!1},this.KN=new dt.x,this.be=[]}start(){const t=g.h.getGlobalContainer().resolve(ii.f);this.d$=new si.B(t,this.c$.timeSecondsBetweenNonlinear*F.s_),this.l$=new si.B(t,this.c$.timeSecondsBetweenLinearAndNonlinear*F.s_),this.be.push(this.d$.onTimeElapsed.subscribe((()=>{this.tj.inTimeoutBetweenNonLinears=!1,this.KN.next()})),this.l$.onTimeElapsed.subscribe((()=>{this.tj.inTimeoutBetweenLinearAndNonLinear=!1,this.KN.next()})))}get onExperienceControllerStateChange(){return this.KN.asObservable()}canEnableAds(){return!Object.keys(this.tj).some((t=>this.tj[t]))}onAdFinished(){this.c$.timeSecondsBetweenNonlinear&&(this.tj.inTimeoutBetweenNonLinears=!0,this.d$.reset(),this.d$.start())}onLinearAdFinished(){this.c$.timeSecondsBetweenLinearAndNonlinear&&(this.tj.inTimeoutBetweenLinearAndNonLinear=!0,this.l$.reset(),this.l$.start())}destroy(){var t,i;(0,b.i)(this.be),null===(t=this.d$)||void 0===t||t.disable(),null===(i=this.l$)||void 0===i||i.disable()}}const fi={xl:720,lg:320,md:204,sm:142,xs:0},mi={[o.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[o.ProtoDeviceType.Tablet]:Object.assign({},fi),[o.ProtoDeviceType.Smartphone]:Object.assign({},fi)},vi={xl:500,lg:288,md:212,sm:143,xs:80},gi={xl:720,lg:320,md:204,sm:142,xs:0},yi={[o.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[o.ProtoDeviceType.Tablet]:Object.assign({},gi),[o.ProtoDeviceType.Smartphone]:Object.assign({},gi)},bi=176,Ii=160,wi=144,Si=112,Ai={xl:gi.xl+bi,lg:gi.lg+Ii,md:gi.md+wi,sm:gi.sm+Si},Pi={[o.ProtoDeviceType.Desktop]:{xl:468+bi,lg:388+Ii,md:248+wi,sm:142+Si,xs:0},[o.ProtoDeviceType.Tablet]:Object.assign({},Ai),[o.ProtoDeviceType.Smartphone]:Object.assign({},Ai)},_i={lg:320,md:204,sm:0},xi={[o.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:0},[o.ProtoDeviceType.Tablet]:Object.assign({},_i),[o.ProtoDeviceType.Smartphone]:Object.assign({},_i)},Ti={xxl:1080,xl:0},ki={[o.ProtoDeviceType.Desktop]:{xxl:720,xl:0},[o.ProtoDeviceType.Tablet]:Object.assign({},Ti),[o.ProtoDeviceType.Smartphone]:Object.assign({},Ti)},Ci={[ci.ProtoGalleryOrientationEnum.Landscape]:{[ci.ProtoGalleryStyleMode.Detailed]:ki,[ci.ProtoGalleryStyleMode.Visual]:Pi},[ci.ProtoGalleryOrientationEnum.Portrait]:{[ci.ProtoGalleryStyleMode.Detailed]:xi,[ci.ProtoGalleryStyleMode.Visual]:yi}};var Ei=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};function Mi(){return Ei(this,void 0,void 0,(function*(){return yield(0,bt.Up)((()=>Ei(this,void 0,void 0,(function*(){return yield Promise.resolve().then(r.bind(r,5267))}))))}))}var Li=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Bi extends ti{constructor(){super(...arguments),this.bN=mi,this.IN=u.Rq,this.uN=0,this.u$=9e4}get type(){return this.zF.playerType}lN(){this.$playerContentWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${this.zF.floatingSettings.isPinnedFloating?u._7.PinnedWrapper:u._7.ContentWrapper}"></cnx>`),this.$playerContentWrapper.appendChild(this.$playerContainer),this.$playerWrapper.appendChild(this.$playerContentWrapper),this.floatingModule=new ut(this.app.services.ViewabilityService,this.rl,this.app.services.ResizeObserver,this.$playerContainer.parentElement,this.zF.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService,this.uN),this.dN(),this.floatingModule.start(),this.floatingStateMachine=new pt(this.floatingModule,this.zF.floatingSettings.floatingMode)}wN(){super.wN(this.$playerContainer.parentElement)}UF(t=!1){super.UF(t,this.$playerContainer.parentElement)}RF(){var t,i;return Li(this,void 0,void 0,(function*(){const e=!(!(null===(t=this.floatingModule)||void 0===t?void 0:t.isInFloating)&&!(null===(i=this.alwaysFloatingModule)||void 0===i?void 0:i.isInFloating));return new((yield Mi()).ElementsAdHandler)(e,this.CF.isAdvertisingDisabled,this.zF,this.rl,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.kF,this.app,this._appSettings,this.Ue,this.KF(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight))}))}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${u.sN.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString("<cnx class='cnx-video-container'></cnx>"),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer)}setFloatingSettings(t){super.setFloatingSettings(t),this.zF.floatingSettings.isPinnedFloating?((0,M.IV)(this.$playerContentWrapper,u._7.ContentWrapper),(0,M.cn)(this.$playerContentWrapper,u._7.PinnedWrapper)):((0,M.IV)(this.$playerContentWrapper,u._7.PinnedWrapper),(0,M.cn)(this.$playerContentWrapper,u._7.ContentWrapper)),this.nO.floatingChanged(this.zF.floatingSettings.isPinnedFloating)}getFloatingSettings(){return super.getFloatingSettings()}addPlayerSize(){this.zF.playerSize.responsive?(this.$playerWrapper.appendChild(this.nN()),(0,M.cn)(this.$playerWrapper,u.Ig.Responsive)):(this.setFixedSize(this.$experienceContainer),(0,M.cn)(this.$playerWrapper,u.Ig.Fixed))}setFixedSize(t){(0,M.T7)(t,{width:`${this.zF.playerSize.fixedWidth}px`,height:`${this.zF.playerSize.fixedHeight}px`})}CN(){var t,i;let e;if(this.zF.nonlinearPlayerSettings){const{timeSecondsBetweenNonlinear:t,timeSecondsBetweenLinearAndNonlinear:i}=this.zF.nonlinearPlayerSettings;e=new pi({timeSecondsBetweenLinearAndNonlinear:i,timeSecondsBetweenNonlinear:t})}const s=new ui({midRollOnlyOnLongContent:this.zF.midRollOnlyOnLongContent,minTimeBeforeAdBreak:this.zF.minTimeBeforeFirstAd,timeBetweenAds:this.zF.timeBetweenAds});return new hi(this,this.isViewable(),this.zF.disableAdvertising,{linearAdsControllerData:{numberOfMidRolls:this.zF.midRollNumber,adBreaks:this.zF.adBreaks,maxAdSlotDuration:this.kF.getMaxAdSlotDuration(),maxAdPodDuration:this.kF.getMaxAdPodDuration(),totalAdBreakLength:this.zF.outstreamSettings?this.zF.outstreamSettings.totalAdBreakLength:void 0},nonLinearAdsControllerData:{resetNumberOfNonLinearAdsAfter:0!==this.zF.midRollNumber?this.zF.timeBetweenAds:this.u$,numberOfNonlinearAds:null===(i=null===(t=this.zF)||void 0===t?void 0:t.nonlinearPlayerSettings)||void 0===i?void 0:i.numberOfNonlinearAds},viewabilityPolicy:this.zF.adViewabilityPolicy,playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight}},s,e)}kN(){var t;null===(t=this.$R)||void 0===t||t.start(this.$playerContainer,!0)}}const Ri=Object.assign(Object.assign(Object.assign(Object.assign({},{VideoStarted:"videoStarted",VideoCompleted25:"videoCompleted25",VideoCompleted50:"videoCompleted50",VideoCompleted75:"videoCompleted75",VideoCompleted100:"videoCompleted100",NewVideo:"newVideo"}),{SubtitlesVisibilityChanged:"subtitlesVisibilityChanged"}),{PlayerClicked:"playerClicked"}),{GalleryCardClicked:"galleryCardClicked"}),Oi={Collapsed:"collapsed",AdCycleComplete:"adCycleComplete"},Di=Object.assign(Object.assign({},d.dP),{FirstFramePlayed:"firstFramePlayed",ContentQuartiles:"contentQuartiles",MediaMetaUpdate:"mediaMetaUpdate",ChangeVideo:"changeVideo",VideoQueued:"videoQueued"});var Vi=r(6515),Fi=r(89);const Ni=Object.assign(Object.assign(Object.assign({},v.Km),Ri),Oi);var ji=r(3310);const $i=t=>t.clientHeight||t.getBoundingClientRect().height||0,Ui=t=>t.clientWidth||t.getBoundingClientRect().width||0,qi=(t,i,e=!1)=>{const s=t.offsetTop,n=((t,i)=>(parseInt(i.getMarginTopPropertyValue(t),10)||0)+(parseInt(i.getMarginBottomPropertyValue(t),10)||0))(t,i),r=$i(t),o=$i(t.parentElement);let h=s;if(e){const t=Math.floor(o/(r+n)),i=Math.floor(t/2);h=Math.max(s-i*(r+n),0)}t.parentElement.scrollTop=h},Hi=(t,i,e=!1)=>{const s=t.offsetLeft,n=((t,i)=>(parseInt(i.getMarginLeftPropertyValue(t),10)||0)+(parseInt(i.getMarginRightPropertyValue(t),10)||0))(t,i),r=Ui(t),o=Ui(t.parentElement);let h=s;if(e){const t=Math.floor(o/(r+n)),i=Math.floor(t/2);h=Math.max(s-i*(r+n),0)}t.parentElement.scrollLeft=h};var zi=r(6203);class Wi{constructor(t,i,e={}){this.p$=t,this.Oi=i,this.f$=1.2,this.v$=16,this.g$="normal",this.b$={lines:0,useNativeClamping:!0},this.I$=!1,this.b$=Object.assign(Object.assign({},this.b$),e),this.I$=this.w$()}setLines(t){this.b$.lines=t}getClampedText(t){this.S$=t.trim(),this.A$=this.Oi.createElementByString(`<cnx-span style="display:inline-block;width:100%;line-height:inherit;font-family:inherit;font-size:inherit;">${this.S$}</cnx-span>`),this.p$.appendChild(this.A$);let i=0;try{i=this.P$()}catch(t){(0,s.n)({message:"LineClamp_getMaxLines",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}const e=this._$(this.b$.lines,i),n=this.x$(e);return Math.ceil(this.A$.getBoundingClientRect().height)-1<=n?(this.C$(),this.S$):this.I$?void(0,M.T7)(this.p$,{overflow:"hidden",textOverflow:"ellipsis",webkitBoxOrient:"vertical",display:"-webkit-box",webkitLineClamp:e}):this.E$(this.A$.firstChild,n)}w$(){return!!this.b$.useNativeClamping&&void 0!==this.p$.style.webkitLineClamp}x$(t){return this.M$(this.p$)*t+(this.L$(this.A$)+this.L$(this.p$))+(this.B$(this.A$)+this.B$(this.p$))}R$(t){if(t.getBoundingClientRect){const{height:i}=t.getBoundingClientRect();if(i>0)return Math.ceil(i)}const i=t.clientHeight;return i&&i>0?Math.ceil(i):t.parentNode?this.R$(t.parentNode):0}P$(){const t=this.R$(this.p$),i=this.M$(this.p$),e=this.L$(this.A$)+this.L$(this.p$),s=this.B$(this.A$)+this.B$(this.p$),n=Math.floor((t-e-s)/i+.05);return Math.max(n,0)}O$(t){const i=this.Oi.getFontSizePropertyValue(t);return i?parseInt(i,10):this.v$}M$(t){let i=this.Oi.getLineHeightPropertyValue(t);return i&&i!==this.g$||(i=""+this.f$*this.O$(t)),parseInt(i,10)}L$(t){if(!t)return 0;const i=this.Oi.getPaddingTopPropertyValue(t);return parseInt(i,10)||0}B$(t){if(!t)return 0;const i=this.Oi.getPaddingBottomPropertyValue(t);return parseInt(i,10)||0}_$(t,i){return t>0?0===i?t:Math.min(this.b$.lines,i):i}E$(t,i,e){if(!i)return;void 0===e&&(e=t.nodeValue.split(" "));const s=[...e];if(s.length>1){s.pop(),this.D$(t,`${s.join(" ")}...`);return t.parentNode.offsetHeight>i?this.E$(t,i,s):(this.C$(),`${s.join(" ")}...`)}}D$(t,i){t.nodeValue=i}C$(){this.p$.innerHTML="",this.A$=null}}var Gi,Xi=r(1310);!function(t){t[t.CardClicked=0]="CardClicked"}(Gi||(Gi={}));const Ji={width:160,height:90},Qi={width:80,height:80};const Yi='<cnx class="cnx-g-card"><cnx class="cnx-g-card-image-container"><cnx class="cnx-g-triangle"></cnx><cnx class="cnx-g-card-image"><cnx class="cnx-g-card-icon"><cnx class="cnx-ui-btn"><cnx class="cnx-icon-button cnx-ui-btn-hoverable cnx-mod-hover"><cnx class="cnx-btn-container"><cnx class="cnx-play-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg></cnx></cnx></cnx></cnx></cnx></cnx></cnx><cnx class="cnx-g-card-text-container"><cnx class="cnx-g-card-text"><cnx-span></cnx-span></cnx></cnx></cnx>';class Ki extends c._{constructor(t,i,e,s,n){super(),this.mediator=t,this.fC=i,this.Tr=e,this.ra=s,this.mo=n,this.Sy=()=>{this.mo.metadata.title&&this.V$()},this.F$=()=>{this.mediator.publish(this,Gi[Gi.CardClicked],{payload:this.mo.id})},this.N$=this.Tr.createElementByString(this.j$()),this.N$.setAttribute("role","button"),this.N$.setAttribute("aria-label",`Video - ${this.mo.metadata.title}`),this.$$=this.N$.getElementsByClassName(u.Ih.CardImage)[0],this.U$=this.N$.getElementsByClassName(u.Ih.CardText)[0],this.q$=this.N$.getElementsByClassName(u.Ih.CardTextContainer)[0],this.mo.titleFont&&(0,M.T7)(this.q$,{"font-family":this.mo.titleFont});const r=this.Tr.createElement("img");r.onload=()=>{this.$$.appendChild(r)};const o=this.mo.metadata.getThumbnailUrl(this.H$().width,this.H$().height);if((0,L.QM)(o)&&(r.src=o),r.alt=(0,L.$K)(this.mo.metadata.altText)?this.mo.metadata.altText:"",this.mo.style===ci.ProtoGalleryStyleMode.Detailed&&this.mo.metadata.duration){const t=this.Tr.createElementByString(`<cnx class="cnx-g-card-text-info">${(0,Xi.to)(this.mo.metadata.duration)}</cnx>`);this.mo.bodyFont&&(0,M.T7)(t,{"font-family":this.mo.bodyFont}),this.q$.appendChild(t)}this.ra.register(this.N$,this,this.ra),this.subscribe(zi.Z[zi.Z.Click],this.ra,(()=>{this.F$()})),this.relay(zi.Z[zi.Z.Scroll],this.ra,this,this.mediator),this.z$=new Wi(this.U$,this.Tr,{lines:3,useNativeClamping:!1}),this.fC.on(this.N$,this.Sy)}j$(){return this.mo.style===ci.ProtoGalleryStyleMode.Visual?'<cnx class="cnx-g-card"><cnx class="cnx-g-triangle"></cnx><cnx class="cnx-g-card-image"></cnx><cnx class="cnx-g-card-text-container"><cnx class="cnx-g-card-text"></cnx></cnx><cnx class="cnx-g-card-icon"><cnx class="cnx-ui-btn"><cnx class="cnx-icon-button cnx-ui-btn-hoverable cnx-mod-hover"><cnx class="cnx-btn-container"><cnx class="cnx-play-icon"><svg markup-inline class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg></cnx></cnx></cnx></cnx></cnx></cnx>':Yi}H$(){return this.mo.style===ci.ProtoGalleryStyleMode.Visual?Ji:Qi}V$(){const t=this.z$.getClampedText(this.mo.metadata.title),i=this.Tr.createElementByString(`<cnx-span>${t}</cnx-span>`);(0,M.jG)(i,this.U$)}get $element(){return this.N$}setActiveState(t){t?(this.N$.setAttribute("aria-current","true"),(0,M.cn)(this.N$,u.Gj.Active)):(this.N$.removeAttribute("aria-current"),(0,M.IV)(this.N$,u.Gj.Active))}destroy(){this.N$.removeEventListener("click",this.F$),this.fC.off(this.N$,this.Sy)}clampLines(){this.V$()}}const Zi=Ki;class te extends c._{constructor(t,i,e,s,n){if(super(),this.mediator=t,this.fC=i,this.Tr=e,this.ra=s,this.mo=n,this.X$=!1,this.mo.$slot.innerHTML=`<cnx class="${u.Ih.CardPlaceholder}"></cnx>`,this.mo.style===ci.ProtoGalleryStyleMode.Detailed){const t=e.createElementByString(this.J$(Yi));this.mo.$slot.firstChild.appendChild(t)}this.ra.register(this.mo.$slot,this.mediator,this),this.relay(zi.Z[zi.Z.Scroll],this.ra,this,this.mediator)}J$(t){const i=[...Array(12)].map((()=>`<cnx-span style='width: ${10+Math.floor(40*Math.random())}%'></cnx-span> `)).reduce(((t,i)=>t+i),"");return t.replace("<cnx-span></cnx-span>",i)}setCardData(t){this.Q$=new Zi(this,this.fC,this.Tr,this.ra,{id:this.mo.id,style:this.mo.style,metadata:t,titleFont:this.mo.titleFont,bodyFont:this.mo.bodyFont}),this.subscribe(Gi[Gi.CardClicked],this.Q$,(({payload:t})=>{this.mediator.publish(this,Gi[Gi.CardClicked],{payload:t})})),this.unsubscribeAll(this.ra),this.relay(zi.Z[zi.Z.Scroll],this.Q$,this,this.mediator),this.Q$.setActiveState(this.X$),this.mo.$slot.innerHTML="",this.mo.$slot.appendChild(this.Q$.$element)}setActiveState(t){this.X$=t,this.Q$&&this.Q$.setActiveState(this.X$)}getContainer(){return this.mo.$slot}clampLines(){this.Q$.clampLines()}}const ie=te;class ee extends c._{constructor(t,i,e,s,n,r,o,h,a){super(),this.mediator=t,this.fC=i,this.Tr=e,this.ra=s,this.Oo=n,this.VO=r,this.Y$=o,this.K$=h,this.Z$=[],this.tU=[],this.iU=null,this.eU=0,this.sU=(0,M.nw)(this.Oo),this.nU=(0,M.fj)(this.Oo);const c=this.Y$===ci.ProtoGalleryStyleMode.Detailed?u.Ih.StyleDetailed:u.Ih.StyleVisual;if((0,M.cn)(this.Oo,c),this.Y$===ci.ProtoGalleryStyleMode.Detailed&&(this.Oo.innerHTML=`<cnx class="${u.Ih.ExploreMore}">EXPLORE MORE</cnx>`),this.q_=e.createElementByString(`<cnx class="${u.Ih.CardRail}"></cnx>`),this.Oo.appendChild(this.q_),this.Y$===ci.ProtoGalleryStyleMode.Detailed){const t=e.createElementByString(`<cnx class="${u.Ih.FadeOut}"></cnx>`);this.Oo.appendChild(t)}this.rU(a)}start(){this.oU(),this.hU()}onResize(t){this.aU&&(this.aU.updateWidth(t),this.cU(),this.dU())}setCurrentIndex(t){this.eU=t,this.Z$.forEach(((i,e)=>i.card.setActiveState(t===e))),this.dU()}rU(t){t.forEach(((t,i)=>{const e=this.uU(i);this.q_.appendChild(e.getContainer()),this.Z$.push({card:e,videoSource:t}),this.subscribe(Gi[Gi.CardClicked],e,(({payload:t})=>this.pU(t))),this.relay(zi.Z[zi.Z.Scroll],e,this,this.mediator)}))}dU(){if((0,l.BZ)(this.tU))return;const t=this.Z$[this.eU].card.getContainer();this.K$===ci.ProtoGalleryOrientationEnum.Landscape?qi(t,this.Tr,true):Hi(t,this.Tr,true)}uU(t){const i=this.Tr.createElementByString(`<cnx class="${u.Ih.CardSlot}"></cnx>`);return new ie(this,this.fC,this.Tr,this.ra,{id:t,style:this.Y$,$slot:i,titleFont:this.sU,bodyFont:this.nU})}pU(t){this.mediator.publish(this,Di.ChangeVideo,{payload:{videoIndex:t}})}oU(){this.Z$.forEach((t=>{t.videoSource.getMetadata((i=>{t.card.setCardData(i),t.card.clampLines()}))}))}fU(){this.tU.forEach((t=>{this.unsubscribeAll(t),this.q_.removeChild(t.getContainer())})),this.tU=[]}vU(){const t=this.K$===ci.ProtoGalleryOrientationEnum.Portrait?this.q_.clientWidth:this.q_.clientHeight,i=this.Z$[0].card.getContainer(),e=this.K$===ci.ProtoGalleryOrientationEnum.Portrait?i.clientWidth:i.clientHeight,s=Math.ceil(t/e)+1-(this.Z$.length-1);if(s>this.tU.length-1)for(let t=0;t<=s;t++){const i=this.uU(t);this.tU.push(i),this.relay(zi.Z[zi.Z.Scroll],i,this,this.mediator),this.q_.appendChild(i.getContainer())}}cU(){this.gU()?(this.fU(),this.bU()):(this.IU(),this.vU())}bU(){null===this.iU&&(this.iU=new ji.$(this.q_,{horizontal:this.K$===ci.ProtoGalleryOrientationEnum.Portrait}),(0,M.cn)(this.q_,u.Gj.HasCustomScrollbar))}IU(){null!==this.iU&&(this.iU.destroy(),this.iU=null,(0,M.IV)(this.q_,u.Gj.HasCustomScrollbar))}gU(){const t=this.Z$[this.Z$.length-1].card.getContainer();return this.K$===ci.ProtoGalleryOrientationEnum.Landscape?t.offsetTop+t.clientHeight>this.q_.clientHeight:t.offsetLeft+t.clientWidth>this.q_.clientWidth}hU(){const t=this.wU();this.aU=new ot(this.Oo,t,u.Rq,this.VO)}wU(){return Ci[this.K$][this.Y$]}}var se=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class ne extends Bi{constructor(){super(...arguments),this.events=Object.assign(Object.assign({},v.Km),Ri),this.SU=new Vi.X(!1),this.AU=!0,this.PU=!1,this._U=!0,this.xU=[],this.TU=new Vi.X(!1),this.kU={[w.Ez.PlayingState]:()=>{var t;this.SF(o.ProtoAdSlotsEnum.MidRoll);null===(t=this.adHandler)||void 0===t||t.contentPlaybackStateChanged(true),this.CF.contentPlaybackStateChanged(true)},[w.Ez.PrerollState]:()=>{this.SF(o.ProtoAdSlotsEnum.PreRoll)},[w.Ez.PostrollState]:()=>{this.SF(o.ProtoAdSlotsEnum.PostRoll)},[w.Ez.PausedState]:()=>{this.DV===o.ProtoAdSlotsEnum.PreRoll&&this.SF(o.ProtoAdSlotsEnum.MidRoll)},[w.Ez.StoppedState]:()=>{this.DV===o.ProtoAdSlotsEnum.PostRoll&&this.zF.upNextMode!==ci.ProtoPlayerUpNextMode.Stop?(this.SF(o.ProtoAdSlotsEnum.MidRoll),this.fF()):(this.LF(),this.CF.onContentStop(),this.fF())}},this.CU=({payload:t})=>{t===w.Ez.PlayingState&&(this.unsubscribe(Di.StateChanged,this.nO,this.CU),this.mediator.publish(this,Ri.VideoStarted,{payload:this.getVideoDetails()}))},this.EU=t=>{const i=this.kU[t];return()=>{var e;if(t!==w.Ez.PlayingState){const t=!1;null===(e=this.adHandler)||void 0===e||e.contentPlaybackStateChanged(t),this.CF.contentPlaybackStateChanged(t)}i&&i()}},this.MU=()=>{this.SU.next(!0),this.Ow.enterFullScreen().then((()=>{this.nO.enterFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!0)})).catch((t=>{(0,s.n)({level:s.D.WARN,message:"BaseVideoExperience_enterFullscreen"})}))},this.Dw=()=>{this.SU.next(!1),this.nO.exitFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!1),this.app.services.GlobalDomUtilsService.hasIosFullscreenBehaviour(this.app.config.os.os)&&(this.PU=this.nO.isIosFullscreen=!1,this.SF(this.DV)),this.mediator.publish(this,v.Zr.FullscreenChanged,{payload:!1}),super.Dw()},this.Vw=()=>{this.app.services.GlobalDomUtilsService.hasIosFullscreenBehaviour(this.app.config.os.os)&&(this.PU=this.nO.isIosFullscreen=!0,this.CF.onContentStop()),this.mediator.publish(this,v.Zr.FullscreenChanged,{payload:!0}),super.Vw()}}start(){const t=Object.create(null,{start:{get:()=>super.start}});return se(this,void 0,void 0,(function*(){try{yield t.start.call(this),this.zF.gallery&&(this.LU=new ee(this,this.app.services.ResizeObserver,this.app.services.GlobalDomUtilsService,this.app.services.InteractionService,this.BU,this.app.config.device,this.zF.gallery.style,this.zF.gallery.orientation,this.zF.playlist)),this.RU(),this.subscribe(w.T$.NewVideo,this.nO,(({payload:{videoIndex:t}})=>{var i;null===(i=this.LU)||void 0===i||i.setCurrentIndex(t)})),this.subscribe(Di.VideoQueued,this.nO,(({payload:{videoIndex:t}})=>{var i;null===(i=this.LU)||void 0===i||i.setCurrentIndex(t)})),this.LU&&(this.subscribe(Di.ChangeVideo,this.LU,(({payload:{videoIndex:t}})=>{this.AU=!this.nO.isHidden,this.kF.endPod(),this.changeVideo(t,!0),this.nO.getVideoData(t,(t=>{this.mediator.publish(this,Ri.GalleryCardClicked,{payload:this.OU(t)}),this.wM.mediaClick.next({type:C.$.GalleryClick})})),this.fF()})),this.LU.start(),this.LU.onResize(this.$experienceContainer.clientWidth)),this.TU.next(!0),this.app.config.isOVPDomain?this.HV.push(f._.onAdBlockerDetected().subscribe((t=>{t||this.DU(),this.CF.adBlockerStatusChange(t)}))):this.DU(),this.VU(this.nO,this.adHandler),this.FU();const i=!!this.alwaysFloatingModule||this.floatingModule.isInFloating;yield this.nO.start(i),this.YF(),this.gN(this.nO),this.NU(),this.jU(),this.$U()}catch(t){(0,s.n)({message:"BaseVideoExperience_Start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}$U(){if(this.zF.playbackMode===o.ProtoPlayerPlaybackModeEnum.ClickToPlay&&this.isFloatingModeEnabled()){this.UU=this.qU.cloneNode();this.$playerContentWrapper.querySelector(`.${u.s6.VideoWrapper}`).appendChild(this.UU)}}jw(){const t=this.Ow.onFullScreenEnter.subscribe((()=>this.Vw())),i=this.Ow.onFullScreenExit.subscribe((()=>this.Dw()));this.xU.push(i,t)}changeVideo(t,i=!1){if(this.adHandler){if(this.adHandler.linearInImpression)this.adHandler.stopAd(Qt.aB.ChangeVideo);else{const t=!0;this.UF(t)}this.adHandler.userInteraction(i)}this.nO.setVideo(t)}play(t=!0){this.adHandler&&this.adHandler.linearInImpression?this.adHandler.play():this.nO.play(t)}pause(t=!0){var i,e;null===(i=this.adHandler)||void 0===i||i.pause(),(null===(e=this.adHandler)||void 0===e?void 0:e.linearInImpression)||this.nO.pause(t)}setNewVolume(t){super.setNewVolume(t),this.nO.volume=t}getVolume(){return this.nO.volume}get currentTime(){return this.nO.currentTime}set currentTime(t){this.nO.currentTime=t}get duration(){return this.nO.duration}getVideoDetails(){let t;return this.nO.getCurrentVideoData((i=>{t=this.OU(i)})),t}getUpNextVideoDetails(){let t;return this.nO.getUpNextVideoData((i=>{t=this.OU(i)})),t}toggleFullscreen(t=!this.Ow.isFullscreen){return this.Ow.isFullscreen===t||(t?this.MU():this.Ow.exitFullScreen()),t}toggleCaptions(t=!this.nO.areCaptionsEnabled){t?this.showCaptions():this.hideCaptions()}togglePlay(){return this.nO.togglePlay()}toggleMute(){this.nO.toggleMute()}increaseVolume(t){this.nO.increaseVolume(t)}decreaseVolume(t){this.nO.decreaseVolume(t)}showCaptions(t){this.nO.showCaptions(t);const i=this.nO.getSelectedCaption();this.nO.updateCaptionsMenuUI(null==i?void 0:i.file)}getSubtitles(){return this.nO.getSubtitles()}hideCaptions(){this.nO.hideCaptions(),this.nO.updateCaptionsMenuUI()}toggleExpandButton(t){this.nO.toggleExpandButton(t)}getPlaylistId(){return this.zF.playlistId}getPlaylistDetails(){return Object.assign(Object.assign({},this.zF.getPlaylistDetails()),this.HU)}zU(t){return new Promise(((i,e)=>{const s=()=>this.nO.getVideoData(t,(t=>i(this.OU(t))),(t=>e(t)));this.TU.value?s():this.TU.pipe((0,wt.h)((t=>!!t)),(0,Fi.q)(1)).subscribe((t=>t&&s()))}))}getAllMetadata(){const t=this.zF.playlist.length;return Promise.all([...Array(t)].map(((t,i)=>this.zU(i))))}setPlaylistDetails(t){(0,L.$K)(t)&&((0,L.QM)(t.name)||(0,L.QM)(t.description))&&(this.HU=Object.assign(Object.assign({},this.HU),t))}getQuality(){return this.nO.getQuality()}setQuality(t){this.nO.setQuality(t)}setAutoQuality(){this.nO.setAutoQuality()}getAvailableQualities(){return this.nO.getAvailableQualities()}destroy(){super.destroy(),this.WU.destroy(),this.nO&&(this.nO.destroy(),this.unsubscribeAll(this.nO)),(0,b.i)(this.xU),(0,b.i)(this.zV)}setPreRollBreak(t){var i;this.zF.setPreRollBreak(t),null===(i=this.WU)||void 0===i||i.setPreRollBreak(this.zF.preRollBreak),this.nO.hasPreroll=(0,L.r)(this.zF.preRollBreak)}setPostRollBreak(t){var i;this.zF.setPostRollBreak(t),null===(i=this.WU)||void 0===i||i.setPostRollBreak(this.zF.postRollBreak),this.nO.hasPostroll=(0,L.r)(this.zF.postRollBreak)}OU(t){const{imageMaxHeight:i,ratioHeight:e,ratioWidth:s}=S.I0,n=i/e*s;return{id:t.id,title:t.title,description:t.description,duration:(0,L.hj)(t.duration)?t.duration:this.nO.duration,keywords:t.keywords,url:t.clickUrl?this.app.services.MacrosService.setupMacros(t.clickUrl):"",customFields:t.customFields,thumbnail:t.getThumbnailUrl(n,i),publishDate:t.publishDate,sourceItemId:t.sourceItemId,languageId:t.languageId,altText:t.altText,disableAdvertising:t.disableAdvertising,cuePoints:t.cuePoints,subtitles:t.subtitles,endDate:t.endDate,contentStudio:t.contentStudio}}cF(){if(this.LV)return;this.RV||this.lF();const t=E[o.ProtoAdSlotsEnum[this.DV]];this.LV=!0,this.BV=!1;const i={adBreakPosition:t};this.DV===o.ProtoAdSlotsEnum.PostRoll&&(this.OV=!0),this.app.services.EventsStorageService.emitAdBreakStart(i)}dF(){this.LV&&(this.LV=!1,this.app.services.EventsStorageService.emitAdBreakComplete(),this.OV&&(this.OV=!1,this.fF()))}uF(){this.BV||(this.LV&&this.dF(),this.RV||this.lF(),this.BV=!0,this.app.services.EventsStorageService.emitPlay())}pF(){this.BV&&(this.BV=!1,this.app.services.EventsStorageService.emitPause())}lF(){this.RV||(this.RV=!0,this.nO.getCurrentVideoData((({title:t,id:i,sourceItemId:e,keywords:s,duration:n,customFields:r})=>{const o=this.nO.streamFormat,h=e||i;this.app.services.EventsStorageService.emitSessionStart({name:t,keywords:s,mediaId:h,length:n,streamFormat:o,customFieldList:r,feed:"Video"})})))}fF(){this.RV&&(this.RV=!1,this.BV=!1,this.LV&&this.dF(),this.app.services.EventsStorageService.emitSessionEnd())}mF(){this.RV&&(this.app.services.EventsStorageService.emitContentComplete(),this.zF.postRollBreak||this.fF())}$F(){const t=this.DV===o.ProtoAdSlotsEnum.PostRoll?this.getUpNextVideoDetails():this.getVideoDetails();t?(this.adHandler.setContinueReadingCard({imageSrc:t.thumbnail,title:t.title}),this.adHandler.setAdMarkerTitle(t.title)):(this.adHandler.hideContinueReadingCard(),this.adHandler.hideAdMarkerTitle()),super.$F(),this.nO.blurVideoTag(),this.nO.hide()}FD(t,i=!1){super.FD(t,i),this.XU&&(this.XU.setSoundVolume(this.nO.volume),this.XU.setViewability(t),this.XU.setIsAppBackgrounded(i))}vB(){super.vB(),this.nO&&this.nO.resize(this.breakPointsHandler.currentBreakpointClass)}handleClose(){this.floatingModule&&this.floatingModule.isInFloating?(this.floatingModule.destroy(!0),0!==this.nO.volume&&this.setVolume(0)):this.Ow.isFullscreen?this.Ow.exitFullScreen():this.triggerDestroy()}generateHTML(){super.generateHTML(),this.setPlayerMinDimension(),this.qU=this.app.services.GlobalDomUtilsService.createElementByString(`<img class="${u.sN.ImagePlaceholder}">`),this.$playerWrapper.appendChild(this.qU)}setPlayerMinDimension(){this.WV=this.zF.enableNewUI?80:142}sB(t){super.sB(t),this.nO.getCurrentVideoData((t=>{var i,e;t.disableAdvertising&&((null===(i=this.adHandler)||void 0===i?void 0:i.linearInImpression)||(null===(e=this.adHandler)||void 0===e?void 0:e.nonLinearInImpression))&&(0,s.n)({level:s.D.WARN,message:"BaseVideoExperience_adImpression_onDisableAdvertising"})}))}JU(t){this.adHandler&&this.adHandler.setMediaRestrictions(t)}FU(){this.subscribe(k.C[k.C.Volume],this.nO,(({payload:{volume:t}})=>{this.adHandler?this.adHandler.setLinearVolume(t):this.dB(t)})),this.subscribe(w.wB.Timeupdate,this.nO,(({payload:{currentTime:t}})=>{this.CF.contentTimeUpdate(t)})),this.subscribe(w.T$.NewVideo,this.nO,(()=>{this.subscribe(Di.StateChanged,this.nO,this.CU),this.nO.getCurrentVideoData((t=>{var i;this.CF.onNewMediaVideo(t.cuePoints,t.disableAdvertising);const e={mediaId:t.id,mediaKeywords:t.keywords,mediaLanguage:t.languageId,mediaInsights:t.insights};let s;this.JU(e),this.rl.currentMediaMetadata={mediaId:t.id,clickUrl:t.clickUrl,insights:(null===(i=t.insights)||void 0===i?void 0:i.insights)||[],sentimentAnalysis:t.sentimentAnalysis,contentRevisionId:t.contentVersionId,mediaRevision:t.revisionNumber,isExternalMedia:t.isExternalSource},s=(0,L.QM)(this.zF.playlistThumbnail)?this.zF.playlistThumbnail:t.getThumbnailUrl(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight),this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(s),this.QU(s,t.altText),this.mediator.publish(this,Di.MediaMetaUpdate,{payload:{title:t.title,description:t.description}}),this.mediator.publish(this,Ri.NewVideo)}))})),this.subscribe(Di.FirstFramePlayed,this.nO,(()=>{this.wM.mediaQuartile.next({quartile:O.yU.Start}),this.SN(),this.lF()})),this.subscribe(Di.StateChanged,this.nO,(({payload:t})=>{var i,e,s,n,r,o;switch(this.rl.playerState=t,this.WU.changeState(t),this.YU(t),t){case w.Ez.PlayingState:this.mediator.publish(this,v.q0.Play,{payload:this.getVideoDetails()}),this.uF(),(0,M.pv)(this.$experienceContainer,u.s6.ClickToPlayThumbnail)&&((0,M.IV)(this.$experienceContainer,u.s6.ClickToPlayThumbnail),null===(e=null===(i=this.UU)||void 0===i?void 0:i.parentElement)||void 0===e||e.removeChild(this.UU)),null===(s=this.floatingStateMachine)||void 0===s||s.setPlayerPlay(!0);break;case w.Ez.PausedState:this.mediator.publish(this,v.q0.Pause,{payload:this.getVideoDetails()}),this.jE.sessionPlaybackChanged.next({isPlaying:!1}),this.pF(),null===(n=this.floatingStateMachine)||void 0===n||n.setPlayerPause(!0);break;case w.Ez.BufferingState:null===(r=this.floatingStateMachine)||void 0===r||r.setPlayerLoading(!0);break;case w.Ez.StoppedState:this.jE.sessionPlaybackChanged.next({isPlaying:!1});break;case w.Ez.PrerollState:case w.Ez.PostrollState:null===(o=this.floatingStateMachine)||void 0===o||o.setPlayerLoading(!0),this.jE.sessionPlaybackChanged.next({isPlaying:!0}),this.cF();break;case w.Ez.HiddenState:this.jE.sessionPlaybackChanged.next({isPlaying:!0}),this.pF(),this.cF();break;default:this.jE.sessionPlaybackChanged.next({isPlaying:!0})}})),this.floatingModule&&this.subscribe(d.Uh.UserInteraction,this.nO,this.ZV),this.adHandler&&this.subscribe(d.Uh.UserInteraction,this.nO,(({payload:{playback:t}})=>{!1===t&&(this.adHandler.pause(),this.CF.onContentStop()),this.adHandler.userInteraction(t)})),this.subscribe(d.Uh.UserInteraction,this.nO,(({payload:{clickedNext:t,clickedPrev:i}})=>{(t||i)&&this.fF()})),this.subscribe(Di.ContentQuartiles,this.nO,(({payload:t})=>{let i;switch(this.wM.mediaQuartile.next({quartile:R.EN.fromProtoGetQuartile(t)}),t){case o.ProtoQuartilesEnum.First:i=Ri.VideoCompleted25;break;case o.ProtoQuartilesEnum.Second:i=Ri.VideoCompleted50;break;case o.ProtoQuartilesEnum.Third:i=Ri.VideoCompleted75;break;case o.ProtoQuartilesEnum.Fourth:i=Ri.VideoCompleted100}i&&this.mediator.publish(this,i,{payload:this.getVideoDetails()})})),this.subscribe(Di.ContentQuartiles,this.nO,(({payload:t})=>{t===o.ProtoQuartilesEnum.Fourth&&this.mF()})),this.subscribe(k.C[k.C.OverlayClick],this.nO,(()=>{this.mediator.publish(this,Ri.PlayerClicked,{payload:this.getVideoDetails()}),this.wM.mediaClick.next({type:C.$.PauseClick})})),this.subscribe(w.XQ.Change,this.nO,(t=>this.mediator.publish(this,v.q0.QualityChanged,t))),this.subscribe(w.T$.PlayError,this.nO,(t=>{this.mediator.publish(this,v.q0.PlayError,t),this.app.services.EventsStorageService.emitPlayError()})),this.subscribe(k.C[k.C.CaptionOn],this.nO,(()=>this.mediator.publish(this,Ri.SubtitlesVisibilityChanged,{payload:!0}))),this.subscribe(k.C[k.C.CaptionOff],this.nO,(()=>this.mediator.publish(this,Ri.SubtitlesVisibilityChanged,{payload:!1}))),this.adHandler&&this.xU.push(this.adHandler.onLinearUiComponentEvent.subscribe((t=>{if(t.type===k.C.Volume){const{volume:i}=t.payload;this.dB(i),this.nO.volume=i}})),this.adHandler.onLinearNoFill.subscribe((()=>{var t;null===(t=this.CF)||void 0===t||t.onLinearNoFill()}))),this.subscribe(w.T$.NewVideo,this.nO,(()=>{this._U?(this._U=!1,this.zF.adPlaybackMode===o.ProtoAdPlaybackMode.Autoplay&&this.zF.playbackMode!==o.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.zF.preRollBreak&&this.SF(o.ProtoAdSlotsEnum.MidRoll)):this.EF()})),this.zF.isCloseButton&&this.subscribe(k.C[k.C.Close],this.nO,(()=>{this.mediator.publish(this,Ni.CloseButtonClicked),this.handleClose()})),this.subscribe(d.Uh.GeneralUserInteraction,this.nO,(({payload:{type:t}})=>{this.wM.mediaClick.next({type:t})}))}DU(){this.adHandler&&(this.adHandler.start(this.nO.width,this.nO.height,this.zF.soundMode===ci.ProtoPlayerSoundMode.On?1:0,!1,!0),this.CF.forceRecheck())}YU(t){this.EU(t)()}PF(t){!this.PU&&this.adHandler&&this.adHandler.adStateChange(t,this.kF.getMaxAdSlotDuration())}_F(t){const{duration:i}=this.nO;this.CF.onAdStateChange(t,{maxAdPodDuration:this.kF.getMaxAdPodDuration(),maxAdSlotDuration:this.kF.getMaxAdSlotDuration()},i)}NU(){this.Ow=new _.I(this.app.services.GlobalDomUtilsService,this.$playerContainer,this.app.config.os.os),this.Nw()}Nw(){this.jw(),this.subscribe(k.C[k.C.Expand],this.nO,this.MU),this.subscribe(k.C[k.C.Collapse],this.nO,(()=>this.Ow.exitFullScreen()))}QU(t,i){this.qU.style.display="none",this.qU.onload=()=>{this.qU.style.display=null},(0,L.QM)(t)&&this.qU.setAttribute("src",t),this.qU.setAttribute("alt",i||""),this.qU.setAttribute("id",`cnx-thumbnail-id-${this.app.config.sessionId}`)}VU(t,i){const{preRollBreak:e,postRollBreak:s}=this.zF;this.WU=new A(t,i,e,s)}jU(){this.XU=new x(this,this.zF.playbackMode),this.subscribe(P[P.Play],this.XU,(t=>{var i,e;this.nO.play(),(null===(i=this.adHandler)||void 0===i?void 0:i.nonLinearInImpression)&&(null===(e=this.adHandler)||void 0===e||e.play()),t.payload&&(0,L.hj)(t.payload.volume)&&super.setNewVolume(t.payload.volume)})),this.subscribe(P[P.Pause],this.XU,(t=>{var i,e;this.nO.pause(),(null===(i=this.adHandler)||void 0===i?void 0:i.nonLinearInImpression)&&(null===(e=this.adHandler)||void 0===e||e.pause()),t.payload&&(0,L.hj)(t.payload.volume)&&super.setNewVolume(t.payload.volume)})),this.subscribe(d.Uh.UserInteraction,this.nO,(({payload:{playback:t}})=>{(0,L.$K)(t)&&this.XU.setUserPlayback(t)}));const t=this.nO.canPlay().subscribe((t=>{this.XU.setCanPlay(t)})),i=this.SU.subscribe((t=>{this.XU.setIsFullscreen(t)}));this.xU.push(t,i)}}var re=r(7994),oe=r(8843);var he;!function(t){t[t.StateChanged=0]="StateChanged",t[t.ContentEnd=1]="ContentEnd",t[t.VideoQueued=2]="VideoQueued"}(he||(he={}));class ae{constructor(t,i,e,s,n,r=!1,o){this.mediator=t,this.KU=i,this.ZU=e,this.tq=s,this.iq=n,this.eq=r,this.sq=o,this.nq=!1,this.rq=!1,this.oq=!1,this.hq=!1,this.aq=500,this.cq=new dt.x,this.dq=0,this.GD(),this.initListeners()}GD(){this.QD=w.Ez.StoppedState,this.lq=w.Ez.StoppedState,this.sq&&(this.nq=!0)}pq(){this.fq=this.ZU.onVideoEvents.subscribe((t=>{switch(t){case w.wB.Playing:this.mq();break;case w.wB.Error:this.vq();break;case w.wB.Pause:this.gq()}}))}mq(){switch(this.QD){case w.Ez.PlayingState:return;case w.Ez.PausedState:case w.Ez.StoppedState:case w.Ez.BufferingState:this.yq(w.Ez.PlayingState);break;case w.Ez.HiddenState:case w.Ez.PrerollState:case w.Ez.PostrollState:this.ZU.pause()}}vq(){switch(this.QD){case w.Ez.BufferingState:case w.Ez.PlayingState:this.yq(w.Ez.PausedState)}}gq(){switch(this.QD){case w.Ez.BufferingState:case w.Ez.PlayingState:this.yq(w.Ez.PausedState)}}initListeners(){var t,i;this.cq.pipe((t=400,void 0===i&&(i=oe.z),(0,At.e)((function(e,s){var n=null,r=null,o=null,h=function(){if(n){n.unsubscribe(),n=null;var t=r;r=null,s.next(t)}};function a(){var e=o+t,r=i.now();if(r<e)return n=this.schedule(void 0,e-r),void s.add(n);h()}e.subscribe((0,Pt.x)(s,(function(e){r=e,o=i.now(),n||(n=i.schedule(a,t),s.add(n))}),(function(){h(),s.complete()}),void 0,(function(){r=n=null})))}))),(0,Fi.q)(1)).subscribe((t=>{this.bq(t),this.dq=0})),this.pq()}yq(t){this.QD!==t&&(this.lq=this.QD,this.QD=t,this.mediator.publish(this,he[he.StateChanged],{payload:this.QD}))}Iq(t){return this.QD===t}wq(){this.yq(w.Ez.PrerollState),this.nq=!0}Sq(){this.Aq===w.Ez.PlayingState?this.Pq():this._q()}xq(){this.yq(w.Ez.PostrollState)}Tq(){this.Aq===w.Ez.PausedState?(this.oq=!0,this.stop()):(this.oq=!1,this.mediator.publish(this,he[he.ContentEnd]))}_q(){this.ZU.pause(),this.yq(w.Ez.PausedState)}Pq(){this.yq(w.Ez.BufferingState),this.KU.getCurrentVideoData((()=>{this.Iq(w.Ez.HiddenState)||this.Aq===w.Ez.PausedState||this.ZU.play()}))}kq(){this.QD!==w.Ez.PostrollState&&(this.nq=!1)}resume(){this.lq&&this.yq(this.lq)}play(){this.Aq=w.Ez.PlayingState,this.Iq(w.Ez.PlayingState)||this.Iq(w.Ez.PrerollState)||this.Iq(w.Ez.PostrollState)||this.Iq(w.Ez.HiddenState)||this.Iq(w.Ez.InCuePoint)||(!this.tq||this.nq||this.rq?this.Iq(w.Ez.StoppedState)&&this.oq?this.Tq():this.Pq():this.wq())}isInPlayingState(){return this.Iq(w.Ez.PlayingState)}setVideoQueue(t,i){0===this.cq.observers.length&&this.initListeners(),i?this.dq--:this.dq++;const e=this.KU.getAdjustedVideoIndex(t,this.dq);this.cq.next(e),this.mediator.publish(this,he[he.VideoQueued],{payload:e})}onEnterCuePoint(){this.ZU.pause(),this.yq(w.Ez.InCuePoint)}onExitCuePoint(){this.Iq(w.Ez.HiddenState)||(this.Aq===w.Ez.PlayingState?this.Pq():this._q())}bq(t){if(this.ZU.pause(),this.kq(),this.yq(w.Ez.BufferingState),this.Cq&&this.Cq.isPending)try{this.Cq.reject(),this.Cq=null}catch(t){this.Cq=null}const i=this.KU.setVideo(t);this.Cq=new re.C,this.Cq.resolve(i),this.Cq.promise.then((t=>{this.Cq=null,this.ZU.setSource(t).then((()=>this.play()))}))}set hasPreroll(t){this.tq=t,this.nq=!0}set hasPostroll(t){this.iq=t}pause(t=!1){this.Aq=w.Ez.PausedState,this.Iq(w.Ez.PrerollState)||this.Iq(w.Ez.PostrollState)||this.Iq(w.Ez.HiddenState)||this.Iq(w.Ez.InCuePoint)||this._q()}pauseToggle(){if(this.Iq(w.Ez.PausedState)||this.Iq(w.Ez.PlayingState))return this.Iq(w.Ez.PausedState)&&this.hq?(this.hq=!1,void this.play()):this.Iq(w.Ez.PlayingState)?(this.hq=!0,void this.pause()):void 0}stop(){this.ZU.pause(),this.yq(w.Ez.StoppedState)}hide(){this.ZU.hide(),this.ZU.pause(),this.yq(w.Ez.HiddenState)}show(t=!0){this.Iq(w.Ez.HiddenState)&&(this.ZU.show(),this.lq!==w.Ez.PostrollState?t&&(this.Aq===w.Ez.PlayingState?this.Pq():this._q()):this.Tq())}handleVideoEnd(){this.iq&&!this.rq?this.xq():this.Tq()}onEnterBuffering(){this.Iq(w.Ez.PlayingState)&&this.yq(w.Ez.BufferingState)}onExitBuffering(){this.Iq(w.Ez.BufferingState)&&(this.Aq===w.Ez.PlayingState?this.Pq():this._q())}getCurrentState(){return this.QD}replay(){this.ZU.currentTime=0,!this.tq||this.rq?this.Pq():this.wq()}exitRollBreak(){this.QD!==w.Ez.PostrollState?this.Sq():this.Tq()}onFullScreenChange(t){this.eq&&(this.rq=t,t||setTimeout((()=>{this.Aq===w.Ez.PlayingState?(this.pause(),this.play()):this.pause()}),this.aq))}destroy(){this.fq.unsubscribe()}}var ce,de,le=r(8576);!function(t){t.Autoplay="autoplay",t.Autochain="autochain",t.UserInitiated="user initiated"}(ce||(ce={}));class ue{constructor(t){this.streamFormat=ce.Autoplay,this.isMuted=!0,t===o.ProtoPlayerPlaybackModeEnum.ClickToPlay&&(this.streamFormat=ce.UserInitiated)}get streamFormatValue(){return`${this.streamFormat}${this.isMuted?" muted":""}`}}class pe{constructor(t){this.Eq=[],this.Eq=t,this.Mq(0)}Lq(){this.Bq(this.Dq).getMetadata()}Mq(t){this.Dq=t,this.Lq()}Bq(t){return this.Eq[t]}setAvailableQualitiesForSourceMeta(t,i){t.setAvailableQualities(i)}get nextVideoIndex(){return this.Dq===this.Eq.length-1?0:this.Dq+1}get prevVideoIndex(){return 0===this.Dq?this.Eq.length-1:this.Dq-1}get currentVideoIndex(){return this.Dq}getCurrentVideoData(t,i){this.Bq(this.Dq).getMetadata(t,i)}getVideoData(t,i,e=null){this.Bq(t).getMetadata(i,e)}getAdjustedVideoIndex(t,i){return 1===i||-1===i?t:i>0?t+i<this.length?t+i:this.length-1:t+i<0?0:t+i}setVideo(t){return new Promise((i=>{this.Bq(t).getMetadata((e=>{this.Mq(t),i(e)}))}))}get length(){return this.Eq.length}isNextVideoCurrentVideo(){return this.currentVideoIndex===this.nextVideoIndex}destroy(){this.Eq=[]}}!function(t){t.Play="play",t.Pause="pause",t.Volume="volume",t.Seek="seek",t.SeekingStart="seekstart",t.SeekingStop="seekstop",t.Quality="quality",t.CaptionOn="captionon",t.CaptionOff="captionoff"}(de||(de={}));var fe=r(4524),me=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const ve={[o.ProtoVideoQuality.High1080p]:{quality:w.ZH.Strict,height:1080},[o.ProtoVideoQuality.High720p]:{quality:w.ZH.Strict,height:720},[o.ProtoVideoQuality.Medium360p]:{quality:w.ZH.Strict,height:360}};class ge extends c._{constructor(t,i,e,s,n){super(),this.mediator=t,this.zF=i,this.Il=e,this.gl=s,this.Vq=n,this.Fq=!1,this.jq=!0,this.$q=new Vi.X(!1),this.Hq=new Vi.X(!1),this.subscriptions=[],this.zq(),this.Wq(),this.Gq=new ue(this.zF.playbackMode)}set hasPostroll(t){this.Xq.hasPostroll=t}set hasPreroll(t){this.Xq.hasPreroll=t}start(t){return me(this,void 0,void 0,(function*(){yield this.Jq(),this.updateFloatingState(!!t),this.ew()}))}get streamFormat(){return this.Gq.streamFormatValue}play(t=!1){t&&(this.mediator.publish(this,d.Uh.UserInteraction,{payload:{playback:!0}}),this.Gq.streamFormat=ce.UserInitiated),this.Xq.play()}pause(t=!1){t&&this.mediator.publish(this,d.Uh.UserInteraction,{payload:{playback:!1}}),this.Xq.pause(t)}setVideo(t,i=!1){this.Xq.setVideoQueue(t,i)}show(t=!0){this.Xq.show(t)}hide(){this.Xq.hide()}blurVideoTag(){this.ZU.blurVideoTag()}get isHidden(){return this.Xq.getCurrentState()===w.Ez.HiddenState}enterFullscreen(){this.HS=!0,this.Yq.enterFullscreen(),this.Xq.onFullScreenChange(!0)}exitFullscreen(){this.HS=!1,this.Yq.exitFullscreen(),this.Xq.onFullScreenChange(!1)}resize(t){var i,e,s;null===(e=(i=this.Yq).onResize)||void 0===e||e.call(i,t),null===(s=this.Kq)||void 0===s||s.onResize(t)}get width(){return this.ZU.width}get height(){return this.ZU.height}get volume(){return this.ZU.volume}set volume(t){var i;this.ZU.volume=t,null===(i=this.Yq)||void 0===i||i.updateVolume(t),this.Gq.isMuted=t<=0}getCurrentVideoData(t){return this.KU.getCurrentVideoData(t)}getVideoData(t,i,e=null){return this.KU.getVideoData(t,i,e)}getUpNextVideoData(t){return this.KU.getVideoData(this.KU.nextVideoIndex,t)}get isIosFullscreen(){return this.ZU.isIosFullscreen}set isIosFullscreen(t){this.ZU.isIosFullscreen=t}get currentTime(){return this.ZU.currentTime}set currentTime(t){this.Xq.pauseToggle(),this.ZU.currentTime=t,setTimeout((()=>this.Xq.pauseToggle()),0)}get duration(){return this.ZU.duration}toggleCaptions(){this.ZU.hasSubtitles()&&(this.ZU.toggleCaptions(),this.Yq.toggleCaptionButton(!0),this.mediator.publish(this,k.C[k.C.CaptionOn]))}togglePlay(){return this.ZU.togglePlay()}toggleMute(){this.ZU.toggleMute(),this.Yq.updateVolume(this.ZU.volume)}increaseVolume(t){this.ZU.increaseVolume(t),this.Yq.updateVolume(this.ZU.volume)}decreaseVolume(t){this.ZU.decreaseVolume(t),this.Yq.updateVolume(this.ZU.volume)}showCaptions(t){this.ZU.hasSubtitles()&&(this.ZU.showCaptions(t),this.Yq.toggleCaptionButton(!0),this.mediator.publish(this,k.C[k.C.CaptionOn]))}get areCaptionsEnabled(){return this.ZU.areCaptionsEnabled}getSelectedCaption(){return this.ZU.getSelectedCaption()}updateCaptionsMenuUI(t){this.Yq.updateDefaultCaption(t)}getSubtitles(){return this.ZU.getSubtitles()}hideCaptions(){this.ZU.hideCaptions(),this.Yq.toggleCaptionButton(!1),this.mediator.publish(this,k.C[k.C.CaptionOff])}toggleExpandButton(t){this.Yq.toggleExpandButton(t)}getQuality(){let t;return this.KU.getCurrentVideoData((i=>{t=i.getClosestSourceQuality(this.ZU.currentQualitySettings.height).videoHeight})),t}setQuality(t){this.KU.getCurrentVideoData((i=>{const e=i.getClosestSourceQuality(t);this.ZU.setQuality({height:e.videoHeight,quality:w.ZH.Strict})}))}setAutoQuality(){this.ZU.setQuality({height:this.ZU.height,quality:w.ZH.Auto})}getAvailableQualities(){let t=[];return this.KU.getCurrentVideoData((i=>{t=i.getAvailableQualities().map((t=>t.videoHeight))})),t}stop(){this.Xq&&this.Xq.stop()}resume(){this.Xq&&this.Xq.resume()}startContent(){this.Xq.exitRollBreak()}destroy(){var t;null===(t=this.Yq)||void 0===t||t.destroy(),this.KU.destroy(),this.ZU.destroy(),this.Xq.destroy(),(0,b.i)(this.subscriptions)}canPlay(){return this.$q.asObservable()}onReady(){return this.Hq.asObservable()}updateFloatingState(t){var i,e;this.Yq&&(null===(e=(i=this.Yq).updateFloatingState)||void 0===e||e.call(i,t))}Zq(){return new Promise(((t,i)=>{try{this.KU.getCurrentVideoData((i=>me(this,void 0,void 0,(function*(){yield this.ZU.setSource(i),this.Yq.updateCurrentVideo(i),this.tH(i),this.iH(i,this.ZU.currentQualitySettings),t()}))),(()=>i(new Error("getCurrentVideoData fail callback"))))}catch(t){i(t)}}))}eH(){this.subscribe(he[he.StateChanged],this.Xq,(({payload:t})=>{this.Yq.changeState(t),this.mediator.publish(this,Di.StateChanged,{payload:t})})),this.subscribe(he[he.ContentEnd],this.Xq,(()=>{this.nH()})),this.subscribe(he[he.VideoQueued],this.Xq,(({payload:t})=>{this.mediator.publish(this,Di.VideoQueued,{payload:{videoIndex:t}})}))}rH(){this.subscriptions.push(this.Yq.onUIEvent.subscribe((t=>{switch(t.type){case de.Play:if(this.jq&&this.zF.playbackMode===o.ProtoPlayerPlaybackModeEnum.ClickToPlay){const t=this.zF.soundMode===o.ProtoPlayerSoundMode.On?1:0;this.volume=t,this.mediator.publish(this,k.C[k.C.Volume],{payload:{volume:t}})}this.jq=!1,this.mediator.publish(this,d.Uh.UserInteraction,{payload:{playback:!0}}),this.play();break;case de.Volume:const{volume:i}=t.payload;this.ZU.volume=i,this.Gq.isMuted=i<=0,this.mediator.publish(this,d.Uh.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,k.C[k.C.Volume],{payload:{volume:i}});break;case de.Pause:this.mediator.publish(this,d.Uh.UserInteraction,{payload:{playback:!1}});const e=!0;this.pause(e);break;case de.Seek:const{seekedTime:s}=t.payload;this.oH=s;break;case de.SeekingStart:this.Xq.pauseToggle();break;case de.SeekingStop:this.ZU.forceCurrentTime(this.oH),this.Xq.pauseToggle();break;case fe.t.OverlayClick:this.KU.getCurrentVideoData((t=>{(0,L.QM)(t.clickUrl)?(this.zF.disableClickUrl||(this.Il.services.MacrosService.setVideoTime(this.ZU.currentTime),this.Il.services.GlobalDomUtilsService.open(this.Il.services.MacrosService.setupMacros(t.clickUrl),le.bS.Blank)),this.mediator.publish(this,d.Uh.GeneralUserInteraction,{payload:{type:O.$u.UrlClick}})):this.pause(!0),this.mediator.publish(this,k.C[k.C.OverlayClick])}));break;case fe.t.Expand:this.mediator.publish(this,k.C[k.C.Expand]);break;case fe.t.Collapse:this.mediator.publish(this,k.C[k.C.Collapse]);break;case de.Quality:const{quality:n}=t.payload;this.ZU.setQuality(n);break;case fe.t.Close:this.hH();break;case de.CaptionOn:const{captionUrl:r}=t.payload;this.showCaptions(r);break;case de.CaptionOff:this.hideCaptions();break;case fe.t.GeneralUserInteraction:const{payload:h}=t;this.mediator.publish(this,d.Uh.GeneralUserInteraction,{payload:h})}}))),this.subscribe(fe.t.Close,this.Kq,(()=>{this.hH()})),this.subscribe(k.C[k.C.CaptionOn],this.ZU,(()=>{this.Yq.toggleCaptionButton(!0)})),this.subscribe(k.C[k.C.CaptionOff],this.ZU,(()=>{this.Yq.toggleCaptionButton(!1)})),this.subscribe(k.C[k.C.CaptionUpdate],this.ZU,(({payload:t})=>{this.Yq.updateActiveCue(t)}))}kq(t=!0){t&&(this.KU.getCurrentVideoData((t=>{var i,e;if(this.aH(t),this.Yq.updateCurrentVideo(t),this.tH(t),null===(i=this.Kq)||void 0===i||i.updateCurrentVideo(t),this.iH(t,this.ZU.currentQualitySettings),this.zF.closedCaptionDefault&&t.subtitles){const i=null===(e=t.getDefaultSubtitle())||void 0===e?void 0:e.file;setTimeout((()=>{this.showCaptions(i),this.Yq.updateDefaultCaption(i)}),0)}else this.hideCaptions(),this.Yq.updateDefaultCaption()})),this.Yq.updateActiveCue()),this.mediator.publish(this,w.T$.NewVideo,{payload:{videoIndex:this.KU.currentVideoIndex}}),this.Fq=!1,this.cH()}ew(){this.dH(),this.lH(),this.uH()}pH(){return{logoPosition:this.zF.logoPosition,logoUrl:this.zF.logoUrl,isMobile:this.Il.config.isMobile,hasUpNext:this.zF.upNextMode===ci.ProtoPlayerUpNextMode.Next,accentColor:this.zF.accentColor||u.QO.Connatix,iconsColor:this.zF.iconsColor||u.QO.Icons,tooltipBackgroundColor:this.zF.tooltipBackgroundColor||u.QO.SecondaryBackground,tooltipTextColor:this.zF.tooltipTextColor||u.QO.Icons,closeButtonMode:this.zF.closeButtonMode,floatingCloseButtonMode:this.zF.floatingSettings.floatingCloseButtonMode,isCloseButton:this.zF.isCloseButton,uiComponentsVisibility:this.zF.uiComponentsVisibility,sharingDestinations:this.zF.sharingDestinations,closedCaptionDefault:this.zF.closedCaptionDefault,alwaysDisplayControls:this.zF.alwaysDisplayControls,os:this.Il.config.os.os,sdkVersion:this.Il.config.sdkVersion,isPinned:this.zF.floatingSettings.isPinnedFloating,enableNewUI:this.zF.enableNewUI}}Wq(){const t={browser:this.Il.config.browser.browserType,os:this.Il.config.os.os,osVersion:this.Il.config.os.osVersion},i=this.zF.soundMode===o.ProtoPlayerSoundMode.On&&this.zF.playbackMode!==o.ProtoPlayerPlaybackModeEnum.ClickToPlay?1:0;this.fH=ve[this.zF.videoQuality],this.mH(t,i),this.subscribe(w.XQ.Loaded,this.ZU,(({payload:{qualityList:t,videoMeta:i}})=>{this.KU.setAvailableQualitiesForSourceMeta(i,t),this.Yq&&this.Yq.updateCurrentVideo(i)})),this.subscribe(w.T$.Buffering,this.ZU,(()=>{this.Xq.onEnterBuffering()})),this.subscribe(w.T$.Buffered,this.ZU,(()=>{this.Xq.onExitBuffering()}))}iH(t,i){const e=t.getAvailableQualities();if((0,l.BZ)(e)){const e=t.getClosestSourceQuality(i.height).isHD;this.Yq.updateQuality(i,e)}}aH(t){this.Il.services.MacrosService.setVideoDuration(t.duration),this.Il.services.MacrosService.setVideoTitle(t.title),this.Il.services.MacrosService.setVideoDescription(t.description),this.Il.services.MacrosService.setVideoUrl(t.clickUrl),this.Il.services.MacrosService.setVideoId(t.id)}zq(){this.KU=new pe(this.zF.playlist)}Jq(){return me(this,void 0,void 0,(function*(){const t=this.pH();yield this.vH(t),1===this.KU.length&&this.Yq.togglePlaylistControls(!1),this.Yq.updateVolume(this.zF.soundMode===o.ProtoPlayerSoundMode.On?1:0)}))}dH(){this.relay(w.T$.PlayError,this.ZU,this,this.mediator),this.subscribe(w.T$.NewVideo,this.ZU,(()=>{this.kq()}))}lH(){this.subscribe(w.wB.LoadedData,this.ZU,(t=>{this.Yq.updateCurrentTime(this.ZU.currentTime,this.ZU.duration)})),this.subscribe(w.wB.Timeupdate,this.ZU,(({payload:{isPlaying:t}})=>{this.Yq.updateCurrentTime(this.ZU.currentTime,this.ZU.duration),this.Il.services.MacrosService.setVideoTime(this.ZU.currentTime),!this.Fq&&t&&(this.Fq=!0,this.mediator.publish(this,Di.FirstFramePlayed)),this.ZU.currentTime!==this.gH&&this.yH(t),this.gH=this.ZU.currentTime,this.mediator.publish(this,w.wB.Timeupdate,{payload:{currentTime:this.ZU.currentTime}})})),this.subscribe(w.wB.Volumechange,this.ZU,(({payload:{isMuted:t}})=>{this.isIosFullscreen&&(this.volume=t?0:1)})),this.subscribe(w.wB.Ended,this.ZU,(()=>{this.Xq.handleVideoEnd()})),this.subscribe(w.wB.BufferProgress,this.ZU,(({payload:{bufferRanges:t}})=>{const i=t||null;this.Yq.updateBufferedState(i)}))}uH(){this.subscribe(w.XQ.CurrentQuality,this.ZU,(({payload:t})=>{this.KU.getCurrentVideoData((i=>{this.iH(i,t)}))})),this.subscribe(w.XQ.Change,this.ZU,(({payload:t})=>{this.KU.getCurrentVideoData((i=>{const e=i.getAvailableQualities();if((0,l.BZ)(e)){const e=i.getClosestSourceQuality(t);this.fH={quality:w.ZH.Strict,height:e.videoHeight},this.mediator.publish(this,w.XQ.Change,{payload:e.videoHeight})}}))}))}tH(t){const i=t.getThumbnailUrl(this.gl.clientWidth,this.gl.clientHeight);this.mediator.publish(this,w.d0.NewThumbnail,{payload:{thumbnailUrl:i}})}hH(){this.mediator.publish(this,d.Uh.UserInteraction,{payload:{playback:!1,isFullscreenClose:this.HS}}),this.mediator.publish(this,k.C[k.C.Close])}}class ye extends ae{play(){if(this.bH)return this.Aq=w.Ez.PlayingState,this.bH=!1,void this.wq();super.play()}pause(t=!1){this.Iq(w.Ez.LiveStreamEnded)||this.Iq(w.Ez.LiveStreamStarting)||this.Iq(w.Ez.LiveStreamStopped)||(t&&(this.bH=!0),super.pause())}endOfStream(){this.pause(),this.handleVideoEnd()}enterLiveNotSupported(){this.yq(w.Ez.LiveStreamNotSupported)}enterLiveStreamStopped(){this.yq(w.Ez.LiveStreamStopped)}GD(){this.QD=w.Ez.LiveStreamStarting,this.lq=w.Ez.LiveStreamStarting}Tq(){this.yq(w.Ez.LiveStreamEnded)}_q(){this.ZU.pause(),this.yq(w.Ez.LiveStreamStopped)}}class be{constructor(t){this.IH=[{id:w.L5.H264,extension:"mp4",type:"video/mp4"},{id:w.L5.Hevc,extension:"mp4",type:"video/mp4"}],this.b$=this.IH.find((i=>i.id===t))}get type(){const t=this.b$.codecs?`codecs=${this.b$.codecs}`:"";return`${this.b$.type}; ${t}`}get id(){return this.b$.id}}class Ie{constructor(t,i){this.DO=t,this.KS=i,this.wH={quality:w.ZH.Auto,height:360},this.resizeObserverBinded=!1,this.SH=new dt.x,this.AH=new Vi.X(this.wH),this.PH=30,this.XO=()=>{const t=this.KS.clientHeight;if(this._H(t)&&this.currentQualitySettings.quality===w.ZH.Auto){const i={height:t,quality:w.ZH.Auto};this.setCurrentQualitySettings(i),this.AH.next(i)}}}setCurrentQualitySettings(t){this.wH.quality=t.quality,this.wH.height!==t.height&&(this.wH.height=t.height,this.SH.next())}_H(t){return!this.wH.height||t/this.wH.height*100-100>this.PH}addResizeObserver(){this.resizeObserverBinded=!0,this.DO.on(this.KS,this.XO)}removeResizeObserver(){this.resizeObserverBinded=!1,this.DO.off(this.KS,this.XO)}setQuality(t){t.quality===w.ZH.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:t.height,quality:t.quality}),this.addResizeObserver(),this.XO()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(t)),this.AH.next(this.wH)}get currentQualitySettings(){return this.wH}get onQualityChange(){return this.SH.asObservable()}get onCurrentQuality(){return this.AH.asObservable()}destroy(){this.removeResizeObserver()}}var we=r(6578),Se=r(1418),Ae=r.n(Se);function Pe(t){const i=new(Ae());return i.push(t),i.end(),i.manifest}var _e=r(51),xe=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Te{constructor(t,i){this.Tr=t,this.Pn=i,this.xH=new dt.x,this.SH=new dt.x,this.AH=new dt.x,this.onTrackLoaded=this.xH.asObservable(),this.onQualityChange=this.SH.asObservable(),this.onCurrentQuality=this.AH.asObservable(),this.TH=()=>{this.xH.next()}}kH(t){this.CH=t}EH(t){this.Pn.innerHTML="",t.forEach((t=>{this.Pn.appendChild(t)}))}MH(){return this.LH}BH(t){var i;null===(i=this.LH)||void 0===i||i.remove(),this.LH=null,this.RH=t,this.CH&&this.CH.subtitles&&t&&(this.Pn.childNodes.forEach((t=>{"track"===t.nodeName.toLowerCase()&&t.remove()})),t.isHLSTrack?this.OH(t.file).then((i=>{this.DH(t,i)})):this.DH(t))}DH(t,i){const e=this.Tr.createElement("track");e.src=(0,L.QM)(i)?i:t.file,e.srclang=t.code,e.label=t.title,e.kind="subtitle",e.default=!0,e.addEventListener("load",this.TH,!1),e.addEventListener("loaded",this.TH,!1),this.Pn.appendChild(e),this.LH=e}OH(t){return xe(this,void 0,void 0,(function*(){try{const i=yield we.n.fetchXhttpRequest({requestUrl:t,requestType:"GET"});if(!(0,L.QM)(i))return;const e=Pe(i);if(!(0,l.BZ)(e.segments)||!(0,_e.jv)(e.segments[0].uri))return;return e.segments[0].uri}catch(t){return}}))}}var ke,Ce,Ee;!function(t){t[t.MP4=0]="MP4",t[t.HLS=1]="HLS"}(ke||(ke={}));class Me extends Te{constructor(t,i,e,s,n={},r,o){super(t,s),this.DO=i,this.gl=e,this.fH=r,this.Di=o,this.xU=[],this.VH=null,this.FH=10.13,this.handlerType=ke.MP4,this.NH=this.jH(n)}start(){try{this.$H=new Ie(this.DO,this.gl),this.sA(),this.setQuality(this.fH)}catch(t){(0,s.n)({message:"Mp4SourceHandler_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL,sessionId:this.Di},{extraLogsPercentage:5})}}onQualityChanged(){return this.attachMedia()}setSource(t,i=!1){this.kH(t),this.UH(this.qH(),i)}setQuality(t){this.$H.setQuality(t)}get currentQualitySettings(){return this.$H.currentQualitySettings}attachMedia(){return new Promise((t=>{this.HH(),t()}))}detachMedia(){this.Pn.removeAttribute("src"),this.UH(null)}destroy(){this.$H.destroy(),(0,b.i)(this.xU)}updateSubtitleTrackSource(t){this.BH(t)}getSelectedCaptionTrack(){return this.RH}sA(){const t=this.$H.onCurrentQuality.subscribe((t=>this.AH.next(t))),i=this.$H.onQualityChange.subscribe((()=>this.zH(this.$H.currentQualitySettings.height)));this.xU.push(t,i)}zH(t){this.UH(this.qH()),this.SH.next(t)}WH(t){this.EH(t),this.Pn.load()}qH(){return[...this.GH(),...this.MH()?[this.MH()]:[]]}GH(){if(!this.Pn||!this.CH)return[];const t=[];return this.CH.getSources(this.$H.currentQualitySettings.height,this.NH).forEach((i=>{const e=this.Tr.createElement("source");e.src=i.src,e.type=i.type,t.push(e)})),t}HH(){this.VH&&(this.WH(this.VH),this.VH=null)}UH(t,i=!1){this.VH=t,i&&this.HH()}jH(t){let i;switch(t.os){case V.M.Ios:i=[w.L5.Hevc,w.L5.H264];break;case V.M.Mac:i=t.osVersion>this.FH&&t.browser===le.lI.Safari?[w.L5.Hevc,w.L5.H264]:[w.L5.H264];break;default:i=[w.L5.H264]}return i.map((t=>new be(t)))}}!function(t){t.UnexpectedError="unexpectedError",t.BufferingError="bufferingError",t.FragBuffered="fragBuffered",t.ManifestLoaded="manifestLoaded",t.LevelSwitching="levelSwitching",t.StreamEnded="streamEnded"}(Ce||(Ce={})),function(t){t.Http="http",t.Https="https"}(Ee||(Ee={}));var Le=r(655),Be=r(5720),Re=r(3699);var Oe=r(2857);class De extends Te{constructor(t,i,e,s,n,r,o,h,a){super(t,i),this.Sn=e,this.XH=s,this.fH=n,this.DB=r,this.Ue=o,this.Di=h,this.JH=a,this.QH=new dt.x,this.onHlsEvent=this.QH.asObservable(),this.Tn=[],this.YH=w.ZH.Auto,this.KH=320,this.tz=!1,this.iz=!1,this.ez=!1,this.handlerType=ke.HLS,this.sz=new Vi.X(0),this.nz=!1,this.rz=!1,this.oz=!1,this.Mn=()=>{this.En.off(this.Sn.Events.MEDIA_ATTACHED,this.Mn);const t=this.hz(this.cz);this.En.loadSource(t),this.En.once(this.Sn.Events.MANIFEST_PARSED,this.Ln)},this.Ln=()=>{this.En.off(this.Sn.Events.MANIFEST_PARSED,this.Ln),this.En.on(this.Sn.Events.LEVEL_SWITCHING,this.lz),this.En.on(this.Sn.Events.LEVEL_SWITCHED,this.uz),this.En.on(this.Sn.Events.FRAG_BUFFERED,this.pz),this.En.on(this.Sn.Events.FRAG_LOADING,this.fz),this.En.on(this.Sn.Events.FRAG_LOADED,this.mz),this.En.on(this.Sn.Events.BUFFER_APPENDING,this.vz),this.En.on(this.Sn.Events.BUFFER_APPENDED,this.gz),this.En.on(this.Sn.Events.BUFFER_EOS,this.bz),this.cz=null,this.Bn(),this.Iz(),this.Az(),this.Pz.resolve()},this._z=()=>{this.cz=null,this.Pn.removeEventListener(w.wB.LoadedMetadata,this._z),this.xz.resolve()},this.Iz=()=>{const t=(0,Oe.T_)(this.Tn).map((t=>({videoHeight:t.height,isHD:t.height>=w.gQ,label:t.level.toString()})));this.QH.next({type:Ce.ManifestLoaded,payload:{qualityList:t}})},this.pz=()=>{this.QH.next({type:Ce.FragBuffered})},this.fz=()=>{this.tz=!0},this.mz=()=>{this.tz=!1},this.vz=()=>{this.iz=!0},this.gz=()=>{this.iz=!1},this.bz=()=>{this.QH.next({type:Ce.StreamEnded})},this.kn=(t,i)=>{if(i.details===this.Sn.ErrorDetails.BUFFER_STALLED_ERROR&&(this.tz||this.iz?this.QH.next({type:Ce.BufferingError}):(this.ez||(this.shouldRecoverMediaError()&&this.En.recoverMediaError(),this.Pn.play().then((()=>{this.ez=!1})).catch((()=>{this.ez=!1}))),this.ez=!0)),i.fatal)switch(i.type){case this.Sn.ErrorTypes.NETWORK_ERROR:if(i.details===this.Sn.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.Tz("hls_network_error_manifest_parsing_error_FATAL");if(i.details===this.Sn.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.QH.next({type:Ce.UnexpectedError});if(i.details===this.Sn.ErrorDetails.LEVEL_LOAD_ERROR&&this.sz.next(this.sz.value+1),this.nz)return this.bz(),void(this.nz=!1);this.En.startLoad();break;case this.Sn.ErrorTypes.MEDIA_ERROR:this.En.recoverMediaError();break;default:this.Tz("hls_unexpected_error_FATAL",`type_${i.type}_details_${i.details}`)}else i.type===this.Sn.ErrorTypes.MEDIA_ERROR&&i.details===this.Sn.ErrorDetails.BUFFER_APPENDING_ERROR&&this.Tz("hls_media_error_buffer_appending_error"),i.type===this.Sn.ErrorTypes.NETWORK_ERROR&&i.details===this.Sn.ErrorDetails.MANIFEST_PARSING_ERROR&&this.Tz("hls_network_error_manifest_parsing_error")},this.kz=()=>{this.Tz("hls_video_tag_error",`code_${this.Pn.error.code}_message_${this.Pn.error.message}`)},this.uz=(t,i)=>{this.KH=this.Tn.find((t=>t.level===i.level)).height,this.SH.next(this.currentQualitySettings.height),this.AH.next(this.currentQualitySettings)},this.lz=()=>{this.QH.next({type:Ce.LevelSwitching})},(0,Oe.fh)()&&(this.En=this.Lz()),this.KH=this.fH.height,this.YH=this.fH.quality}start(){}get liveSyncPosition(){if(this.En)return this.En.liveSyncPosition}setSource(t,i=!1){this.rz=this.DB&&!t.isExternalSource,this.En&&this.rz&&(this.oz||(this.oz=!0,this.En.autoLevelCapping=1)),this.Bz=t.id,this.kH(t),this.cz=t,i&&this.attachMedia()}attachMedia(){return this.Pz?this.Pz.promise:this.xz?this.xz.promise:(!this.En&&(0,Oe.fh)()&&(this.En=this.Lz()),new Promise((t=>{if(this.En?this.En.on(this.Sn.Events.ERROR,this.kn):this.Pn.addEventListener(w.wB.Error,this.kz),this.initLiveStreamRetry(),this.cz){const i=this.MH()?[this.MH()]:[];this.EH(i),this.En?this.Rz().then((()=>{t()})):this.Oz().then((()=>{t()}))}else t()})))}detachMedia(){this.Tn=[],this.Pz=void 0,this.xz=void 0,this.En?(this.En.detachMedia(),this.destroy()):(this.Pn.removeAttribute("src"),this.Pn.removeEventListener(w.wB.LoadedMetadata,this._z),this.Pn.removeEventListener(w.wB.Error,this.kz))}setQuality(t){this.YH=t.quality,this.KH=t.height,this.En&&this.Az(),this.SH.next(this.currentQualitySettings.height),this.AH.next(this.currentQualitySettings)}get currentQualitySettings(){return{quality:this.YH,height:this.KH}}onQualityChanged(){return new Promise((()=>{}))}shouldRecoverMediaError(){return!this.JH}destroy(){this.En?(this.Dz(),this.En.destroy(),this.En=null):(this.Pn.removeEventListener(w.wB.LoadedMetadata,this._z),this.Pn.removeEventListener(w.wB.Error,this.kz))}updateSubtitleTrackSource(t){this.BH(t)}getSelectedCaptionTrack(){return this.RH}Rz(){return this.Pz=new re.C,this.En.attachMedia(this.Pn),this.En.once(this.Sn.Events.MEDIA_ATTACHED,this.Mn),this.Pz.promise}Oz(){return this.xz=new re.C,this.Pn.src=this.hz(this.cz),this.Pn.addEventListener(w.wB.LoadedMetadata,this._z),this.xz.promise}Dz(){this.En.off(this.Sn.Events.MEDIA_ATTACHED,this.Mn),this.En.off(this.Sn.Events.MANIFEST_PARSED,this.Ln),this.En.off(this.Sn.Events.ERROR,this.kn),this.En.off(this.Sn.Events.LEVEL_SWITCHING,this.lz),this.En.off(this.Sn.Events.LEVEL_SWITCHED,this.uz),this.En.off(this.Sn.Events.FRAG_BUFFERED,this.pz),this.En.off(this.Sn.Events.FRAG_LOADING,this.fz),this.En.off(this.Sn.Events.FRAG_LOADED,this.mz),this.En.off(this.Sn.Events.BUFFER_APPENDING,this.vz),this.En.off(this.Sn.Events.BUFFER_APPENDED,this.gz),this.En.off(this.Sn.Events.BUFFER_EOS,this.bz)}Bn(){this.En.levels.forEach(((t,i)=>{this.rz&&i>1||this.Tn.push({level:i,height:t.height})}))}Tz(t,i){(0,s.n)({message:t,exception:this.Bz,level:s.D.WARN,callStack:i,sessionId:this.Di},{extraLogsPercentage:5}),this.QH.next({type:Ce.UnexpectedError})}Az(){if(this.YH===w.ZH.Auto)this.En.currentLevel=-1;else try{const t=(0,Oe.VK)(this.Tn,this.KH);this.En.currentLevel=t.level}catch(t){(0,s.n)({message:"HlsSourceHandler_set_quality",exception:t.message,callStack:t.stack,level:s.D.CRITICAL,sessionId:this.Di},{extraLogsPercentage:5})}}hz(t){try{const i=t.getHlsSource(),e=(0,bt.bx)(i);return e&&e.protocol?this.Ue.appendParamsToUrl(i):this.Ue.appendParamsToUrl(`${this.XH}:${i}`)}catch(t){(0,s.n)({exception:t.message,message:"HlsSourceHandler_undefined_sourceMeta",level:s.D.CRITICAL,callStack:t.stack,sessionId:this.Di},{throttle:5,shouldSendMaxLog:!1,extraLogsPercentage:5})}}Lz(){return new this.Sn(Object.assign({},Oe.yt))}initLiveStreamRetry(){var t;null===(t=this.Vz)||void 0===t||t.unsubscribe(),this.Vz=this.sz.pipe(function(t){for(var i,e,s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];var r=null!==(i=Et(s))&&void 0!==i?i:oe.z,o=null!==(e=s[0])&&void 0!==e?e:null,h=s[1]||1/0;return(0,At.e)((function(i,e){var s=[],n=!1,a=function(t){var i=t.buffer;t.subs.unsubscribe(),(0,Re.P)(s,t),e.next(i),n&&c()},c=function(){if(s){var i=new Be.w0;e.add(i);var n={buffer:[],subs:i};s.push(n),Lt(i,r,(function(){return a(n)}),t)}};null!==o&&o>=0?Lt(e,r,c,o,!0):n=!0,c();var d=(0,Pt.x)(e,(function(t){var i,e,n=s.slice();try{for(var r=(0,Le.XA)(n),o=r.next();!o.done;o=r.next()){var c=o.value,d=c.buffer;d.push(t),h<=d.length&&a(c)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(i)throw i.error}}}),(function(){for(;null==s?void 0:s.length;)e.next(s.shift().buffer);null==d||d.unsubscribe(),e.complete(),e.unsubscribe()}),void 0,(function(){return s=null}));i.subscribe(d)}))}(5e3),(0,wt.h)((t=>t.length<3))).subscribe((()=>{this.nz=!0,this.sz.next(0)}))}}var Ve,Fe;!function(t){t.Disabled="disabled",t.Hidden="hidden",t.Showing="showing"}(Ve||(Ve={})),function(t){t.Video="VIDEO",t.Audio="AUDIO"}(Fe||(Fe={}));class Ne{constructor(t,i,e){this.p$=t,this.tm=e,this.KI=!1,this.Fz=!1,this.Nz=Ve.Hidden,this.jz=!1,this.$z=new dt.x,this.Uz=!1,this.qz=new Map([[w.wB.Play,()=>this.zz()],[w.wB.Playing,()=>this.Wz()],[w.wB.Timeupdate,t=>this.Gz(t)],[w.wB.Ended,t=>this.Jz(t)],[w.wB.Seeked,t=>this.Qz(t)],[w.wB.Error,()=>this.Yz()],[w.wB.LoadedMetadata,()=>this.Zz()],[w.wB.Pause,()=>this.tW()],[w.wB.Volumechange,()=>this.iW()],[w.wB.BufferProgress,()=>this.sW()]]),this.nW=t=>{let i=!1;(t.type===w.wB.Timeupdate&&this.rW()||t.type===w.wB.Seeked)&&(i=this.hW(w.wB.Timeupdate));const e=this.qz.get(t.type);(0,L.$K)(e)?e(i):this.$z.next({type:t.type})},this.Jn=Object.values(w.wB),this.volume=i,this.sA()}get currentTime(){return this.p$.currentTime}set currentTime(t){this.Fz?this.p$.currentTime=t:this.cW=t}get duration(){return this.p$.duration}get isPlaying(){return this.KI}get videoEvents(){return this.$z.asObservable()}get volume(){return this.GI}set volume(t){const i=t?t<=1?t:t/100:t;i!==this.GI&&(this.GI=i,void 0!==this.GI&&(this.p$.volume=this.GI,(0,M.Q1)(this.p$,this.GI)))}setUnfreeze(){this.Uz=!0}play(){this.jz=!0,this.dW&&clearTimeout(this.dW),this.dW=setTimeout((()=>{this.$z.next({type:w.wB.Error,payload:{errorMessage:"play_timeout"}})}),25e3),this.p$.play().catch((t=>{(0,s.n)({message:"ContentPlayer_play_promise_catch",exception:t,level:s.D.INFO,sessionId:this.tm.sessionId},{shouldSendMaxLog:!1,pacing:1})}))}pause(){this.dW&&clearTimeout(this.dW),this.p$.pause(),this.KI=!1,this.jz=!1}destroy(){this.Jn.forEach((t=>{this.p$.removeEventListener(t,this.nW)}))}setTrackModes(t){this.Nz=t,this.lW()}setMetaLoaded(t){this.Fz=t}setCrossOriginAttribute(){this.p$.getAttribute("crossorigin")||this.p$.setAttribute("crossorigin","anonymous")}setPoster(t){if(this.p$.nodeName!==Fe.Video)return;const i=t.getThumbnailUrl(this.p$.clientWidth,this.p$.clientHeight);(0,L.QM)(i)&&(this.p$.poster=i)}getCurrentTrack(){return this.p$.textTracks&&0!==this.p$.textTracks.length?this.p$.textTracks[0]:null}sA(){this.Jn.forEach((t=>{this.p$.addEventListener(t,this.nW)}))}zz(){this.jz||!this.tm.isInApp||this.tm.os!==V.M.Android?this.KI=!0:this.pause()}Wz(){this.dW&&clearTimeout(this.dW),this.tm.os===V.M.Ios&&this.Uz&&((0,M.UR)(this.p$),this.Uz=!1),this.lW(),this.$z.next({type:w.wB.Playing})}iW(){this.$z.next({type:w.wB.Volumechange,payload:{isMuted:this.p$.muted}})}Gz(t){this.$z.next({type:w.wB.Timeupdate,payload:{isPlaying:this.KI,isCorruptedCurrentTime:t}})}sW(){this.$z.next({type:w.wB.BufferProgress,payload:{bufferRanges:this.p$.buffered}})}tW(){this.dW&&clearTimeout(this.dW),this.$z.next({type:w.wB.Pause})}Yz(){this.dW&&clearTimeout(this.dW),this.$z.next({type:w.wB.Error,payload:{errorMessage:this.p$.error?this.p$.error.message:""}})}Zz(){this.Fz=!0,(0,L.hj)(this.cW)&&(this.currentTime=this.cW,this.cW=null),this.$z.next({type:w.wB.LoadedMetadata})}Qz(t){this.$z.next({type:w.wB.Seeked,payload:{isCorruptedCurrentTime:t}})}Jz(t){this.$z.next({type:w.wB.Ended,payload:{isCorruptedCurrentTime:t}})}hW(t){return this.tm.os===V.M.Ios&&this.p$.currentTime>this.p$.duration&&((0,M.UR)(this.p$),(0,s.n)({message:"ContentPlayer__CorruptedCurrentTime",callStack:`Event type: ${t}`,level:s.D.WARN},{throttle:10}),!0)}rW(){return this.p$.currentTime-this.p$.duration>.1}lW(){this.p$.textTracks&&0!==this.p$.textTracks.length&&Object.keys(this.p$.textTracks).forEach((t=>{this.Nz===this.p$.textTracks[t].mode&&(this.p$.textTracks[t].mode=this.Nz===Ve.Hidden?Ve.Disabled:Ve.Hidden),this.p$.textTracks[t].mode=this.Nz}))}}const je={height:0,quality:w.ZH.Auto};var $e,Ue=r(3360),qe=r(6153),He=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class ze extends c._{constructor(t,i,e,s,n,r,o={},h,a,c){super(),this.mediator=t,this.Il=i,this.Tr=e,this.gl=s,this.DO=n,this.uW=r,this.b$=o,this.fW=h,this.sq=a,this.fH=c,this.mW=!0,this.PU=!1,this.vW=!1,this.nr=new dt.x,this.PV=.01,this.xU=[],this.gW=t=>{var i;const e={[Ce.LevelSwitching]:w.T$.LevelSwitching,[Ce.StreamEnded]:w.T$.EndOfStream,[Ce.FragBuffered]:w.T$.Buffered,[Ce.BufferingError]:w.T$.Buffering}[t.type];if((0,L.QM)(e))this.mediator.publish(this,e);else{if(t.type===Ce.UnexpectedError)return this.vW=!0,void this.yW();if(t.type===Ce.ManifestLoaded){const e=null===(i=t.payload)||void 0===i?void 0:i.qualityList;this.mediator.publish(this,w.XQ.Loaded,{payload:{qualityList:e,videoMeta:this.bW}}),this.IW.setMetaLoaded(!0)}}},this.wW=()=>{let t;this.currentTrack.activeCues&&this.currentTrack.activeCues.length>0&&(t=this.currentTrack.activeCues[0]),this.playing&&this.mediator.publish(this,k.C[k.C.CaptionUpdate],{payload:t})},this.TH=()=>{this.currentTrack&&(this.currentTrack.mode=this.SW?Ve.Hidden:Ve.Disabled,this.currentTrack.oncuechange=this.wW)},this.AW(),this.PW.appendChild(this.Pn),this.gl.appendChild(this.PW),this.fH=this.fH||je,this._W=new Me(e,this.DO,this.gl,this.Pn,this.b$,this.fH,this.Il.config.sessionId),this.Il.config.os.os===V.M.Ios&&this.Il.services.ViewabilityService.on(this.Pn,((t,i)=>{!i&&t||this.IW.setUnfreeze()}),{threshold:this.PV})}initHlsSourceHandler(t){const i=this.Tr.isHttpsProtocolUsed()?Ee.Https:Ee.Http,e=(0,L.QM)(this.Il.config.bundleID);this.yr=new De(this.Tr,this.Pn,t,i,this.fH,e,this.Il.services.UrlSuffixerService,this.Il.config.sessionId,this.Il.config.browser.browserType===le.lI.Safari)}blurVideoTag(){this.Pn.blur()}xW(){return He(this,void 0,void 0,(function*(){if(this.yr)return!0;const t=yield(0,Oe.zJ)(this.Tr.global);return(0,Oe.fh)()||(0,Oe.vY)(this.Pn)?(this.initHlsSourceHandler(t),this.TW(),this.kW(),!0):(this.mW=!1,(0,s.n)({message:"Hls_not_supported",level:s.D.INFO,sessionId:this.Il.config.sessionId},{extraLogsPercentage:5}),!1)}))}get onVideoEvents(){return this.nr.asObservable()}start(){try{this.IW=new Ne(this.Pn,this.uW,{isInApp:this.Il.config.isInApp,os:this.Il.config.os.os,sessionId:this.Il.config.sessionId}),this.GI=this.IW.volume,this.EW(),this.TW(),this.MW()}catch(t){(0,s.n)({message:"VideoHandler_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL,sessionId:this.Il.config.sessionId},{extraLogsPercentage:5})}}yW(){this.LW=this.currentTime,this.setSource(this.bW,!0,!0),this.BW.attachMedia().then((()=>{this.IW.play()})).catch((t=>{this.vW=!1,this.nr.next(w.wB.Error),(0,s.n)({message:"VideoHandler_hls_error_attach_media",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL,sessionId:this.Il.config.sessionId},{extraLogsPercentage:5})}))}kW(){this.xU.push(this.yr.onHlsEvent.subscribe((t=>this.gW(t))))}EW(){this.RW(this._W)}TW(){this.yr&&this.RW(this.yr)}RW(t){t.start(),this.OW(t)}MW(){this.IW.videoEvents.subscribe((t=>{var i;if(t.payload&&t.payload.isCorruptedCurrentTime)this.BW.handlerType===ke.HLS&&this.yW();else{if(t.type===w.wB.Canplay&&this.sq&&(this.currentTime=this.sq,this.sq=null),this.nr.next(t.type),this.vW&&(this.vW=!1,t.type===w.wB.Playing&&(this.IW.currentTime=this.LW)),t.type===w.wB.Error)return(0,s.n)({message:"VideoHandler_play_error_event",exception:t.payload.errorMessage,level:s.D.WARN,sessionId:this.Il.config.sessionId},{extraLogsPercentage:5}),void this.mediator.publish(this,w.T$.PlayError,{payload:null===(i=t.payload)||void 0===i?void 0:i.errorMessage});this.mediator.publish(this,t.type,{payload:t.payload})}}))}OW(t){this.xU.push(t.onTrackLoaded.subscribe((()=>this.TH())),t.onQualityChange.subscribe((t=>this.onQualityChanged(t))),t.onCurrentQuality.subscribe((t=>{this.mediator.publish(this,w.XQ.CurrentQuality,{payload:t})})))}DW(t,i=!1){return He(this,void 0,void 0,(function*(){if(i)this.VW();else{if(t){if(yield this.xW())return void(this.BW=this.yr)}this.VW()}}))}get width(){return this.PW.getBoundingClientRect().width}get height(){return this.PW.getBoundingClientRect().height}get currentTime(){return this.IW.currentTime}set currentTime(t){this.IW.currentTime=t}forceCurrentTime(t){this.IW.currentTime=t,this.sq=t}get duration(){return this.IW.duration}get volume(){return this.IW.volume}set volume(t){this.IW.volume=t}toggleMute(){if(0===this.IW.volume)return this.GI=this.GI>0?this.GI:.2,void(this.IW.volume=this.GI);this.GI=this.IW.volume,this.IW.volume=0}increaseVolume(t){this.IW.volume+t>1?this.IW.volume=1:this.IW.volume+=t}decreaseVolume(t){this.IW.volume-t<0?this.IW.volume=0:this.IW.volume-=t}get playing(){return this.IW.isPlaying}get isIosFullscreen(){return this.PU}set isIosFullscreen(t){this.PU=t,this.PU&&this.SW?this.FW():this.NW()}get currentQualitySettings(){var t;return null===(t=this.BW)||void 0===t?void 0:t.currentQualitySettings}hide(){(0,M.cn)(this.PW,u.pT)}show(){(0,M.IV)(this.PW,u.pT)}setSource(t,i=!1,e=!1){return He(this,void 0,void 0,(function*(){try{this.bW=t,this.BW&&this.BW.detachMedia();const s=(0,L.QM)(t.hlsFilePath);return yield this.DW(s,e),t&&t.subtitles&&this.IW.setCrossOriginAttribute(),this.Pn.setAttribute("title",t.altText),this.IW.setPoster(t),this.IW.setTrackModes(this.SW?Ve.Hidden:Ve.Disabled),i&&this.IW.setMetaLoaded(!1),this.BW.setSource(t,!0),void this.mediator.publish(this,w.T$.NewVideo)}catch(t){return void(0,s.n)({message:"VideoHandler_set_video_source",exception:t.message,callStack:t.stack,level:s.D.CRITICAL,sessionId:this.Il.config.sessionId},{extraLogsPercentage:5})}}))}setQuality(t){this.BW.setQuality(t)}pause(){this.IW.pause(),this.nr.next(w.wB.Pause)}play(){var t;return this.jW=new re.C,null===(t=this.BW)||void 0===t||t.attachMedia().then((()=>{this.IW.play()})).catch((t=>{this.nr.next(w.wB.Error),(0,s.n)({message:"VideoHandler_public_play_attach_media_error",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL,sessionId:this.Il.config.sessionId},{extraLogsPercentage:5})})),this.jW.promise}hasSubtitles(){return(0,l.BZ)(this.bW.subtitles)}getSubtitles(){return this.bW.subtitles}toggleCaptions(){this.BW.updateSubtitleTrackSource(this.bW.getDefaultSubtitle()),this.SW=!0,this.IW.setTrackModes(Ve.Hidden)}togglePlay(){return this.playing?(this.pause(),!1):(this.play(),!0)}showCaptions(t){var i;void 0===t&&(t=null===(i=this.bW.getDefaultSubtitle())||void 0===i?void 0:i.file);const e=this.bW.subtitles.find((i=>i.file===t));this.BW.updateSubtitleTrackSource(e),this.SW=!0,this.IW.setTrackModes(Ve.Hidden)}hideCaptions(){this.BW.updateSubtitleTrackSource(),this.SW=!1,this.IW.setTrackModes(Ve.Disabled),this.mediator.publish(this,k.C[k.C.CaptionUpdate])}get areCaptionsEnabled(){return this.SW}getSelectedCaption(){return this.BW.getSelectedCaptionTrack()}destroy(){this.BW.destroy(),this.PW.parentNode.removeChild(this.PW),this.IW.destroy()}AW(){if(this.PW=this.Tr.createElementByString(`<cnx class="${u.s6.VideoWrapper}"></cnx>`),this.Pn=this.Tr.createElementByString('<video class="cnx-video-tag"></video>'),this.b$.os===V.M.Ios&&(this.Pn.setAttribute("playsinline",""),this.Pn.setAttribute("webkit-playsinline","")),this.Il.config.isMobile)qe.n.defaultVideoPosterURL=Ue.Q.getDefaultPoster(this.Il.services.UrlSuffixerService),this.Pn.poster=qe.n.defaultVideoPosterURL;else{this.fW&&(this.Pn.tabIndex=0,this.Pn.setAttribute("aria-label","Connatix video player"),this.Pn.setAttribute("role","application"));const t=this.Il.services.GlobalDomUtilsService.createElementByString("<cnx class='cnx-border'></cnx>");this.PW.appendChild(t)}if(this.b$.os===V.M.Android&&((0,L.QM)(this.Il.config.bundleID)||(0,bt.Qq)())){const t=this.Tr.createElementByString('<cnx class="cnx_gpu_fix"></cnx>');this.PW.appendChild(t)}}VW(){this.BW=this._W,this.BW.setQuality({quality:w.ZH.Auto,height:0})}onQualityChanged(t){const i=this.IW.isPlaying;this.BW.handlerType===ke.MP4&&(this.sq=this.currentTime),i&&this.BW.onQualityChanged&&this.BW.onQualityChanged().then((()=>{this.IW.setMetaLoaded(!1),this.IW.play()})),this.mediator.publish(this,w.XQ.Change,{payload:t})}get currentTrack(){return this.IW.getCurrentTrack()}FW(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,k.C[k.C.CaptionUpdate]),this.currentTrack.mode=Ve.Showing)}NW(){if(this.currentTrack){switch(this.currentTrack.mode){case Ve.Showing:case Ve.Hidden:this.SW=!0;break;case Ve.Disabled:this.SW=!1}this.mediator.publish(this,this.SW?k.C[k.C.CaptionOn]:k.C[k.C.CaptionOff])}this.TH()}}class We extends ze{play(){const t=this.BW.liveSyncPosition;return t&&(this.IW.currentTime=t),super.play()}endOfStream(){this.BW.detachMedia()}get hlsSupported(){return this.mW}yW(){this.jW&&this.jW.isPending&&this.jW.reject(),this.BW.detachMedia(),this.mediator.publish(this,w.T$.LiveStreamNotPlayable)}initHlsSourceHandler(t){super.initHlsSourceHandler(t)}}!function(t){t.Replay="replay",t.Next="next",t.Prev="prev"}($e||($e={}));var Ge=r(6404),Xe=r(4467);const Je=new Map([[k.C[k.C.Replay],$e.Replay],[k.C[k.C.Next],$e.Next],[k.C[k.C.Prev],$e.Prev],[k.C[k.C.Play],de.Play],[k.C[k.C.Volume],de.Volume],[k.C[k.C.Pause],de.Pause],[k.C[k.C.Seek],de.Seek],[k.C[k.C.SeekingStart],de.SeekingStart],[k.C[k.C.SeekingStopped],de.SeekingStop],[k.C[k.C.Quality],de.Quality],[k.C[k.C.CaptionOn],de.CaptionOn],[k.C[k.C.CaptionOff],de.CaptionOff],[k.C[k.C.Expand],fe.t.Expand],[k.C[k.C.Collapse],fe.t.Collapse],[k.C[k.C.Close],fe.t.Close],[k.C[k.C.OverlayClick],fe.t.OverlayClick],[fe.t.GeneralUserInteraction,fe.t.GeneralUserInteraction]]),Qe=new Map([[de.Play,O.$u.PlayClick],[de.Pause,O.$u.PauseClick],[$e.Next,O.$u.NextClick],[$e.Prev,O.$u.PreviousClick],[de.Volume,O.$u.VolumeClick],[fe.t.Expand,O.$u.FullScreenClick],[fe.t.Collapse,O.$u.ExitFullScreenClick],[de.CaptionOn,O.$u.SubtitleClick],[de.CaptionOff,O.$u.SubtitleClick],[fe.t.Close,O.$u.CloseClick]]),Ye=new Map([[o.ProtoPlayerCloseButtonMode.Off,Ge.N.Off],[o.ProtoPlayerCloseButtonMode.OnHover,Ge.N.OnHover],[o.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,Ge.N.Off],[o.ProtoPlayerCloseButtonMode.AlwaysOn,Ge.N.AlwaysOn]]),Ke={[ci.ProtoLogoPositionMode.BottomRight]:Xe.q.BottomRight,[ci.ProtoLogoPositionMode.TopLeft]:Xe.q.TopLeft};var Ze=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};function ts(){return Ze(this,void 0,void 0,(function*(){return yield(0,bt.Up)((()=>Ze(this,void 0,void 0,(function*(){return yield r.e("elements.ui").then(r.bind(r,7841))}))))}))}var is=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class es extends c._{constructor(t,i,e,s,n){super(),this.Tr=t,this.ra=i,this.fC=e,this.$W=s,this.UW=n,this.HW=new dt.x}get onUIEvent(){return this.HW.asObservable()}destroy(){this.Yq.destroy()}onResize(t){var i;null===(i=this.Yq)||void 0===i||i.onResize(t)}enterFullscreen(){this.Yq.expand()}exitFullscreen(){this.Yq.collapse()}toggleCaptionButton(t){this.Yq.toggleCaptionState(t)}togglePlaylistControls(t){this.Yq.togglePlaylistControls(t)}toggleExpandButton(t){this.Yq.toggleExpandButtonDisplay(t)}changeState(t){this.Yq.changeState(t)}updateUpNextBox(t,i){this.Yq.updateUpNextBox(t,i)}updateActiveCue(t){this.Yq.updateCaptions(t)}updateDefaultCaption(t){this.Yq.updateDefaultCaptions(t)}updateCurrentVideo(t){this.Yq.updateCurrentVideo(t)}updateCurrentTime(t,i){this.Yq.updateDuration(t,i)}updateBufferedState(){}updateVolume(t){this.Yq.updateVolume(t)}updateQuality(t,i){this.Yq.updateQuality(t,i)}start(t,i,e){return is(this,void 0,void 0,(function*(){const s=yield ts(),n=i?s.LiveUiContent:s.VideoUiContent,{template:r}=new s.VideoTemplate(t,i);this.Yq=new n(this,this.Tr,this.ra,this.fC,this.$W,r,t,this.UW,e),this.rH(),this.Yq.start()}))}rH(){Je.forEach(((t,i)=>{this.subscribe(i,this.Yq,(i=>{const e={type:t,payload:i.payload};this.HW.next(e)}))}))}}var ss=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class ns extends ge{constructor(){super(...arguments),this.zW=!1,this.WW=()=>{this.KU.getCurrentVideoData((()=>{this.ZU.onVideoEvents.pipe((0,wt.h)((t=>t===w.wB.Playing&&!this.zW)),(0,Fi.q)(1),xt((()=>this.zW=!0))).subscribe((()=>{this.Xq.enterLiveStreamStopped(),this.ZU.pause(),this.$q.next(!0)})),this.ZU.play().catch((()=>{}))})),this.ZU.play()},this.GW=()=>{this.Xq.endOfStream(),this.ZU.endOfStream()}}start(){const t=Object.create(null,{start:{get:()=>super.start}});return ss(this,void 0,void 0,(function*(){yield t.start.call(this),this.XW(),this.eH(),this.ZU.hlsSupported?(this.ZU.start(),this.Zq().then((()=>{this.WW(),this.Hq.next(!0)}))):this.Xq.enterLiveNotSupported()}))}destroy(){this.JW(),this.QW(),super.destroy()}XW(){this.subscribe(w.T$.EndOfStream,this.ZU,this.GW),this.subscribe(w.T$.LevelSwitching,this.ZU,(()=>{this.Xq.onEnterBuffering()}))}vH(t){return ss(this,void 0,void 0,(function*(){this.Yq=new es(this.Il.services.GlobalDomUtilsService,this.Il.services.InteractionService,this.Il.services.ResizeObserver,this.gl,this.Il.config.appId),this.rH(),yield this.Yq.start(t,!0,this.Vq)}))}yH(t){this.YW(t)}cH(){}nH(){}eH(){const{preRollBreak:t,postRollBreak:i}=this.zF,e=(0,L.r)(t),s=(0,L.r)(i);this.Xq=new ye(this,this.KU,this.ZU,e,s,this.Il.config.os.os===V.M.Ios,this.zF.videoPosition),super.eH()}Wq(){super.Wq(),this.subscribe(w.T$.LiveStreamNotPlayable,this.ZU,(()=>{clearTimeout(this.KW),this.KW=setTimeout(this.WW,10*F.s_)}))}mH(t,i){this.ZU=new We(this,this.Il,this.Il.services.GlobalDomUtilsService,this.gl,this.Il.services.ResizeObserver,i,t,!0,this.zF.videoPosition)}YW(t){this.JW(),t&&(this.ZW=setInterval((()=>{this.Xq.isInPlayingState()&&(this.GW(),this.JW())}),10*F.s_))}JW(){this.ZW&&(clearInterval(this.ZW),this.ZW=null)}QW(){this.KW&&(clearInterval(this.KW),this.KW=null)}}var rs=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class os extends ne{start(){const t=Object.create(null,{start:{get:()=>super.start}});return rs(this,void 0,void 0,(function*(){try{yield t.start.call(this)}catch(t){(0,s.n)({message:"LiveExperience_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}RU(){this.nO=new ns(this,this.zF,this.app,this.$playerContainer,this.breakPointsHandler.currentBreakpointClass)}HF(){this.kF.isInAdPod()?this.WF((()=>{super.HF(),this.CF.onAdFinished(this.adHandler.linearInImpression,vt.k.LINEAR,this.kF.isInAdPod()),this.nO.show(true)})):(super.HF(),this.nO.show(true))}FU(){super.FU(),this.subscribe(w.d0.NewThumbnail,this.nO,(({payload:{thumbnailUrl:t}})=>{this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(t)}))}}var hs=r(2859);class as{constructor(i){this.experience=i,this.tG=(t,i)=>this.d_.on(t,i),this.iG=(t,i)=>{this.d_.remove(t,i)},this.eG=()=>{this.d_.removeAll()},this.sG=(t,i)=>{this.d_.once(t,i)},this.nG=()=>this.experience.isViewable(),this.rG=t=>{this.experience.setViewableThreshold(t)},this.hG=()=>{this.experience.play()},this.aG=()=>{this.experience.pause()},this.cG=()=>this.experience.getVolume(),this.dG=t=>{this.experience.setVolume(t)},this.hs=()=>{this.experience.triggerDestroy()},this.FR=()=>{this.experience.disableAdvertising()},this.lG=()=>{this.experience.enableAdvertising()},this.uG=()=>{this.experience.enableFloatingMode()},this.pG=()=>{this.experience.disableFloatingMode()},this.fG=()=>this.experience.isFloatingModeEnabled(),this.kD=t=>{this.experience.setFloatingSettings(t)},this.vG=(t,i)=>this.experience.setLineItemMetadata(t,i),this.getFloatingSettings=()=>this.experience.getFloatingSettings(),this.gG=t=>{this.experience.setCustomMacros(t)},this.yG=t=>{this.experience.setAmpUserConsent(t)},this.bG=i=>{t.n.CONNECTION_TYPE=i},this.IG=t=>{this.experience.updateJsQueryTargeting(t)},this.wG=t=>{this.experience.removeJsQueryTargeting(t)},this.SG=()=>t.n.CONNECTION_TYPE,this.AG=()=>this.experience.getApiConfig(),this.PG=()=>this.experience.getSessionDataConfig(),this.d_=new hs.Q}trigger(t,i){this.d_.trigger(t,i)}setDestroyed(){this.trigger(v.Km.Removed)}getApiMethods(){return{on:this.tG,remove:this.iG,removeAll:this.eG,once:this.sG,isViewable:this.nG,setViewableThreshold:this.rG,play:this.hG,pause:this.aG,getVolume:this.cG,setVolume:this.dG,disableAdvertising:this.FR,enableAdvertising:this.lG,enableFloatingMode:this.uG,disableFloatingMode:this.pG,isFloatingModeEnabled:this.fG,setFloatingSettings:this.kD,getFloatingSettings:this.getFloatingSettings,setMacros:this.gG,setAmpUserConsent:this.yG,destroy:this.hs,updateConnectionType:this.bG,getConnectionType:this.SG,updateJsQueryTargeting:this.IG,removeJsQueryTargeting:this.wG,setLineItemMetadata:this.vG,getApiConfig:this.AG,getSessionDataConfig:this.PG}}}class cs extends as{constructor(){super(...arguments),this._G=()=>this.experience.type,this.wn=()=>this.experience.getSize(),this.xG=(t,i)=>{this.experience.setSize(t,i)}}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getPlayerType:this._G,getSize:this.wn,setSize:this.xG})}}class ds extends cs{}var ls=r(2300),us=r(1e3),ps=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class fs extends Bi{constructor(){super(...arguments),this.events=Object.assign(Object.assign({},v.Km),Oi),this.TG=!1,this.kG=!1,this.CG=!1,this.EG=t=>{"max-height"===t.propertyName&&(this.$experienceContainer.removeEventListener("transitionend",this.EG),this.handleClose())}}RF(){var t,i;return ps(this,void 0,void 0,(function*(){const e=!(!(null===(t=this.floatingModule)||void 0===t?void 0:t.isInFloating)&&!(null===(i=this.alwaysFloatingModule)||void 0===i?void 0:i.isInFloating));return new((yield Mi()).OutstreamAdHandler)(e,this.CF.isAdvertisingDisabled,this.zF,this.rl,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.kF,this.app,this._appSettings,this.Ue,$.g.None)}))}MG(){this.adHandler&&this.adHandler.linearInImpression?this.TG=!0:this.BG()}BG(){this.CF.onContentStop(),this.zF.outstreamSettings.endAdBreakPolicy===ci.ProtoOutstreamEndAdBreakPolicyEnum.Hide&&this.OG(!0),this.mediator.publish(this,Oi.AdCycleComplete)}DG(){return{logoPosition:this.zF.logoPosition,logoUrl:this.zF.logoUrl,isCloseButton:this.zF.isCloseButton,closeButtonMode:this.zF.closeButtonMode,backgroundColor:this.zF.outstreamSettings.houseScreenBackgroundColor,uiComponentsVisibility:{expandButton:this.zF.uiComponentsVisibility.expandButton&&this.app.config.os.os!==V.M.Ios}}}VG(){return ps(this,void 0,void 0,(function*(){let t;try{t=yield ts()}catch(t){throw t}const{UiOutstream:i,OutstreamTemplate:e}=t,s=this.DG(),n=new e(s).template;this.FG=new i(this,this.$playerContainer,this.app.services.GlobalDomUtilsService,this.app.services.InteractionService,s,n),this.subscribe(k.C[k.C.Close],this.FG,(()=>{this.mediator.publish(this,Ni.CloseButtonClicked),this.handleClose()})),this.subscribe(k.C[k.C.Expand],this.FG,(()=>{this.adHandler.enterFullScreen()})),this.subscribe(k.C[k.C.Collapse],this.FG,(()=>{this.adHandler.exitFullscreen()}))}))}NG(t){this.CG&&((0,M.IV)(this.$experienceContainer,u.s6.Collapsed),this.mediator.publish(this,Oi.Collapsed,{payload:!1}),this.CG=!1,this.wF(t))}OG(t=!1){if(!this.CG){if(t){const t=setTimeout((()=>{this.$experienceContainer.removeEventListener("transitionend",this.EG),this.handleClose()}),1e3);this.$experienceContainer.addEventListener("transitionend",(i=>{clearTimeout(t),this.EG(i)}))}(0,M.cn)(this.$experienceContainer,u.s6.Collapsed),this.mediator.publish(this,Oi.Collapsed,{payload:!0}),this.CG=!0,this.IF()}}$G(){this.$experienceContainer.style.maxHeight=`${this.$playerContainer.clientHeight}px`}UG(){this.FG&&this.FG.hide()}qG(){this.FG&&this.FG.show()}handleClose(){this.triggerDestroy()}vB(){super.vB(),this.$G()}UF(t=!1){super.UF(t),this.TG&&this.BG()}FD(t,i=!1){super.FD(t,i),!this.kG&&t&&(this.kG=!0,this.HG())}HF(){this.kF.isInAdPod()?this.WF((()=>{this.CF.onAdFinished(this.adHandler.linearInImpression,vt.k.LINEAR,this.kF.isInAdPod()),super.HF(),this.qG(),this.kF.setNewBreak(ci.ProtoAdSlotsEnum.MidRoll)})):(super.HF(),this.kF.setNewBreak(ci.ProtoAdSlotsEnum.MidRoll),this.qG())}$F(){super.$F(),this.UG()}addPlayerSize(){super.addPlayerSize(),this.zF.playerSize.responsive?this.$playerWrapper.appendChild(this.nN()):this.setFixedSize(this.$playerWrapper)}iN(){super.iN()}HG(){var t;if(this.zF.adPlaybackMode===ci.ProtoAdPlaybackMode.ScrollToPlay&&!this.kG)return;this.SF(ci.ProtoAdSlotsEnum.MidRoll);null===(t=this.adHandler)||void 0===t||t.contentPlaybackStateChanged(true),this.CF.contentPlaybackStateChanged(true)}xF(){this.vF(yt.I.Standalone)}zG(){}start(){const t=Object.create(null,{start:{get:()=>super.start}});var i,e;return ps(this,void 0,void 0,(function*(){try{yield t.start.call(this),this.YF(),this.adHandler?(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.zF.soundMode===ci.ProtoPlayerSoundMode.On?1:0,this.zF.uiComponentsVisibility.expandButton&&this.app.config.os.os!==V.M.Ios,!1),this.adHandler.enablePrefetchForLinearity(vt.k.LINEAR),this.adHandler.initFullScreen(),this.CF.forceRecheck(),null===(i=this.adHandler)||void 0===i||i.onVpaidEvent.subscribe((t=>{if(t.type===N.fI.AdImpression){const{clientWidth:i,clientHeight:e}=t.payload.payload.selectedAdSlot;this.NG({width:i,height:e})}})),null===(e=this.adHandler)||void 0===e||e.onLinearUiComponentEvent.subscribe((t=>{switch(t.type){case k.C.Volume:const{volume:i}=t.payload;this.dB(i);break;case k.C.Expand:this.expand();break;case k.C.Collapse:this.collapse()}}))):this.OG(),this.HG(),this.subscribe(z,this.CF,(()=>{this.MG()})),this.subscribe(W,this.CF,(()=>{this.MG()})),this.zF.outstreamSettings.initialRendering===ci.ProtoOutstreamInitialRenderingEnum.ExpandWithAd&&(this.OG(),(0,M.Tp)(this.$playerContainer)),(0,M.cn)(this.$experienceContainer,u.Gj.Collapsable),this.$G(),this.zF.outstreamAdAsContent||(yield this.VG())}catch(t){(0,s.n)({message:"Outsream_start",exception:t.message,callStack:t.stack,level:s.D.CRITICAL})}}))}getVolume(){if(this.adHandler)return this.adHandler.getLinearVolume()}get currentTime(){return 0}get duration(){return 0}destroy(){super.destroy(),this.FG&&this.FG.destroy()}expand(){var t;null===(t=this.FG)||void 0===t||t.getComponent(ls.r.ExpandButton).setState(us.q.expand)}collapse(){var t;null===(t=this.FG)||void 0===t||t.getComponent(ls.r.ExpandButton).setState(us.q.collapse)}}class ms extends cs{constructor(t){super(t),this.experience=t,this.WG=()=>this.experience.getVideoDetails(),this.GG=()=>this.experience.getPlaylistId(),this.XG=()=>this.experience.getPlaylistDetails(),this.JG=()=>this.experience.getAllMetadata(),this.QG=t=>this.experience.setPlaylistDetails(t),this.YG=()=>this.experience.currentTime,this.KG=t=>{this.experience.setVideoPosition(t)},this.ZG=()=>this.experience.duration,this.tX=t=>{this.experience.toggleFullscreen(t)},this.iX=t=>{this.experience.toggleCaptions(t)},this.eX=()=>this.experience.getSubtitles(),this.sX=t=>{t&&t.file?this.experience.showCaptions(t.file):this.experience.hideCaptions()},this.nX=t=>{this.experience.toggleExpandButton(t)},this.rX=()=>this.experience.getQuality(),this.oX=t=>{this.experience.setQuality(t)},this.hX=()=>{this.experience.setAutoQuality()},this.aX=()=>this.experience.getAvailableQualities(),this.cX=()=>{this.experience.nextVideo()},this.dX=()=>{this.experience.prevVideo()},this.lX=t=>{this.experience.setPreRollBreak(t)},this.uX=t=>{this.experience.setPostRollBreak(t)},this.pX=()=>this.experience.getVideoIndex(),this.fX=t=>{this.experience.setVideoIndex(t)}}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getVideoDetails:this.WG,getVideoCurrentPosition:this.YG,setVideoPosition:this.KG,getVideoDuration:this.ZG,toggleFullscreen:this.tX,toggleSubtitles:this.iX,getSubtitles:this.eX,setSubtitle:this.sX,toggleFullscreenButton:this.nX,getPlaylistId:this.GG,getPlaylistDetails:this.XG,getAllMetadata:this.JG,setPlaylistDetails:this.QG,getQuality:this.rX,setQuality:this.oX,setAutoQuality:this.hX,getAvailableQualities:this.aX,nextVideo:this.cX,prevVideo:this.dX,setPreRollBreak:this.lX,setPostRollBreak:this.uX,getVideoIndex:this.pX,setVideoIndex:this.fX})}}class vs{get template(){return`<cnx class="cnx-video-title">\n                <cnx class="cnx-ui-btn cnx-d-sm-none cnx-pinned-close-button">[[${ls.r.PinnedCloseButton}]]</cnx>\n                [[${ls.r.PinnedTitle}]]\n            </cnx>`.trim()}}var gs=r(2823);class ys extends gs.${constructor(){super(...arguments),this.isAttachedToDom=()=>!!this.$uiContainer.parentNode}ba(t,i,e){if(t===ls.r[ls.r.PinnedCloseButton])this.mediator.publish(this,Je.get(k.C[k.C.Close]))}updateCurrentVideo(t){const i=this.getComponent(ls.r.PinnedTitle);i&&i.updateTitle(t)}getComponent(t){return super.getComponent(t)}onResize(t){(0,M.IV)(this.$uiContainer,this.Vq),(0,M.cn)(this.$uiContainer,t),this.Vq=t}destroy(){this.isAttachedToDom()&&super.destroy()}}var bs=r(3442),Is=r(6019);class ws extends Is.Y{constructor(t,i,e,s,n){super(t,i,e,s.template,n),this.mX=s}updateTitle(t){const{clickUrl:i,title:e}=t;if(i){(0,M.Kk)(this.Oo),this.Oo.href=i;const t=this.Oi.isURLSameDomainToTop(i);this.Oo.target=t?le.bS.Top:le.bS.Blank,this.Oo.setAttribute("title",i)}else this.Oo.removeAttribute("title");(0,L.QM)(e)&&(0,M.jG)(this.vX(e),this.Oo)}vX(t){(0,M.bX)(this.Oo.children[0]);const i=this.mX.textTemplate(t);return this.Oi.createElementByString(i)}}class Ss{get template(){return'<a class="cnx-pinned-title">\n        </a>'.trim()}textTemplate(t){return`<cnx class="pinned-title-text">\n            <cnx class="close-button-slot"></cnx>\n            ${t}\n        </cnx>`.trim()}}class As extends bs.A{constructor(){super(...arguments),this.na={[ls.r.PinnedTitle]:t=>new ws(t,this.Oi,this.ra,new Ss,this.mo.isMobile)},this.oa=t=>i=>{const e=this.na[t];if(e)return e(i)}}createComponent(t,i){return this.oa(t)(i)||super.createComponent(t,i)}}var Ps=r(5675),_s=r(8657),xs=r(5530),Ts=r(7945);function ks(t){try{return"customElements"in t?t.CustomElementRegistry.toString().indexOf("[native code]")>-1?"native_method":"polyfill":"not_supported"}catch(t){return"error"}}function Cs(t){try{return t.document.head.attachShadow?t.document.head.attachShadow.toString().indexOf("[native code]")>-1?"native_method":"polyfill":t.document.head.createShadowRoot?"deprecated_method":"not_supported"}catch(t){return"error"}}var Es=r(5919),Ms=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class Ls{constructor(t,i,e,s,n){this.$W=t,this.wh=i,this.tm=e,this.fC=s,this.ha=n,this.xU=[],this.HW=new dt.x,this.Sy=()=>{var t;this.yX.updateWidth(this.$W.clientWidth),null===(t=this.wX)||void 0===t||t.onResize(this.yX.currentBreakpointClass)},this.pa=t=>{var i;null===(i=this.wX)||void 0===i||i.onViewabilityCallback(t)},this.yX=new ot(this.$W,vi,u.Nq)}get onUIEvent(){return this.HW.asObservable()}destroy(){(0,b.i)(this.xU),this.SX()}enterFullscreen(){var t;null===(t=this.wX)||void 0===t||t.expand()}exitFullscreen(){var t;null===(t=this.wX)||void 0===t||t.collapse()}toggleCaptionButton(t){}togglePlaylistControls(t){var i;null===(i=this.wX)||void 0===i||i.togglePlaylistControls(t)}toggleExpandButton(t){}changeState(t){var i;const e={[w.Ez.PlayingState]:Es.x.Playing,[w.Ez.PausedState]:Es.x.Paused,[w.Ez.StoppedState]:Es.x.Stopped,[w.Ez.BufferingState]:Es.x.Buffering,[w.Ez.PrerollState]:Es.x.Preroll,[w.Ez.PostrollState]:Es.x.Postroll,[w.Ez.HiddenState]:Es.x.Hidden}[t];(0,L.$K)(e)&&(null===(i=this.wX)||void 0===i||i.changeState(e))}updateUpNextBox(t,i){var e;null===(e=this.wX)||void 0===e||e.updateUpNextBox(t,i)}updateActiveCue(t){var i;null===(i=this.wX)||void 0===i||i.updateActiveCaptions(t)}updateDefaultCaption(t){var i;null===(i=this.wX)||void 0===i||i.updateDefaultCaption(t)}updateCurrentVideo(t){var i;null===(i=this.wX)||void 0===i||i.updateCurrentVideoMetadata(t)}updateCurrentTime(t,i){var e;null===(e=this.wX)||void 0===e||e.updateDuration(t,i)}updateBufferedState(t){var i;null===(i=this.wX)||void 0===i||i.updateBufferedState(t)}updateVolume(t){var i;null===(i=this.wX)||void 0===i||i.changeVolume(100*t)}updateQuality(t,i){var e;null===(e=this.wX)||void 0===e||e.setCurrentQuality(t,i)}updateFloatingState(t){var i;null===(i=this.wX)||void 0===i||i.updateFloatingState(t)}updateCloseButtonMode(t,i){var e;null===(e=this.wX)||void 0===e||e.updateCloseButtonMode(t,i)}start(){return Ms(this,void 0,void 0,(function*(){try{const t=yield this.PX();this.wX=new t(this.$W,this.tm,this.fC),this.wX.render()}catch(i){let e="";if((0,L.VZ)(i)){const{message:t,stack:s}=i;e=JSON.stringify({message:t,stack:s})}const s=JSON.stringify(Object.assign(Object.assign({},{canUseCustomElements:ks(t=this.wh),canUseShadowDOM:Cs(t)}),{error:e}));throw new Error("LIT_UI_ERROR:"+s)}var t;this._X(),this.yX.updateWidth(this.$W.clientWidth),this.wX.onResize(this.yX.currentBreakpointClass),this.TX()}))}_X(){this.wX&&(this.xU.push(this.wX.onPause().subscribe((()=>this.$T({type:de.Pause}))),this.wX.onPlay().subscribe((()=>this.$T({type:de.Play}))),this.wX.onNext().subscribe((()=>this.$T({type:$e.Next}))),this.wX.onPrev().subscribe((()=>this.$T({type:$e.Prev}))),this.wX.onOverlayClick().subscribe((()=>this.$T({type:fe.t.OverlayClick}))),this.wX.onVolumeChange().subscribe((t=>{(0,L.$K)(t.isUiTriggered)&&!t.isUiTriggered||this.$T({type:de.Volume,payload:{volume:t.payload,isFinal:t.isFinal}})})),this.wX.onFullScreenToggle().subscribe((t=>t.isUiTriggered&&this.$T({type:t.payload?fe.t.Expand:fe.t.Collapse}))),this.wX.onSeek().subscribe((t=>{this.$T({type:de.Seek,payload:{seekedTime:t}})})),this.wX.onSeekingStart().subscribe((()=>{this.$T({type:de.SeekingStart})})),this.wX.onSeekingEnd().subscribe((()=>{this.$T({type:de.SeekingStop})})),this.wX.onCaptionUpdate().subscribe((t=>{if(!(0,L.$K)(t.isUiTriggered)||t.isUiTriggered){if(t.payload)return void this.HW.next({type:de.CaptionOn,payload:{captionUrl:t.payload}});this.HW.next({type:de.CaptionOff})}})),this.wX.onCloseClick().subscribe((()=>{this.$T({type:fe.t.Close})})),this.wX.onQualityChange().subscribe((t=>{this.HW.next({type:de.Quality,payload:{quality:{height:t,quality:t>0?w.ZH.Strict:w.ZH.Auto}}})}))),this.yX.updateWidth(this.$W.clientWidth),this.wX.onResize(this.yX.currentBreakpointClass),this.TX())}kX(t){const i=Qe.get(t.type);i&&(t.type!==de.Volume||t.payload.isFinal)&&this.CX({type:fe.t.GeneralUserInteraction,payload:{type:i}})}PX(){var t;return Ms(this,void 0,void 0,(function*(){if(yield(0,bt.Up)((()=>Ms(this,void 0,void 0,(function*(){return(0,Ps.Z)(this.EX(),window,this.wh)})))),!(null===(t=this.wh.cnxAsyncChunks)||void 0===t?void 0:t.litUI))throw new Error("lit bundle not found");return this.wh.cnxAsyncChunks.litUI}))}EX(){return function(){const t=(0,i.A)(null!==e.o&&void 0!==e.o?e.o:_s.o.connatix);return e.q===xs.b.Standalone?`${t}lit.ui.standalone.js`:Ts.x?`${t}lit.ui.js`:`${t}lit.ui.es5.js`}()}TX(){this.fC.on(this.$W,this.Sy),this.ha.on(this.$W,this.pa,{threshold:.01})}SX(){var t;null===(t=this.fC)||void 0===t||t.off(this.$W,this.Sy),this.ha.off(this.$W,this.pa)}$T(t){this.kX(t),this.HW.next(t)}CX(t){this.HW.next(t)}}var Bs=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};const Rs=168,Os=91;class Ds extends ge{constructor(){super(...arguments),this.MX=!1,this.A_=o.ProtoQuartilesEnum.Start,this.LX=new Map}start(t){const i=Object.create(null,{start:{get:()=>super.start}});return Bs(this,void 0,void 0,(function*(){yield i.start.call(this,t),this.$q.next(!0),this.ZU.start();try{yield this.Zq()}catch(t){}finally{this.eH()}this.Hq.next(!0)}))}getCurrentVideoIndex(){return this.KU.currentVideoIndex}getPlaylistLength(){return this.KU.length}vH(t){return Bs(this,void 0,void 0,(function*(){t=Object.assign(Object.assign({},t),{isInApp:(0,L.QM)(this.Il.config.bundleID)});const i=`template_${this.Il.config.appId}`;if(t.enableNewUI){const e={isMobile:this.Il.config.isMobile,isAlwaysDisplayControls:this.zF.alwaysDisplayControls,templateUniqueID:i,isFullScreenButtonEnabled:t.uiComponentsVisibility.expandButton,isPinned:t.isPinned,closeButtonMode:Ye.get(t.closeButtonMode),floatingCloseButtonMode:Ye.get(t.floatingCloseButtonMode),iconsColor:this.zF.iconsColor,tooltipTextColor:this.zF.tooltipTextColor,tooltipBackgroundColor:this.zF.tooltipBackgroundColor,accentColor:this.zF.accentColor,hasUpNext:t.hasUpNext,logoUrl:this.zF.logoUrl,symbolUrl:this.zF.symbolUrl,logoPosition:Ke[this.zF.logoPosition],isAutoplay:this.zF.playbackMode===o.ProtoPlayerPlaybackModeEnum.Autoplay,isScrollToPlay:this.zF.playbackMode===o.ProtoPlayerPlaybackModeEnum.ScrollToPlay,isClickToPlay:this.zF.playbackMode===o.ProtoPlayerPlaybackModeEnum.ClickToPlay,playlistLength:this.KU.length,shouldShowCaptions:this.zF.closedCaptionDefault,shouldShowVideoTitle:this.zF.showVideoTitle};this.Yq=new Ls(this.gl,this.zF.global,e,this.Il.services.ResizeObserver,this.Il.services.ViewabilityService)}else this.Yq=new es(this.Il.services.GlobalDomUtilsService,this.Il.services.InteractionService,this.Il.services.ResizeObserver,this.gl,i);t.isPinned&&this.BX(t),this.rH(),yield this.Yq.start(t,!1,this.Vq)}))}BX(t){t=Object.assign(Object.assign({},t),{isInApp:(0,L.QM)(this.Il.config.bundleID)});const i=new vs;this.Kq=new ys(this,this.gl.parentElement,this.Il.services.GlobalDomUtilsService,i.template,new As(this.Il.services.GlobalDomUtilsService,this.Il.services.InteractionService,this.gl,t))}floatingChanged(t){var i;null===(i=this.Kq)||void 0===i||i.destroy(),t&&(this.BX(super.pH()),this.KU.getCurrentVideoData((t=>{var i;null===(i=this.Kq)||void 0===i||i.updateCurrentVideo(t)})))}updateFloatingState(t){var i,e;this.Yq&&(null===(e=(i=this.Yq).updateFloatingState)||void 0===e||e.call(i,t))}updateCloseButtonMode(t,i){var e,s;null===(s=null===(e=this.Yq)||void 0===e?void 0:e.updateCloseButtonMode)||void 0===s||s.call(e,t,Ye.get(i))}onEnterCuePoint(){this.Xq.onEnterCuePoint()}onExitCuePoint(){this.Xq.onExitCuePoint()}yH(t){this.zF.upNextMode===ci.ProtoPlayerUpNextMode.Next&&this.ZU.duration-this.ZU.currentTime<=6&&!this.MX&&(this.MX=!0,this.KU.getVideoData(this.KU.nextVideoIndex,(t=>{const i=t.getThumbnailUrl(Rs,Os);this.Yq.updateUpNextBox(i,t.title)}))),this.RX(this.ZU.currentTime,this.ZU.duration)}cH(){this.MX=!1,this.A_=o.ProtoQuartilesEnum.Start}nH(){switch(this.zF.upNextMode){case ci.ProtoPlayerUpNextMode.Loop:this.OX();break;case ci.ProtoPlayerUpNextMode.Next:this.KU.isNextVideoCurrentVideo()?this.OX():(this.Gq.streamFormat=ce.Autochain,this.DX());break;case ci.ProtoPlayerUpNextMode.Stop:this.Xq.stop(),this.Yq.changeState(w.Ez.ReplayState)}}eH(){const{preRollBreak:t,postRollBreak:i}=this.zF,e=(0,L.r)(t),s=(0,L.r)(i);this.Xq=new ae(this,this.KU,this.ZU,e,s,this.Il.config.os.os===V.M.Ios,this.zF.videoPosition),super.eH()}rH(){super.rH(),this.subscriptions.push(this.Yq.onUIEvent.subscribe((t=>{switch(t.type){case $e.Next:this.mediator.publish(this,d.Uh.UserInteraction,{payload:{playback:!0,clickedNext:!0}}),this.DX(),this.Gq.streamFormat=ce.UserInitiated;break;case $e.Replay:this.mediator.publish(this,d.Uh.UserInteraction,{payload:{playback:!0}}),this.OX();break;case $e.Prev:this.mediator.publish(this,d.Uh.UserInteraction,{payload:{playback:!0,clickedPrev:!0}}),this.VX()}})))}mH(t,i){this.ZU=new ze(this,this.Il,this.Il.services.GlobalDomUtilsService,this.gl,this.Il.services.ResizeObserver,i,t,!0,this.zF.videoPosition,this.fH)}NX(t,i){return i&&t?Math.floor((0,It.dQ)(0,i,0,4,t)):o.ProtoQuartilesEnum.Start}RX(t,i){const e=this.NX(t,i);e>o.ProtoQuartilesEnum.Start&&e!==this.A_&&(this.LX.get(e)||(this.mediator.publish(this,Di.ContentQuartiles,{payload:e}),this.LX.set(e,!0)),this.A_=e)}VX(){this.setVideo(this.KU.prevVideoIndex,!0),this.Gq.streamFormat=ce.UserInitiated,this.ZU.forceCurrentTime(0)}DX(){this.setVideo(this.KU.nextVideoIndex),this.ZU.forceCurrentTime(0)}kq(t=!0){var i;super.kq(t),t&&(null===(i=this.Yq)||void 0===i||i.updateBufferedState(null)),this.LX.clear()}OX(){this.Xq.replay(),this.kq(!1)}}class Vs extends ne{constructor(){super(...arguments),this.jX={[B.d.nextVideo]:()=>{this.wM.mediaClick.next({type:C.$.NextClick}),this.nextVideo()},[B.d.previousVideo]:()=>{this.wM.mediaClick.next({type:C.$.PreviousClick}),this.prevVideo()},[B.d.toggleFullscreen]:()=>{this.toggleFullscreen()?this.wM.mediaClick.next({type:C.$.FullScreenClick}):this.wM.mediaClick.next({type:C.$.ExitFullScreenClick})},[B.d.toggleCaptions]:()=>{this.wM.mediaClick.next({type:C.$.SubtitleClick}),this.toggleCaptions()},[B.d.togglePlay]:()=>{this.togglePlay()?this.wM.mediaClick.next({type:C.$.PlayClick}):this.wM.mediaClick.next({type:C.$.PauseClick})},[B.d.toggleMute]:()=>{0===this.nO.volume?this.wM.mediaClick.next({type:C.$.UnmuteClick}):this.wM.mediaClick.next({type:C.$.MuteClick}),this.toggleMute()},[B.d.increaseVolume]:()=>{this.wM.mediaClick.next({type:C.$.VolumeClick}),this.increaseVolume(.1)},[B.d.decreaseVolume]:()=>{this.wM.mediaClick.next({type:C.$.VolumeClick}),this.decreaseVolume(.1)},[B.d.seekForward]:()=>this.seekForward(5),[B.d.seekBackward]:()=>this.seekBackward(5),[B.d.seek0Percent]:()=>this.seekPercentage(0),[B.d.seek10Percent]:()=>this.seekPercentage(10),[B.d.seek20Percent]:()=>this.seekPercentage(20),[B.d.seek30Percent]:()=>this.seekPercentage(30),[B.d.seek40Percent]:()=>this.seekPercentage(40),[B.d.seek50Percent]:()=>this.seekPercentage(50),[B.d.seek60Percent]:()=>this.seekPercentage(60),[B.d.seek70Percent]:()=>this.seekPercentage(70),[B.d.seek80Percent]:()=>this.seekPercentage(80),[B.d.seek90Percent]:()=>this.seekPercentage(90)}}nextVideo(){let t=this.nO.getCurrentVideoIndex();t+1>=this.nO.getPlaylistLength()?this.changeVideo(0,!1):this.changeVideo(++t,!1)}prevVideo(){let t=this.nO.getCurrentVideoIndex();0!==t?this.changeVideo(--t,!1):this.changeVideo(this.nO.getPlaylistLength()-1,!1)}getVideoIndex(){return this.nO.getCurrentVideoIndex()}setVideoIndex(t){const i=this.nO.getPlaylistLength();if(t>=i||!(0,L.r)(t+1))throw new Error(`ELEMENTS JS API: Index [${t}] is out of bounds! Please provide a valid video index [0 - ${i}]!`);this.changeVideo(t)}destroy(){this.unsubscribeAll(this.LU),super.destroy()}setVideoPosition(t){if(t>this.duration||!(0,L.r)(t)&&0!==t)throw new Error(`ELEMENTS JS API: The timestamp provided [${t}] is out of bounds! Please provide a valid timestamp [0 - ${this.duration}]!`);this.currentTime=t}seekForward(t){this.currentTime+t>this.duration?this.currentTime=this.duration:this.currentTime+=t}seekBackward(t){this.currentTime-t<0?this.currentTime=0:this.currentTime-=t}seekPercentage(t){this.currentTime=this.duration/100*t}cN(t){const i=this.jX[t];i&&i()}HF(){this.kF.isInAdPod()?this.WF((()=>{super.HF(),this.CF.onAdFinished(this.adHandler.linearInImpression,vt.k.LINEAR,this.kF.isInAdPod());this.nO.show(!0)})):(super.HF(),this.nO.show(this.AU),this.AU=!0)}vB(){super.vB(),this.BU&&this.$X(),this.LU&&this.LU.onResize(this.$experienceContainer.clientWidth)}generateHTML(){super.generateHTML(),this.zF.gallery&&this.UX()}RU(){this.nO=new Ds(this,this.zF,this.app,this.$playerContainer,this.breakPointsHandler.currentBreakpointClass)}JF(){super.JF(),this.subscribe(st,this.CF,(()=>{this.nO.onEnterCuePoint()})),this.subscribe(nt,this.CF,(()=>{this.nO.onExitCuePoint()}))}$X(){this.zF.gallery.orientation===ci.ProtoGalleryOrientationEnum.Landscape&&(0,M.T7)(this.BU,{height:`${this.$playerWrapper.clientHeight}px`})}UX(){this.BU=this.app.services.GlobalDomUtilsService.createElementByString('<cnx class="cnx-g-container" role="group" aria-label="Video playlist"></cnx>'),this.$experienceContainer.appendChild(this.BU);const t=this.zF.gallery.orientation===ci.ProtoGalleryOrientationEnum.Landscape?u.s6.GalleryLandscape:u.s6.GalleryPortrait;(0,M.cn)(this.$experienceContainer,t)}}class Fs extends I{constructor(){super(...arguments),this.iO="cnx-el"}createExperience(t,i){t.isInStreamType()?(this.experience=new Vs(this,i,this.app.services.UrlSuffixerService,this.jE,this.tf,this.wM,this.rl,this.$R),this.experienceApi=new ms(this.experience),this.rl.playerType=a.e.Video):t.isLiveType()?(this.experience=new os(this,i,this.app.services.UrlSuffixerService,this.jE,this.tf,this.wM,this.rl,this.$R),this.experienceApi=new ms(this.experience),this.rl.playerType=a.e.Live):(this.experience=new fs(this,i,this.app.services.UrlSuffixerService,this.jE,this.tf,this.wM,this.rl,this.$R),this.experienceApi=new ds(this.experience),this.rl.playerType=a.e.Outstream)}isSupportedBreakpoint(t){return!0}subscribeToEvents(){super.subscribeToEvents(),this.playerModel.html&&this.subscribe(Di.MediaMetaUpdate,this.experience,(({payload:{title:t,description:i}})=>{this.updateMacroContent(this.macroElements.title,t),this.updateMacroContent(this.macroElements.description,i)}))}getApiMethods(){return this.experienceApi.getApiMethods()}}class Ns{constructor(){this.qX=[],this.HX=0,this.zX=!1,this.WX=t=>{this.qX.forEach((i=>{t&&t!==i.element||this.XX(i,this.HX)}))}}JX(t){let i=this.qX.find((i=>i.element===t));return i||(i={element:t,list:[],cachedPercentInView:0},this.qX.push(i)),i.list}XX(t,i){t.list.forEach((t=>{!t.callbackSent&&t.threshold<=i?(t.callbackSent=!0,t.timeout=(0,bt.ld)(t.callback,t.callbackDelay,!0,this.zX)):t.callbackSent&&t.threshold>i&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=(0,bt.ld)(t.callback,0,!1,this.zX))}))}on(t,i,e){this.JX(t).push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.WX()}off(t,i){const e=this.qX.find((i=>i.element===t));if(e){for(let t=e.list.length;t--;)e.list[t].callback===i&&e.list.splice(t,1);0===e.list.length&&this.qX.splice(this.qX.indexOf(e))}}check(t={threshold:.1}){return this.HX>=t.threshold}triggerRecheck(t){this.WX(t)}QX(t){this.zX=t}setViewableThreshold(t){this.HX=t,this.triggerRecheck()}subscribe(t,i){}destroy(){for(let t=this.qX.length;t--;){const i=this.qX[t];for(let t=i.list.length;t--;)clearTimeout(i.list[t].timeout),this.off(i.element,i.list[t].callback)}}}var js;!function(t){t[t.none=0]="none",t[t.friendly=1]="friendly",t[t.safe=2]="safe"}(js||(js={}));class $s{constructor(t,i,e,s=!1){this.wh=t,this.YX=i,this.rl=e,this.qX=[],this.KX=js.none,this.ZX={intersectionObserver:!1,fallbackImplementation:!1},this.tJ=null,this.iJ=[0,.01,.1,.2,.5],this.eJ=250,this.sJ=t=>{this.rl.isPageInFocus=t,this.WX()},this.WX=()=>{this.qX.forEach((t=>{const i=this.HX(t.element);this.onViewHandle(t,i)}))},this.nJ=()=>{null===this.tJ&&(this.tJ=setTimeout((()=>{this.WX(),clearTimeout(this.tJ),this.tJ=null}),this.eJ))},this.rJ=(0,bt.pE)(this.wh).topFrame,this.oJ(s),this.hJ(),this.aJ()}aJ(){this.YX.on(this.sJ),this.rl.isPageInFocus=this.YX.isDocumentVisible()}oJ(t){this.wh.IntersectionObserver&&!t?this.ZX.intersectionObserver=!0:this.ZX.fallbackImplementation=!0,this.wh.self!==this.wh.top?(this.cJ=this.dJ(this.wh),null!==this.cJ?this.KX=js.friendly:this.KX=js.safe):this.cJ=this.wh.frameElement}dJ(t){let i;try{if(i=t.parent,i===this.wh.top)return t.frameElement}catch(t){return null}return this.dJ(i)}hJ(){this.ZX.intersectionObserver?this.lJ=new this.wh.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.iJ}):(this.rJ.addEventListener("scroll",this.nJ),this.rJ.addEventListener("load",this.WX),this.rJ.addEventListener("resize",this.WX))}uJ(t){return this.qX.find((i=>i.element===t))}HX(t){if(this.KX===js.safe){const i=this.uJ(t);return i?i.cachedPercentInView:0}let i=1;const e=t.getBoundingClientRect(),s={bottomRatio:e.bottom/e.height,topRatio:(this.wh.top.innerHeight-e.top)/e.height,leftRatio:(this.wh.top.innerWidth-e.left)/e.width,rightRatio:e.right/e.width};return Object.keys(s).forEach((t=>{s[t]<=0&&(i=0),s[t]>0&&s[t]<1&&(i*=s[t])})),i}onObserverEnter(t){t.forEach((t=>{this.qX.filter((i=>i.element===t.target)).forEach((i=>{this.onViewHandle(i,t.intersectionRatio)}))}))}onViewHandle(t,i){t.cachedPercentInView=i;const e=this.rl.isPageInFocus;t.list.forEach((t=>{!t.callbackSent&&t.threshold<=i&&e?(t.callbackSent=!0,t.timeout=(0,bt.ld)(t.callback,t.callbackDelay,!0)):t.callbackSent&&(t.threshold>i||!e)&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=(0,bt.ld)(t.callback,0,!1))}))}on(t,i,e={}){let s=!1;if(this.ZX.fallbackImplementation)if(this.KX===js.friendly&&t.ownerDocument.defaultView!==this.wh.top)t=this.cJ;else if(this.KX===js.safe)return void(0,bt.ld)(i,0,!1);let n=this.qX.find((i=>i.element===t));n?s=!0:(n={element:t,list:[],cachedPercentInView:0},this.qX.push(n)),n.list.push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.ZX.intersectionObserver?(s&&this.lJ.unobserve(t),this.lJ.observe(t)):this.ZX.fallbackImplementation&&this.WX()}off(t,i){const e=this.qX.find((i=>i.element===t));if(e){let s=e.list.length;for(;s;)s--,e.list[s].callback===i&&e.list.splice(s,1);0===e.list.length&&(this.lJ&&this.lJ.unobserve(t),this.qX.splice(this.qX.indexOf(e),1))}}check(t={threshold:.1}){if(!t.element)return!1;let i=t.element;this.KX===js.friendly&&(i=this.cJ);const e=this.rl.isPageInFocus;return this.HX(i)>=t.threshold&&e}triggerRecheck(t){this.ZX.fallbackImplementation&&t&&this.qX.forEach((i=>{if(i.element===t){const t=this.HX(i.element);this.onViewHandle(i,t)}}))}setViewableThreshold(t){}subscribe(t,i){}destroy(){this.rJ.removeEventListener("scroll",this.nJ),this.rJ.removeEventListener("load",this.WX),this.rJ.removeEventListener("resize",this.WX);[].slice.call(this.qX).forEach((t=>{[].slice.call(t.list).forEach((i=>{this.off(t.element,i.callback),this.wh.clearTimeout(i.timeout)}))})),this.YX.off(this.sJ),clearTimeout(this.tJ)}}var Us=r(5715),qs=r(9022);class Hs{constructor(t=0){this.pJ=t,this.mJ=16,this.vJ=9}getHeightByRatio(t){return Math.round(t/this.mJ*this.vJ)+this.pJ}setExtraHeight(t){this.pJ=t}}const zs=[o.ProtoDeviceType.Smartphone];function Ws(t,i){return function(t){return zs.indexOf(t)>-1}(i)&&(t===o.ProtoPositionMode.PinnedBottom||t===o.ProtoPositionMode.PinnedTop)}class Gs{constructor(t,i,e={},s){this.extraHeight=i,this.device=s,this.cachedExtraHeight=0,this.isPinnedFloating=Ws(t.floatingScrollPosition,s),this.floatingMode=(0,L.$K)(e.mode)?e.mode:t.floatingMode,(0,l.BZ)(e.devices)?this.floatingDeviceMode=e.devices:this.floatingDeviceMode=(0,l.BZ)(t.floatingDeviceMode)?t.floatingDeviceMode:[o.ProtoDeviceType.Desktop],(0,L.$K)(e.closeButton)?this.floatingCloseButtonMode=e.closeButton:(0,L.$K)(t.floatingCloseButtonMode)?this.floatingCloseButtonMode=t.floatingCloseButtonMode:this.floatingCloseButtonMode=o.ProtoPlayerCloseButtonMode.OnHover,this.floatingPosition=(0,L.$K)(e.fixedPosition)?e.fixedPosition:t.floatingFixedPosition,this.floatingScrollPosition=(0,L.$K)(e.scrollPosition)?e.scrollPosition:t.floatingScrollPosition,this.floatingWidth=(0,L.$K)(e.floatingWidth)?e.floatingWidth:t.floatingWidth||D.Gf,this.floatingGutterX=(0,L.$K)(e.floatingGutterX)?e.floatingGutterX:t.floatingGutterX,this.floatingGutterY=(0,L.$K)(e.floatingGutterY)?e.floatingGutterY:t.floatingGutterY,this.hasFloatingTransition=(0,L.$K)(e.hasFloatingTransition)?e.hasFloatingTransition:t.hasFloatingTransition,this.pageElement=(0,L.$K)(e.floatingPageElement)?e.floatingPageElement:t.floatingPageElement,this.appendLocation=(0,L.$K)(e.floatingAppendLocation)?e.floatingAppendLocation:t.floatingAppendLocation,this.floatingYAxisPadding=(0,L.$K)(e.floatingYAxisPadding)?e.floatingYAxisPadding:t.floatingYAxisPadding,this.setScrollPosition(this.floatingScrollPosition),(this.isPositionedPinnedBottom||this.isPositionedPinnedTop)&&(this.cachedExtraHeight=i,i=0),this.gJ=new Hs(i),this.yJ=this.floatingMode!==o.ProtoPlayerFloatingMode.Off}setScrollPosition(t){this.floatingScrollPosition=t,this.isPinnedFloating=Ws(t,this.device),this.IJ=t===o.ProtoPositionMode.BottomLeft||t===o.ProtoPositionMode.TopLeft,this.wJ=t===o.ProtoPositionMode.BottomRight||t===o.ProtoPositionMode.TopRight,this.SJ=t===o.ProtoPositionMode.TopLeft||t===o.ProtoPositionMode.TopRight,this.AJ=t===o.ProtoPositionMode.BottomRight||t===o.ProtoPositionMode.BottomLeft,this.PJ=t===o.ProtoPositionMode.PinnedTop,this._J=t===o.ProtoPositionMode.PinnedBottom}get isPositionedLeft(){return this.IJ}get isPinnedPlayerFloating(){return this.isPinnedFloating}get isPositionedRight(){return this.wJ}get isPositionedTop(){return this.SJ}get isPositionedBottom(){return this.AJ}get isPositionedPinnedTop(){return this.PJ}get isPositionedPinnedBottom(){return this._J}get hasFloatingCapability(){return this.yJ}set isPositionedLeft(t){this.IJ=t}set isPinnedPlayerFloating(t){this.isPinnedFloating=t}set isPositionedRight(t){this.wJ=t}set isPositionedBottom(t){this.AJ=t}set isPositionedTop(t){this.SJ=t}set isPositionedPinnedTop(t){this.PJ=t}set isPositionedPinnedBottom(t){this._J=t}set width(t){this.floatingWidth=t}set gutterX(t){this.floatingGutterX=t}set gutterY(t){this.floatingGutterY=t}get width(){return this.floatingWidth}getHeight(t){return`${this.gJ.getHeightByRatio(t)}px`}setExtraHeight(t){this.gJ.setExtraHeight(t)}getFloatingSettings(){return{scrollPosition:this.floatingScrollPosition,floatingGutterX:this.floatingGutterX,floatingGutterY:this.floatingGutterY,floatingWidth:this.floatingWidth}}}var Xs=r(6027);const Js=["8d9f31fa-3d9f-4881-acb0-be61b22c308c","1bde0dfc-ccf4-491a-b8e7-d374d8aa834d","964374ff-abea-408f-ad8c-56dab4dd09dc","e2b6a2d9-9002-4e50-9295-23f548839e94","6bf24d17-9835-495f-b418-7267e4654524","6ae90847-bf58-4c3c-ba38-b38d515f9e00","44905f01-174e-4a9d-95dc-638a80ab513e","c2eecca1-0ace-4777-9c46-ca44e6c16218","d9d0e8b1-4021-427d-b8b1-9917e4b193ad","efea731a-0a08-4260-9217-2658e693aff9","f3a07a0d-9f63-4529-80cc-554e7c5244c9","8165ca68-a89e-405f-b3ab-1faa3985cf71","a78e3915-0fc3-4823-866b-0436b2adf8fa","fb989292-e75a-4ece-b596-189245b3227c","236b9724-47b0-4dc7-9ed6-446294b2ed4a","5f3abd4e-fbb4-4b0f-9258-b90740fac819","5328235f-9716-4c81-9073-7cb713e3d9ff","c9d1bce6-44d7-4c30-80d1-9b70d6038cde","f412904c-ad7e-48e7-bc5d-9e69187c9bb5","9949914f-a41e-4928-90b1-34715b0b6cac","ad75e1b4-dfb0-4ade-be4f-2fcc3047c370","cd3a0179-bab3-4fb2-9bf7-a49c2ca3f9f6","88f1ab64-1df5-4d49-9451-19f65f6126a5","c4eb1199-cdf0-4a28-afb0-e7c5fb629e5e","a2859a75-4272-4146-b149-3d0acc19764e","6cc513ee-c58c-4a85-af23-82075a8ce1ca","22e7bc20-b8ed-4ece-b2cf-5ebb9bdfe96c","ec7241e8-c6b8-493a-84d0-8566fa5edf94","aa0d9500-be44-4de4-a1b2-cbadae87eb17","d04150a7-7314-42a9-94a6-0db2beab90dc","9a78696e-7141-4ff3-96d3-0cd7a410961f","771ac607-a9e9-49a9-8326-d9aa9452f6bf","ca6810c0-854e-4de3-a8ca-99a238d99c14","fa2af9a7-9b1e-45cf-80a7-7d04a79cef6d","220d954e-01b2-4d45-a22e-83d169715b8f","32573572-b864-473a-8965-00b118ae1c65","0ff42799-7daf-4fc4-8e06-d31ab857da88","5b5213e5-5630-481e-86fd-3c2317a48621","19094074-5528-412c-a8e4-4af0096d4efe","37ae61ec-e782-43c1-bcdd-ef5452b7e4b0","c6881d74-879f-42ce-9cfa-1df3c396df6d","db55fa41-71d4-4157-a4e2-126e7476ca79","9d0165a8-b040-42d2-94b0-f967fc3aaaae","9a8f7a2f-a84d-4631-9e46-fa0e97729c25","b19062e1-6e95-4dc4-a797-c2e130adbe80","e03797d5-4818-417a-b3d1-7ea3466b7eb3","fdb3acf0-9026-4ff7-86e7-308eae78a6c3","bc93e252-fac0-4f55-b254-c7547fca6d08","bd526af5-bc04-490b-8ed6-42b576c947a7","7317b65f-dd2a-4211-8ea1-16a05e4fa524","6821b1e4-092d-481b-a86d-efc4908eb223","52d94522-9581-4b7d-aa9b-70d282981677","5646da0c-10cc-4694-95d0-d6ac982e03f6","282b1ed6-0881-4912-bec8-1d9a86a56aa0","28bdbcf1-3694-4408-aacf-28ec7e135c2b","51289577-3bac-4e72-a443-9cb25de8b4b6","04fb251c-43dd-4587-a4e6-05235c26be6b","003f8b06-519a-44be-98d5-8e0600dc5874","da490d28-3f90-4206-98bd-2e4782e1263e","adc00530-320d-42e3-a7ca-f42e11dff182","d5e0ba20-b410-49fd-907f-db6fd299dce1","8d5624c4-d1cd-498c-8397-121dce9e1770","9b77c9f1-a765-445c-aa41-c7be8bd4f47c","c96983e7-de60-4124-bb8c-896c5343e34d","fbe3b439-f67e-4fb1-9c06-e7b30a2310fc","fdc1bffb-eed3-4eaf-ac5c-07a87dbb68a0","a97697ee-6b28-4020-8a7c-c8a8de7fbb76","8fbe3953-b436-49c5-a6aa-831d5f5d2a32","ff5ad3fd-bdd5-40d2-b9f3-690133ff23a5","b9d7c6bc-c18c-4786-a561-1fe846f8b17d","d8fdbfb0-4d80-4983-bc86-4c7e0ed191f5","913d0b07-08f0-47b8-96ef-112e2a9a1869","cb9f241e-e384-4b17-97e3-680950e084bc","df45ca5f-eff3-42ce-80ad-540c5f34bc6f","bbd45d33-362f-4fde-89e6-47d4d8bc8524","3ac3c265-1174-45b8-9bd7-c17e7be2adf7","07861d14-f54b-4ce1-8472-7584ac22f2f3","2447e7d2-51ab-4c7b-b06c-f3c2e171639f","1e1d0274-7cc8-4616-b188-9f870b54d8b3","1ca848db-2436-4156-a152-da533cd2a63d","19dd93e0-66da-4a83-b075-61fe08a8e507","11b23f3d-742c-443a-a0c0-06461531315f","587f169e-25ca-496f-adf8-38d9201b9ebc","95c2cf81-fadb-469e-b4f9-882fe6b0bdd7","8eeab91a-662a-46de-a56c-a317f7e939c0","b6b64ebf-3553-43fd-8001-44079b240233","d0d22aed-7a0f-4543-8d64-acafab9f3b5a","bc9a48ea-ab31-46b8-9bc8-25886953776b","d14ea633-6776-4582-827b-b074fc32b0c9","787dd229-9ce3-4ef9-93f8-ca2d3b585974","aec58545-fa50-49c9-a7ab-b77ba172f6f3","afaa167a-c1ff-4abf-b36b-e0e8cb052817","da0ee58c-14e4-4f6c-9105-4309e906d0a2","ce4624ad-5adc-4934-ba1b-3e833b22ab0f","06d21b00-b24c-44d7-9a0a-3992d1361181","19803f55-856e-48a3-bc28-3d07ef9d3d39","1fe96055-e20f-46e3-afe8-a2a0905822ff","9c6baa06-2bc0-47f6-9f16-eddba1fef9bf","53eb0be7-ea1a-47ae-aab6-8657d4f4b447","c49f94e9-045e-4364-a59b-a62d0cf22316","d9cae709-60c7-4450-9074-0549c0f30f4e","e47c5407-4a34-471e-b6fc-66423ca5eae1","ca866151-ce5c-4b54-a059-d36be90ff421","be78cb40-5d0d-4c1d-b1fe-6508a9ff1942","43b90e6e-940f-4bf1-8772-81caf1142f6a","61db0b36-2ff9-4d36-b370-0fe98e425656","04355f10-4b0f-4499-bf37-b3a8ce317b5f","3c1a78aa-2861-4485-9017-e39b5337c94f","5db65e80-25ae-4bf1-9417-38860a8133d0","3d2bdb1b-070f-4cd5-94c5-2f8d33aec732","815ca8ab-a39f-453e-ad84-441a9822cf49","d8add381-8aa3-4806-87ad-59e0bd5bddea","33c6193e-99db-4490-8e29-e4cd01ff0a9c","0b0af83d-99cb-4470-8dfe-39e66d7d83ca","7985c512-85bf-4dc4-88e1-a785d82bb971","ba4405dc-61a1-4426-b27e-ff98f5b685a7","a866d0c4-a446-4af7-8d45-f5d3990154f6","9e5150a8-81da-4f7f-a280-85c66fce57b5","9ae79f69-e08f-4e69-9d95-faa80c786bda","48dd1597-4688-4b24-8400-740eded438af","39bd2c4d-bb9c-4d8e-83b6-9d33016e3709","2828d05e-5050-45ae-a883-404444e80996","01874d00-dd82-4cd6-be54-cc2b6bf72b8f","6b7b2a9a-ee65-48fb-aab7-9ca4e00785f7","7d6f41ed-308f-484e-879d-980fe12334b5","14232d41-52b5-4778-8c1b-02c7bf4fa14e","ad0a9cc6-0ad5-4a8e-93c1-f4d163b41397","be7b144f-8fab-46b6-b9f1-fa6b53799afe","e49c37f1-685d-4601-ac0a-54edcccba2bb","e8b8b7f0-b875-4a8b-9e74-891df946450b","feda3daa-774f-4eaa-88b4-3d1084e63695","eb21cee1-0ffa-4c62-be46-042b3157768f","da54a40c-23aa-4854-ae3a-1b5e85770f8d","d43f1740-e3ed-44af-b6e4-ecdb606bdd25","15920368-8fa4-49b9-a896-84b4875f8ecd","4d2e7439-2ea4-4376-8b0b-34b1ae1ba89d","145dcc1e-43d3-4847-94d3-facad324bb13","3d412551-7b13-4826-8f53-5bb6f02f5955","3f9629e4-25d4-4e0d-8173-ff2fc2a4ea55","54704091-08d7-4272-8a85-dc8bb47d2c7e","9b9d75d4-f35b-46b8-903f-db4b21f8865e","e05f1337-8585-4619-b355-d105005b032e","702baa8a-c5e9-4d05-9f96-adcd363fb214","6cd25651-9944-45f2-831c-ccddc40f0d0e","6ce3a726-1a41-4151-a178-5b778ffaefc3","5c045ada-0454-4ba3-b919-05b22120f506","0cd0e2e7-2915-479e-9cb2-4c9df2ed08d8","629805fe-09c4-4c00-a034-83027b907ac9","43b180a0-3942-4776-b128-705cf6e7c3ee","c51a230a-192e-4ef3-bd62-795c5df0cdde","b364fbc3-6ad0-413b-850b-c537c3d1f046","c0557107-1673-4563-ad6e-6367ef7ade29","d7842b4a-8061-4334-aee6-5bd7eb0c90de","4375e905-b076-4c00-80e9-bae95feb1a0e","08298ede-80fc-4e38-a3ff-ec50af4f44aa","2d884066-814a-4014-9a86-3acf8f6235b2","2baa2007-e180-4602-a140-8db4f08dccbc","ae65a433-2886-4a16-9558-4c5d990807c8","73abbad9-0dbc-4f93-ba23-9162d6bd1658","89e6ce19-d6ab-4dcc-bfc1-a6e0911dffb3","cc19dbfa-0e46-4e82-ac0d-045e6fd525a7","94fa8c8d-f0d6-41be-baf5-8d47a72f0e83","999988ac-4ddf-461f-8ca8-7118b41c5d20","923970f0-872e-46e8-9141-6263ad49fe80","3acab97c-7130-4a22-b9ce-a12e3c2902a8","5e43a078-c3b7-43fc-a408-cfe3f8175014","24ae775e-1007-44a1-9cd2-73674908585a","2d5dfd8c-4ab1-4799-9054-fe68a1917928","0eee105d-700b-4c5f-885e-817315133439","13361c32-72b6-4cae-9612-50874d29d4b5","509ed06f-ce6e-4a8b-9e3d-48498fff7738","03d21666-b00a-49f3-8b61-be768fc56456","691e3b63-0242-4c25-ab23-badc89e71673","f59e0953-6ac3-4219-94d3-866ea29a19b6","d3539689-76c0-4bd0-8af7-d9c45e505c54","42002489-35d3-4a75-971d-9932126ff752","48751401-e2da-4eb6-80bc-360b138737b0","06c1f579-5243-471b-af0b-ede543d524aa","337ec1c5-1b4f-4c2f-ac77-54bba7ff3c02","6046c81b-8bba-47d1-b299-4e6c302288ae","62749d7f-e3c1-44a0-a7b1-788f3b8b90ae","7c8ed035-b483-41ba-9a7b-b0d9615f360c","a0417b2d-d481-45e7-ac84-b81b55d490e1","3c3a526c-ca60-41db-8ded-4bd41f38548f","a20326de-1073-4b43-9ffb-ee6a87a940cf","79626cf5-dad8-4d36-98b9-6817fe411e5f","04d6a543-1f80-4519-8518-d636c82986cc"];class Qs{constructor(t,i,e,n,r,h,a,c,d,l,u,p,f=0){if(this.global=t,this.targetContainer=i,this.xJ=e,this.VO=n,this.secondLevelDomain=r,this.apiConfig=h,this.isServerlessMode=a,this.supplyChainSettings=c,this.isSeoTraffic=d,this.Ue=l,this.lineItemAbTestInformation=u,this.videoPosition=p,this.sharingDestinations=[],this.disableAdvertising=!1,this.disablePrefetch=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,this.loopAdWhenFinished=!1,this.adsMustBeSkippableIfLongerThan=qs.f3,this.TJ(),(0,L.QM)(e.initializationSettingsJson))try{const t=JSON.parse(e.initializationSettingsJson);this.apiConfig=(0,Us.R)(this.apiConfig,t)}catch(t){(0,s.n)({message:"invalid_init_json",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL})}if((this.apiConfig.playerMode===j.B.Buzzfeed||this.apiConfig.settings.pauseAdWhenFinished)&&(this.pauseAdWhenFinished=!0),this.queryJsTargeting=this.apiConfig.settings.queryJsTargeting||{},this.kJ(this.xJ.lineItems),this.soundMode=(0,L.$K)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:e.soundMode,this.playbackMode=(0,L.$K)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings.playbackMode:e.playbackMode,this.playbackMode===o.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===o.ProtoPlayerSoundMode.Mute||(0,bt.we)()||(this.soundMode=o.ProtoPlayerSoundMode.Mute),this.html=e.html,this.css=e.css,this.floatingSettings=new Gs(e,f,this.apiConfig.settings.customization.floating,this.VO),e.logoResource||(0,L.QM)(this.apiConfig.settings.customization.logoUrl)){let t=`${qe.n.endPoints.base.image}${e.playerId}/${e.logoResource}`;t=this.Ue.appendParamsToUrl(t),this.logoUrl=(0,L.QM)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization.logoUrl:t}const m=e.amazonTamSlotId;(0,L.QM)(m)&&(this.amazonTamSlotId=m),(0,L.$K)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),(0,L.$K)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising),this.midRollNumber=(0,L.$K)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:e.midRollNumber,this.adViewabilityPolicy=e.adViewabilityPolicy,this.preRollBreak=((0,L.$K)(this.apiConfig.settings.advertising.preRollBreak)?(0,Xi.qe)(this.apiConfig.settings.advertising.preRollBreak,500):e.preRollBreak)*F.s_,this.postRollBreak=((0,L.$K)(this.apiConfig.settings.advertising.postRollBreak)?(0,Xi.qe)(this.apiConfig.settings.advertising.postRollBreak,500):e.postRollBreak)*F.s_,this.playerId=e.playerId;const{disablePrefetch:v}=this.apiConfig.settings.advertising;(0,L.$K)(v)&&(this.disablePrefetch=v),this.floatingSettings.floatingMode===o.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingSettings.floatingCloseButtonMode:this.closeButtonMode=(0,L.$K)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization.closeButtonMode:e.closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingSettings.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:(0,L.$K)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:e.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=e.adPlaybackMode,(0,L.$K)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);const{skippability:g,skipAdAfter:y,skipMin:b}=h.settings.advertising.skipAdSettings||{};this.skipAdAfter=(0,L.$K)(y)?y:e.skipAdAfter,this.skippability=(0,L.$K)(g)?g:e.skippability,this.skipMin=(0,L.$K)(b)?b:e.skipMin;const{disableTracking:I}=h.settings._connatixInternals;(I||a||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.xJ.sessionId}setPreRollBreak(t){this.preRollBreak=this.CJ(this.preRollBreak,t)}setPostRollBreak(t){this.postRollBreak=this.CJ(this.postRollBreak,t)}TJ(){if(4===Xs.e.clientAb0)this.EJ();else if(5===Xs.e.clientAb0){const t=this.xJ.lineItems.length;this.MJ(),t===this.xJ.lineItems.length&&this.EJ()}}EJ(){this.xJ.lineItems=this.xJ.lineItems.filter((t=>"50b75cc2-f1ae-45c1-ac8c-19cf61de0133"!==t.advertiserLineItemId))}MJ(){this.xJ.lineItems=this.xJ.lineItems.filter((t=>!Js.includes(t.advertiserLineItemId)))}CJ(t,i){const e=(0,Xi.w4)(i);return null===e?t:e}LJ(t=!1){this.BJ(),this.RJ();let i=[...this.OJ(),...this.DJ()];i=this.VJ(i),i=this.FJ(i,t),t&&(i=this.NJ(i));const e=(0,L.$K)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering.scrollHijackingProtection:this.xJ.scrollHijackingProtection;this.lineItemSettings={lineItems:i,disableScrollHijackEnforcement:e},this.$J(this.lineItemSettings)}UJ(t){return t*F.s_}qJ(t,i){i.adTag=(0,L.$K)(t.url)?t.url:i.adTag,i.requestCap=(0,L.$K)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,i.impressionCap=(0,L.$K)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,i.viewability=(0,L.$K)(t.viewability)?t.viewability:i.viewability,i.sound=(0,L.$K)(t.sound)?t.sound:i.sound,i.ignoreFilledRequests=(0,L.$K)(t.ignoreFilledRequests)?t.ignoreFilledRequests:i.ignoreFilledRequests,i.prebidJsBidParamsJSONString=(0,L.$K)(t.prebidJsBidParamsJSONString)?t.prebidJsBidParamsJSONString:i.prebidJsBidParamsJSONString,i.headerBidderTimeout=(0,L.$K)(t.headerBidderTimeout)?t.headerBidderTimeout:i.headerBidderTimeout,i.resetRequestsCapTime=(0,L.$K)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,i.resetImpressionsCapTime=(0,L.$K)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,i.resetCapType=(0,L.$K)(t.resetCapType)?t.resetCapType:i.resetCapType,i.timeBetweenRequests=(0,L.$K)(t.timeBetweenRequests)?t.timeBetweenRequests:i.timeBetweenRequests,i.skipMode=(0,L.$K)(t.skipMode)?t.skipMode:i.skipMode,i.floorPrice=(0,L.$K)(t.floorPrice)?t.floorPrice:i.floorPrice,i.adBreakSettings=(0,L.$K)(t.adBreakSettings)?t.adBreakSettings:i.adBreakSettings,i.pauseAdOutOfView=(0,L.$K)(t.pauseAdOutOfView)?t.pauseAdOutOfView:i.pauseAdOutOfView,i.nonlinearLineItemSettings=(0,L.$K)(t.nonlinearLineItemSettings)?this.HJ(t.nonlinearLineItemSettings):i.nonlinearLineItemSettings,i.adType=(0,L.$K)(t.nonlinearLineItemSettings)?o.ProtoAdType.Nonlinear:i.adType}HJ(t){const i={nonLinearRequestType:t.nonLinearRequestType?t.nonLinearRequestType:o.ProtoNonlinearRequestType.Banner,nonLinearAdTimeSeconds:t.nonLinearAdTimeSeconds?t.nonLinearAdTimeSeconds:15};return i.nonLinearAdTimeSeconds<15&&(i.nonLinearAdTimeSeconds=15),i.nonLinearAdTimeSeconds>180&&(i.nonLinearAdTimeSeconds=180),i}BJ(){this.WJ(this.apiConfig.settings.advertising.preRollBreak,o.ProtoAdBreakTypeEnum.PreRoll),this.WJ(this.apiConfig.settings.advertising.postRollBreak,o.ProtoAdBreakTypeEnum.PostRoll),this.WJ(this.apiConfig.settings.advertising.maxNumberOfMidRolls,o.ProtoAdBreakTypeEnum.MidRoll)}WJ(t,i){const e=this.GJ(this.apiConfig.settings.advertising.adBreaks,i),s=this.GJ(this.xJ.adBreaks,i),n={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[i]};e?this.adBreaks.push(e):!(0,L.$K)(t)||e||s?!e&&s&&this.adBreaks.push(s):this.adBreaks.push(n)}GJ(t,i){if(!t)return;let e;return t.forEach((t=>{t.types.includes(i)&&(e=Object.assign({},t),e.types=[i])})),e}NJ(t){return(0,gt.mn)(t,vt.k.LINEAR)}FJ(t,i=!1){const{adBreaks:e}=this;let s=[];(0,l.BZ)(e)||i||t.forEach((t=>{const i=t.adBreakSettings.adBreakTargeting.find((t=>t.adRollType===o.ProtoAdBreakTypeEnum.MidRoll));i||t.adType===o.ProtoAdType.Nonlinear||s.push(t)}));const n=[];return e.forEach((t=>{t.types.forEach((i=>n.push(Object.assign(Object.assign({},t),{types:[i]}))))})),n.forEach((t=>{s=this.removeCompatibleLineItems(t,s)})),t.filter((t=>!s.includes(t)))}removeCompatibleLineItems(t,i){const e=t.types[0],s=t.numberOfAdSlots>1?o.ProtoLineItemAdBreakTypeEnum.AdPod:o.ProtoLineItemAdBreakTypeEnum.SingleAd;return i.filter((t=>!t.adBreakSettings.adBreakTargeting.some((t=>t.adRollType===e&&(t.adBreakTypeEnum===o.ProtoLineItemAdBreakTypeEnum.All||t.adBreakTypeEnum===s)))))}kJ(t){t.forEach((t=>{t.adBreakSettings||this.XJ(t),this.JJ(t)}))}XJ(t){t.adBreakSettings={adBreakTargeting:[{adRollType:o.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:o.ProtoLineItemAdBreakTypeEnum.All},{adRollType:o.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:o.ProtoLineItemAdBreakTypeEnum.All},{adRollType:o.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:o.ProtoLineItemAdBreakTypeEnum.All}]}}JJ(t){0===t.requestCap&&(t.requestCap=20)}RJ(){this.adBreaks.forEach((t=>{t.maxAdSlotDuration=this.UJ(t.maxAdSlotDuration),t.maxAdPodDuration=this.UJ(t.maxAdPodDuration),t.numberOfAdSlots<=1?t.maxAdPodDuration=0:t.maxAdSlotDuration>t.maxAdPodDuration&&(t.maxAdSlotDuration=t.maxAdPodDuration)}))}QJ(t,i){const e=Object.assign({},i);return this.qJ(t,e),(0,L.$K)(t.externalMediaFile)&&(e.externalMediaFile=t.externalMediaFile),(0,L.$K)(t.externalHlsFile)&&(e.externalHlsFile=t.externalHlsFile),e.customCpm=t.cpm,e}OJ(){const t=[];if(!(0,l.BZ)(this.apiConfig.settings.advertising.lineItems))return[];const i=this.xJ.lineItems.filter((t=>t.creativeType===o.ProtoCreativeTypeEnum.External));return this.apiConfig.settings.advertising.lineItems.forEach((e=>{if(this.JJ(e),this.isServerlessMode){const i=this.YJ(),s=this.QJ(e,i);t.push(s)}else i.forEach((i=>{if(e.id===i.advertiserLineItemId){const s=this.QJ(e,i);t.push(s)}}))})),t}DJ(){return!0===this.apiConfig.settings.advertising.blockConnatixDemand?[]:this.xJ.lineItems.filter((t=>t.creativeType!==o.ProtoCreativeTypeEnum.External))}VJ(t){return t.forEach((t=>{t.creativeType===o.ProtoCreativeTypeEnum.External&&((0,L.QM)(t.prebidJsBidParamsJSONString)?t.creativeType=o.ProtoCreativeTypeEnum.HeaderBidder:t.externalMediaFile||t.externalHlsFile?t.creativeType=o.ProtoCreativeTypeEnum.MediaFile:t.creativeType=o.ProtoCreativeTypeEnum.ThirdParty,t.isExternal=!0)})),t}YJ(){return o.ProtoLineItem.toObject(o.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}$J(t){this.moatTrackingEnabled=t.lineItems.some((t=>t.moatTrackingEnabled))}}var Ys=r(6666),Ks=r(1992),Zs=function(t,i,e,s){return new(e||(e=Promise))((function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function h(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(o,h)}a((s=s.apply(t,i||[])).next())}))};class tn{constructor(t,i,e){this.KJ=!1,this.tQ=[],this.iQ=[],this.eQ=!1,this.th=t,this.sQ=i,this.DR=e}getMetadata(t,i){this.KJ?t&&t(this.nQ):this.rQ(t,i)}setAvailableQualities(t){this.nQ.setAvailableQualities(t)}rQ(t,i){t&&this.tQ.push(t),i&&this.iQ.push(i),this.eQ||(this.eQ=!0,this.oQ().then((t=>Zs(this,void 0,void 0,(function*(){const i=yield Ys.k.loadInsights({id:this.th,versionId:this.sQ,insightsInputType:Ks.i.Video});this.eQ=!1,this.KJ=!0,this.nQ=this.cQ(t,i),this.tQ.forEach((t=>t(this.nQ))),this.tQ=[]})))).catch((()=>{this.eQ=!1,this.iQ.forEach((t=>t()))})))}}class en{constructor(t,i){this.lQ=[],this.th=t,this.pV=i.altText,this.uQ=i.outputUrl,this.pQ=i.thumbnailUrl,this.fQ=i.name,this.mQ=i.startDate}getSources(t,i){return null}setAvailableQualities(t){this.lQ=t}get hlsFilePath(){return this.uQ}getAvailableQualities(){return this.lQ}getClosestSourceQuality(t){let i;const e=(0,It.DE)(t,this.lQ.map((t=>t.videoHeight)));return this.lQ.forEach((t=>{t.videoHeight===e&&(i=t)})),i}getHlsSource(){return this.uQ}getThumbnailUrl(t,i){return this.pQ}get id(){return this.th}get altText(){return(0,L.$K)(this.pV)?this.pV:""}get title(){return this.fQ}get liveStreamStartDate(){return this.mQ}getDefaultSubtitle(){return null}get isExternalSource(){return!1}}var sn=r(6224);class nn extends tn{constructor(){super(...arguments),this.vQ=new sn.t(o.ProtoLiveMediaMetadataResponse,"LiveVideoSourceWrapper")}oQ(){const t=`${qe.n.endPoints.base.metadata}${this.th}/${this.sQ}_liveStream.bin`;return this.vQ.fetchMetadata(t)}cQ(t){return new en(this.th,t)}}class rn{constructor(t,i=[]){this.yQ=i,this.lQ=[],this.th=t.id,this.bQ=t.title,this.pV=t.altText,this.IQ=t.description,this.wQ=t.imageUrl,this.VH=t.sources,this.Un=t.clickUrl||"",this.uQ=t.hlsFilePath||"",this.SQ=t.liveStreamFilePath||"",this.AQ=t.liveStramStartDate||"",this.FR=t.disableAdvertising,this.VH&&this.VH.forEach((t=>{this.lQ.push({label:w.se[t.quality],videoHeight:t.quality,isHD:t.quality>=w.gQ})}))}get id(){return this.th}get title(){return this.bQ}get altText(){return(0,L.$K)(this.pV)?this.pV:""}get description(){return this.IQ}get clickUrl(){return this.Un}getSources(t){return[{src:this.VH.find((i=>i.quality===this.getClosestSourceQuality(t).videoHeight)).file,type:new be(w.L5.H264).type}]}getHlsSource(){return this.SQ||this.uQ}getAvailableQualities(){return this.lQ.sort(((t,i)=>t.videoHeight-i.videoHeight))}getThumbnailUrl(){return this.wQ}get hlsFilePath(){return this.SQ||this.uQ}getClosestSourceQuality(t){let i;const e=(0,It.DE)(t,this.lQ.map((t=>t.videoHeight)));return this.lQ.forEach((t=>{t.videoHeight===e&&(i=t)})),i}setAvailableQualities(t){this.lQ=t}get liveStreamStartDate(){return this.AQ}getDefaultSubtitle(){const t=this.yQ.find((t=>t.title.indexOf("English")>-1));return t||this.yQ[0]}get subtitles(){return(0,l.BZ)(this.yQ)?this.yQ:void 0}get disableAdvertising(){return this.FR}get isExternalSource(){return!0}}class on{constructor(t){this.PQ=t,this.KJ=!1,this.eQ=!1,this._Q=(0,L.QM)(t.hlsFilePath),this._Q||(this.KJ=!0,this.nQ=new rn(t))}getMetadata(t){t&&(this.KJ?t(this.nQ):this.xQ(this.PQ.hlsFilePath,t))}setAvailableQualities(t){this.nQ.setAvailableQualities(t)}xQ(t,i){if(!this.eQ){this.eQ=!0;try{we.n.fetchXhttpRequest({requestUrl:t,requestType:"GET"}).then((t=>{const e=Pe(t);this.KJ=!0;const s=this.TQ(e);this.nQ=new rn(this.PQ,s),i(this.nQ)}))}catch(t){this.KJ=!0,this.nQ=new rn(this.PQ),i(this.nQ)}}}TQ(t){var i;if(!t||!(0,L.Xz)(null===(i=t.mediaGroups)||void 0===i?void 0:i.SUBTITLES))return;const e=Object.values(t.mediaGroups.SUBTITLES);let s=[];for(let t=0;t<e.length;t++){const i=e[t],n=Object.keys(i);for(let t=0;t<n.length;t++){const e=n[t];s.push({title:e,code:i[e].language||"en",file:i[e].uri,type:o.ProtoTrackType.ManualSubtitle,isHLSTrack:!0})}}return s=s.filter((t=>(0,_e.jv)(t.file))),(0,l.BZ)(s)?s:void 0}}class hn{constructor(t,i,e,s,n,r,o){var h;if(this.th=t,this.Ue=e,this.sQ=s,this.FR=n,this.kQ=r,this.DR=o,this.CQ=[],this.yQ=[],this.MQ=[],this.LQ=[],this.BQ={insights:[]},this.lQ=[],this.bQ=i.title,this.pV=i.altText,this.IQ=i.description,this.Un=i.clickUrl,this.CQ=i.keywordList,this.RQ=i.languageId,this.yQ=i.trackList,this.OQ=i.cuePoints,this.DQ=i.multimediaId,this.VQ=i.publishDate,this.FQ=i.endDate,this.NQ=i.contentStudio,this.yQ&&this.yQ.length>0){this.yQ.forEach((t=>{t.file=this.Ue.appendParamsToUrl(this.jQ(qe.n.endPoints.base.video,t.file))}));const t=this.yQ.findIndex((t=>t.title.indexOf("English")>-1));if(t>-1){const i=this.yQ.splice(t,1);this.yQ.unshift(...i)}}this.pQ=i.thumbnail,this.$Q=i.duration,this.LQ=i.customFields,this.uQ=i.hlsFilePath,this.UQ=i.sourceItemId,this.BQ.insights=null===(h=this.kQ)||void 0===h?void 0:h.insights,(0,l.BZ)(i.renditionList)&&(this.MQ=this.qQ(i.renditionList),this.HQ(i.renditionList))}qQ(t){return t.sort(((t,i)=>t.height-i.height))}setAvailableQualities(t){this.lQ=t}HQ(t){(0,l.qy)("height",t).forEach(((t,i)=>{this.lQ.push({videoHeight:t.height,label:`${t.height}p`,isHD:t.height>=w.gQ})}))}zQ(t,i){return this.MQ.find((e=>e.codec===t&&e.height===i))}jQ(t,i,e=!1){let s=`${t}${this.th}/`;return(0,L.QM)(this.DR)&&(s+=`${this.DR}/`),e&&(0,L.QM)(this.DQ)&&(s+=`mmid-${this.DQ}/`),s+=i,s}WQ(t,i){const e=(0,It.DE)(t,this.lQ.map((t=>t.videoHeight)));return this.zQ(i,e)}get hlsFilePath(){return this.uQ}getAvailableQualities(){return this.lQ}getClosestSourceQuality(t){let i;const e=(0,It.DE)(t,this.lQ.map((t=>t.videoHeight)));return this.lQ.forEach((t=>{t.videoHeight===e&&(i=t)})),i}getSources(t,i){const e=[];return i.forEach((i=>{const s=this.WQ(t,i.id);(0,l.BZ)(e)||s&&e.push({src:this.Ue.appendParamsToUrl(this.jQ(qe.n.endPoints.base.video,s.file,true)),type:i.type})})),e}getHlsSource(){return this.jQ(qe.n.endPoints.base.video,this.uQ,!0)}getThumbnailUrl(t,i){const e=this.jQ(qe.n.endPoints.base.image,this.pQ);return Ue.Q.getSmartCroppedImageUrl(e,t,i,this.Ue)}getDefaultSubtitle(){const t=this.yQ.find((t=>t.title.indexOf("English")>-1));return t||this.yQ[0]}get title(){return this.bQ}get altText(){return(0,L.$K)(this.pV)?this.pV:""}get description(){return this.IQ}get clickUrl(){return this.Un}get keywords(){return this.CQ}get languageId(){return this.RQ}get sourceItemId(){return this.UQ}get subtitles(){return(0,l.BZ)(this.yQ)?this.yQ:void 0}get spriteSheet(){return this.GQ}get duration(){return this.$Q}get id(){return this.th}get customFields(){return this.LQ}get insights(){return this.BQ}get cuePoints(){return this.OQ}get publishDate(){return this.VQ}get endDate(){return this.FQ}get contentStudio(){return this.NQ}get sentimentAnalysis(){var t;return null===(t=this.kQ)||void 0===t?void 0:t.sentimentAnalysis}get disableAdvertising(){return this.FR}get isExternalSource(){return!1}get multimediaId(){return this.DQ}get revisionNumber(){return this.sQ}get contentVersionId(){return this.DR}}class an extends tn{constructor(t,i,e,s,n,r){super(t,i,s),this.Ue=e,this.JQ=n,this.FR=r,this.vQ=new sn.t(o.ProtoMediaMetadataResponse,"VideoSourceWrapper")}oQ(){let t=`${qe.n.endPoints.base.metadata}${this.th}/`;return(0,L.QM)(this.DR)?t+=`${this.DR}/${this.sQ}_media.bin`:t+=`${this.sQ}_media.bin`,this.vQ.fetchMetadata(this.Ue.appendParamsToUrl(t))}cQ(t,i){let e={};const s=this.QQ(t.customMetadata);if(this.JQ){const{title:t,description:i,clickUrl:s,keywordList:n,customFields:r}=this.JQ;e={title:t,description:i,clickUrl:s,keywordList:n,customFields:r}}const n=Object.assign(Object.assign({customFields:s},t),e);return new hn(this.th,n,this.Ue,this.sQ,this.FR,i,this.DR)}QQ(t){let i={};if(!(0,L.QM)(t))return[];try{i=JSON.parse(t)}catch(i){return(0,s.n)({message:"VideoSourceMeta_parse_customMetadata",exception:this.th,callStack:t,level:s.D.CRITICAL},{shouldSendMaxLog:!1,throttle:10}),[]}const e=[];return Object.keys(i).forEach((t=>{e.push({name:t,value:i[t]})})),e}}class cn{constructor(t,i,e,s){this.Ue=t,this.YQ=i,this.b$=e,this.KQ=s,this.b$.shouldUseMediaIdListAsPlaylist&&(0,l.BZ)(this.b$.mediaIdList)&&(this.YQ=this.YQ.filter((({mediaId:t})=>{var i;return null===(i=this.b$.mediaIdList)||void 0===i?void 0:i.includes(t)}))),this.ZQ=this.tY()}get playlist(){return this.ZQ}hasExternalLivestream(){var t;return null===(t=this.KQ)||void 0===t?void 0:t.some((({liveStreamFilePath:t})=>(0,L.QM)(t)))}tY(){return this.iY(this.KQ)?this.KQ.map((t=>new on(t))):this.YQ.map((t=>{this.eY(t);const{mediaId:i,revisionNumber:e,mediaContentVersionId:s,shouldDisableAdvertising:n}=t;if(this.b$.playerType===ci.ProtoElementsTypeEnum.Live)return new nn(i,e,s);const r=this.sY(i);return new an(i,e,this.Ue,s,r,n)}))}nY(){var t;return null===(t=this.KQ)||void 0===t?void 0:t.some((({id:t})=>this.YQ.find((({mediaId:i})=>i===t))))}sY(t){var i;return null===(i=this.KQ)||void 0===i?void 0:i.find((({id:i})=>i===t))}iY(t){return!this.nY()&&(!(0,L.QM)(this.b$.mediaId)&&!(0,l.BZ)(this.b$.mediaIdList)&&!!(0,l.BZ)(t))}eY({mediaId:t,revisionNumber:i,insightsRevisionNumber:e}){if(this.b$.playerType===ci.ProtoElementsTypeEnum.Live)return void Ys.k.markAsUnavailable(t);i===e?Ys.k.loadInsights({id:t,versionId:i,insightsInputType:Ks.i.Video}).catch((()=>null)):(Ys.k.markAsUnavailable(t),(0,L.hj)(i)&&(0,L.hj)(e)&&(0,s.n)({message:"ElementsPlayerModel_InsightsRevisionNumberMismatch",exception:`media:${t}, revisionNumber:${i}, insightsRevisionNumber:${e}`,level:s.D.WARN},{shouldSendMaxLog:!1}))}}class dn extends Qs{constructor(t,i,e,n,r,h,a,c,d,l,u,p,f){var m,v;super(t,i,e,n,r,h,a,c,p,d,l,u),this.global=t,this.targetContainer=i,this.xJ=e,this.rY=h,this.Ue=d,this.lineItemAbTestInformation=l,this.videoPosition=u,this.enableNewUI=f,this.playlist=[],this.outstreamAdAsContent=!1,this.alwaysDisplayControls=this.apiConfig.settings.customization.alwaysDisplayControls,e.playerType===ci.ProtoElementsTypeEnum.Live&&Ws(this.floatingSettings.floatingScrollPosition,n)&&(this.floatingSettings.floatingMode=ci.ProtoPlayerFloatingMode.Off),this.playerSize=this.oY(),this.midRollOnlyOnLongContent=(0,L.$K)(this.apiConfig.settings.advertising.midRollOnlyOnLongContent)?this.apiConfig.settings.advertising.midRollOnlyOnLongContent:e.midRollOnlyOnLongContent,this.uiComponentsVisibility.muteWatermark=(0,L.$K)(this.apiConfig.settings.customization.showMuteWatermark)?this.apiConfig.settings.customization.showMuteWatermark:e.muteWatermark,this.showVideoTitle=null!==(m=this.apiConfig.settings.customization.showVideoTitle)&&void 0!==m&&m,this.displayAdCountdown=(0,L.$K)(this.apiConfig.settings.customization.displayAdCountdown)?this.apiConfig.settings.customization.displayAdCountdown:e.displayAdCountdown,this.playlistId=e.playlistId,this.playlistThumbnail=(0,L.QM)(this.apiConfig.settings.customization.playlistThumbnail)?this.apiConfig.settings.customization.playlistThumbnail:e.playlistThumbnail,this.accentColor=(0,L.QM)(this.apiConfig.settings.customization.accentColor)?this.apiConfig.settings.customization.accentColor:e.accentColor,this.iconsColor=(0,L.QM)(this.apiConfig.settings.customization.iconsColor)?this.apiConfig.settings.customization.iconsColor:e.iconsColor,this.tooltipTextColor=(0,L.QM)(this.apiConfig.settings.customization.tooltipTextColor)?this.apiConfig.settings.customization.tooltipTextColor:e.tooltipTextColor,this.tooltipBackgroundColor=(0,L.QM)(this.apiConfig.settings.customization.tooltipBackgroundColor)?this.apiConfig.settings.customization.tooltipBackgroundColor:e.tooltipBackgroundColor,this.prefetchOnPreroll=(0,L.$K)(this.apiConfig.settings.advertising.prefetchOnPreroll)?this.apiConfig.settings.advertising.prefetchOnPreroll:e.prefetchOnPreroll,this.minTimeBeforeFirstAd=((0,L.$K)(this.apiConfig.settings.advertising.timeBeforeFirstAd)?this.apiConfig.settings.advertising.timeBeforeFirstAd:e.minTimeBeforeFirstAd)*F.s_,this.timeBetweenAds=((0,L.$K)(this.apiConfig.settings.advertising.timeBetweenAds)?this.apiConfig.settings.advertising.timeBetweenAds:e.timeBetweenAds)*F.s_,this.upNextMode=(0,L.$K)(this.apiConfig.settings.nextVideoMode)?this.apiConfig.settings.nextVideoMode:e.upNextMode,this.closedCaptionDefault=(0,L.$K)(this.apiConfig.settings.customization.closedCaptionDefault)?this.apiConfig.settings.customization.closedCaptionDefault:e.closedCaption,this.logoPosition=(0,L.$K)(this.apiConfig.settings.customization.logoPosition)?this.apiConfig.settings.customization.logoPosition:e.logoPosition,(e.symbolResource||(0,L.QM)(this.apiConfig.settings.customization.symbolUrl))&&(this.symbolUrl=(0,L.QM)(this.apiConfig.settings.customization.symbolUrl)?this.apiConfig.settings.customization.symbolUrl:this.Ue.appendParamsToUrl(`${qe.n.endPoints.base.image}${e.playerId}/${e.symbolResource}`)),this.playerType=e.playerType,this.playerType!==ci.ProtoElementsTypeEnum.OutStream||!this.apiConfig.settings.outstreamAdAsContent&&this.apiConfig.playerMode!==j.B.Buzzfeed||(this.outstreamAdAsContent=!0);((0,L.$K)(this.apiConfig.settings.outstreamSettings.endAdBreakPolicy)?this.apiConfig.settings.outstreamSettings.endAdBreakPolicy===ci.ProtoOutstreamEndAdBreakPolicyEnum.Loop:e.outstreamEndAdBreakPolicy===ci.ProtoOutstreamEndAdBreakPolicyEnum.Loop)&&(this.outstreamAdAsContent=!0,this.loopAdWhenFinished=!0),(0,L.r)(this.minTimeBeforeFirstAd)||this.apiConfig.playerMode===j.B.Buzzfeed||this.outstreamAdAsContent||(this.minTimeBeforeFirstAd=10),(0,L.QM)(this.apiConfig._appSettings.bundleID)&&!this.isInApp()&&(0,s.n)({message:"Elements_PlayerModel_bundle_id_for_non_in_app",level:s.D.CRITICAL}),!(0,L.QM)(this.apiConfig._appSettings.bundleID)&&this.isInApp()&&(0,s.n)({message:"Elements_PlayerModel_bundle_id_missing_for_in_app",level:s.D.CRITICAL}),this.videoQuality=(0,L.$K)(this.xJ.videoQuality)?this.xJ.videoQuality:ci.ProtoVideoQuality.Auto;const g=e.playlist.map((({mediaId:t,revisionNumber:i,insightsRevisionNumber:e,mediaContentVersionId:s,disableAdvertising:n})=>(0,L.QM)(t)&&(0,L.hj)(i)?{mediaId:t,revisionNumber:i,insightsRevisionNumber:e,mediaContentVersionId:s,shouldDisableAdvertising:n}:null)).filter((t=>!!t)),y=new cn(this.Ue,g,{playerType:this.playerType,mediaId:this.apiConfig.mediaId,mediaIdList:this.apiConfig.mediaIdList,shouldUseMediaIdListAsPlaylist:this.apiConfig.useMediaIdListAsPlaylist},this.apiConfig.settings.playlist);if(y.hasExternalLivestream()&&(this.playerType=ci.ProtoElementsTypeEnum.Live,this.playbackMode=o.ProtoPlayerPlaybackModeEnum.ClickToPlay),this.playlist=y.playlist,this.isOutStreamType()){const t=(0,L.$K)(this.apiConfig.settings.outstreamSettings.initialRendering)?this.apiConfig.settings.outstreamSettings.initialRendering:e.outstreamInitialRendering,i=(0,L.QM)(this.apiConfig.settings.outstreamSettings.houseScreenColor)?this.apiConfig.settings.outstreamSettings.houseScreenColor:e.outstreamHouseBackgroundColor,s=((0,L.$K)(this.apiConfig.settings.outstreamSettings.totalAdBreakLength)?this.apiConfig.settings.outstreamSettings.totalAdBreakLength:e.outstreamTotalAdBreakLength)*F.s_,n=(0,L.$K)(this.apiConfig.settings.outstreamSettings.endAdBreakPolicy)?this.apiConfig.settings.outstreamSettings.endAdBreakPolicy:e.outstreamEndAdBreakPolicy;this.outstreamSettings={initialRendering:t,houseScreenBackgroundColor:i,totalAdBreakLength:s,endAdBreakPolicy:n}}((0,L.$K)(this.apiConfig.settings.gallery.style)&&this.apiConfig.settings.gallery.style!==ci.ProtoGalleryStyleMode.None||!(0,L.$K)(this.apiConfig.settings.gallery.style)&&e.galleryStyle!==ci.ProtoGalleryStyleMode.None)&&this.floatingSettings.floatingMode!==ci.ProtoPlayerFloatingMode.Always&&(this.gallery={style:(0,L.$K)(this.apiConfig.settings.gallery.style)?this.apiConfig.settings.gallery.style:e.galleryStyle,orientation:this.hY()}),this.nonlinearPlayerSettings=(null===(v=this.apiConfig.settings.advertising)||void 0===v?void 0:v.nonlinearPlayerSettings)?this.aY(this.apiConfig.settings.advertising.nonlinearPlayerSettings):this.xJ.nonlinearPlayerSettings,this.LJ(this.isOutStreamType()),this.nonlinearPlayerSettings||(this.lineItemSettings.lineItems=this.lineItemSettings.lineItems.filter((t=>t.adType!==o.ProtoAdType.Nonlinear))),(0,L.$K)(this.enableNewUI)||(this.enableNewUI=(0,L.$K)(this.apiConfig.settings.customization.enableNewUI)?this.apiConfig.settings.customization.enableNewUI:e.hasNewDesign)}aY(t){const i={numberOfNonlinearAds:t.numberOfNonlinearAds?t.numberOfNonlinearAds:0,timeSecondsBetweenNonlinear:t.timeSecondsBetweenNonlinear?t.timeSecondsBetweenNonlinear:5,timeSecondsBetweenLinearAndNonlinear:t.timeSecondsBetweenLinearAndNonlinear?t.timeSecondsBetweenLinearAndNonlinear:0};i.numberOfNonlinearAds<0&&(i.numberOfNonlinearAds=0),i.numberOfNonlinearAds>10&&(i.numberOfNonlinearAds=10);i.timeSecondsBetweenNonlinear<1&&(i.timeSecondsBetweenNonlinear=1),i.timeSecondsBetweenNonlinear>180&&(i.timeSecondsBetweenNonlinear=180);return i.timeSecondsBetweenLinearAndNonlinear<0&&(i.timeSecondsBetweenLinearAndNonlinear=0),i.timeSecondsBetweenLinearAndNonlinear>180&&(i.timeSecondsBetweenLinearAndNonlinear=180),i}getPlaylistDetails(){const{playlistName:t,playlistDescription:i,playlistThumbnail:e}=this.rY.settings.customization;return{id:this.xJ.playlistId,name:(0,L.QM)(t)?t:this.xJ.playlistName,description:(0,L.QM)(i)?i:this.xJ.playlistDescription,thumbnail:(0,L.QM)(e)?e:this.xJ.playlistThumbnail}}get urlSuffixerService(){return this.Ue}isInApp(){return(0,l.d3)(this.playerType,[ci.ProtoElementsTypeEnum.InStreamInApp])}isInStreamType(){return(0,l.d3)(this.playerType,[ci.ProtoElementsTypeEnum.InStream,ci.ProtoElementsTypeEnum.InStreamInApp])}isOutStreamType(){return(0,l.d3)(this.playerType,[ci.ProtoElementsTypeEnum.OutStream])}isLiveType(){return(0,l.d3)(this.playerType,[ci.ProtoElementsTypeEnum.Live])}UJ(t){return this.outstreamAdAsContent?0:super.UJ(t)}NJ(t){return t.filter((t=>this.playerType===ci.ProtoElementsTypeEnum.InStream||this.playerType===ci.ProtoElementsTypeEnum.InStreamInApp||t.adType!==o.ProtoAdType.Nonlinear))}oY(){return{responsive:(0,L.$K)(this.apiConfig.settings.customization.responsive)?this.apiConfig.settings.customization.responsive:this.xJ.responsive,ratioWidth:(0,L.$K)(this.apiConfig.settings.customization.ratioWidth)?this.apiConfig.settings.customization.ratioWidth:this.xJ.ratioWidth,ratioHeight:(0,L.$K)(this.apiConfig.settings.customization.ratioHeight)?this.apiConfig.settings.customization.ratioHeight:this.xJ.ratioHeight,fixedWidth:(0,L.$K)(this.apiConfig.settings.customization.fixedWidth)?this.apiConfig.settings.customization.fixedWidth:this.xJ.fixedWidth,fixedHeight:(0,L.$K)(this.apiConfig.settings.customization.fixedHeight)?this.apiConfig.settings.customization.fixedHeight:this.xJ.fixedHeight}}hY(){return this.VO===o.ProtoDeviceType.Smartphone||this.VO===o.ProtoDeviceType.Tablet?ci.ProtoGalleryOrientationEnum.Portrait:this.apiConfig.settings.gallery.orientation?this.apiConfig.settings.gallery.orientation:this.xJ.galleryOrientation}}const ln={PlaybackModeEnum:{AutoPlay:o.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:o.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:o.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:o.ProtoPlayerSoundMode.On,Off:o.ProtoPlayerSoundMode.Mute,OnHover:o.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:o.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:o.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:o.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:o.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:o.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:o.ProtoPlayerCloseButtonMode.Off,On:o.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:o.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:o.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:o.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:o.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:w.se,LineItemExcludedSlotsEnum:{PreRoll:o.ProtoAdSlotsEnum.PreRoll,MidRoll:o.ProtoAdSlotsEnum.MidRoll,PostRoll:o.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:v.n9.SetupError,NoPlayer:v.n9.NoPlayer},FloatingModeEnum:{Off:o.ProtoPlayerFloatingMode.Off,OnPageLoad:o.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:o.ProtoPlayerFloatingMode.AfterInView,Always:o.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:o.ProtoDeviceType.Desktop,Smartphone:o.ProtoDeviceType.Smartphone,Tablet:o.ProtoDeviceType.Tablet,Other:o.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:o.ProtoFloatingFixedPositionMode.Page,Element:o.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:o.ProtoPositionMode.BottomRight,BottomLeft:o.ProtoPositionMode.BottomLeft,TopRight:o.ProtoPositionMode.TopRight,TopLeft:o.ProtoPositionMode.TopLeft,PinnedTop:o.ProtoPositionMode.PinnedTop,PinnedBottom:o.ProtoPositionMode.PinnedBottom},FloatingStatesEnum:{Float:D.Xx.Float,Embed:D.Xx.Embed},FloatingAppendLocationEnum:{Above:o.ProtoFloatingAppendLocationEnum.Above,Below:o.ProtoFloatingAppendLocationEnum.Below,Within:o.ProtoFloatingAppendLocationEnum.Within},ImplementationTypeEnum:{Amp:o.ProtoImplementationType.Amp,Web:o.ProtoImplementationType.Web},ImpressionTrackerTypeEnum:{Image:o.ProtoTrackerType.Image,Javascript:o.ProtoTrackerType.Javascript,IAS:o.ProtoTrackerType.IAS}},un=Object.assign(Object.assign({},ln),{NextVideoModeEnum:{Next:ci.ProtoPlayerUpNextMode.Next,Loop:ci.ProtoPlayerUpNextMode.Loop,Stop:ci.ProtoPlayerUpNextMode.Stop},LogoPositionEnum:{None:ci.ProtoLogoPositionMode.None,ControlBar:ci.ProtoLogoPositionMode.ControlBar,BottomRight:ci.ProtoLogoPositionMode.BottomRight,BottomLeft:ci.ProtoLogoPositionMode.BottomLeft,TopRight:ci.ProtoLogoPositionMode.TopRight,TopLeft:ci.ProtoLogoPositionMode.TopLeft},PlayerTypesEnum:{InStream:ci.ProtoElementsTypeEnum.InStream,OutStream:ci.ProtoElementsTypeEnum.OutStream,InStreamInApp:ci.ProtoElementsTypeEnum.InStream,Live:ci.ProtoElementsTypeEnum.Live},GalleryStyleModeEnum:{None:ci.ProtoGalleryStyleMode.None,Detailed:ci.ProtoGalleryStyleMode.Detailed,Visual:ci.ProtoGalleryStyleMode.Visual},GalleryOrientationEnum:{Landscape:ci.ProtoGalleryOrientationEnum.Landscape,Portrait:ci.ProtoGalleryOrientationEnum.Portrait},InitialRenderingEnum:{ExpandWithAd:ci.ProtoOutstreamInitialRenderingEnum.ExpandWithAd,FullyRendered:ci.ProtoOutstreamInitialRenderingEnum.FullyRendered},EndAdBreakPolicyEnum:{Hide:ci.ProtoOutstreamEndAdBreakPolicyEnum.Hide,HouseScreen:ci.ProtoOutstreamEndAdBreakPolicyEnum.HouseScreen,Loop:ci.ProtoOutstreamEndAdBreakPolicyEnum.Loop}});function pn(t,i){const e=t.toObject({},{defaults:!0,arrays:!0,objects:!0}),s=function(t){return t.toObject({},{defaults:!0,arrays:!0,objects:!0})}(i);return e.players.push(s),e.browser=o.Browser.toObject(o.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e.geoLocation=o.GeoLocation.toObject(o.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e}var fn=r(1783),mn=r(4646);class vn extends Ns{constructor(t,i,e){super(),this.wh=t,this.Fo=i,this.cY=[fn.li.backgrounded,fn.li.notFound,fn.li.hidden];try{this.d_=new hs.Q,this.u_(),this.Fo.isOmsdkFullSupport&&this.Fo.omidAdSessionStart.subscribe((t=>{this.u_()}))}catch(t){(0,s.n)({message:"omid_verification_client_error",exception:t.message,callStack:t.callStack,level:e?s.D.CRITICAL:s.D.INFO})}}subscribe(t,i){return this.d_.on(t,i)}setViewableThreshold(t){}dY(t){super.setViewableThreshold(t)}u_(){const t=mn.$.getVerificationClient(this.wh);if(!t)throw new Error("omid_verification_client_not_found");if(this.lY=new t,!this.lY.isSupported())throw new Error("omid_not_implemented");this.uY(),this.ew()}uY(){this.lY.registerSessionObserver((t=>{t&&t.type===fn._f.sessionError&&(0,s.n)({message:"omid_verification_client_session_error",exception:t.data.message,level:s.D.WARN})}))}pY(t,i){return!(!this.zX||0!==i)||0!==t.length&&this.cY.some((i=>t.includes(i)))}ew(){this.lY.addEventListener(fn._f.geometryChange,(t=>{try{const{percentageInView:i,reasons:e}=t.data.adView;this.QX(this.pY(e,i));const s=i/100;this.dY(s),this.d_.trigger(v.jJ.OmidViewabilityThreshold,s)}catch(t){(0,s.n)({message:"omid_verification_client_geometry_change_error",exception:t.message,callStack:t.callStack,level:s.D.CRITICAL},{throttle:1})}}))}}var gn=r(307);const yn=`cnx-player-css-${Ts.g.version}`;var bn=r(5742);class In extends h.a{AP(){return{id:yn,src:qe.n.endPoints.assets.css.elements}}getDelegateHandler(){return{getCurrentPlaybackTime:()=>{if(!this.renderer)return 0;const t=this.renderer.getApiMethods();return t.getPlayerType()===ci.ProtoElementsTypeEnum.OutStream?0:t.getVideoCurrentPosition()},getCurrentVolume:()=>this.renderer.getApiMethods().getVolume()}}getRendererInstance(t,i,e,s,n,r,o,h,a,c){return new Fs(this,t,i,e,s,n,r,o,h,a,c)}getViewabilityService(t,i,e){if(this.externalAttributes.settings.useExternalViewabilityService)return new Ns;if(this.gA.isInApp&&!this.gA.isInAppHybrid){const t=g.h.getSessionChildContainer(e.sessionId).resolve(y.G);return new vn(window,t,this.gA.isInAppSDK)}return new $s(t.global,i,e,t.isOutStreamType())}getPlayerRequest(t){return(0,bt.Up)((()=>we.n.sendProtoRequest({protoResponse:ci.ProtoElementsResponse,protoRequest:ci.ProtoElementsRequest,requestData:t,endpoint:qe.n.endPoints.api.pls,hasCredentials:!0,queryParams:Object.assign({[gn.Fk]:Ts.g.version},bn.f.getCidKeyValueObject()),shouldLogErrors:!0})),this.PLAYER_REQUEST_RETRIES_NUMBER)}getPlayerResponse(t){return new Promise(((i,e)=>{this.getPlayerRequest(t).then((t=>{qe.n.setTier(t.tier),window.parent.connatixDummy&&(0,_e.Ph)("connatixDummy",this.pageUrl)&&(t.players[0]=Object.assign(Object.assign({},t.players[0]),window.parent.connatixDummy)),i(t)})).catch((t=>{e(t)}))}))}getPlayerModel(t,i,e,n){const r=new dn(t.insertWindow?t.insertWindow:this.GLOBAL,t.insertContainer,i.players[n],i.browser.device,i.secondLevelDomain,this.externalAttributes,this.isServerlessMode,i.supplyChain,e,i.lineItemAbTestInformation,this.queryParams.cnxVideoPosition,i.isSeoTraffic||this.queryParams.cnxIsSeoTraffic,this.queryParams.cnxEnableNewUi);return 0===r.playlist.length?((0,s.n)({message:"ElementsLoader_no_playlist_items",level:s.D.CRITICAL}),null):r}getApiConfigEnums(){return un}getApiConfigEvents(){return Ni}getSpecificRequestData(){const t={localTimestamp:(0,Xi.x8)()};(0,l.BZ)(this.externalAttributes.mediaIdList)&&(t.useMediaIdListAsPlaylist=this.externalAttributes.useMediaIdListAsPlaylist),this.queryParams.cnxMediaId?t.forceMediaIdList=[this.queryParams.cnxMediaId]:this.externalAttributes.mediaIdList?t.forceMediaIdList=this.externalAttributes.mediaIdList:this.externalAttributes.mediaId&&(t.forceMediaIdList=[this.externalAttributes.mediaId]),this.queryParams.cnxPlaylistId?t.forcePlaylistId=this.queryParams.cnxPlaylistId:this.externalAttributes.playlistId&&!(0,l.BZ)(this.externalAttributes.settings.playlist)&&(t.forcePlaylistId=this.externalAttributes.playlistId),this.queryParams.cnxDebug&&(t.cnxDebug=this.queryParams.cnxDebug);const i=this.externalAttributes.settings.forceSourceItemId;return(0,L.QM)(i)&&(t.forceSourceItemId=i),t}OA(){super.OA(),this.externalAttributes.settings.gallery={},this.externalAttributes.settings.outstreamSettings={}}fY(t){t.forEach((t=>{t.ratioWidth=16,t.ratioHeight=9}))}defaultInitFromProto(){const t=pn(ci.ProtoElementsResponse,ci.ProtoElements);return this.fY(t.players),t}}var wn=r(9130),Sn=r(3003);r(7129);const An={[_s.o.connatix]:"cnx",[_s.o.elements]:"cnxel"};var Pn=r(7124);const _n=window.parent,xn=[],Tn=(0,M.bZ)(gn.ym,window.document.currentScript);bn.f.customerId=Tn,window.addEventListener("unload",(function(t){xn.forEach((t=>t.destroy()))}));const kn=(0,bt.pE)(_n).topFrame;Xs.e.abServiceType=Xs.j.ElementsABService;const Cn=(t,i)=>i.AMP_CONTEXT_DATA||t.settings.implementationType===o.ProtoImplementationType.Amp,En=function(i,e,n,r,o,h){var a,c,d;const l=Cn(i,_n),u=new In(n,_n,r,l,o,h);xn.push(u);const p=function(){const t={id:yn,src:qe.n.endPoints.assets.css.elements};(0,bt.Up)((()=>function(t){return new Promise(((i,e)=>{if((0,M.rI)(t.id,kn))return i();(0,M.NS)(t,kn.document.head,kn,(()=>i()),(t=>e(t)))}))}(t))).catch((t=>{throw(0,s.n)({message:"Prerender_Elements_Loader_add_css_link",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3}),t})).then((()=>{try{(0,M.Nb)(_n),u.updateQueryParams(),u.loadScriptTag(i,e)&&u.insertRenderer()}catch(t){(0,s.n)({message:"Prerender_Elements_main_insertRenderer",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}})).catch((()=>{}))};r.isInApp?(t.n.CONNECTION_TYPE=null===(a=null==i?void 0:i._appSettings)||void 0===a?void 0:a.connectionType,u.setInappPageUrl(null===(c=null==i?void 0:i._appSettings)||void 0===c?void 0:c.appPageURL),p()):u.findPageUrl(_n,null===(d=null==i?void 0:i.settings)||void 0===d?void 0:d.ampUrl).then((()=>{p(),u.setClientAb1()})).catch((t=>{(0,s.n)({message:"Prerender_Elements_main_init",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3}),u.registerApiError()}))};try{!function(){if((0,bt.oC)())return;if(!e.o)return;qe.n.bundleDomain=e.o;const t=An[e.o],i=e.o===_s.o.elements;let r=[];_n[t]&&(r=_n[t].cmd),_n[t]=function(){const e={};return e[t]=function(t){var e;t.settings=t.settings||{},t._appSettings=t._appSettings||{},t._appSettings.cmp=t._appSettings.cmp||{},t._appSettings.tcf=t._appSettings.tcf||{},t._appSettings.customJsTargetingObject=t.settings.queryJsTargeting||{},t.settings.customization=t.settings.customization||{},t.settings.rendering=t.settings.rendering||{},t.settings.advertising=t.settings.advertising||{},t.settings.outstreamSettings=t.settings.outstreamSettings||{},t.settings.gallery=t.settings.gallery||{},t.settings._connatixInternals=t.settings._connatixInternals||{},t.settings.plugins=t.settings.plugins||{},t.settings.advertising.skipAdSettings=t.settings.advertising.skipAdSettings||{},t.settings.useExternalViewabilityService=!1;return[].includes(null===(e=null==t?void 0:t._appSettings)||void 0===e?void 0:e.bundleID)&&(0,s.n)({level:s.D.INFO,message:"CNX_INAPP_SETTINGS",exception:JSON.stringify(t._appSettings)}),t=(t=>{var i,e,s;const n=Object.assign({},t),r=null===(i=n._appSettings)||void 0===i?void 0:i.cmp;((0,L.QM)(null===(e=n._appSettings)||void 0===e?void 0:e.gdprConsentString)||(0,L.QM)(null===(s=n._appSettings)||void 0===s?void 0:s.gdprParsedVendorString))&&(n._appSettings.cmp={consentString:(0,L.QM)(null==r?void 0:r.consentString)?r.consentString:n._appSettings.gdprConsentString,parsedVendorConsents:(0,L.QM)(null==r?void 0:r.parsedVendorConsents)?r.parsedVendorConsents:n._appSettings.gdprParsedVendorString});const o=Object.assign({},(0,Sn.EQ)(Object.assign({},n._appSettings.cmp))),h=Object.assign({},(0,Sn.EQ)(Object.assign({},n._appSettings.tcf))),{usPrivacyString:a,deviceID:c,appPageURL:d}=(0,Sn.EQ)({usPrivacyString:n._appSettings.usPrivacyString,deviceID:n._appSettings.deviceID,appPageURL:n._appSettings.appPageURL});return n._appSettings=Object.assign(Object.assign({},n._appSettings),{cmp:o,tcf:h,usPrivacyString:a,deviceID:c,appPageURL:d}),n})(t),{render:function(e,r){try{const s=Pn.$.getEnvironment(t._appSettings);if(s.isInAppHybrid&&!Pn.$.isValidWebviewInApp(s))throw new Error("not a valid in app webview implementation. Missing bundle id or webViewability setting");s.isInAppSDK&&(t.settings.useExternalViewabilityService=Pn.$.shouldUseExternalViewabilityService(t._appSettings.sdkVersion));const o=((t,i)=>{const{settings:{plugins:e}}=t,{cmp:s,tcf:r,usPrivacyString:o,deviceID:h}=t._appSettings,a=Cn(t,_n);return{UserManagerService:new n.x(kn,i,a,{cmp:s,tcf:r,usPrivacyString:o,deviceID:h}),EventsStorageService:new wn.C(e._debugLogging)}})(t,s.isInApp);En(t,e,o,s,i,r)}catch(t){(0,s.n)({message:"Prerender_Elements_main_initPlayer",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}}}},e[t].cmd={push:function(t){try{t()}catch(t){(0,s.n)({message:"Prerender_Elements_main_push_callback",level:s.D.INFO,callStack:t.stack,exception:t.message},{throttle:1e3})}}},e[t].configEnums=un,e[t].configEvents=Ni,e[t]}(),r.forEach((t=>{try{t()}catch(t){(0,s.n)({message:"Prerender_Elements_main_commands_callback",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}}))}()}catch(t){(0,s.n)({message:"Prerender_Elements_main",exception:t.message,callStack:t.stack,level:s.D.INFO},{throttle:1e3})}})(),o=r.O(o)})();