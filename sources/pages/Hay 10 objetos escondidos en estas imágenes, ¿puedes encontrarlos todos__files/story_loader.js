var __ENG_STORY_LOADER_VERSION="1.0.1",_ENG_WIDGETS=_ENG_WIDGETS||[],_ENG_is_google_tag_ran=_ENG_is_google_tag_ran||!1,_ENG_is_yandex_tag_ran=_ENG_is_yandex_tag_ran||!1,_ENG_is_sr_started_loading=_ENG_is_sr_started_loading||!1,_ENG_is_av_started_loading=_ENG_is_av_started_loading||!1,googletag=googletag||{};googletag.cmd=googletag.cmd||[];var urlSearchParams=new URLSearchParams(top.location.search),storyIdToOpenOnWidgetLoad=urlSearchParams.get("o_s"),ipidKeyValue="string"==typeof storyIdToOpenOnWidgetLoad?"&ipid="+storyIdToOpenOnWidgetLoad:"",storiyaStagingEnv=parseInt(urlSearchParams.get("storiya_staging")),publisher_id_param=Number(urlSearchParams.get("pubid")),website_id_param=Number(urlSearchParams.get("webid")),widget_id_param=Number(urlSearchParams.get("wid")),orig_widget_id_param=Number(urlSearchParams.get("o_wid")),ENG=function(t){this.eng_age="age",this.widget_wrapper_elm_id=t.wwei,this.pid=t.pid?t.pid:"",this.subid=t.subid?t.subid:"",this.publisher_id=t.pubid?t.pubid:"",this.website_id=t.webid?t.webid:"",this.widget_id=t.wid?t.wid:"",(storiyaStagingEnv||=t.stg)&&(!orig_widget_id_param||orig_widget_id_param==this.widget_id)&&(this.publisher_id=publisher_id_param||this.publisher_id,this.website_id=website_id_param||this.website_id,this.widget_id=widget_id_param||this.widget_id),this.width=t.width||"",this.height=t.height||"",this.plr_elm_id=t.plreid,this.plr_type=t.plrtid||-1,this.eng_ya="ya",this.show_on_pause=t.issop?t.issop:0,this.show_on_complete=t.issoc?t.issoc:0,this.show_on_idle=t.issoi?t.issoi:0,this.is_index_page=t.isidx?t.isidx:1,this.is_widget_autorun=t.isar?t.isar:0,this.is_video_widget=t.isvw?t.isvw:0,this.plr_wmode=t.pwmd?t.pwmd:"opaque",this.plr_func_name=t.pfn,this.input_url=t.iurl||null,this.eng_api_pref=t.on?"api":"recs",t.on=t.on||"eng"+this.eng_age+this.eng_ya,this.widget_base_url="//widget."+t.on+".com",this.feed_url="ext1-api."+t.on+".com/gas-api/feed.json",this.recs_url=this.eng_api_pref+"."+t.on+".com/rec-api/getrecs.json",this.recs_url_premium="premium."+t.on+".com/rec-api/getrecs.json",this.multi_widgets_recs_url=this.eng_api_pref+"."+t.on+".com/rec-api/get_mw_recs.json",this.pp_recs_url="api3."+t.on+".com/rec-api/getrecs.json",this.is_do_pp_recs_call=!1,this.exclude_post_url=this.eng_api_pref+"."+t.on+".com/rec-api/outpid.json",this.exclude_post_adn_url=this.eng_api_pref+"."+t.on+".com/rec-api/outpidadn.json",this.event_url=this.eng_api_pref+"."+t.on+".com/rec-api/event.json",this.client_event_url=this.eng_api_pref+"."+t.on+".com/rec-api/clientevent.json",this.default_imgs_url="widget."+t.on+".com/img/",this.aws_images_url="//img9-api."+t.on+".com",this.cdn_images_url="//img9-api."+t.on+".com",this.google_tag_script_url="https://www.googletagservices.com/tag/js/gpt.js",this.default_video_post_btn=this.widget_base_url+"/img/vplay.png",this.doc_ready_called=!1,this.random_id=Math.ceil(1e17*Math.random()),this.cb=t.on+"_cb_"+this.random_id,this.num_of_slides=t.tnos||15,this.min_slides=2,this.jq=null,this.num_of_jq_attempts=50,this.find_wrapper_elm_retries=10,this.widget_idx=0,this.isNoConflictJquery=t.ncjqry||!1,this.scripts_elms=[],this.get_recs_states=[[],["BUFFERING","PLAYING"],[0,2,3],[1]],this.rec_types=["all","eng_story_inner","eng_story_ads","eng_story_outer"],this.widget_wrapper_elm=null,this.widget_add_data=null,this.is_widget_wrapper_dom_ready=!1,this.is_user_initiated_event=!1,this.data_json=null,this.is_real_imps_called=!1,this.visible_posts_and_types=[],this.load_time_start=new Date().getTime(),this.widget_direction="left",this.widget_op_direction="right",this.click_pixels=t.cpxls?t.cpxls:"",this.premium_pub_ids=[158041],this.max_num_of_image_load_retries=6,this.image_load_retries_arr={},this.widget_ready_cb=t.wrcb||null,this.log_types={ALL:"ALL",WARNING:"WARNING",INFO:"INFO",ERROR:"ERROR"},this.log_printout=null,this.pp_recs_website_ids=[],this.total_slides=null,this.get_post_cb="_eng_gpcb_"+this.random_id,this.align_dims_post_ids=[-140621],this.num_of_align_dims_retries=20,this.is_multi_widgets=t.ismw||null,this.is_multi_widgets_initiator=!1,this.exclude_posts_reasons_arr=[{val:1,title:"Uninteresting"},{val:2,title:"Misleading"},{val:3,title:"Offensive"},{val:4,title:"Repetitive"},{val:5,title:"Other"}],this.is_show_exclude_box=!1,this.exclude_posts_box_default_thank_you="Thank You! <br> We will try not to show you this content anymore.",this.srPlayer=null,this.AVPlayer=null,this.externalAdditionalDataTypes={STREAM_RAIL:1,ANY_VIEW:3},this.extVideoTypeNames=["","srail","","aniview"],this.place_holders={WIDTH:"[WIDTH]",HEIGHT:"[HEIGHT]",PAGE_URL:"[PAGE_URL]",DNT:"[DO_NOT_TRACK]",CACHE_BUSTER:"[CACHE_BUSTER]",PAGE_TITLE:"[PAGE_TITLE]",SUB_ID:"[SUB_ID]"},this.ext_video_dims={width:0,height:0},this.ext_video_options={},this.is_super_native=!1,this.ad_real_impression_pixels=[],this.ad_real_impression_js_pixels=[],this.ad_click_pixels=[],this.pixels_consts={ENG_PIXEL_TRACK_IMP:"ENG_PIXEL_TRACK_IMP",ENG_PIXEL_TRACK_RIMP:"ENG_PIXEL_TRACK_RIMP",ENG_PIXEL_TRACK_CLK:"ENG_PIXEL_TRACK_CLK",ENG_PIXEL_TRACK_IMP_JS:"ENG_PIXEL_TRACK_IMP_JS",ENG_PIXEL_TRACK_RIMP_JS:"ENG_PIXEL_TRACK_RIMP_JS",ENG_PIXEL_TRACK_CLK_JS:"ENG_PIXEL_TRACK_CLK_JS"},this.amp_widget_cb=t.ampwcb||null,this.is_amp_widget=t.isampw||!1,this.amp_caller_obj=t.ampobj||null,this.is_cancel_external_jquery_load_try=t.iscnclextjqry||!1,this.is_ext_video_loaded=!1,this.is_sr_blade=!1,this.is_yandx_ran=!1,this.stories=[],this.stories_css_files=[],this.stories_js_files=["_eng_story.js"],this.stories_js_path=this.widget_base_url+"/stories_js/",this.stories_css_path=this.widget_base_url+"/story_css/",this.staging_env_replace_key="$",this.staging_stories_js_file_path="https://stg-static-env0"+this.staging_env_replace_key+".engageya.com/stories_js/_eng_story_staging.js",this.is_stories_js_loaded=!1,this.load_stories_js_num_of_retries=20,this.stories_widget_options={},this.stories_skin={},this.story_item_params={ID:"itemId",TYPE_ID:"typeId",LENGTH:"length",IMAGE_SOURCE:"source",PREVIEW:"preview",LINK:"link",LINK_TEXT:"linkText",TIME:"time",ADDITIONAL_DATA:"itemAddData"},this.client_event_types={WIDGET_ENGAGEMENT:0},this.story_item_types_map=["","photo","video"],this.operator_name=t.on,this.video_ads_tiles=[2,4],this.ext_video_elm=null};(ENG_MULTI_WIDGETS=function(t){ENG.call(this,t),this.input_obj=t,this.multi_widget_ids=t.mwids,this.multi_widget_ids_arr=t.mwids.split(","),this.is_multi_widgets_initiator=!0}).prototype=new ENG({}),ENG.prototype.run=function(){1==this.is_video_widget?this.attach_player_events():this.start_run()},ENG.prototype.attach_player_events=function(){1==this.plr_type?this.attach_jwplayer_events():2==this.plr_type?this.attach_flowplayer_events():this.attach_generic_player_events(),1==this.is_widget_autorun&&this.start_run()},ENG.prototype.attach_jwplayer_events=function(){var t=this;jwplayer(this.plr_elm_id).onPlay(function(){t.on_play_action()}),jwplayer(this.plr_elm_id).onBuffer(function(){t.on_play_action()}),jwplayer(this.plr_elm_id).onPause(function(){t.on_pause_action()}),jwplayer(this.plr_elm_id).onIdle(function(){t.on_idle_action()}),jwplayer(this.plr_elm_id).onComplete(function(){t.on_complete_action()}),this.plr_get_state_fnc=jwplayer(this.plr_elm_id).getState,this.state_events()},ENG.prototype.attach_flowplayer_events=function(){var t=this,e=null;e=flowplayer(this.plr_elm_id)?flowplayer(this.plr_elm_id):flowplayer();try{e.onStart(function(){t.on_play_action()}),e.onLoad(function(){t.on_play_action()}),e.getClip().onResume(function(){t.on_play_action()}),e.getClip().onPause(function(){t.on_pause_action()}),e.getClip().onStop(function(){t.on_pause_action()}),e.getClip().onFinish(function(){t.on_complete_action()}),this.plr_get_state_fnc=e.getState}catch(i){e.bind("load",function(e,i){t.on_play_action()}),e.bind("click",function(e,i){t.is_user_initiated_event=!0}),e.bind("resume",function(e,i){t.on_play_action()}),e.bind("pause",function(e,i){t.is_user_initiated_event&&(t.on_pause_action(),t.is_user_initiated_event=!1)}),e.bind("stop",function(e,i){t.on_pause_action()}),e.bind("finish",function(e,i){t.on_complete_action()}),this.plr_get_state_fnc=function(){return 1}}this.state_events()},ENG.prototype.attach_generic_player_events=function(){var t=this;try{var e=window[this.plr_func_name](this.plr_elm_id)}catch(i){}e=(e=e||window[this.plr_func_name])||document.getElementById(this.plr_elm_id);try{e.onStart(function(){t.on_play_action()})}catch(s){}try{e.onLoad(function(){t.on_play_action()})}catch(r){}try{e.onPlaying(function(){t.on_play_action()})}catch(n){}try{e.onplay=function(){t.on_play_action()}}catch(o){}try{e.onPlay(function(){t.on_play_action()})}catch(a){}try{e.onBuffer(function(){t.on_play_action()})}catch(d){}try{e.onResume(function(){t.on_play_action()})}catch(l){}try{e.onPause(function(){t.on_pause_action()})}catch(p){}try{e.onpause=function(){t.on_pause_action()}}catch(h){}try{e.onStop(function(){t.on_pause_action()})}catch(g){}try{e.onFinish(function(){t.on_complete_action()})}catch(c){}try{e.onended=function(){t.on_complete_action()}}catch(u){}try{e.onComplete(function(){t.on_complete_action()})}catch(m){}try{this.plr_get_state_fnc=e.getState||function(){return 1}}catch(f){}this.state_events()},ENG.prototype.on_play_action=function(){this.hide_widget(this),this.start_run()},ENG.prototype.on_pause_action=function(){1==this.show_on_pause&&this.is_widget_wrapper_dom_ready&&this.show_widget()},ENG.prototype.on_idle_action=function(){1==this.show_on_idle&&this.show_widget()},ENG.prototype.on_complete_action=function(){1==this.show_on_complete&&this.show_widget()},ENG.prototype.state_events=function(){this.is_load_recs_state()&&this.start_run()},ENG.prototype.is_load_recs_state=function(){var t=this.plr_get_state_fnc();return this.in_array(t,this.get_recs_states[this.plr_type])},ENG.prototype.show_widget=function(){this.jq("#eng_recs_holder_"+this.random_id).fadeIn("slow"),this.align_widget_elements()},ENG.prototype.hide_widget=function(t){try{this.jq("#eng_recs_holder_"+t.random_id).hide()}catch(e){}},ENG.prototype.attach_widget_events=function(){try{var t=this;this.load_real_imps_events(),this.widget_imgs_events(),this.widget_clicks_events(),this.posts_exclusion_box_events(),this.jq("#eng_ww_close_"+this.random_id).click(function(){t.hide_widget(t)})}catch(e){console.log("ERROR - events:"),console.log(e)}},ENG.prototype.widget_clicks_events=function(){this.attach_on_click_pixel_event(),this.attach_widget_engagement_event()},ENG.prototype.attach_widget_engagement_event=function(){var t=this,e=this.get_client_event_url(0);this.jq("#"+this.widget_wrapper_elm_id).click(function(){if(!t.is_widget_engagement_fired){var i=document.createElement("img");i.src=e,i.style.display="none",this.appendChild(i)}t.is_widget_engagement_fired=!0})},ENG.prototype.get_client_event_url=function(t){var e="//"+this.client_event_url,i=this.data_json;return t==this.client_event_types.WIDGET_ENGAGEMENT&&(e+="?t="+t+"&spid="+i.srcPostId+"&swid="+i.srcWebsiteId+"&wid="+i.srcWidgetId+"&ucc="+i.requestGeoCountry),e},ENG.prototype.attach_on_click_pixel_event=function(){var t=this;if(t.click_pixels)try{for(var e=0;e<t.click_pixels.length;e++){for(var i=t.click_pixels[e],s=i.urls.split(";"),r="",n=0;n<s.length;n++)i.etype&&0!=i.etype?1==i.etype&&(r=s):r+='<img src="'+s[n]+'" style="display:none;" width="1px" height="1px" />';var o=".eng_widget_href,.eng_m_widget_href";if(0!=i.type){var a=t.rec_types[i.type];o=".eng_widget_href."+a+",.eng_m_widget_href."+a}i.etype&&0!=i.etype?1==i.etype&&t.get_recs_holder_elm().find(o).mousedown({pxls:r},function(t){try{for(var e=t.data.pxls,i=0;i<e.length;i++){var s=e[i],r=s.match("engcval_(.*?)['|\"],");if(r&&r.length>1){var n="engcval_"+r[1],o=r[1],a=".*?href=.*?"+o+"=(.*?)&",d=this.outerHTML.match(a);if(d&&d[1]){var l=decodeURIComponent(d[1]);s=s.replace(n,l)}}ga("send",s)}}catch(p){console.log("ERROR - ga click event"),console.log(p)}}):t.get_recs_holder_elm().find(o).mousedown({pxls:r},function(e){t.jq(this).append(e.data.pxls)})}}catch(d){console.log("ERROR - click pixel"),console.log(d)}},ENG.prototype.widget_imgs_events=function(){this.attach_on_img_error_event(),this.attach_on_hover_brand_img_event(),this.attach_on_img_load_event()},ENG.prototype.attach_on_hover_brand_img_event=function(){var t=this,e=this.get_add_data("brnd");e&&e.imghvr&&t.get_recs_holder_elm().hover(function(){t.jq(this).find("#eng_brnd_img_"+t.widget_id).attr("src",e.imghvr)},function(){t.jq(this).find("#eng_brnd_img_"+t.widget_id).attr("src",e.img.src)}),e&&e.img2hvr&&t.get_recs_holder_elm().hover(function(){t.jq(this).find("#eng_brnd_img2_"+t.widget_id).attr("src",e.img2hvr)},function(){t.jq(this).find("#eng_brnd_img2_"+t.widget_id).attr("src",e.img2.src)})},ENG.prototype.attach_on_img_load_event=function(){var t=this,e=function(){try{t.is_amp_widget&&t.amp_caller_obj&&t.amp_caller_obj.resizeAMPWidget()}catch(e){}},i=t.get_recs_holder_elm().find(".eng_widget_img,.eng_m_widget_img");void 0!==i.error?i.load(e):i.on("load",e)},ENG.prototype.attach_on_img_error_event=function(){var t=this,e=function(){try{var e=1*this.outerHTML.match(".*?_img_(.*?)_.*")[1],i=t.image_load_retries_arr[e];if(void 0===i&&(i=t.max_num_of_image_load_retries,t.image_load_retries_arr[e]=i),i<1)t.set_default_image(t,this);else{t.image_load_retries_arr[e]--;var s=this.src.match(".*?//.*?(/.*)")[1],r="";r=t.image_load_retries_arr[e]%2==0?t.aws_images_url+s:t.cdn_images_url+s;var n=this;window.setTimeout(function(){n.src=r+"?"+ +new Date},300)}}catch(o){console.log("ERROR:"),console.log(o),t.set_default_image(t,this)}},i=function(){var e=this.outerHTML.match(".*?_img_(.*?)_.*");e&&(e[1],t.jq(this).unbind("error"))},s=t.get_recs_holder_elm().find(".eng_widget_img,.eng_m_widget_img");void 0!==s.error?(s.error(e),s.load(i)):(s.on("error",e),s.on("load",i))},ENG.prototype.set_default_image=function(t,e){var i=t.custom_default_image||"//"+t.default_imgs_url+"def/def_"+Math.floor(3*Math.random()+1)+".jpg";t.jq(e).unbind("error").attr("src",i)},ENG.prototype.start_run=function(){"complete"==document.readyState||"loaded"==document.readyState||"interactive"==document.readyState?this.doc_ready(this):this.inj_init_binding(this)},ENG.prototype.generate_random_number=function(){return Math.ceil(1e7*Math.random())},ENG.prototype.doc_ready=function(t){t.doc_ready_called||(t.doc_ready_called=!0,t.load_jQuery(),t.validate_jquery_loaded(this))},ENG.prototype.validate_jquery_loaded=function(t){if(t.jq)t.inner_run();else if(window.jQuery)t.jq=window.jQuery,t.isNoConflictJquery&&console.log(jQuery.noConflict()),t.inner_run();else if(t.num_of_jq_attempts--,t.num_of_jq_attempts>0){window.setTimeout(function(){t.validate_jquery_loaded(t)},100);return}},ENG.prototype.load_jQuery=function(){window.jQuery?this.jq=window.jQuery:this.is_cancel_external_jquery_load_try||this.append_script_to_head("//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js","")},ENG_MULTI_WIDGETS.prototype.inner_run=function(t){var e=t||this;e.load_stories_files();for(var i=0;i<e.multi_widget_ids_arr.length;i++){var s=e.input_obj,r=e.multi_widget_ids_arr[i];s.wid=r,s.wwei=s.wweprfx+r,new ENG(s).run()}window[e.cb]=function(t){for(var e=0;e<_ENG_WIDGETS.length;e++)for(var i=0;i<t.length;i++)if(_ENG_WIDGETS[e].widget_id==t[i].widget.id){var s=_ENG_WIDGETS[e],r=t[i];r.rndid=s.random_id,window[s.cb](r)}};var n=e.get_page_url();e.get_lang();var o=e.get_page_ttl(),a=e.get_meta_content("keywords","content"),d=document.characterSet?document.characterSet:document.charset,l="//"+e.multi_widgets_recs_url+"?cb="+e.cb+"&pubid="+e.publisher_id+"&webid="+e.website_id+"&mwids="+e.multi_widget_ids+"&recsnum="+e.num_of_slides+"&url="+n+"&cs="+d+"&subid="+e.subid+"&title="+o+"&kwrds="+a+"&rndid="+e.random_id+ipidKeyValue;e.append_script_to_head(l,e.random_id)},ENG.prototype.inner_run=function(t){var e=t||this;if(e.load_stories_files(),window[e.cb]=function(t){if(t&&t.recs.length>0){for(var e=null,i=!1,s=0;s<_ENG_WIDGETS.length;s++)if(void 0!==t.rndid&&_ENG_WIDGETS[s].random_id==t.rndid){e=_ENG_WIDGETS[s],t.widget.id=_ENG_WIDGETS[s].widget_id,i=!0;break}if(!i){for(var s=0;s<_ENG_WIDGETS.length;s++)if(_ENG_WIDGETS[s].widget_id==t.widget.id){e=_ENG_WIDGETS[s],i=!0;break}}if(e){e.data_json=t,e.widget_id=t.widget.id;var r={widget:t.widget.additionalData||"{}",network:t.widget.anad||"{}"};e.populate_add_data(r),e.populate_widget_data(t),e.reposition_widget(),e.build_layout(),e.add_player_wmode(),e.attach_widget_events(),e.run_posts_preview(),e.run_widget_alignments(),e.widget_ready()}}},e.widget_wrapper_elm=document.getElementById(e.widget_wrapper_elm_id),!e.widget_wrapper_elm){if(e.find_wrapper_elm_retries>0){e.find_wrapper_elm_retries--,window.setTimeout(function(){e.inner_run(e)},50);return}console.log("INFO: Couldn't find element "+e.widget_wrapper_elm_id);return}e.create_placement(),e.is_widget_wrapper_dom_ready=!0;var i=e.get_page_url(),s=e.get_lang(),r=e.get_page_ttl(),n=e.get_meta_content("keywords","content"),o=document.characterSet?document.characterSet:document.charset,a="",d="";e.set_urls_for_pp(),!e.is_multi_widgets&&(1==e.is_index_page?(e.is_premium()&&(e.recs_url=e.recs_url_premium),a="//"+e.recs_url+"?cb="+e.cb+"&pubid="+e.publisher_id+"&webid="+e.website_id+"&wid="+e.widget_id+"&recsnum="+e.num_of_slides+"&url="+i+"&cs="+o+"&subid="+e.subid+"&title="+r+"&kwrds="+n+"&rndid="+e.random_id+ipidKeyValue,d="//"+e.pp_recs_url+"?cb=temp123&pubid="+e.publisher_id+"&webid="+e.website_id+"&wid="+e.widget_id+"&recsnum="+e.num_of_slides+"&url="+i+"&cs="+o+"&subid="+e.subid+"&title="+r+"&kwrds="+n+"&rndid="+e.random_id+ipidKeyValue):a="//"+e.feed_url+"?cb="+e.cb+"&format=json&action=paid&url="+i+"&count="+e.num_of_slides+"&min_count="+e.min_slides+"&is_xpath=0&lang="+s+"&cs="+o+"&pid="+e.pid+"&subid="+e.subid+"&title="+r+"&kwrds="+n,e.append_script_to_head(a,e.random_id),e.is_do_pp_recs_call&&d&&(window.temp123=function(){},e.append_script_to_head(d,"temp_"+e.random_id))),_ENG_WIDGETS.push(e)},ENG.prototype.load_stories_files=function(){this.load_stories_css_files(),this.load_stories_js_files()},ENG.prototype.load_stories_css_files=function(){for(var t=0;t<this.stories_css_files.length;t++)this.append_link_to_head(this.stories_css_path+this.stories_css_files[t],"","text/css","stylesheet",!0)},ENG.prototype.load_stories_js_files=function(t){if(!window.__eng_story_loaded){window.__eng_story_loaded=!0,void 0===t&&(t=0);var e=this;if(this.stories_js_files[t]){console.log("LOADING JS FILE: "+this.stories_js_files[t]);var i=storiyaStagingEnv&&!isNaN(storiyaStagingEnv)?this.staging_stories_js_file_path.replace(this.staging_env_replace_key,storiyaStagingEnv.toString()):this.stories_js_path+this.stories_js_files[t];this.get_script(i,function(i,s,r){t++,e.load_stories_js_files(t)})}else"undefined"!=typeof initStories&&(this.is_stories_js_loaded=!0)}},ENG.prototype.set_urls_for_pp=function(){this.in_array(this.website_id,this.pp_recs_website_ids)&&(this.recs_url=this.recs_url.replace("recs","recs2"),this.event_url=this.event_url.replace("recs","recs2"))},ENG.prototype.load_real_imps_events=function(){var t=this.data_json.widget;if(t&&(1!=this.is_index_page||t.isRealImpressions)){var e,i=(e=this,function(){var t=e.is_elm_visible(e.widget_wrapper_elm);if(t&&!e.is_amp_widget){if(e.is_real_imps_called)return;e.is_real_imps_called=!0,1==e.is_index_page?e.fire_widget_real_impression_event(e):e.fire_real_impression_pixels()}return t});window.addEventListener?(addEventListener("DOMContentLoaded",i,!1),addEventListener("load",i,!1),addEventListener("scroll",i,!1),addEventListener("resize",i,!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",i),attachEvent("onload",i),attachEvent("onscroll",i),attachEvent("onresize",i))}},ENG.prototype.fire_widget_real_impression_event=function(t){t.fire_real_impression_pixels();let e=document.createElement("img");e.src=t.data_json.viewPxl;try{document.getElementsByTagName("head")[0].appendChild(e)}catch(i){console.log("ERROR - real imps:",i)}},ENG.prototype.run_srail=function(){this.is_run_ext_video_started||this.run_ext_video()},ENG.prototype.guid=function(){return function(){function t(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}()},ENG.prototype.get_srail_precall_url=function(){var t=this.jq(window).width(),e=this.jq(window).height(),i=this.generate_random_number(),s=window.location.host,r=this.guid();return"https://api.vidiom.net/player/"+this.ext_video_options.apiKey+"/"+this.ext_video_options.playerId+"?aw="+t+"&ah="+e+"&rand="+i+"&page_url="+this.get_page_url()+"&subid=&ddomain="+s+"&domain="+s+"&sid="+r+"&player_ver=bx_1055&sr_format=js"},ENG.prototype.run_criteo=function(){if(this.get_add_data("criteo")){var t=document.createElement("script");t.type="text/javascript",t.src="//widget."+this.operator_name+".com/pos_crt_loader.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}},ENG.prototype.run_posts_preview=function(){try{var t=document.referrer,e=[];if(__eng__ppids_brnd="",t&&-1!=t.indexOf("_eng_ppids")){var i=this.getQS(t);i&&i._eng_ppids&&(e=i._eng_ppids.split(","),__eng__ppids_brnd=i._eng_dname)}if(!e||0==e.length){var s=this.get_cookie("_eng_ppids");s&&(e=s.split(","));var r=this.get_cookie("_eng_dname");r&&(__eng__ppids_brnd=r)}e&&e.length>0&&this.get_posts_for_preview(e)}catch(n){}},ENG.prototype.run_ext_video=function(t,e,i){this.is_run_ext_video_started=!0;var s=this;if(e=void 0===e?"":e,-1==(i=void 0===i?-1:i)&&this.data_json.widget&&this.data_json.widget.esaData&&(this.data_json.widget.esaData[this.externalAdditionalDataTypes.STREAM_RAIL]?(i=this.externalAdditionalDataTypes.STREAM_RAIL,e=this.data_json.widget.esaData[this.externalAdditionalDataTypes.STREAM_RAIL]):this.data_json.widget.esaData[this.externalAdditionalDataTypes.ANY_VIEW]&&(i=this.externalAdditionalDataTypes.ANY_VIEW,e=this.data_json.widget.esaData[this.externalAdditionalDataTypes.ANY_VIEW])),e&&-1!=i){if(this.is_enough_space_for_ext_video())try{this.set_ext_video_final_player_dims();try{n=JSON.parse(e)}catch(r){console.log("ERROR:"),console.log(r);return}if(this.ext_video_options=n,!this.is_load_ext_video())return;this.ext_video_player_type=i;var n,o=this.get_srail_precall_url();console.log(o),this.jq.get(o,function(t){t&&t.ads&&t.ads.schedule&&t.ads.schedule.length>0&&t.ads.schedule[0].server&&t.ads.schedule[0].server.tag&&t.ads.schedule[0].server.tag.v?s.is_ext_video_loaded||(s.is_ext_video_loaded=!0,s.load_srail_video()):console.log("NO VIDEO ADS")})}catch(a){console.log("ERROR:"),console.log(a)}else{if(void 0===t&&(t=20),t<0)return;window.setTimeout(function(){s.run_ext_video(--t,e,i)},100);return}}},ENG.prototype.load_srail_video=function(){var t=this.jq(this.widget_wrapper_elm);this.ext_video_elm=this.generate_ext_video_elm(),t.length>0&&this.ext_video_elm&&(this.jq(t).append(this.ext_video_elm),this.build_video_ads_stories(),this.ext_video_player_type==this.externalAdditionalDataTypes.STREAM_RAIL?this.run_streamrail_video(this.ext_video_options):this.ext_video_player_type==this.externalAdditionalDataTypes.ANY_VIEW&&this.run_aniview_video(this.ext_video_options))},ENG.prototype.run_aniview_video=function(t){this.populate_aniview_placeholders(t),this.run_aniview_ads(t)},ENG.prototype.run_streamrail_video=function(t){this.populate_srail_placeholders(t),this.run_streamrail_ads(t)},ENG.prototype.get_srail_video_ad_duration=function(){return this.srPlayer&&this.srPlayer.adDuration&&!Number.isNaN(this.srPlayer.adDuration)&&this.srPlayer.adDuration>0?Math.ceil(this.srPlayer.adDuration):null},ENG.prototype.is_load_ext_video=function(){if(this.ext_video_options&&this.ext_video_options.pacingRatio){var t;if(Math.random()>1*this.ext_video_options.pacingRatio)return!1}return!this.is_widget_ext_video_already_loaded()},ENG.prototype.is_widget_ext_video_already_loaded=function(){for(var t=0;t<_ENG_WIDGETS.length;t++)if(_ENG_WIDGETS[t].widget_id==this.widget_id&&_ENG_WIDGETS[t].is_ext_video_loaded)return!0},ENG.prototype.populate_aniview_placeholders=function(t){var e=this.jq("#"+this.get_ext_video_elm_id());t.height=e.height(),t.width=e.width(),t.position=this.get_ext_video_elm_id()},ENG.prototype.populate_srail_placeholders=function(t){if(t&&t.macros)try{var e=this.jq("#"+this.get_ext_video_elm_id());t.macros.rand&&999==t.macros.rand&&(t.macros.rand=this.generate_random_number());var i=JSON.stringify(t.macros);i=(i=(i=(i=(i=(i=i.replace(this.place_holders.WIDTH,e.width())).replace(this.place_holders.HEIGHT,e.height())).replace(this.place_holders.DNT,document.location.hostname)).replace(this.place_holders.SUB_ID,this.widget_id)).replace(this.place_holders.PAGE_URL,this.get_page_url())).replace(this.place_holders.CACHE_BUSTER,this.generate_random_number()),t.macros=JSON.parse(i)}catch(s){console.log("ERROR:"),console.log(s)}},ENG.prototype.populate_place_holders=function(t){return -1!=t.indexOf(this.place_holders.PAGE_URL)&&(t=t.replace(this.place_holders.PAGE_URL,this.get_page_url())),-1!=t.indexOf(this.place_holders.DNT)&&(t=t.replace(this.place_holders.DNT,document.location.hostname)),-1!=t.indexOf(this.place_holders.CACHE_BUSTER)&&(t=t.replace(this.place_holders.CACHE_BUSTER,this.generate_random_number())),-1!=t.indexOf(this.place_holders.PAGE_TITLE)&&(t=t.replace(this.place_holders.PAGE_TITLE,this.get_page_ttl())),t},ENG.prototype.is_enough_space_for_ext_video=function(){return!0},ENG.prototype.set_ext_video_dims=function(){var t=this.jq(this.widget_wrapper_elm);if(t&&t.length>0){var e=t.find(".eng_asw,.eng_m_asw");e&&e.length>0&&(this.ext_video_dims.height=e.height(),this.ext_video_dims.width=e.width(),console.log("DIMS- Height: "+this.ext_video_dims.height+", Width: "+this.ext_video_dims.width))}},ENG.prototype.set_ext_video_final_player_dims=function(){this.ext_video_dims={width:this.jq(window).width(),height:this.jq(window).height()},console.log(this.ext_video_dims)},ENG.prototype.get_ext_video_elm_id=function(){return"eng_"+this.extVideoTypeNames[this.ext_video_player_type]+"_"+this.widget_id},ENG.prototype.get_ext_video_wrapper_elm_id=function(){return"eng_w_"+this.extVideoTypeNames[this.ext_video_player_type]+"_"+this.widget_id},ENG.prototype.run_aniview_ads=function(t){if(_ENG_is_av_started_loading){this.wait_for_aniview_init(t,20);return}_ENG_is_av_started_loading=!0;var e,i,s,r,n=this;e=t,(new Image).src="https://track.aniview.com/track?pid="+e.publisherId+"&cid="+e.channelId+"&e=playerLoaded&cb="+Date.now(),i="https://player.aniview.com/script/6.1/aniview.js",(r=document.createElement("script")).src=i,r.onload=function(){n.init_aniview_player(e)},document.getElementsByTagName("head")[0].appendChild(r)},ENG.prototype.run_streamrail_ads=function(t){if(this.is_sr_blade=t&&t.playerId,_ENG_is_sr_started_loading){this.wait_for_srail_init(t,20);return}this.get_ext_video_elm_id();var e,i,s,r,n="script",o="streamrail-jssdk";_ENG_is_sr_started_loading=!0,window.srAsyncInit=function(){},e=document,i=this.is_sr_blade?"https://sdk.streamrail.com/blade/sr.bladex.js":"https://sdk.streamrail.com/player/sr.ads.js",r=e.getElementsByTagName(n)[0],!e.getElementById(o)&&((s=e.createElement(n)).id=o,s.src=i,r.parentNode.insertBefore(s,r))},ENG.prototype.wait_for_aniview_init=function(t,e){if(console.log("retries: "+e),!(e<0)){var i=this;"undefined"==typeof avPlayer?window.setTimeout(function(){i.wait_for_aniview_init(t,--e)},100):i.init_aniview_player(t)}},ENG.prototype.wait_for_srail_init=function(t,e){if(console.log("retries: "+e),!(e<0)){var i=this;"undefined"==typeof SR&&window.setTimeout(function(){i.wait_for_srail_init(t,--e)},100)}},ENG.prototype.init_aniview_player=function(t){this.AVPlayer=new avPlayer(t),this.subscribe_avplayer_events(),this.AVPlayer.play()},ENG.prototype.init_srail_player=function(t){var e=this.get_ext_video_elm_id();if(this.is_sr_blade){var i=this;SR(e,this.ext_video_options).then(function(t){i.srPlayer=t,t.resize(i.ext_video_dims.width,i.ext_video_dims.height),i.subscribe_srplayer_events()})}else this.srPlayer=SR(e,t),this.subscribe_srplayer_events()},ENG.prototype.subscribe_avplayer_events=function(){this.AVPlayer&&(this.attach_aniview_visibility_events(),this.attach_aniview_mouse_over_event(),this.attach_aniview_mouse_out_event())},ENG.prototype.attach_aniview_visibility_events=function(){this.AVPlayer;var t=this;this.AVPlayer.onPlay=function(e){t.animate_show_ext_video_player()},this.AVPlayer.onPlay100=this.AVPlayer.onClose=function(e){t.animate_hide_ext_video_player()}},ENG.prototype.subscribe_srplayer_events=function(){this.srPlayer&&(this.attach_srail_visibility_events(),this.attach_srail_mouse_over_event(),this.attach_srail_mouse_out_event())},ENG.prototype.attach_srail_visibility_events=function(){var t=this.srPlayer,e=this;this.ext_video_options,["viewable"].map(function(e){t.on(e,function(e){console.log("VIEWABLE"),t.resize()})}),["nonviewable"].map(function(e){t.on(e,function(e){console.log("NONE-VIEWABLE"),t.pause()})}),["playerReady"].map(function(e){t.on(e,function(e){console.log("PLAYER READY, HAS ADS: "+t.hasAds)})}),["AdBreakpoint"].map(function(i){t.on(i,function(i){console.log("Event AdBreakpoint"),t.hasAds&&(t.resize(),e.storiesWidget.updateVideoData(t,i))})}),["AdImpression"].map(function(e){t.on(e,function(t){console.log("Event AdImpression")})}),["AdVideoComplete"].map(function(i){t.on(i,function(t){console.log("Event AdVideoComplete"),e.video_ad_completed=!0})}),["AdPaused"].map(function(e){t.on(e,function(t){console.log("Event AdPaused")})}),["AdPlaying"].map(function(e){t.on(e,function(t){console.log("Event AdPlaying")})}),["AdVolumeChange"].map(function(e){t.on(e,function(t){})}),["stick"].map(function(e){t.on(e,function(t){})}),["unstick"].map(function(e){t.on(e,function(t){})})},ENG.prototype.play_srail_video=function(){!this.srPlayer||this.srPlayer.disposed||this.video_ad_completed||this.srPlayer.play()},ENG.prototype.pause_srail_video=function(){this.srPlayer&&!this.srPlayer.disposed&&this.srPlayer.pause()},ENG.prototype.stop_srail_video_ad=function(){this.srPlayer&&!this.srPlayer.disposed&&this.srPlayer.stopAd()},ENG.prototype.dispose_srail_player=function(){this.srPlayer&&(this.video_ad_completed=null,this.srPlayer.dispose())},ENG.prototype.attach_aniview_mouse_over_event=function(){var t=this,e=this.ext_video_options;this.jq("#"+this.get_ext_video_elm_id()).mouseover(function(){e&&e.unmuteOnHover&&t.AVPlayer.unmute()})},ENG.prototype.attach_srail_mouse_over_event=function(){var t=this,e=this.ext_video_options;this.jq("#"+this.get_ext_video_elm_id()).mouseover(function(){e&&e.unmuteOnHover&&(t.is_sr_blade?t.srPlayer.muted=!1:(t.srPlayer.muted(!1),t.srPlayer.volume(1)))})},ENG.prototype.attach_aniview_mouse_out_event=function(){var t=this,e=this.ext_video_options;this.jq("#"+this.get_ext_video_elm_id()).mouseout(function(){!t.AVPlayer.muted&&e.unmuteOnHover&&t.AVPlayer.mute()})},ENG.prototype.attach_srail_mouse_out_event=function(){var t=this,e=this.ext_video_options;this.jq("#"+this.get_ext_video_elm_id()).mouseout(function(){e.unmuteOnHover&&(!t.is_sr_blade||t.srPlayer.muted)&&(t.is_sr_blade||t.srPlayer.muted())})},ENG.prototype.animate_show_ext_video_player=function(){var t=this.jq("#"+this.get_ext_video_elm_id()),e=this.jq("#"+this.get_ext_video_wrapper_elm_id());t.css("z-index",0),e.css("border-bottom","1px solid #ccc"),e.css("paddingTop","10px"),e.css("paddingBottom","10px"),t.animate({marginTop:"0px",opacity:1},1e3)},ENG.prototype.animate_hide_ext_video_player=function(){var t=this.jq("#"+this.get_ext_video_elm_id()),e=this.jq("#"+this.get_ext_video_wrapper_elm_id());t.animate({marginTop:"-"+this.ext_video_dims.height+"px",opacity:0},500,function(){e.hide()})},ENG.prototype.generate_ext_video_elm=function(){var t=this.extVideoTypeNames[this.ext_video_player_type],e=document.createElement("div"),i="eng_"+t+"_"+this.widget_id;e.id=i,e.className="eng_"+t;var s=document.createElement("style");s.type="text/css";var r="#"+i+"{width:100%;height:100%;}";s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r));var n=document.createElement("div");return n.id="eng_w_"+t+"_"+this.widget_id,n.className="eng_w_"+t,n.appendChild(e),n.appendChild(s),n},ENG.prototype.run_widget_alignments=function(){this.align_widget_text_height(),this.align_widget_dims()},ENG.prototype.align_widget_text_height=function(){if(this.is_align_widget_text_height){var t=-1,e=this.jq(this.widget_wrapper_elm).find(".eng_inner .eng_widget_in,.eng_ads .eng_widget_in"),i=this;this.jq.each(e,function(e,s){i.jq(s).height()&&(t=Math.max(i.jq(s).height(),t))}),t>0&&this.jq(this.widget_wrapper_elm).find(".eng_inner .eng_widget_in,.eng_ads .eng_widget_in").css("min-height",t)}},ENG.prototype.align_widget_dims=function(t){try{if(void 0===t&&(t=this.num_of_align_dims_retries),t<0)return;for(var e=!0,i=0;i<this.visible_posts_and_types.length;i++){var s=this.visible_posts_and_types[i];if(s&&s.pi&&this.in_array(s.pi,this.align_dims_post_ids)){e=!0;break}}if(e){var r=-1,n=this.jq(this.widget_wrapper_elm).find(".eng_inner .eng_widget_img,.eng_inner .eng_m_widget_img"),o=this;n.length>0?r=this.jq(n[0]).height():(n=this.jq(this.widget_wrapper_elm).find(".eng_widget_img,.eng_m_widget_img"),this.jq.each(n,function(t,e){300>o.jq(e).height()&&(r=Math.max(o.jq(e).height(),r))})),r>50?(n=this.jq(this.widget_wrapper_elm).find(".eng_widget_img,.eng_m_widget_img"),this.jq.each(n,function(t,e){var i=o.jq(e);i.height()!=r&&i.height(r)})):window.setTimeout(function(){o.align_widget_dims(--t)},100)}}catch(a){console.log("ERROR - widget align dims:"),console.log(a)}},ENG.prototype.get_posts_for_preview=function(t){var e=this.shuffle_array(t);if(this.total_slides){window[this.get_post_cb]=function(t){var e=_ENG_WIDGETS[0],i=e.jq(".eng_widget_href:not(.eng_test_ppid),.eng_m_widget_href:not(.eng_test_ppid)");if(i&&i.length>0){var s=e.jq(i[0]),r=s.find(".eng_widget_img, eng_m_widget_img"),n=s.find(".eng_widget_in,.eng_m_widget_in"),o=s.find(".eng_m_widget_in"),a=s.find(".eng_widget_is,.eng_m_widget_is"),d=s.find(".eng_widget_dn,.eng_m_widget_dn"),l=r.attr("src").match(".*_([0-9]*)..*");if(l&&l[1]){var p=l[1];s.attr("href",t.url),s.attr("onmousedown",""),a.text(t.title);var h=t.thumbnailPath.replace(/(.*_)([0-9]*)(\..*)/,"$1"+p+"$3");r.attr("src",h),s.addClass("eng_test_ppid");var g=decodeURIComponent(__eng__ppids_brnd);if(d&&d.length>0)d.text(g);else{var c=o&&o.length>0?"eng_m_widget_dn":"eng_widget_dn";n.append('<span class="'+c+'">'+g+"</span>")}}}console.log(t)};for(var i=Math.min(e.length,this.total_slides),s=0;s<i;s++){var r=e[s];this.append_script_to_head("//"+this.eng_api_pref+"."+this.operator_name+".com/rec-api/getPost.json?cb="+this.get_post_cb+"&PostId="+r,"")}}},ENG.prototype.shuffle_array=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),s=t[e];t[e]=t[i],t[i]=s}return t},ENG.prototype.get_cookie=function(t){var e,i=document.cookie.match(RegExp("(?:^|;\\s*)"+(e=t).replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")+"=([^;]*)"));return i?i[1]:null},ENG.prototype.get_slide_elm_by_idx=function(t){return document.getElementById("eng_sw_"+t+"_"+this.widget_id)||document.getElementById("eng_m_sw_"+t+"_"+this.widget_id)},ENG.prototype.widget_ready=function(){this.widget_ready_cb&&this.widget_ready_cb(),this.amp_widget_cb&&this.amp_widget_cb(this)},ENG.prototype.isShouldBeRTL=function(t){try{if(-1!=t.indexOf("&#")&&(t=this.decode_html(t)),!t.match(/[\u0590-\u083F]|[\u08A0-\u08FF]|[\uFB1D-\uFDFF]|[\uFE70-\uFEFF]/mg))return!1}catch(e){console.log("ERROR: text direction - "+t)}return!0},ENG.prototype.decode_html=function(t){try{return this.jq("<textarea/>").html(t).text()}catch(e){return t}},ENG.prototype.external_is_amp_elm_visible=function(t){try{return t.height>100}catch(e){return!1}},ENG.prototype.is_elm_visible=function(t){var e=t.getBoundingClientRect();try{return e.bottom>100&&e.right>0&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.top<(window.innerHeight||document.documentElement.clientHeight)-100}catch(i){return!1}},ENG.prototype.is_premium=function(){try{var t=this.publisher_id,e=this.premium_pub_ids;if(t&&this.in_array(t,e))return!0;return!1}catch(i){return!1}},ENG.prototype.populate_widget_data=function(t){try{var e=t.widget,i=e.layoutTypeId;this.widget_img_size=26==i?4:2,this.vertical_widget_img_size=null;var s=this.get_add_data("jsvls");s&&s.vcis&&this.is_mobile_conditions_satisfied()&&(this.vertical_widget_img_size=s.vcis),this.is_order_by_post_id&&this.sort_results_by_post_id(),3==e.returnRecsTypeId&&(this.is_super_native=!0)}catch(r){console.log("ERROR - widget data:"),console.log(r)}},ENG.prototype.sort_results_by_post_id=function(){var t=this.data_json.srcWebsiteId,e=this.jq.extend({},this.data_json.recs),i=[];for(var s in e)e[s].partner_id==t&&i.push(e[s]);i.sort(function(t,e){return e.postId-t.postId});for(var r=0;r<this.data_json.recs.length;r++)this.data_json.recs[r].partner_id==t&&i[r]&&(this.data_json.recs[r]=i[r])},ENG.prototype.reposition_widget=function(){if(this.widget_wrapper_positioning_obj){var t=this.widget_wrapper_positioning_obj.elm,e=this.widget_wrapper_positioning_obj.type;if(this.jq(t).length>0){var i=this.jq(this.widget_wrapper_elm).detach();switch(e){case 0:default:i.appendTo(t);break;case 1:i.prependTo(t);break;case 2:i.insertAfter(t);break;case 3:i.insertBefore(t)}this.width=null,this.calculate_widget_wrapper_dims()}}},ENG.prototype.populate_add_data=function(t){try{var e=JSON.parse(t.widget.replace(/\[rid\]/g,this.random_id)),i=JSON.parse(t.network.replace(/\[rid\]/g,this.random_id));!e.brnd&&i&&i.brnd&&(e.brnd=i.brnd),this.widget_add_data=e;var s=this.widget_add_data.jcss||{},r=this.widget_add_data.jsvls||{},n=this.widget_add_data.gtags,o=this.widget_add_data.yndx;this.is_show_exclude_box=r.issexbox||!1,this.slide_height=s.sh||(this.is_video_widget?150:115),this.slide_width=s.sw||(this.is_video_widget?200:140),this.slide_horz_margin=s.shm||10,this.widget_lpadding=s.wlp||(this.is_video_widget?15:0),this.widget_rpadding=s.wrp||(this.is_video_widget?15:0),this.widget_rmargin=s.wrm||(this.is_video_widget?2:0),this.widget_lmargin=s.wlm||(this.is_video_widget?2:0),this.slides_wrapper_lpadding=s.swlp||0,this.slides_wrapper_rpadding=s.swrp||0,this.slides_wrapper_lmargin=s.swlm||0,this.slides_wrapper_rmargin=s.swrm||0,this.slide_bpadding=s.sbp||(this.is_video_widget?15:5),this.slide_tpadding=s.stp||(this.is_video_widget?15:5),this.widget_txt_direction=s.wtdir||null,this.widget_img_size=r.cis||2,this.num_of_slides_a_row=r.spr||(this.is_video_widget?3:null),this.num_of_mobile_slides_a_row=r.mspr||(this.is_video_widget?3:null),this.is_cancel_click_bubble=r.iccb||!1,this.max_width_for_mobile=r.mwfm||420,this.is_vertical_mobile_widget=void 0===r.ivmw||0!=r.ivmw,this.is_force_vertical_layout=r.ifvl||!1,this.num_of_mobile_slides=r.noms||6,this.is_default_brand=!this.website_id||this.website_id<127432?r.isdb:void 0===r.isdb||0!=r.isdb,this.title_elm_type=r.ttlelm?r.ttlelm:"div",this.width=r.rplcwidth&&r.rplcwidthval&&r.rplcwidth==Math.floor(this.width)?r.rplcwidthval:this.width,this.widget_wrapper_positioning_obj=r.wwpo?r.wwpo:null,this.max_width_for_tablet_cls=r.mwftc||null,this.image_size_for_rec_num=r.cisfrm||null,this.is_order_by_post_id=r.iobpi||null,this.custom_default_image=r.cdi||null,this.is_description_span=r.idesc||null,this.is_links_open_new_window=r.inw||null,this.max_description_chars=r.mdc||1e3,this.max_mobile_description_chars=r.mmdc||1e3,this.max_abstract_chars=r.mabsc||500,this.max_mobile_abstract_chars=r.mmabsc||500,this.max_title_chars=r.mtc||100,this.max_mobile_title_chars=r.mmtc||150,this.postfix_for_cutted_description=null!=r.pfcd?r.pfcd:"...",this.postfix_for_cutted_title=null!=r.pfct?r.pfct:"...",this.postfix_for_cutted_abstract=null!=r.pfcabs?r.pfcabs:"...",this.is_meta_tags_span=r.imtag||null,this.is_default_images=!r.idi,this.is_align_widget_text_height=void 0!==r.iawth&&r.iawth,this.google_tags=n,this.yandex_tag=o,this.is_cover_image=void 0===r.icimg||r.icimg,this.stickiness_policy=void 0!==r.stknsplcy?r.stknsplcy:null,this.text_lines_limit=r.txtlmt?r.txtlmt:4}catch(a){console.log("ERROR - additional data:"),console.log(a)}},ENG.prototype.get_add_data=function(t){return this.widget_add_data&&this.widget_add_data[t]?this.widget_add_data[t]:null},ENG.prototype.set_add_data=function(t,e){this.widget_add_data[t]=e},ENG.prototype.add_player_wmode=function(){},ENG.prototype.get_page_url=function(){if(this.input_url)return this.input_url;var t=document.location.href;return this.is_in_iframe()&&(t=document.referrer?document.referrer:t),t=encodeURIComponent(t)},ENG.prototype.get_total_slides=function(t,e){for(var i=this.num_of_slides_a_row*t;i>e&&t>1;)t--,i=this.num_of_slides_a_row*t;return this.is_mobile_conditions_satisfied()&&(i=this.num_of_mobile_slides?this.num_of_mobile_slides:i),i=i>e?e:i},ENG.prototype.get_script=function(t,e){this.jq.ajax({type:"GET",url:t,success:e,scriptCharset:"utf-8",dataType:"script",cache:!0})},ENG.prototype.logger=function(t,e){this.log_printout&&(this.log_printout==this.log_types.ALL||this.in_array(t,this.log_printout))&&console.log(t+": "+e)},ENG.prototype.generate_img_pixel=function(t){var e=document.createElement("img");e.width=1,e.height=1,e.src=t,this.widget_wrapper_elm.appendChild(e)},ENG.prototype.is_mobile_conditions_satisfied=function(){return!!(!this.is_video_widget&&this.is_mobile())&&!!(this.width<this.max_width_for_mobile)},ENG.prototype.build_layout=function(){this.start_stories_widget_new()},ENG.prototype.start_stories_widget_new=function(){var t=this;if("undefined"!=typeof initStories){this.storiesWidget=initStories({data:this.data_json,mountTarget:this.widget_wrapper_elm_id});return}"undefined"==typeof retries&&(retries=this.load_stories_js_num_of_retries),!(retries<0)&&window.setTimeout(function(){console.log("Retrying load stories JS "+retries),t.start_stories_widget_new(--retries)},100)},ENG.prototype.attach_widget_header=function(){var t="You might also enjoy"==this.data_json.widget.headerText?"Stories":this.data_json.widget.headerText,e="<"+this.title_elm_type+' class="eng_s_ww_title" id="eng_s_ww_title_'+this.random_id+'"><span class="eng_s_ww_ttl_span1">'+t+'</span><span class="eng_s_ww_ttl_span2"></span></'+this.title_elm_type+">";this.jq(this.widget_wrapper_elm).prepend(e)},ENG.prototype.start_stories_widget=function(t){var e=this;if(this.is_stories_js_loaded){this.storiesWidget=new Zuck(this.get_recs_holder_elm().attr("id"),this.stories_widget_data,this),this.run_srail();return}void 0===t&&(t=this.load_stories_js_num_of_retries),!(t<0)&&window.setTimeout(function(){console.log("Retrying load stories JS "+t),e.start_stories_widget(--t)},100)},ENG.prototype.build_stories_css=function(){var t=this.get_recs_holder_elm(),e=this.get_default_css("STORY",this.widget_wrapper_elm_id),i=this.get_add_data("css")||"";t.append("<style>"+e+i+"</style>")},ENG.prototype.build_stories_widget_data=function(){this.stories_widget_data={backNative:!0,previousTap:!0,autoFullScreen:this.stories_skin.autoFullScreen,skin:this.stories_skin.name,avatars:this.stories_skin.avatars,list:this.stories_skin.list,cubeEffect:this.stories_skin.cubeEffect,localStorage:!0,isCoverImage:this.is_cover_image,stickinessPolicy:this.stickiness_policy,textLinesLimit:this.text_lines_limit,stories:this.stories}},ENG.prototype.build_stories_skin=function(){this.stories_skin={name:"Snapgram",avatars:!0,list:!1,autoFullScreen:!1,cubeEffect:!0}},ENG.prototype.build_stories=function(){for(var t=this.data_json.recs,e=0;e<t.length;e++){var i=this.build_story(t[e]);this.stories.push(i)}},ENG.prototype.build_video_ads_stories=function(){for(var t in this.video_ads_tiles)try{for(var e=!1,i=this.video_ads_tiles[t];!e&&i<this.stories.length-1;){var s=this.stories[i-1],r=this.stories[i];r&&"eng_story_ads"==r.recType||s&&"eng_story_ads"==s.recType?i++:(console.log("FOUND AVAILABLE IDX FOR STORY VIDEO AD AT IDX: "+i),e=!0,this.generate_and_push_video_ad_story(i))}}catch(n){console.log(n)}},ENG.prototype.generate_and_push_video_example_story=function(t){var e={id:123,photo:"",name:"",link:"",recType:"eng_story_inner",lastUpdated:new Date().getTime()/1e3,isNewWindow:!1,engType:""},i=[{id:"123",type:"video",length:10,src:"http://techslides.com/demos/sample-videos/small.mp4",time:new Date().getTime()/1e3,seen:!1}];e.items=i,this.stories.splice(t,0,e),this.storiesWidget.add(e,!0,t)},ENG.prototype.generate_and_push_video_ad_story=function(t){var e={id:"videoAdStory",photo:"",name:"",link:"",recType:"eng_story_ads",lastUpdated:new Date().getTime()/1e3,isNewWindow:!0,engType:"video_ad"},i=[{id:"videoAdItem",type:"videoAd",length:10,time:new Date().getTime()/1e3,seen:!1,openLinkInIframe:!0}];e.items=i,this.stories.splice(t,0,e),this.storiesWidget.add(e,!0,t)},ENG.prototype.build_story=function(t){var e={id:t.postId,photo:t.thumbnail_path,name:t.title,link:"",recType:this.get_story_rec_type(t),lastUpdated:null!=t.idt?t.idt/1e3:new Date().getTime()/1e3,isNewWindow:!(this.data_json.srcWebsiteId==t.partner_id||this.is_preset_rec(t))};return e.items=this.get_story_items(t),this.add_rec_level_pixels_to_story(e,t),e},ENG.prototype.add_rec_level_pixels_to_story=function(t,e){if(t&&t.items&&t.items[0]){var i=t.items[0];if(i){var s=this.get_rec_level_pixels(e);i.clickPixels=i.clickPixels.concat(s.clickPixels),i.impressionPixels=i.impressionPixels.concat(s.impressionPixels),i.impressionPixelsJS=i.impressionPixelsJS.concat(s.impressionPixelsJS)}}},ENG.prototype.get_story_items=function(t){return this.generate_story_items(t)},ENG.prototype.generate_story_items=function(t){var e=[];if(t.storyItems&&t.storyItems.length>0)for(var i in t.storyItems)e.push(this.generate_story_item(t,t.storyItems[i]));else e.push(this.generate_story_item_for_none_story_rec(t));return e.sort(function(t,e){return t.time-e.time}),e},ENG.prototype.generate_story_item=function(t,e){var i=e[this.story_item_params.ID],s=this.get_story_item_type(e[this.story_item_params.TYPE_ID]),r=e[this.story_item_params.LENGTH],n=e[this.story_item_params.IMAGE_SOURCE],o=e[this.story_item_params.PREVIEW],a=e[this.story_item_params.LINK],d=t.clickUrl,l=e[this.story_item_params.LINK_TEXT],p=e[this.story_item_params.TIME],h=e[this.story_item_params.ADDITIONAL_DATA];try{var g=h?JSON.parse(h):null}catch(c){console.log("ERROR:"),console.log(c)}return{id:i,type:s,length:r,src:n,preview:o,link:a,clickUrl:d,linkText:l,time:null!=p?p/1e3:new Date().getTime()/1e3,seen:!1,displayName:this.get_display_name(t),actionText:g&&g.actionText?g.actionText:"",clickPixels:g&&g.clickPixels?g.clickPixels:[],impressionPixels:g&&g.impressionPixels?g.impressionPixels:[],impressionPixelsJS:g&&g.impressionPixelsJS?g.impressionPixelsJS:[],isOpenInFrame:!!g&&!!g.isOpenInFrame&&g.isOpenInFrame}},ENG.prototype.generate_story_item_for_none_story_rec=function(t){return{id:t.postId+"_1",type:"photo",length:8,src:t.thumbnail_path,preview:"",link:t.url,clickUrl:t.clickUrl,linkText:t.title,time:null!=t.idt?t.idt/1e3:new Date().getTime()/1e3,actionText:"",clickPixels:[],impressionPixels:[],impressionPixelsJS:[],seen:!1,displayName:this.get_display_name(t)}},ENG.prototype.get_story_item_type=function(t){return this.story_item_types_map[t]},ENG.prototype.get_exclude_posts_box_elms=function(t){if(!this.is_show_exclude_box&&!(1==this.data_json.ltid&&"eng_inner"==this.get_rec_type(t)))return"";var e,i='<div class="eng_excludebox_wrapper" data-id="'+t.postId+'"><div class="eng_excludebox_title">Remove</div><div class="eng_excludebox_question_main"><div class="eng_excludebox_question"><div class="eng_excludebox_question_title">Tell us why?</div>';return i+=this.get_exclude_reasons_elms(),i+="</div></div></div>"},ENG.prototype.get_exclude_reasons_elms=function(){for(var t="",e=0;e<this.exclude_posts_reasons_arr.length;e++){var i=this.exclude_posts_reasons_arr[e];t+='<label><input type="radio" name="excludeReason" class="eng_exclude_reason" value="'+i.val+'" onchange="this.checked = true;">'+i.title+"</label>",t+=e+1<this.exclude_posts_reasons_arr.length?"<br>":""}return t},ENG.prototype.get_default_css=function(t,e){var i="",s=this.get_add_data("vpost"),r=s&&s.pimg?s.pimg:"//"+this.default_video_post_btn;switch(t){case"DESKTOP":i="#"+e+" .eng_top_ww_widget{}#"+e+" .eng_ww_widget{display:inline-block;direction:"+this.widget_txt_direction+";position:relative;margin-bottom:2px;margin-left:"+this.widget_lmargin+"px;margin-right:"+this.widget_rmargin+"px;text-align:center;padding-left:"+this.widget_lpadding+"px;padding-right:"+this.widget_rpadding+"px;padding-top:"+this.slide_tpadding+"px;padding-bottom:"+this.slide_bpadding+"px;}#"+e+" .eng_ww_title{text-align:"+this.widget_direction+";}#"+e+" .eng_ww_close{position:absolute;top:8px;"+this.widget_op_direction+":8px;cursor:pointer;font-size:22px;}#"+e+" .eng_asw{display:block;margin-left:"+this.slides_wrapper_lmargin+"px;margin-right:"+this.slides_wrapper_rmargin+"px;padding-left:"+this.slides_wrapper_lpadding+"px;padding-right:"+this.slides_wrapper_rpadding+"px;z-index:2;}#"+e+" .eng_widget_sw{width:"+this.slide_width+"px;text-align:"+this.widget_direction+";position:relative;display:inline-block;margin-"+this.widget_direction+":"+this.slide_horz_margin+"px;z-index:2;}#"+e+" .eng_widget_in{width:100%;}#"+e+" .eng_widget_is{}#"+e+" .eng_widget_dn{font-size:10px;text-decoration:none !important;display:inline-block;width:100%;}#"+e+" .eng_widget_img{width:100%;height:auto;border-radius:inherit;margin-bottom:5px;}#"+e+" .eng_widget_href{border-radius:inherit;}#"+e+" .eng_rows_seperator{height:10px;}#"+e+" .eng_branding{text-align:"+this.widget_op_direction+";margin:8px 0px 0px 0px;}#"+e+" .eng_branding a{color:#BBB;font-size:12px;font-family:arial;}#"+e+" .eng_user_exclude_btn{display:none;}#"+e+" .eng_widget_sw:hover .eng_user_exclude_btn{display:block;background:url(//widget."+this.operator_name+".com/img/X4.jpg) no-repeat scroll 0 0 transparent;width:14px;height:14px;position:absolute;right:2px;top:2px;z-index:9000;}#"+e+" .eng_excludebox_question_main{background:#fff!important;font-family:Arial, Helvetica, sans-serif!important;font-weight:normal!important;font-size:12px!important;color:#000000!important;padding-bottom:5px!important;padding-top:5px!important;padding-right:7px!important;padding-left:12px!important;}#"+e+" .eng_excludebox_title{text-align:center;padding:8px 14px!important;font-weight:bold!important;border-bottom:1px solid #F8A649!important;font-family:Arial, Helvetica, sans-serif;font-size:12px!important;background:#F8A649!important;color:#fff!important;}#"+e+" .eng_excludebox_question_title{font-family:Arial, Helvetica, sans-serif!important;font-weight:normal!important;font-size:12px!important;color:#000000!important;margin-bottom:5px!important;}#"+e+" .eng_excludebox_question{font-family:Arial, Helvetica, sans-serif!important;font-weight:normal!important;font-size:12px!important;color:#000000!important;}#"+e+" .eng_excludebox_wrapper{z-index:1;display:none;background:#fff;position:absolute;top:15px;right:5px;height:160px;width:135px;}#"+e+" .eng_exclude_reason{vertical-align:top;}#"+e+" .eng_user_undo_btn{background:none!important;color:#000!important;font-family:Arial,Helvetica,sans-serif!important;font-size:10px!important;line-height:14px!important;font-weight:400!important;text-decoration:underline!important;position:absolute!important;right:15px!important;top:1px!important;}#"+e+" .eng_aniview,#"+e+" .eng_srail{position:relative;bottom:0px;left:0;right:0;opacity:0;z-index:-1;box-sizing:content-box;margin-left:auto;margin-right:auto;}#"+e+" .eng_w_aniview,#"+e+" .eng_w_srail{display:none;border-color:#ccc;box-sizing: content-box;}";break;case"DESKTOP_NON_VIDEO":i="#"+e+" .eng_ww_widget{color:#000;}#"+e+" .eng_widget_sw{vertical-align:top;margin-bottom:10px}#"+e+" .eng_widget_vsw .eng_widget_img_w::after{content:'';background-image: url("+r+");position:absolute;left:40%;top:42%;width:35px;height:26px;z-index:2;}#"+e+" .eng_widget_href{position:relative;display:block !important;visibility:visible !important;}#"+e+" .eng_widget_in{width:100%;line-height:1.4;}#"+e+" .eng_widget_dn{color:#CDCDCD;}#"+e+" .eng_ww_title{padding:0px;margin:0px 0px 5px 0px;}#"+e+" .eng_ww_ttl_span1{display:block;padding:5px 0px;float:none !important;}#"+e+" .eng_widget_img_w{position:relative;}#"+e+" .eng_widget_img{margin-bottom:5px;display:block;}";break;case"DESKTOP_VIDEO":i="#"+e+" .eng_ww_widget{background-color:rgba(1, 1, 1, 0.9);color:#FFF;}#"+e+" .eng_widget_in{position:absolute;background-color:rgba(36,36,36,0.8);color:#FFF;font-size:12px;line-height:normal !important;bottom:0px;}#"+e+" .eng_widget_sw{height:"+this.slide_height+"px;}#"+e+" .eng_widget_dn{}#"+e+" .eng_widget_is{display:block;padding: 2px 5px 2px 5px;}#"+e+" .eng_ww_title{padding:0px 0px 5px 0px;font-size:15px;}";break;case"MOBILE_VERTICAL":i="#"+e+" .eng_m_top_ww_widget{}#"+e+" .eng_m_ww_widget{display:inline-block;direction:"+this.widget_txt_direction+";position:relative;margin-bottom:2px;margin-left:"+this.widget_lmargin+"px;margin-right:"+this.widget_rmargin+"px;text-align:center;padding-left:"+this.widget_lpadding+"px;padding-right:"+this.widget_rpadding+"px;padding-top:"+this.slide_tpadding+"px;padding-bottom:"+this.slide_bpadding+"px;}#"+e+" .eng_m_ww_title{padding:0px 0px 5px 0px;text-align:"+this.widget_direction+";}#"+e+" .eng_m_asw{position:relative;display:block;margin-left:"+this.slides_wrapper_lmargin+"px;margin-right:"+this.slides_wrapper_rmargin+"px;padding-left:"+this.slides_wrapper_lpadding+"px;padding-right:"+this.slides_wrapper_rpadding+"px;z-index:2;}#"+e+" .eng_m_widget_sw{width:100%;padding-bottom:8px;z-index:2;}#"+e+" .eng_m_widget_vsw .eng_m_widget_img_w::after{content:'';background-image: url("+r+");position:absolute;"+this.widget_direction+":37%;top:42%;width:35px;height:26px;z-index:2;}#"+e+" .eng_m_widget_in{width:57%;display:inline-block;vertical-align:top;text-align:"+this.widget_direction+";}#"+e+" .eng_m_widget_is{line-height:1.4;}#"+e+" .eng_m_widget_dn{font-size:10px;padding:5px 5px 3px 0px;color:#999999;display:block;}#"+e+" .eng_m_widget_img_w{width:40%;margin-"+this.widget_op_direction+":3%;display:inline-block;position:relative;}#"+e+" .eng_m_widget_img{width:100%;}#"+e+" .eng_m_ww_ttl_span1{display:block;padding:5px 0px;float:none !important;}#"+e+" .eng_m_widget_href{border-radius:inherit;display:block !important;visibility:visible !important;}#"+e+" .eng_m_rows_seperator{height:8px;}#"+e+" .eng_m_branding{text-align:"+this.widget_op_direction+";margin:8px 0px 0px 0px;}#"+e+" .eng_aniview,#"+e+" .eng_srail{position:relative;bottom:0px;left:0;right:0;opacity:0;z-index:-1;box-sizing:content-box;margin-left:auto;margin-right:auto;}#"+e+" .eng_w_aniview,#"+e+" .eng_w_srail{border-color:#ccc;box-sizing: content-box;}#"+e+" .eng_m_branding a{color:#BBB;font-size:12px;font-family:arial;}";break;case"VIDEO_ONLY":i="#"+this.widget_wrapper_elm_id+"{visibility:hidden;}#"+e+" .eng_ww_widget{margin:0;padding:0;}#"+e+" .eng_widget_sw{margin:0px;}#"+e+" .eng_widget_in{display:none;}#"+e+" .eng_ww_close{padding:0px 7px;z-index:11111;background:#000;"+this.widget_op_direction+":0px;top:initial;color:#FFF;}#"+e+" .eng_ww_title{display:none;}";break;case"STORY":i="#"+e+" .eng_story_ads{display:none;}.stories.carousel .story>a>.info {text-overflow:unset}#"+e+" .eng_w_srail{border-color:#ccc;box-sizing: content-box;}#"+e+" .eng_srail{position:relative;bottom:0px;left:0;right:0;box-sizing:content-box;margin-left:auto;margin-right:auto;}#"+e+" .eng_s_ww_title{padding:5px 0px 0px 0px;text-align:"+this.widget_direction+";}#"+e+" .eng_s_ww_ttl_span1{display: block;padding: 0px 15px;float: none !important;font-weight: bold;font-size: 15px;font-family: sans-serif;}"}return i},ENG.prototype.get_description=function(t){if(t){var e,i=t.description;if(this.is_super_native){if(!t.sNPData||!t.sNPData.desc)return;i=t.sNPData.desc}try{e=this.is_mobile_conditions_satisfied()?this.max_mobile_description_chars:this.max_description_chars,i&&i.length>e&&(i=i.replace("...",""),i=this.shorten_string(i,e),i+=this.postfix_for_cutted_description)}catch(s){console.log("ERROR"),console.log(s)}return i}},ENG.prototype.get_abstract=function(t){if(t){var e,i="";if(this.is_super_native){if(!t.sNPData||!t.sNPData.abs)return;i=t.sNPData.abs;try{e=this.is_mobile_conditions_satisfied()?this.max_mobile_abstract_chars:this.max_abstract_chars,i&&i.length>e&&(i=i.replace("...",""),i=this.shorten_string(i,e),i+=this.postfix_for_cutted_abstract)}catch(s){console.log("ERROR"),console.log(s)}}return i}},ENG.prototype.get_ad_brand=function(t){if(!t)return"";var e="";if(this.is_super_native){var i="";try{if(t.sNPData&&t.sNPData.adbrnd&&(i=t.sNPData.adbrnd),!i)return"";var s=!1;i.href&&(s=!0,e+='<a id="eng_href_adbrnd_'+this.widget_id+'" class="eng_href_adbrnd" href="'+i.href+'" title="'+i.ttl+'" target=_blank">'),e+='<span id="eng_span_adbrnd_'+this.widget_id+'" class="eng_span_adbrnd">'+i.ttl,i.img&&(e+='<img src="'+i.img+'"/>'),e+="</span>",s&&(e+="</a>")}catch(r){console.log("ERROR"),console.log(r)}}return e},ENG.prototype.get_title=function(t){if(t){var e,i=t.title;try{e=this.is_mobile_conditions_satisfied()?this.max_mobile_title_chars:this.max_title_chars,i&&i.length>e&&(i=this.shorten_string(i,e),i+=this.postfix_for_cutted_title)}catch(s){console.log("ERROR"),console.log(s)}return i}},ENG.prototype.shorten_string=function(t,e){var i=(t=(t=t.substring(0,e)).trim()).lastIndexOf(" "),s=(t=t.substring(0,i)).charAt(t.length-1);return(","==s||"."==s||"-"==s||"|"==s)&&(t=t.substring(0,t.length-1).trim()),t},ENG.prototype.get_meta_tag_obj=function(t){if(t){var e={label:"",id:""};try{t.metatagLabels&&t.metatags&&(e.label=t.metatagLabels[0]||"",e.id=t.metatags.split(",")[0]||"",e.label=e.label.replace(/\^/g," "))}catch(i){console.log("ERROR"),console.log(i)}return e}},ENG.prototype.get_click_defs=function(t,e){var i=this.get_href_target(t.partner_id,e),s=this.get_cancle_click_bubble(),r='onclick="'+s+'"',n=!!t.ajx,o="",a=t.clickUrl,d=this.array_to_csv(this.ad_click_pixels);this.ad_click_pixels=[];var l=this.get_rec_type(t)==this.rec_types[1]?"":'rel="nofollow" ';if(n)window.ajx_sprk_click=function(t){},o+=i+" "+l+'href="'+t.url+'" '+r+' title="'+t.title+'" onmousedown="_eng_do_async_click(\''+a+"');_eng_fire_async_pixels('"+d+"');"+s+'return true;">';else{if(this.is_in_iframe()){var p=this.get_page_url();p&&(a=a+"&cr="+(p=encodeURIComponent(decodeURIComponent(p))))}o+=i+" "+l+'href="'+t.url+'" '+r+' title="'+t.title+'" onmousedown="_eng_fire_async_pixels(\''+d+"');this.href='"+a+"';"+s+'return true;">'}return o},ENG.prototype.array_to_csv=function(t){for(var e="",i=0;i<t.length;i++)e+=t[i],i!=t.length-1&&(e+=",");return e},ENG.prototype.get_rec_type=function(t){return"eng_"+t.recType.split("_")[1].toLowerCase()},ENG.prototype.get_story_rec_type=function(t){return"eng_story_"+t.recType.split("_")[1].toLowerCase()},ENG.prototype.is_video_post=function(t){var e=!1,i=this.get_add_data("vpost");return i&&i.drgx&&(e=null!=t.url.match(i.drgx)),e},ENG.prototype.get_rec_level_pixels=function(t){var e={impressionPixels:[],clickPixels:[],impressionPixelsJS:[]};if(!t.impressionUrls||0==t.impressionUrls.length)return e;var i=t.impressionUrls;if(i&&null!=i&&i.length>0)for(var s=0;s<i.length;s++)for(var r=i[s].split("^"),n=0;n<r.length;n++){var o=r[n];if(-1!=o.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_RIMP_JS)){var a=o.replace(this.pixels_consts.ENG_PIXEL_TRACK_RIMP_JS,"");e.impressionPixelsJS.push(a)}else if(-1!=o.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_CLK)){var a=o.replace(this.pixels_consts.ENG_PIXEL_TRACK_CLK,"");e.clickPixels.push(a)}else if(-1!=o.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_RIMP)){var a=o.replace(this.pixels_consts.ENG_PIXEL_TRACK_RIMP,"");e.impressionPixels.push(a)}else if(-1!=o.indexOf(this.pixels_consts.ENG_PIXEL_TRACK_IMP_JS)){var a=o.replace(this.pixels_consts.ENG_PIXEL_TRACK_IMP_JS,"");e.impressionPixelsJS.push(a)}else{var a=o.replace(this.pixels_consts.ENG_PIXEL_TRACK_IMP,"");e.impressionPixels.push(a)}}return e},ENG.prototype.get_display_name=function(t){var e="",i=1*t.recTypeDB;return this.in_array(i,[2,3,4,8,18,19,20,21,30,31,32])&&(e=this.shorten(t.displayName,20)),e},ENG.prototype.is_preset_rec=function(t){return!!t&&1*t.recTypeDB==24},ENG.prototype.get_link_name=function(t){var e="";return this.is_super_native&&t.sNPData&&t.sNPData.lnkTtl&&(e=t.sNPData.lnkTtl),e},ENG.prototype.populate_widget_directions=function(){this.widget_txt_direction=this.widget_txt_direction||this.get_recs_holder_elm().css("direction");var t="rtl"==this.widget_txt_direction;this.widget_direction=t?"right":"left",this.widget_op_direction=t?"left":"right"},ENG.prototype.get_cancle_click_bubble=function(){return this.is_cancel_click_bubble?"event&&event.cancelBubble&&(event.cancelBubble=true);event&&event.stopPropagation&&(event.stopPropagation());":""},ENG.prototype.get_recs_holder_elm=function(){return this.jq("#eng_recs_holder_"+this.random_id)},ENG.prototype.align_widget_elements=function(){this.align_widget_title()},ENG.prototype.get_widget_branding=function(){var t=null;if(this.get_add_data("jsvls"),(t=this.is_default_brand?{href:"//www."+this.operator_name+".com",name:this.operator_name,ttl:this.operator_name,img:""}:this.get_add_data("brnd")||{href:"",name:"",ttl:"",img:"",adds:""}).adds||(t.adds=""),t.img){var e=t.img;t.img='<img id="eng_brnd_img_'+this.widget_id+'" class="eng_brnd_img" src="'+e.src+'" width="'+e.width+'px" height="'+e.height+'px"/>'}return t},ENG.prototype.is_mobile=function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}},ENG.prototype.get_tablet_cls=function(){var t="";return this.is_tablet_conditions_satisfied()&&(t=" eng_tablet"),t},ENG.prototype.is_tablet_conditions_satisfied=function(){return!!this.is_mobile()&&!this.is_mobile_conditions_satisfied()&&!!this.max_width_for_tablet_cls&&!!(this.max_width_for_tablet_cls>=this.width)},ENG.prototype.get_mobile_device_OS=function(){var t="";if(this.is_mobile())return navigator.userAgent.match(/Android/i)?"android":navigator.userAgent.match(/iPhone|iPad|iPod/i)?"ios":"other"},ENG.prototype.align_widget_title=function(){},ENG.prototype.get_thumb=function(t,e,i,s){var r,n=this.widget_img_size,o=4,a=3;if(this.vertical_widget_img_size&&(n=this.vertical_widget_img_size,o=17),this.image_size_for_rec_num){if(o=17,this.image_size_for_rec_num.phone&&this.is_mobile_conditions_satisfied())for(var d=0;d<this.image_size_for_rec_num.phone.length;d++)this.image_size_for_rec_num.phone[d][0]==s&&(n=this.image_size_for_rec_num.phone[d][1]);else if(this.image_size_for_rec_num.tablet&&this.is_tablet_conditions_satisfied())for(var d=0;d<this.image_size_for_rec_num.tablet.length;d++)this.image_size_for_rec_num.tablet[d][0]==s&&(n=this.image_size_for_rec_num.tablet[d][1]);else if(this.image_size_for_rec_num.desktop)for(var d=0;d<this.image_size_for_rec_num.desktop.length;d++)this.image_size_for_rec_num.desktop[d][0]==s&&(n=this.image_size_for_rec_num.desktop[d][1])}if(e){for(var d=1;d<=o;d++)if(d!=n&&-1!=(r=e.lastIndexOf("_"+d+"."))){d>=10&&(a=4),e=e.substr(0,r)+"_"+n+"."+e.substr(r+a);break}}return e},ENG.prototype.shorten=function(t,e){if(!t)return"";var i=t.length,s=t.indexOf(" ",e);return -1==s?i<=e?t:t.substring(0,e)+"...":((sS=t.substring(0,s)).length<i&&(sS+="..."),sS)},ENG.prototype.click=function(t,e,i){return t.href=e,!0},ENG.prototype.get_href_target=function(t,e){var i="";return t!=e||this.is_links_open_new_window?i='target="_blank"':this.is_in_iframe()&&(i='target="_parent"'),i},ENG.prototype.is_in_iframe=function(){return window.self!==window.top},ENG.prototype.is_start_of_row=function(t,e){return t%e==0},ENG.prototype.add_row_if_required=function(t,e,i){return t%e==0&&t!=i?'<div style="clear: both" class="eng_rows_seperator"></div>':""},ENG.prototype.floor_figure=function(t,e){e||(e=2);var i=Math.pow(10,e);return(parseInt(t*i)/i).toFixed(e)},ENG.prototype.calc_slides_dims=function(){try{var t=this.width-this.widget_lpadding-this.widget_rpadding-this.widget_rmargin-this.widget_lmargin-this.slides_wrapper_lpadding-this.slides_wrapper_rpadding-this.slides_wrapper_lmargin-this.slides_wrapper_rmargin,e=Math.floor(t/this.slide_width),i=Math.floor((t-(e-1)*this.slide_horz_margin)/this.slide_width);this.get_add_data("jsvls"),this.is_mobile_conditions_satisfied()?this.num_of_slides_a_row=this.num_of_mobile_slides_a_row?this.num_of_mobile_slides_a_row:i:this.num_of_slides_a_row=this.num_of_slides_a_row?this.num_of_slides_a_row:i;var s=this.get_add_data("jcss");if(0==this.num_of_slides_a_row&&t>99&&(this.slide_width=t,this.num_of_slides_a_row=1),!this.is_video_widget&&this.num_of_slides_a_row>1&&(!s||!s.sw)){var r=(t-this.num_of_slides_a_row*this.slide_width-this.slide_horz_margin*(this.num_of_slides_a_row-1))/this.num_of_slides_a_row+this.slide_width;this.slide_width=this.floor_figure(r,2)}}catch(n){this.num_of_slides_a_row=1,console.log("ERROR"),console.log(n)}},ENG.prototype.populate_required_fields=function(){this.calculate_widget_wrapper_dims()},ENG.prototype.calculate_widget_wrapper_dims=function(){var t=1==this.is_video_widget?document.getElementById(this.plr_elm_id):this.widget_wrapper_elm,e=t=t||this.widget_wrapper_elm;this.width=this.width?this.width:this.jq(t).width();var i=this.get_exact_width(t);i&&(this.width=i),this.height=this.height?this.height:this.jq(t).height();try{for(;t&&(0===this.height||this.height<100)&&this.jq(t).parent();)t&&(t=this.jq(t).parent().get(0),this.height=this.jq(t).height());for(t=e;t&&(0===this.width||this.width<100)&&this.jq(t).parent()&&(t=this.jq(t).parent().get(0))!==document;)t&&(this.width=this.jq(t).width(),i=this.get_exact_width(t),this.width=i||this.width)}catch(s){console.log("ERROR"),console.log(s)}},ENG.prototype.get_exact_width=function(t){var e=this.jq(t)[0].getBoundingClientRect().width;return e&&Math.abs(e-this.width)>0&&1>Math.abs(e-this.width)?e:null},ENG.prototype.create_placement=function(){this.populate_required_fields();var t=document.createElement("div");t.id="eng_recs_holder_"+this.random_id,t.className="eng_recs_holder",this.widget_wrapper_elm.appendChild(t);var e=document.createElement("style");e.type="text/css";var i=this.is_video_widget?"none":"block",s="#eng_recs_holder_"+this.random_id+" .eng_widget_sw:hover{zoom:1;filter:alpha(opacity=100);opacity:1;-webkit-filter: brightness(120%);filter: brightness(1.2);}#eng_recs_holder_"+this.random_id+" .eng_widget_sw{filter:alpha(opacity=90);opacity:0.9;}#eng_recs_holder_"+this.random_id+"{height:"+(this.height-40)+"px;-webkit-transform-style: preserve-3d;-moz-transform-style: preserve-3d;transform-style: preserve-3d;}#eng_top_ww_widget_"+this.random_id+"{position: relative;top: 50%;transform: translateY(-50%);width: 100%;}",r="";this.is_video_widget&&(this.jq(this.widget_wrapper_elm).parent().css("position","relative"),r+=s,r+=".eng_recs_holder{width: 100%;top:0px;position: absolute;text-align:center;z-index:999999;background-color: rgba(1, 1, 1, 0.6);}#eng_recs_holder_"+this.random_id+"{display:"+i+";}.eng_recs_holder a{text-decoration:none;}"),e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(e)},ENG.prototype.get_page_ttl=function(){var t="",e=document.getElementsByTagName("title");if(e&&e.length>0)try{t=(t=e[0].innerText||e[0].textContent).substring(0,100).substring(0,t.lastIndexOf(" ")),t=encodeURIComponent(t)}catch(i){}return t},ENG.prototype.get_meta_content=function(t,e){for(var i=document.getElementsByTagName("meta"),s="",r=0;r<i.length;r++)if(i[r].getAttribute("property")==t||i[r].getAttribute("name")==t){try{s=(s=i[r].getAttribute(e)).substring(0,200).substring(0,s.lastIndexOf(" ")),s=encodeURIComponent(s)}catch(n){}break}return s},ENG.prototype.get_lang=function(){return window.navigator.userLanguage||window.navigator.language},ENG.prototype.append_script_to_head=function(t,e){var i=document.createElement("script");i.type="text/javascript",i.id=e,i.src=t,i.charset="UTF-8",i.async=!0;var s=document.getElementsByTagName("head")[0];s.parentNode.insertBefore(i,s)},ENG.prototype.append_link_to_head=function(t,e,i,s,r){var n=document.createElement("link");n.type=i,n.id=e,n.href=t,n.rel=s,n.async=r;var o=document.getElementsByTagName("head")[0];o.parentNode.insertBefore(n,o)},ENG.prototype.getQS=function(t){var e=t.replace(/^[^\?]+\??/,""),i={};if(!e)return i;for(var s=e.split(/[;&]/),r=0;r<s.length;r++){for(var n=s[r].replace(/(pid=.*)=.*/,"$1"),o=s[r].length-n.length,a=0;a<o;a++)n+="%3D";var d=n.split(/=(.*)/);if(d&&!(d.length<2)){var l=unescape(d[0]),p=d[1];p=p.replace(/\+/g," "),i[l]=p}}return i},ENG.prototype.inj_init_binding=function(t){if(document.addEventListener)document.addEventListener("DOMContentLoaded",t.doc_ready(t),!1);else if(document.attachEvent){try{var e=null!=window.frameElement}catch(i){}document.documentElement.doScroll&&!e&&function e(){if(!called)try{document.documentElement.doScroll("left"),t.doc_ready(t)}catch(i){setTimeout(e,10)}}(),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t.doc_ready(t)})}},ENG.prototype.in_array=function(t,e){for(var i in e)if(e[i]==t)return!0;return!1};var _eng_do_async_click=function(t){var e=document.createElement("script");e.type="text/javascript",e.src=t,document.getElementsByTagName("head")[0].appendChild(e)},_eng_fire_async_pixels=function(t){if(t)for(var e=t.split(","),i=0;i<e.length;i++){var s=e[i],r=document.createElement("img");r.src=s;try{document.getElementsByTagName("head")[0].appendChild(r)}catch(n){console.log("ERROR - click pixel:"),console.log(n)}}};ENG.prototype.fire_real_impression_pixels=function(){for(var t=0;t<this.ad_real_impression_pixels.length;t++){var e=document.createElement("img");e.src=this.ad_real_impression_pixels[t];try{document.getElementsByTagName("head")[0].appendChild(e)}catch(i){console.log("ERROR - pixel:"),console.log(i)}}this.ad_real_impression_pixels=[],this.fire_real_impression_js_pixels()},ENG.prototype.fire_real_impression_js_pixels=function(){for(var t=0;t<this.ad_real_impression_js_pixels.length;t++)try{this.append_script_to_head(ad_real_impression_js_pixels,"")}catch(e){console.log("ERROR - pixel:"),console.log(e)}this.ad_real_impression_js_pixels=[]},ENG.prototype.posts_exclusion_box_events=function(){var t=this;(this.is_show_exclude_box||1==this.data_json.ltid)&&(this.jq(this.widget_wrapper_elm).find(".eng_exclude_reason").click(function(e){var i=t.jq(this).parents(".eng_widget_sw");i.find(".eng_excludebox_question,.eng_user_exclude_btn").css("display","none");var s=i.find(".eng_excludebox_wrapper");s.css("height","100px"),i.find(".eng_excludebox_question_main").html(t.exclude_posts_box_default_thank_you),s.delay(2500).fadeOut(500,function(){});var r=s.attr("data-id"),n=t.jq(this).val();t.fire_exclude_event(r,n)}),this.jq(this.widget_wrapper_elm).find(".eng_user_exclude_btn").click(function(e){e.preventDefault();var i=t.jq(this).parents(".eng_widget_sw");t.jq(this).hasClass("eng_user_undo_btn")?(t.jq(this).toggleClass("eng_user_undo_btn"),i.find(".eng_excludebox_wrapper").css("display","none"),i.find(".eng_widget_in,.eng_widget_img").css("opacity","1"),t.jq(this).text("")):(t.jq(this).toggleClass("eng_user_undo_btn"),i.find(".eng_excludebox_wrapper").css("display","block"),i.find(".eng_widget_in,.eng_widget_img").css("opacity","0.3"),t.jq(this).text("Undo"))}))},ENG.prototype.fire_exclude_event=function(t,e){if(t&&e){var i=1==this.data_json.ltid?this.exclude_post_adn_url:this.exclude_post_url;this.append_script_to_head("//"+i+"?pid="+t+"&rsnid="+e)}},function(){var t=function(e,i){switch(e){case"createStoryWidget":new ENG(i).run();break;case"createStoryMultiWidgets":i.mwids.split(",").forEach(e=>{var s={wwei:i.wweprfx+e,pubid:i.pubid,webid:i.webid,wid:parseInt(e)};i.on&&(s.on=i.on),t("createStoryWidget",s)});return}},e=window.EngStoryObject;for(var i in window[e].l,window[e].q){var s,r=window[e].q[i];t(r[0],r[1])}window[e]=t}();
